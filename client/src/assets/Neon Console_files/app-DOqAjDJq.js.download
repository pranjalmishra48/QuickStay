const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-C7egFT2Y.js","assets/_baseAssignValue-DZN0ujvP.js","assets/DrizzleStudio-D3Pd6C75.js","assets/QueryResultTable-DdioCeyV.js","assets/index-CJzal4C6.js","assets/types-Dw8ZZdXF.js","assets/index-BQX5su4A.css","assets/index-DLCw2L55.js","assets/index-gMqi3Yez.css","assets/routes-Dpsvc-Sd.js","assets/routes-DWxUyW99.css","assets/PageHeader-8AGjHsTz.js","assets/PageHeader-DRy_YF4U.css","assets/QueryResultTable-d5wwgotj.css","assets/app-Q-8dAa8T.js","assets/StatusButton-Dauct97-.js","assets/ReactQueryProvider-DbOk6IjX.js","assets/_overRest-C7Gb1zAi.js","assets/isArrayLikeObject-CMHhgLnL.js","assets/StatusButton-CsHW25PI.css","assets/index-DFZWnCnl.js","assets/CreateProjectFormFields-DoXNf_Vp.js","assets/CreateProjectFormFields-CZqHsWG8.css","assets/metrics-C_wZGgcI.js","assets/memoize-Ctfh73ys.js","assets/metrics-D5NlmHlB.css","assets/identity-urls-DKigCTPl.js","assets/identity-events-X6WNjjei.js","assets/cjs-DzCUT-24.js","assets/DrizzleStudio-Dkn9h_Qr.css","assets/theme-C9i3TLxq.css","assets/index-TsSAesrp.js","assets/Section-0OU1CDoA.js","assets/Section-D22ZRM2-.css","assets/index-B4_vQ_Y-.css"])))=>i.map(i=>d[i]);
var qE=Object.defineProperty;var HE=(t,s,n)=>s in t?qE(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var hv=(t,s,n)=>HE(t,typeof s!="symbol"?s+"":s,n);import{i as Wc,b as J1,a as VE,c as Eb,d as WE,e as Z1,f as GE,g as KE,h as X1,t as eC,r as QE,U as pv,j as tC,k as sC,l as nC,m as rC,n as mi,o as E_,p as YE,S as JE,q as ZE,s as XE,u as mv,v as fg,w as eO,x as Ob,y as tO,z as aC,A as sO,$ as nO,B as $b,C as rO,D as aO,E as oO,F as iO,G as Lb,H as cO,I as lO,J as dO,K as B,L as z,M as Ie,T,N as Pu,O as te,P as Ge,Q as oC,R as iC,V as uO,W as jm,X as cC,Y as lC,Z as Rb,_ as hO,a0 as pO,a1 as dC,a2 as mO,a3 as uC,a4 as fr,a5 as Dc,a6 as Z,a7 as on,a8 as gO,a9 as fO,aa as _O,ab as cn,ac as Tu,ad as O_,ae as $_,af as bO,ag as be,ah as xO,ai as jO,aj as bt,ak as Ct,al as ie,am as pr,an as ke,ao as P,ap as R,aq as vm,ar as ge,as as Bs,at as $e,au as Mb,av as gi,aw as es,ax as E,ay as Ce,az as ws,aA as ln,aB as G,aC as Au,aD as vO,aE as ft,aF as yO,aG as he,aH as Xe,aI as hC,aJ as Nu,aK as wO,aL as Ss,aM as Bb,aN as U,aO as Db,aP as yi,aQ as Te,aR as qs,aS as Ue,aT as rt,aU as SO,aV as pC,aW as X,aX as Mn,aY as F,aZ as so,a_ as Ub,a$ as na,b0 as ra,b1 as Ba,b2 as dn,b3 as CO,b4 as mC,b5 as re,b6 as Rt,b7 as it,b8 as Je,b9 as kO,ba as Ye,bb as Y,bc as Rn,bd as Ya,be as uu,bf as ym,bg as wm,bh as Jt,bi as qt,bj as no,bk as ro,bl as ps,bm as De,bn as Pe,bo as ct,bp as Sm,bq as oe,br as gC,bs as kt,bt as Zt,bu as IO,bv as PO,bw as Ds,bx as _t,by as TO,bz as Fb,bA as AO,bB as Xt,bC as NO,bD as fC,bE as Oc,bF as EO,bG as _C,bH as bC,bI as us,bJ as xC,bK as OO,bL as jC,bM as $O,bN as LO,bO as RO,bP as gv,bQ as MO,bR as _r,bS as He,bT as mt,bU as Gc,bV as BO,bW as DO,bX as _g,bY as lr,bZ as L_,b_ as fv,b$ as bg,c0 as Fr,c1 as UO,c2 as FO,c3 as zO,c4 as vC,c5 as qO,c6 as HO,c7 as yC,c8 as Cm,c9 as It,ca as wC,cb as C,cc as Hd,cd as et,ce as ut,cf as VO,cg as WO,ch as GO,ci as SC,cj as il,ck as KO,cl as QO,cm as YO,cn as JO,co as CC,cp as zb,cq as Yt,cr as Q,cs as wi,ct as ZO,cu as Eu,cv as aa,cw as fi,cx as XO,cy as e$,cz as t$,cA as s$,cB as Fn,cC as kC,cD as Wa,cE as n$,cF as r$,cG as nn,cH as Hp,cI as Ae,cJ as Ou,cK as a$,cL as ao,cM as o$,cN as qb,cO as ve,cP as dr,cQ as oo,cR as IC,cS as i$,cT as c$,cU as de,cV as ms,cW as Ja,cX as l$,cY as Si,cZ as d$,c_ as Ci,c$ as u$,d0 as Hb,d1 as fe,d2 as cl,d3 as Vb,d4 as PC,d5 as Un,d6 as R_,d7 as ki,d8 as Bn,d9 as hu,da as Wb,db as h$,dc as p$,dd as Gb,de as m$,df as g$,dg as f$,dh as _$,di as TC,dj as b$,dk as Us,dl as Kb,dm as AC,dn as Qb,dp as x$,dq as Yb,dr as NC,ds as EC,dt as OC,du as $C,dv as ll,dw as j$,dx as dl,dy as km,dz as v$,dA as y$,dB as LC,dC as ii,dD as $u,dE as mr,dF as w$,dG as RC,dH as MC,dI as Jr,dJ as S$,dK as Zr,dL as BC,dM as ur,dN as Lu,dO as _v,dP as bv,dQ as Hs,dR as C$,dS as br,dT as DC,dU as UC,dV as FC,dW as k$,dX as Im,dY as xt,dZ as Ii,d_ as xv,d$ as I$,e0 as P$,e1 as un,e2 as ul,e3 as Ru,e4 as Mu,e5 as at,e6 as _e,e7 as T$,e8 as A$,e9 as N$,ea as E$,eb as O$,ec as $$,ed as rs,ee as zC,ef as Ms,eg as qC,eh as Jb,ei as Za,ej as HC,ek as kc,el as VC,em as WC,en as wt,eo as ye,ep as Zb,eq as L$,er as hl,es as Xb,et as jv,eu as R$,ev as GC,ew as Ve,ex as pl,ey as ci,ez as rh,eA as Pm,eB as Tm,eC as M$,eD as B$,eE as ex,eF as Ga,eG as D$,eH as vv,eI as Xa,eJ as U$,eK as Xr,eL as Bu,eM as tx,eN as sx,eO as Vp,eP as F$,eQ as jr,eR as z$,eS as Ze,eT as Be,eU as vr,eV as q$,eW as pu,eX as H$,eY as Tp,eZ as KC,e_ as V$,e$ as QC,f0 as W$,f1 as Wp,f2 as YC,f3 as G$,f4 as Kc,f5 as ah,f6 as Vs,f7 as nx,f8 as Du,f9 as K$,fa as Q$,fb as Y$,fc as J$,fd as Z$,fe as JC,ff as X$,fg as eL,fh as tL,fi as sL,fj as nL,fk as rL,fl as yv,fm as aL,fn as oL,fo as iL,fp as cL,fq as Gp,fr as rx,fs as ZC,ft as lL,fu as mu,fv as XC,fw as Da,fx as e0,fy as wv,fz as dL,fA as gu,fB as t0,fC as Kp,fD as uL,fE as s0,fF as ml,fG as n0,fH as Am,fI as hL,fJ as ax,fK as pL,fL as r0,fM as a0,fN as o0,fO as mL,fP as gL,fQ as fL,fR as _L,fS as bL,fT as xL,fU as i0,fV as jL,fW as c0,fX as l0,fY as d0,fZ as u0,f_ as vL,f$ as yL,g0 as Pi,g1 as h0,g2 as wL,g3 as p0,g4 as m0,g5 as SL,g6 as M_,g7 as CL,g8 as kL,g9 as g0,ga as IL,gb as PL,gc as ox,gd as f0,ge as _0,gf as TL,gg as AL,gh as NL,gi as EL,gj as b0,gk as OL,gl as $L,gm as x0,gn as LL,go as j0,gp as RL,gq as ML,gr as BL,gs as DL,gt as UL,gu as FL,gv as zL,gw as qL,gx as v0,gy as HL,gz as y0,gA as VL,gB as WL,gC as GL,gD as KL,gE as Sv,gF as gn,gG as w0,gH as QL,gI as Cv,gJ as YL,gK as JL,gL as ZL,gM as XL,gN as eR,gO as kv,gP as tR,gQ as sR,gR as nR,gS as rR,gT as aR,gU as oR,gV as iR,gW as cR,gX as lR,gY as dR,gZ as uR,g_ as hR,g$ as pR,h0 as mR,h1 as gR,h2 as fR}from"./index-CJzal4C6.js";import{r as m,R as Oa,j as e,c as V,a as Nm,g as _R,b as bR,d as S0}from"./_baseAssignValue-DZN0ujvP.js";/* empty css              */import{u as gl,a as io,b as xR,P as jR,A as vR}from"./app-Q-8dAa8T.js";import{d as ix,U as lt,B as Dn,a as yR,u as Uu,g as wR,b as SR,c as CR,e as kR,f as IR,M as PR,L as cx,h as Em,S as TR,i as AR,j as C0,k as Om,l as yr,A as NR,C as ER,m as OR,n as $R,o as LR,D as RR,p as MR,E as BR,F as DR,q as UR,G as FR,r as B_,s as zR,H as qR,t as HR,v as VR,K as WR,w as GR,N as KR,x as QR,y as YR,O as JR,z as D_,P as ZR,R as XR,I as eM,J as tM,Q as sM,T as nM,V as rM,W as aM,X as oM,Y as k0,Z as iM,_ as co,$ as gr,a0 as li,a1 as cM,a2 as Ua,a3 as eo,a4 as Iv,a5 as $m,a6 as Lm,a7 as Kn,a8 as I0,a9 as P0,aa as lM,ab as $l,ac as Gt,ad as T0,ae as A0,af as N0,ag as dM,ah as Rm,ai as lo,aj as uM,ak as E0,al as hM,am as O0,an as $0,ao as pM,ap as mM,aq as L0,ar as gM,as as fM,at as _M}from"./StatusButton-Dauct97-.js";import{b as bM,a as xM,c as jM,T as as,i as vM,d as yM,M as wM,e as xg,I as SM,f as zn,g as lx,h as fl,F as Mm,E as Bm,j as CM,D as kM,k as IM,l as Pv,m as R0,n as PM,o as TM,t as AM,p as NM,s as EM,q as OM,P as $M,u as hn,r as gt,v as Fa,w as LM}from"./index-DLCw2L55.js";import{t as M0,p as RM,l as B0,u as D0,a as MM,T as Ke}from"./index-DFZWnCnl.js";import{C as dx,u as BM,a as DM,b as UM,c as FM,D as ux,d as hx,e as xr,f as Dm,g as px,h as zM,i as mx,j as gx,U as U0,T as qM,k as HM,A as VM,F as fu,H as rn,l as qn,m as Nt,n as oa,o as ia,p as Fu,P as WM,S as fx,q as Cs,r as F0,s as jg,t as vg,v as Ui,w as U_,x as oh,y as GM,z as z0,X as _x,B as KM,E as QM,L as YM,G as bx,I as JM,J as q0,O as H0,K as Le,M as Ne,N as ZM,Q as XM,R as Qe,V as e2,W as t2,Y as s2,Z as Ti,_ as n2,$ as Vd,a0 as zu,a1 as V0,a2 as Ll,a3 as W0,a4 as F_,a5 as G0,a6 as r2,a7 as a2,a8 as o2,a9 as Ic,aa as Pc,ab as K0,ac as Q0,ad as i2,ae as Y0,af as c2,ag as xx,ah as J0,ai as l2,aj as d2,ak as u2,al as Z0,am as h2,an as jx,ao as p2,ap as m2,aq as ot,ar as Hn,as as Tv,at as g2,au as f2,av as yg,aw as _2}from"./QueryResultTable-DdioCeyV.js";import{b as b2,i as x2}from"./isArrayLikeObject-CMHhgLnL.js";import{u as j2,C as v2,a as X0,b as y2,s as w2,d as S2,c as C2,P as k2,e as I2}from"./CreateProjectFormFields-DoXNf_Vp.js";import{r as z_,u as wr,s as Vn,p as Sr,C as pn,T as Cr,Y as kr,A as ys,L as pt,a as Um,M as Qp,b as _l,g as ek,c as P2}from"./metrics-C_wZGgcI.js";import{B as T2,D as A2,E as N2,I as E2,N as O2,O as $2,P as L2,Z as wg,a as R2,b as M2,c as B2,d as D2,e as U2,f as F2,g as z2,h as q2,i as H2,j as Av,k as V2,l as q_,m as W2,n as G2,o as K2,p as $c,q as Q2,r as Y2,s as J2,t as Z2,u as X2,v as eB,w as tB,x as sB,y as nB,z as rB,A as aB,C as oB,F as iB,G as cB,H as lB,J as dB,K as uB,L as hB,M as pB,Q as mB,R as gB,S as fB,T as _B,U as bB,V as xB,W as jB,X as di,Y as vB,_ as _i,$ as vx,a0 as tk,a1 as Ka,a2 as yB,a3 as wB,a4 as SB,a5 as Nv,a6 as yx,a7 as CB,a8 as kB,a9 as IB,aa as PB,ab as TB,ac as AB,ad as NB,ae as EB,af as OB,ag as $B,ah as LB,ai as Ld,aj as RB,ak as MB,al as BB,am as DB,an as UB,ao as FB,ap as zB,aq as tn,ar as Et,as as qB,at as HB,au as VB,av as WB,aw as GB,ax as KB,ay as QB,az as YB,aA as JB,aB as ZB,aC as XB,aD as eD,aE as Ap,aF as nt,aG as tD,aH as sD,aI as sk,aJ as nk,aK as Np,aL as nD,aM as rD}from"./types-Dw8ZZdXF.js";import{S as Sg,u as rk,G as aD,m as oD}from"./routes-Dpsvc-Sd.js";import{P as bl}from"./PageHeader-8AGjHsTz.js";import{o as ak,I as iD}from"./identity-urls-DKigCTPl.js";import{g as cD,i as lD,c as dD,a as xl}from"./identity-events-X6WNjjei.js";import{r as ok}from"./cjs-DzCUT-24.js";import{R as uD}from"./ReactQueryProvider-DbOk6IjX.js";import"./_overRest-C7Gb1zAi.js";import"./memoize-Ctfh73ys.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"static@885-merge.7ee7a3a"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="21590bbc-b98d-4734-9448-c9e8d239745d",t._sentryDebugIdIdentifier="sentry-dbid-21590bbc-b98d-4734-9448-c9e8d239745d")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a])}return s}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:neon-console":!0})}catch{}})();var Ev=Object.create,hD=function(){function t(){}return function(s){if(!Wc(s))return{};if(Ev)return Ev(s);t.prototype=s;var n=new t;return t.prototype=void 0,n}}();function pD(t,s){var n=-1,r=t.length;for(s||(s=Array(r));++n<r;)s[n]=t[n];return s}function mD(t,s,n,r){var a=!n;n||(n={});for(var o=-1,i=s.length;++o<i;){var c=s[o],l=void 0;l===void 0&&(l=t[c]),a?J1(n,c,l):VE(n,c,l)}return n}function gD(t,s,n){if(!Wc(n))return!1;var r=typeof s;return(r=="number"?Eb(n)&&WE(s,n.length):r=="string"&&s in n)?Z1(n[s],t):!1}function fD(t){return b2(function(s,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(a--,o):void 0,i&&gD(n[0],n[1],i)&&(o=a<3?void 0:o,a=1),s=Object(s);++r<a;){var c=n[r];c&&t(s,c,r,o)}return s})}var _D="[object Object]",bD=Function.prototype,xD=Object.prototype,ik=bD.toString,jD=xD.hasOwnProperty,vD=ik.call(Object);function yD(t){if(!GE(t)||KE(t)!=_D)return!1;var s=X1(t);if(s===null)return!0;var n=jD.call(s,"constructor")&&s.constructor;return typeof n=="function"&&n instanceof n&&ik.call(n)==vD}function wD(t,s,n,r){for(var a=-1,o=t==null?0:t.length;++a<o;)n=s(n,t[a],a,t);return n}function SD(t){return function(s){return t==null?void 0:t[s]}}var CD={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},kD=SD(CD),ID=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,PD="\\u0300-\\u036f",TD="\\ufe20-\\ufe2f",AD="\\u20d0-\\u20ff",ND=PD+TD+AD,ED="["+ND+"]",OD=RegExp(ED,"g");function $D(t){return t=eC(t),t&&t.replace(ID,kD).replace(OD,"")}var LD=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function RD(t){return t.match(LD)||[]}var MD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function BD(t){return MD.test(t)}var ck="\\ud800-\\udfff",DD="\\u0300-\\u036f",UD="\\ufe20-\\ufe2f",FD="\\u20d0-\\u20ff",zD=DD+UD+FD,lk="\\u2700-\\u27bf",dk="a-z\\xdf-\\xf6\\xf8-\\xff",qD="\\xac\\xb1\\xd7\\xf7",HD="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",VD="\\u2000-\\u206f",WD=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uk="A-Z\\xc0-\\xd6\\xd8-\\xde",GD="\\ufe0e\\ufe0f",hk=qD+HD+VD+WD,pk="['’]",Ov="["+hk+"]",KD="["+zD+"]",mk="\\d+",QD="["+lk+"]",gk="["+dk+"]",fk="[^"+ck+hk+mk+lk+dk+uk+"]",YD="\\ud83c[\\udffb-\\udfff]",JD="(?:"+KD+"|"+YD+")",ZD="[^"+ck+"]",_k="(?:\\ud83c[\\udde6-\\uddff]){2}",bk="[\\ud800-\\udbff][\\udc00-\\udfff]",Tc="["+uk+"]",XD="\\u200d",$v="(?:"+gk+"|"+fk+")",eU="(?:"+Tc+"|"+fk+")",Lv="(?:"+pk+"(?:d|ll|m|re|s|t|ve))?",Rv="(?:"+pk+"(?:D|LL|M|RE|S|T|VE))?",xk=JD+"?",jk="["+GD+"]?",tU="(?:"+XD+"(?:"+[ZD,_k,bk].join("|")+")"+jk+xk+")*",sU="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nU="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rU=jk+xk+tU,aU="(?:"+[QD,_k,bk].join("|")+")"+rU,oU=RegExp([Tc+"?"+gk+"+"+Lv+"(?="+[Ov,Tc,"$"].join("|")+")",eU+"+"+Rv+"(?="+[Ov,Tc+$v,"$"].join("|")+")",Tc+"?"+$v+"+"+Lv,Tc+"+"+Rv,nU,sU,mk,aU].join("|"),"g");function iU(t){return t.match(oU)||[]}function cU(t,s,n){return t=eC(t),s=s,s===void 0?BD(t)?iU(t):RD(t):t.match(s)||[]}var lU="['’]",dU=RegExp(lU,"g");function uU(t){return function(s){return wD(cU($D(s).replace(dU,"")),t,"")}}var vk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mv=vk&&typeof module=="object"&&module&&!module.nodeType&&module,hU=Mv&&Mv.exports===vk,Bv=hU?QE.Buffer:void 0;Bv&&Bv.allocUnsafe;function pU(t,s){return t.slice()}function mU(t){var s=new t.constructor(t.byteLength);return new pv(s).set(new pv(t)),s}function gU(t,s){var n=mU(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function fU(t){return typeof t.constructor=="function"&&!tC(t)?hD(X1(t)):{}}function H_(t,s,n){(n!==void 0&&!Z1(t[s],n)||n===void 0&&!(s in t))&&J1(t,s,n)}function V_(t,s){if(!(s==="constructor"&&typeof t[s]=="function")&&s!="__proto__")return t[s]}function _U(t){return mD(t,sC(t))}function bU(t,s,n,r,a,o,i){var c=V_(t,n),l=V_(s,n),d=i.get(l);if(d){H_(t,n,d);return}var u=o?o(c,l,n+"",t,s,i):void 0,p=u===void 0;if(p){var h=mi(l),g=!h&&nC(l),f=!h&&!g&&rC(l);u=l,h||g||f?mi(c)?u=c:x2(c)?u=pD(c):g?(p=!1,u=pU(l)):f?(p=!1,u=gU(l)):u=[]:yD(l)||E_(l)?(u=c,E_(c)?u=_U(c):(!Wc(c)||YE(c))&&(u=fU(l))):p=!1}p&&(i.set(l,u),a(u,l,r,o,i),i.delete(l)),H_(t,n,u)}function yk(t,s,n,r,a){t!==s&&bM(s,function(o,i){if(a||(a=new JE),Wc(o))bU(t,s,i,n,yk,r,a);else{var c=r?r(V_(t,i),o,i+"",t,s,a):void 0;c===void 0&&(c=o),H_(t,i,c)}},sC)}var xU=fD(function(t,s,n,r){yk(t,s,n,r)});function jU(t){return t&&t.length?t[0]:void 0}function vU(t,s){var n=-1,r=Eb(t)?Array(t.length):[];return xM(t,function(a,o,i){r[++n]=s(a,o,i)}),r}var yU="[object Map]",wU="[object Set]",SU=Object.prototype,CU=SU.hasOwnProperty;function kU(t){if(t==null)return!0;if(Eb(t)&&(mi(t)||typeof t=="string"||typeof t.splice=="function"||nC(t)||rC(t)||E_(t)))return!t.length;var s=ZE(t);if(s==yU||s==wU)return!t.size;if(tC(t))return!XE(t).length;for(var n in t)if(CU.call(t,n))return!1;return!0}function IU(t,s){for(var n,r=-1,a=t.length;++r<a;){var o=s(t[r]);o!==void 0&&(n=n===void 0?o:n+o)}return n}function PU(t,s){var n=t.length;for(t.sort(s);n--;)t[n]=t[n].value;return t}function TU(t,s){if(t!==s){var n=t!==void 0,r=t===null,a=t===t,o=mv(t),i=s!==void 0,c=s===null,l=s===s,d=mv(s);if(!c&&!d&&!o&&t>s||o&&i&&l&&!c&&!d||r&&i&&l||!n&&l||!a)return 1;if(!r&&!o&&!d&&t<s||d&&n&&a&&!r&&!o||c&&n&&a||!i&&a||!l)return-1}return 0}function AU(t,s,n){for(var r=-1,a=t.criteria,o=s.criteria,i=a.length,c=n.length;++r<i;){var l=TU(a[r],o[r]);if(l){if(r>=c)return l;var d=n[r];return l*(d=="desc"?-1:1)}}return t.index-s.index}function NU(t,s,n){s.length?s=fg(s,function(o){return mi(o)?function(i){return eO(i,o.length===1?o[0]:o)}:o}):s=[Ob];var r=-1;s=fg(s,tO(aC));var a=vU(t,function(o,i,c){var l=fg(s,function(d){return d(o)});return{criteria:l,index:++r,value:o}});return PU(a,function(o,i){return AU(o,i,n)})}function EU(t,s,n,r){return t==null?[]:(mi(s)||(s=s==null?[]:[s]),n=n,mi(n)||(n=n==null?[]:[n]),NU(t,s,n))}var OU=jM(function(t,s,n){t[n?0:1].push(s)},function(){return[[],[]]}),wk=uU(function(t,s,n){return t+(n?" ":"")+sO(s)});function $U(t,s){return t&&t.length?IU(t,aC(s)):0}var Sk={};Sk={breadcrumbs:"عناصر الواجهة"};var Ck={};Ck={breadcrumbs:"Трохи хляб"};var kk={};kk={breadcrumbs:"Popis cesty"};var Ik={};Ik={breadcrumbs:"Brødkrummer"};var Pk={};Pk={breadcrumbs:"Breadcrumbs"};var Tk={};Tk={breadcrumbs:"Πλοηγήσεις breadcrumb"};var Ak={};Ak={breadcrumbs:"Breadcrumbs"};var Nk={};Nk={breadcrumbs:"Migas de pan"};var Ek={};Ek={breadcrumbs:"Lingiread"};var Ok={};Ok={breadcrumbs:"Navigointilinkit"};var $k={};$k={breadcrumbs:"Chemin de navigation"};var Lk={};Lk={breadcrumbs:"שבילי ניווט"};var Rk={};Rk={breadcrumbs:"Navigacijski putovi"};var Mk={};Mk={breadcrumbs:"Morzsamenü"};var Bk={};Bk={breadcrumbs:"Breadcrumb"};var Dk={};Dk={breadcrumbs:"パンくずリスト"};var Uk={};Uk={breadcrumbs:"탐색 표시"};var Fk={};Fk={breadcrumbs:"Naršymo kelias"};var zk={};zk={breadcrumbs:"Atpakaļceļi"};var qk={};qk={breadcrumbs:"Navigasjonsstier"};var Hk={};Hk={breadcrumbs:"Broodkruimels"};var Vk={};Vk={breadcrumbs:"Struktura nawigacyjna"};var Wk={};Wk={breadcrumbs:"Caminho detalhado"};var Gk={};Gk={breadcrumbs:"Categorias"};var Kk={};Kk={breadcrumbs:"Miez de pâine"};var Qk={};Qk={breadcrumbs:"Навигация"};var Yk={};Yk={breadcrumbs:"Navigačné prvky Breadcrumbs"};var Jk={};Jk={breadcrumbs:"Drobtine"};var Zk={};Zk={breadcrumbs:"Putanje navigacije"};var Xk={};Xk={breadcrumbs:"Sökvägar"};var eI={};eI={breadcrumbs:"İçerik haritaları"};var tI={};tI={breadcrumbs:"Навігаційна стежка"};var sI={};sI={breadcrumbs:"导航栏"};var nI={};nI={breadcrumbs:"導覽列"};var rI={};rI={"ar-AE":Sk,"bg-BG":Ck,"cs-CZ":kk,"da-DK":Ik,"de-DE":Pk,"el-GR":Tk,"en-US":Ak,"es-ES":Nk,"et-EE":Ek,"fi-FI":Ok,"fr-FR":$k,"he-IL":Lk,"hr-HR":Rk,"hu-HU":Mk,"it-IT":Bk,"ja-JP":Dk,"ko-KR":Uk,"lt-LT":Fk,"lv-LV":zk,"nb-NO":qk,"nl-NL":Hk,"pl-PL":Vk,"pt-BR":Wk,"pt-PT":Gk,"ro-RO":Kk,"ru-RU":Qk,"sk-SK":Yk,"sl-SI":Jk,"sr-SP":Zk,"sv-SE":Xk,"tr-TR":eI,"uk-UA":tI,"zh-CN":sI,"zh-TW":nI};function LU(t){return t&&t.__esModule?t.default:t}function RU(t){let{"aria-label":s,...n}=t,r=nO(LU(rI),"@react-aria/breadcrumbs");return{navProps:{...$b(n,{labelable:!0}),"aria-label":s||r.format("breadcrumbs")}}}function MU(t){let s=$b(t,{labelable:!0}),n;return t.orientation==="vertical"&&(n="vertical"),t.elementType!=="hr"?{separatorProps:{...s,role:"separator","aria-orientation":n}}:{separatorProps:s}}const W_=m.createContext(null),BU=m.forwardRef(function(s,n){[s,n]=aO(s,n,W_);let{CollectionRoot:r}=m.useContext(oO),{navProps:a}=RU(s);return Oa.createElement(iO,{content:Oa.createElement(Lb,s)},o=>{var i;return Oa.createElement("ol",{ref:n,...a,slot:s.slot||void 0,style:s.style,className:(i=s.className)!==null&&i!==void 0?i:"react-aria-Breadcrumbs"},Oa.createElement(W_.Provider,{value:s},Oa.createElement(r,{collection:o})))})}),DU=rO("item",function(s,n,r){let a=r.nextKey==null,{isDisabled:o,onAction:i}=cO(W_),c={"aria-current":a?"page":null,isDisabled:o||a,onPress:()=>i==null?void 0:i(r.key)},l=lO({...r.props,children:r.rendered,values:{isDisabled:o||a,isCurrent:a},defaultClassName:"react-aria-Breadcrumb"});return Oa.createElement("li",{...$b(s),...l,ref:n,"data-disabled":o||a||void 0,"data-current":a||void 0},Oa.createElement(dO.Provider,{value:c},l.children))}),aI=()=>e.jsx(B,{width:60,height:20}),UU="_root_12xko_1",FU="_root_s_12xko_12",zU="_root_green_12xko_16",qU="_root_blue_12xko_21",HU="_button_12xko_26",VU="_bannerContainer_12xko_30",Fi={root:UU,root_s:FU,root_green:zU,root_blue:qU,button:HU,bannerContainer:VU},oI=({description:t,appearance:s,icon:n,title:r,actions:a,size:o="m"})=>e.jsxs("div",{className:V(Fi.root,{[Fi.root_green]:s==="green",[Fi.root_blue]:s==="blue",[Fi.root_s]:o==="s"}),children:[n&&e.jsx(z,{name:n,size:16,inheritColor:!0}),r&&e.jsx(Ie,{appearance:"neon",children:r}),e.jsxs("div",{className:Fi.bannerContainer,children:[e.jsx(T,{children:t}),a==null?void 0:a.map(i=>e.jsx(Pu,{onPress:i.onClick,className:Fi.button,children:i.label},i.label))]})]}),WU="_content_r8fgm_1",GU={content:WU},Qc=({content:t,maxWidth:s,...n})=>{const r=m.useRef(null),[a,o]=m.useState(!1);return m.useEffect(()=>{if(r.current){const{scrollWidth:i,offsetWidth:c}=r.current;o(i>c)}},[r]),e.jsx(te,{content:t,disabled:!a,children:e.jsx(T,{ref:r,className:GU.content,style:{maxWidth:s},...n,children:t})})},KU="_link_175om_1",QU={link:KU},YU=({href:t,children:s,onClick:n,ariaLabel:r})=>e.jsx(Ge,{href:t,onClick:n,className:QU.link,"aria-label":r,isDisabled:!1,children:s}),JU="_root_opukf_1",ZU="_button_opukf_7",XU="_buttonLabel_opukf_26",e4="_popover_opukf_33",t4="_searchInput_opukf_53",s4="_menu_opukf_69",n4="_section_opukf_76",r4="_menuItem_opukf_93",a4="_label_opukf_126",o4="_check_opukf_132",or={root:JU,button:ZU,buttonLabel:XU,popover:e4,searchInput:t4,menu:s4,section:n4,menuItem:r4,label:a4,check:o4},i4="_link_1hank_1",c4={link:i4},l4=({href:t,children:s,onClick:n,ariaLabel:r})=>e.jsx(Ge,{href:t,onClick:n,className:c4.link,"aria-label":r,isDisabled:!1,children:s});function Wd(t){return"items"in t?`section-${t.title}`:`item-${t.href}-${t.label}`}const iI=t=>!t.hidden&&e.jsx(mO,{id:Wd(t),className:or.menuItem,href:t.href,textValue:t.label,isDisabled:t.disabled,onAction:t.onClick,children:({isSelected:s})=>e.jsxs(e.Fragment,{children:[t.icon&&e.jsx(z,{name:t.icon,size:16}),e.jsx(uC,{slot:"label",className:or.label,children:t.label}),t.suffix,s&&e.jsx(z,{className:or.check,name:"check",size:20})]})}),d4=({title:t,showBetaBadge:s,items:n})=>n.length===0?null:e.jsxs(pO,{className:or.section,children:[e.jsxs(dC,{children:[t,s&&e.jsx(Ie,{appearance:"experimental",margin:"left",children:"beta"})]}),e.jsx(Lb,{items:n,children:r=>e.jsx(iI,{id:Wd(r),...r})})]}),u4=({items:t,filterable:s,qa:n,selectedKey:r,onOpen:a})=>{const{pathname:o,isCurrent:i}=oC(),c=m.useMemo(()=>{const p=t.flatMap(h=>"items"in h?h.items:[h]);return r?p.find(h=>h.href===r):p.find(h=>h.href&&i(o,h.href))},[r,t,i,o]),{contains:l}=iC({sensitivity:"base"}),d=m.useMemo(()=>c?[Wd(c)]:[],[c]),u=e.jsx(hO,{disallowEmptySelection:!0,className:or.menu,selectionMode:"single",selectedKeys:d,items:t,children:p=>"items"in p?e.jsx(d4,{id:Wd(p),title:p.title,showBetaBadge:p.showBetaBadge,items:p.items}):e.jsx(iI,{id:Wd(p),...p})});return e.jsxs("div",{className:or.root,"data-qa":n,children:[c&&e.jsxs(l4,{href:c.href??"",children:[e.jsx("div",{className:or.buttonLabel,children:c.label}),c.triggerSuffix]}),e.jsxs(uO,{onOpenChange:p=>p&&(a==null?void 0:a()),children:[e.jsx(Pu,{className:or.button,"aria-label":"Open menu",children:e.jsx(z,{name:"select",size:16})}),e.jsx(jm,{className:or.popover,children:s?e.jsxs(cC,{filter:l,children:[e.jsx(lC,{autoFocus:!0,"aria-label":"Search",children:e.jsx(Rb,{placeholder:"Search...",className:or.searchInput})}),u]}):u})]})]})},h4="_breadcrumbs_9pyqx_1",p4="_breadcrumb_9pyqx_1",Dv={breadcrumbs:h4,breadcrumb:p4},m4="_separator_197p9_1",g4="_separator_compact_197p9_9",Uv={separator:m4,separator_compact:g4},f4=()=>{const{separatorProps:t}=MU({orientation:"vertical",elementType:"span"});return e.jsx("span",{...t,className:V(Uv.separator,{[Uv.separator_compact]:!1}),children:"/"})},_4=({item:t})=>"loading"in t?e.jsx(B,{width:100,height:16}):"items"in t?e.jsx(u4,{...t}):e.jsx(YU,{...t}),b4=({items:t})=>e.jsx("nav",{"aria-label":"Breadcrumbs",children:e.jsx(BU,{className:Dv.breadcrumbs,children:t.map((s,n)=>e.jsxs(DU,{className:Dv.breadcrumb,children:[n>0&&e.jsx(f4,{}),e.jsx(_4,{item:s})]},n))})}),x4="_header_1es0q_1",j4="_triggerIcon_1es0q_7",v4="_triggerIcon_expanded_1es0q_13",y4="_title_1es0q_17",w4="_content_1es0q_21",_o={header:x4,triggerIcon:j4,triggerIcon_expanded:v4,title:y4,content:w4},S4=({title:t,collapsed:s,onCollapseStateChange:n,children:r,iconPosition:a="left"})=>e.jsxs("div",{children:[e.jsxs(Pu,{type:"button",className:_o.header,onPress:()=>{n(!s)},children:[a==="left"&&e.jsx(z,{name:"chevron_down",size:20,className:V(_o.triggerIcon,{[_o.triggerIcon_expanded]:!s})}),e.jsx("div",{className:_o.title,children:t}),a==="right"&&e.jsx(z,{name:"chevron_down",size:20,className:V(_o.triggerIcon,{[_o.triggerIcon_expanded]:!s})})]}),e.jsx(dx,{collapsed:s,children:e.jsx("div",{className:_o.content,children:r})})]}),C4=({initiallyCollapsed:t=!1,onCollapseStateChanged:s,...n})=>{const[r,a]=m.useState(t);return e.jsx(S4,{...n,collapsed:r,onCollapseStateChange:o=>{a(o),s==null||s(o)}})},k4=(t,s,n)=>{const[r,a]=m.useState(s??t),o=s!==void 0,i=o?s:r,c=m.useCallback(l=>{o||a(l),n==null||n(l)},[o,n]);return[i,c]},I4="_root_akjvp_1",P4="_root_primary_akjvp_10",T4="_root_secondary_akjvp_14",A4="_root_xsmall_akjvp_18",N4="_root_small_akjvp_22",E4="_root_large_akjvp_26",O4="_header_akjvp_30",$4="_header_large_akjvp_37",L4="_header_small_akjvp_42",R4="_icon_akjvp_47",M4="_icon_opened_akjvp_55",B4="_content_small_akjvp_63",D4="_content_large_akjvp_67",ls={root:I4,root_primary:P4,root_secondary:T4,root_xsmall:A4,root_small:N4,root_large:E4,header:O4,header_large:$4,header_small:L4,icon:R4,icon_opened:M4,content_small:B4,content_large:D4},Fv={primary:ls.root_primary,secondary:ls.root_secondary,xs:ls.root_xsmall,s:ls.root_small,l:ls.root_large},cI=({appearance:t="primary",size:s="l",initiallyCollapsed:n=!1,disabled:r=!1,header:a,scrollIfNeeded:o=!1,children:i,isCollapsed:c,onCollapseStateChange:l,className:d,iconPosition:u="right"})=>{const[p,h]=k4(n,c,l),g=m.useRef(null),f=m.useCallback(()=>h(!p),[p,h]);return e.jsxs("div",{className:V(ls.root,Fv[t],Fv[s],d),children:[e.jsxs(Pu,{type:"button",className:V(ls.header,{[ls.header_small]:s==="s",[ls.header_large]:s==="l"}),isDisabled:r,onPress:f,children:[u==="right"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:a}),e.jsx(z,{name:"chevron_down",size:24,className:V(ls.icon,{[ls.icon_opened]:!p})})]}),u==="left"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{name:"chevron_down",size:24,className:V(ls.icon,{[ls.icon_opened]:!p})}),e.jsx("div",{children:a})]})]}),e.jsx(dx,{collapsed:p,scrollIfNeeded:o,children:e.jsx("div",{ref:g,className:V({[ls.content_small]:s==="s",[ls.content_large]:s==="l"}),children:i})})]})},U4="_root_1b15a_3",F4="_cover_1b15a_15",z4="_background_1b15a_36",q4="_closeButton_1b15a_47",H4="_iconWrapper_1b15a_52",V4="_headerSection_1b15a_87",W4="_header_1b15a_87",G4="_subtitle_1b15a_100",K4="_coverHeaderContainer_1b15a_104",Q4="_coverHiddenTitle_1b15a_111",Y4="_coverHiddenTitle_withIcon_1b15a_123",J4="_body_1b15a_127",Z4="_spacer_1b15a_136",Ts={root:U4,cover:F4,background:z4,closeButton:q4,iconWrapper:H4,headerSection:V4,header:W4,subtitle:G4,coverHeaderContainer:K4,coverHiddenTitle:Q4,coverHiddenTitle_withIcon:Y4,body:J4,spacer:Z4},Rl=80,X4=26,e3=50,t3=54,s3=80,zv={s:{coverWidth:420,coverHeight:148},m:{coverWidth:540,coverHeight:190},l:{coverWidth:720,coverHeight:190}};function n3(t){return new Promise((s,n)=>{const r=new Image;r.addEventListener("load",()=>s()),r.addEventListener("error",n),r.src=t})}const r3=({title:t,subtitle:s,icon:n,coverImage:r,action:a,scrollContainerRef:o,children:i,footer:c})=>{const{width:l,size:d}=BM(),u=m.useRef(null),p=o??u,h=m.useRef(null),g=DM(),f=m.useRef(null),_=m.useRef(null),b=m.useRef(null),x=m.useRef(0),j={...zv[d],coverHeight:r.height??zv[d].coverHeight},v=j.coverHeight-Rl,[y,S]=m.useState(r.x1),w=fr(N=>{const{scrollTop:D}=N.target,L=f.current;if(!L)return;const H=Dc(D/v,0,1);if(x.current!==H){x.current=H;const $=Rl+(1-H)*v;L.style.height=`${$}px`;const M=1-H*(1-Math.min(1,l/j.coverWidth));L.style.backgroundSize=`${j.coverWidth*M}px ${j.coverHeight*M}px`;const se=_.current;se&&se.style.setProperty("--js-icon-interpolation",`${H}`)}const W=b.current;if(W){const $=v+X4,M=Dc((D-$)/Rl,0,1);W.style.transform=`translateY(${(1-M)*Rl}px)`}if(t&&f.current){const $=v+e3,M=Dc((D-$)/(.7*Rl),0,1);f.current.style.setProperty("--js-darken-interpolation",`${M}`)}});m.useEffect(()=>{const N=p==null?void 0:p.current,D=h.current;N&&D&&setTimeout(()=>{const L=N.scrollHeight-N.clientHeight,H=v+t3,W=H+s3;if(L>=H&&L<W){const $=W-L;D.style.height=`${$}px`}},0)},[]);const k=UM("(-webkit-min-device-pixel-ratio: 1.5), (resolution >= 144dpi)");return m.useEffect(()=>{!k||r.x2===r.x1||n3(r.x2).then(()=>S(r.x2))},[k,r.x1,r.x2]),e.jsx("div",{className:Ts.root,style:{"--js-cover-width":`${j.coverWidth}px`,"--js-cover-height":`${j.coverHeight}px`},children:e.jsxs("div",{ref:p,className:Ts.body,onScroll:w,children:[e.jsxs("div",{className:Ts.cover,children:[e.jsx("div",{ref:f,className:Ts.background,style:{backgroundImage:`url("${y}")`}}),n&&e.jsx("span",{ref:_,className:Ts.iconWrapper,children:e.jsx(z,{name:n,size:46,forceColorScheme:"light"})}),t&&e.jsx("div",{className:Ts.coverHeaderContainer,children:e.jsx(Z,{ref:b,level:2,size:"h2",className:V(Ts.coverHiddenTitle,{[Ts.coverHiddenTitle_withIcon]:!!n}),"aria-hidden":"true",children:t})}),e.jsx(FM,{className:Ts.closeButton,blurry:!0,onClick:g})]}),t&&e.jsxs("div",{className:Ts.headerSection,children:[e.jsxs("div",{className:Ts.header,children:[e.jsx(Z,{level:2,size:"h1",children:t}),a]}),s&&e.jsx(Z,{level:2,size:"h4",className:Ts.subtitle,children:s})]}),i,e.jsx("div",{ref:h,className:Ts.spacer}),c&&e.jsx(ux,{children:c})]})})},a3="_inputContainer_1jaw0_1",o3="_label_1jaw0_8",i3="_input_1jaw0_1",c3="_icon_1jaw0_32",l3="_root_1jaw0_51",Ml={inputContainer:a3,label:o3,input:i3,icon:c3,root:l3},lI=({value:t,onSave:s,isLoading:n=!1,className:r})=>{const[a,o]=m.useState(null),i=m.useRef(!1),c=m.useRef(null),l=async()=>{a&&await s(a)},d=async()=>{i.current||await l(),o(null),i.current=!1},u=g=>{g.key==="Enter"?g.target.blur():g.key==="Escape"&&(i.current=!0,g.target.blur())},p=()=>{var g;(g=c.current)==null||g.focus()},h=g=>{var f;(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),(f=c.current)==null||f.focus())};return e.jsx("div",{className:V(Ml.root,r),children:e.jsxs("div",{className:Ml.inputContainer,children:[e.jsx("span",{className:Ml.label,children:(a??t)||" "}),e.jsx(Rb,{ref:c,className:Ml.input,value:a??t,onChange:g=>{o(g.target.value)},onBlur:d,onKeyDown:u,disabled:n}),e.jsx("div",{className:Ml.icon,onClick:p,onKeyDown:h,role:"button",tabIndex:0,"aria-label":n?"Saving...":"Edit text",children:n?e.jsx(on,{size:16,className:"loader"}):e.jsx(z,{name:"edit",size:16})})]})})},d3="_root_1uexv_1",u3={root:d3},wx=({className:t,children:s,...n})=>e.jsx("div",{...n,className:V(t,u3.root),children:s}),h3="_popover_gd6wy_1",p3={popover:h3},dI=({trigger:t,content:s,placement:n})=>e.jsxs(gO,{children:[t,e.jsx(jm,{placement:n,className:p3.popover,children:e.jsx(fO,{children:s})})]});dI.displayName="Popover";const m3=t=>{const{value:s,onChange:n,...r}=t;return e.jsx(_O,{...r,values:[s],onChange:a=>n(a[0])})},g3=()=>{const t=cn(),{modalStates:s}=Tu(O_.selector),{location:n}=window;return m.useEffect(()=>{const r=new URLSearchParams(n.search),a=r.get($_),o=r.get(bO),i=o?JSON.parse(decodeURI(o)):void 0;t(O_.actions.syncWithUrl({modalId:a,modalParams:i}))},[n.search,t,s]),null};function qv(t,s){return t.findAll(s.filters).map(n=>s.select?s.select(n):n.state)}function Cg(t={},s){const n=be(s).getMutationCache(),r=m.useRef(t),a=m.useRef(null);return a.current||(a.current=qv(n,t)),m.useEffect(()=>{r.current=t}),m.useSyncExternalStore(m.useCallback(o=>n.subscribe(()=>{const i=xO(a.current,qv(n,r.current));a.current!==i&&(a.current=i,jO.schedule(o))}),[n]),()=>a.current,()=>a.current)}const Ut=Object.freeze(Object.defineProperty({__proto__:null,BRAND:T2,DIRTY:A2,EMPTY_PATH:N2,INVALID:E2,NEVER:O2,OK:$2,ParseStatus:L2,Schema:wg,ZodAny:R2,ZodArray:M2,ZodBigInt:B2,ZodBoolean:D2,ZodBranded:U2,ZodCatch:F2,ZodDate:z2,ZodDefault:q2,ZodDiscriminatedUnion:H2,ZodEffects:Av,ZodEnum:V2,ZodError:q_,get ZodFirstPartyTypeKind(){return W2},ZodFunction:G2,ZodIntersection:K2,ZodIssueCode:$c,ZodLazy:Q2,ZodLiteral:Y2,ZodMap:J2,ZodNaN:Z2,ZodNativeEnum:X2,ZodNever:eB,ZodNull:tB,ZodNullable:sB,ZodNumber:nB,ZodObject:rB,ZodOptional:aB,ZodParsedType:oB,ZodPipeline:iB,ZodPromise:cB,ZodReadonly:lB,ZodRecord:dB,ZodSchema:wg,ZodSet:uB,ZodString:hB,ZodSymbol:pB,ZodTransformer:Av,ZodTuple:mB,ZodType:wg,ZodUndefined:gB,ZodUnion:fB,ZodUnknown:_B,ZodVoid:bB,addIssueToContext:xB,any:jB,array:di,bigint:vB,boolean:_i,coerce:vx,custom:tk,date:Ka,datetimeRegex:yB,defaultErrorMap:wB,discriminatedUnion:SB,effect:Nv,enum:yx,function:CB,getErrorMap:kB,getParsedType:IB,instanceof:PB,intersection:TB,isAborted:AB,isAsync:NB,isDirty:EB,isValid:OB,late:$B,lazy:LB,literal:Ld,makeIssue:RB,map:MB,nan:BB,nativeEnum:DB,never:UB,null:FB,nullable:zB,number:tn,object:Et,get objectUtil(){return qB},oboolean:HB,onumber:VB,optional:WB,ostring:GB,pipeline:KB,preprocess:QB,promise:YB,quotelessJson:JB,record:ZB,set:XB,setErrorMap:eD,strictObject:Ap,string:nt,symbol:tD,transformer:Nv,tuple:sD,undefined:sk,union:nk,unknown:Np,get util(){return nD},void:rD},Symbol.toStringTag,{value:"Module"})),Ep=8,f3=(t,s)=>{const[n,r]=m.useState(t),a=m.useMemo(()=>ix(o=>{r(o)},s),[s]);return m.useEffect(()=>{a(t)},[t,a]),n},_3=async t=>{const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-1",s);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")},Hv=t=>["leaked-password",t],b3=(t,s)=>{const n=f3(t,500),r=s&&n!==void 0&&n.length>=Ep,{data:a}=bt({queryKey:Hv(n),queryFn:async({queryKey:i})=>{const c=i[1];if(c===void 0)return!1;const l=await _3(c),d=l.slice(0,5),u=await(await fetch(`https://api.pwnedpasswords.com/range/${d}`,{headers:{"add-padding":"true"}})).text();let p;const h=u.split(`\r
`);for(const f of h){const[_,b]=f.split(":");if(`${d}${_}`.toUpperCase()===l.toUpperCase()){p=Number(b);break}}return p!==void 0&&p>10},enabled:r,staleTime:1/0}),o=be();if(r){const i=o.getQueryData(Hv(t));if(i!==void 0)return[i,t]}return[a,n]},x3="_tooltipContent_15ul8_1",j3="_tooltipList_15ul8_5",v3="_tooltipItem_15ul8_14",y3="_valid_15ul8_31",ih={tooltipContent:x3,tooltipList:j3,tooltipItem:v3,valid:y3},w3="Password doesn't meet requirements",S3="Choose a more unique password",G_=[{id:"length",text:`${Ep}+ characters`,validate:t=>t.length>=Ep,passwordRule:`minlength: ${Ep}`},{id:"lowercase",text:"1 lowercase character",validate:t=>!!t.match(/[a-z]/),passwordRule:"required: lower"},{id:"uppercase",text:"1 uppercase character",validate:t=>!!t.match(/[A-Z]/),passwordRule:"required: upper"},{id:"number",text:"1 number",validate:t=>!!t.match(/[0-9]/),passwordRule:"required: digit"},{id:"special",text:"1 special character",validate:t=>!!t.match(/[^A-Za-z0-9]/),passwordRule:"required: special"},{id:"leaked",text:"Avoid common patterns",validate:()=>!0,passwordRule:""}],C3=Object.fromEntries(G_.map(({id:t,validate:s})=>[t,n=>s(n)||w3])),Gd=({name:t,applyConstraints:s=!1,registerProps:n,tooltipPlacement:r="right",...a})=>{var y,S;const[o,i]=m.useState(!1),{register:c,watch:l,setError:d,getFieldState:u,formState:p}=Ct(),h=l(t),[g,f]=b3(h,s);m.useEffect(()=>{var N;if(!g)return;const k=(N=u(t).error)==null?void 0:N.types;setTimeout(()=>{d(t,{types:{...k,leaked:!0},message:S3})},0)},[f,g,d,t,u]);const _=(S=(y=p.errors)==null?void 0:y[t])==null?void 0:S.types,b=!!p.dirtyFields[t],x=m.useMemo(()=>e.jsxs("div",{className:ih.tooltipContent,children:[e.jsx("span",{children:"Password strength:"}),e.jsx("ul",{className:ih.tooltipList,children:G_.map(({id:w,text:k})=>e.jsx("li",{className:V(ih.tooltipItem,{[ih.valid]:b&&!(_!=null&&_[w])}),children:k},w))})]}),[b,_]),j=m.useCallback(()=>i(!0),[]),v=m.useCallback(()=>i(!1),[]);return e.jsx(te,{content:x,visible:s&&o,placement:r,children:e.jsx(ie,{id:t,type:"password",passwordrules:G_.map(({passwordRule:w})=>w).join("; "),...a,...c(t,{required:{value:!0,message:"This field is required"},validate:s?C3:void 0,onBlur:v,...n}),onFocus:j})})},k3="_headerWithActions_1xh0n_1",I3="_heading_1xh0n_6",Vv={headerWithActions:k3,heading:I3},Se=({level:t=2,size:s,className:n,titleClassName:r,actions:a,children:o,"data-qa":i,id:c})=>a?e.jsxs("div",{className:V(Vv.headerWithActions,n),"data-qa":i,children:[e.jsx(Z,{level:t,size:s,id:c,className:V(Vv.heading,r),children:o}),a]}):e.jsx(Z,{level:t,size:s,className:V(n,r),"data-qa":i,id:c,children:o}),P3="_root_1n0pi_1",T3={root:P3},ks=({"data-qa":t,children:s,className:n})=>e.jsx("div",{className:V(T3.root,n),"data-qa":t,children:s}),A3="_root_lc3xa_1",N3="_header_lc3xa_11",E3="_description_lc3xa_18",kg={root:A3,header:N3,description:E3},Sx=({id:t,title:s,description:n,action:r,"data-qa":a,children:o})=>e.jsxs("div",{className:kg.root,"data-qa":a,children:[e.jsxs("div",{children:[e.jsxs("div",{className:kg.header,id:t,children:[e.jsx(Z,{level:2,children:s}),r]}),n&&e.jsx("div",{className:kg.description,children:n})]}),o]}),O3={title:"Current billing period:"},$3="_root_1ducr_1",L3="_secondaryTextColor_1ducr_7",R3="_currentPeriod_1ducr_11",Ig={root:$3,secondaryTextColor:L3,currentPeriod:R3},M3=t=>`${pr(t.period_start,ke.Date)} to ${pr(t.period_end,ke.Date)}`,uI=({noColor:t})=>{const{consumptionPeriods:s,isConsumptionLoading:n}=hx(),r=s==null?void 0:s[0];return e.jsx("div",{className:V(Ig.root,{[Ig.secondaryTextColor]:!t}),children:n?e.jsx(B,{width:350,height:24}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:O3.title}),e.jsx("span",{className:Ig.currentPeriod,"data-qa":"sub_billing_period",children:r&&M3(r)})]})})},B3={compare:"Compare plans"},D3=()=>{const{trackUiInteraction:t}=P();return e.jsx(R,{openInNewTab:!0,href:vm,icon:"external_link",onClick:()=>t("billing_plans_clicked"),children:B3.compare})};function ch({lakebaseName:t,neonName:s,defaultValue:n=!1}){return ge(s,n)}const U3="_highlight_owifb_1",F3={highlight:U3},Wv=({children:t})=>e.jsx("span",{className:F3.highlight,children:t}),bo={unlocked:"Unlocked",unlockedText:"Autoscaling is now available for all branches and computes.",subtitle:"Enable autoscaling on your default branch?",description:t=>e.jsxs(e.Fragment,{children:["Dynamically scale from ",t.min,"-",t.max," CU to match your current workload.",e.jsx("br",{}),"Only pay for the resources you need."]}),enableText:({project:t,branch:s})=>e.jsxs(e.Fragment,{children:["Enable autoscaling for branch ",e.jsx(Wv,{children:s})," in project"," ",e.jsx(Wv,{children:t}),e.jsx(Bs,{icon:"info",children:"Adjust your settings in Branches > Branch > Edit Endpoint"})]}),later:"I'll do it later",save:"Save"},z3="_wrapper_1ilw3_1",q3="_card_1ilw3_7",H3="_unlockedTag_1ilw3_18",V3="_content_1ilw3_29",W3="_footer_1ilw3_35",Bl={wrapper:z3,card:q3,unlockedTag:H3,content:V3,footer:W3},G3=({projectId:t,projectName:s,branchName:n,endpointId:r,autoscalingRange:a,onRequestClose:o})=>{const i=$e({defaultValues:{isAutoscalingEnabled:!1}}),c=i.watch("isAutoscalingEnabled"),{trackUiInteraction:l}=P({mountEvent:"enable_autoscaling_modal_shown"}),d=Mb({projectId:t},{onSuccess:o,onError:p=>gi(p)}),u=fr(()=>{l("enable_autoscaling_modal_autoscaling_save_clicked"),d.mutate({endpointId:r,request:{endpoint:{autoscaling_limit_min_cu:a.min,autoscaling_limit_max_cu:a.max}}})});return e.jsxs(es,{providerProps:i,formBodyClassName:Bl.wrapper,onSubmit:u,children:[e.jsxs("div",{className:Bl.card,children:[e.jsx("span",{className:Bl.unlockedTag,children:bo.unlocked}),bo.unlockedText]}),e.jsxs("div",{className:Bl.content,children:[e.jsx(Z,{level:3,size:"h5",children:bo.subtitle}),e.jsx("p",{children:bo.description(a)}),e.jsx(as,{isSelected:c,isDisabled:i.formState.isSubmitting,onChange:p=>{l(p?"enable_autoscaling_modal_autoscaling_enabled":"enable_autoscaling_modal_autoscaling_disabled"),i.setValue("isAutoscalingEnabled",p)},wrap:!0,children:e.jsx("span",{children:bo.enableText({project:s,branch:n})})})]}),e.jsxs("div",{className:Bl.footer,children:[e.jsx(E,{appearance:"secondary",onClick:()=>{l("enable_autoscaling_modal_autoscaling_later_clicked"),o()},children:bo.later}),e.jsx(Ce,{size:"s",disabled:!c,children:bo.save})]})]})},Gv={modalTitle:"Enable autoscaling",beta:"BETA"},K3="_title_1i7tw_1",Q3="_betaBadge_1i7tw_7",Kv={title:K3,betaBadge:Q3};function Y3({projectId:t}){const[s,n]=m.useState(),[r,a]=m.useState(),[o,i]=m.useState(),{data:c,isLoading:l}=ws();if(!r&&!l&&c){let u;t&&(u=c.find(({id:p})=>p===t)),!u&&c.length===1&&(u=jU(c)),u&&(n(u.id),a({projectId:u.id,projectName:u.name}))}const d=ln({projectId:s??""});return m.useEffect(()=>{(async()=>{if(!s||d.status!=="success")return;const[{data:u},{data:p}]=await Promise.all([G.getProjectLimits(s),G.listProjectBranches({projectId:s})]),h=p.branches.find(j=>j.default);if(!h)return;const g=d.data.endpoints.filter(j=>!j.disabled&&j.branch_id===h.id);if(!g.length)return;const f=Au(g);if(!f||f.autoscaling_limit_min_cu!==f.autoscaling_limit_max_cu)return;const{limits:_}=u,b={min:void 0,max:_.max_autoscaling_cu},x=Math.min(1,_.max_autoscaling_cu);x<b.max&&(b.min=x),i({branchName:h.name,endpointId:f.id,autoscalingRange:b})})()},[d.data,d.status,s]),{projectInfo:r,modalParams:o}}const J3=({projectId:t})=>{const[s,n]=m.useState(!0),{projectInfo:r,modalParams:a}=Y3({projectId:t});return m.useEffect(()=>{const o=setTimeout(()=>{vO()},2e3);return()=>{clearTimeout(o)}},[]),!r||!a?null:e.jsx(ft,{isOpen:s,title:e.jsxs("div",{className:Kv.title,children:[Gv.modalTitle," ",e.jsx("span",{className:Kv.betaBadge,children:Gv.beta})]}),width:674,onRequestClose:()=>{n(!1)},children:e.jsx(G3,{projectId:r.projectId,projectName:r.projectName,branchName:a.branchName,endpointId:a.endpointId,autoscalingRange:a.autoscalingRange,onRequestClose:()=>{n(!1)}})})},Z3=()=>{const t=yO(),{isFetching:s,subscriptionType:n}=he();return s||!t||t.plan===n?null:e.jsx(J3,{projectId:t.projectId})},Pg={upgradeTextPartOne:"Need a larger restore window? ",upgradeButtonText:"Upgrade your account",upgradeTextPartTwo:" to get up to 30 days."},X3=()=>{const{trackUiInteraction:t}=P(),[s,n]=m.useState(!1),r=he();return!r.isFreeSubscription&&r.subscriptionType!=="launch"?null:e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.HistoryRetentionLimitReached,isOpen:s,onRequestClose:()=>{n(!1)}}),e.jsxs("div",{children:[Pg.upgradeTextPartOne,e.jsx(R,{onClick:()=>{t("project_settings_storage_upgrade_clicked"),n(!0)},children:Pg.upgradeButtonText}),Pg.upgradeTextPartTwo]})]})},eF="_body_e5ojt_1",tF={body:eF},sF=({onRequestClose:t})=>{var d,u;const{trackUiInteraction:s}=P(),{email:n}=Tu(hC),{submitFeedbackForm:r}=Nu(),a=wO();m.useEffect(()=>{s("billing_request_trial_modal_shown")},[]);const o=fr(()=>{t&&(s("billing_request_trial_modal_closed"),t())}),i=Ss({defaultValues:{email:n,message:""}}),{formState:{errors:c},register:l}=i;return e.jsxs(es,{providerProps:i,onSubmit:async p=>{s("billing_request_trial_modal_submitted");try{await r({email:p.email,message:`TRIAL REQUEST

${p.message.trim()}`.trim()}),Ue(e.jsx(rt,{children:"Thanks for your request!"})),o()}catch(h){gi(h),SO(a)}},children:[e.jsxs(Bb,{children:[e.jsx(U,{error:(d=c.email)==null?void 0:d.message,label:"Email",children:e.jsx(ie,{...l("email",{required:{value:!0,message:"This field is required"},pattern:{value:Db,message:"Please input a valid email"}})})}),e.jsx(U,{error:(u=c.message)==null?void 0:u.message,label:"Message",children:e.jsx(yi,{autoFocus:!0,placeholder:"Tell us about your needs",...l("message")})})]}),e.jsxs(Te,{children:[e.jsx(qs,{onClick:()=>s("billing_request_trial_modal_closed")}),e.jsx(Ce,{children:"Request trial"})]})]})},hI=({isOpen:t,onRequestClose:s})=>{const{subscriptionType:n}=he(),{scale:r,business:a}=pC();let o;switch(n){case"business":o={planName:"Business",maxCu:a.limits.max_autoscaling_cu};break;case"scale":o={planName:"Scale",maxCu:r.limits.max_autoscaling_cu};break}return e.jsx(ft,{title:"To extend compute size limits, request an Enterprise trial",isOpen:t,width:650,onRequestClose:s,children:e.jsxs("div",{className:tF.body,children:[o&&e.jsxs(X,{children:[o.planName," plan is limited to"," ",Mn(o.maxCu)]}),e.jsx(sF,{onRequestClose:s})]})})},nF=()=>{const{isOwnProject:t}=F(),{trackUiInteraction:s}=P(),n=he(),[r,a]=m.useState(!1),[o,i]=m.useState(!1),c=t,l=n.subscriptionType!=="business"&&n.subscriptionType!=="scale_v3",d=l?"upgrade your plan":"request more resources",{billingUrl:u,isLoading:p}=so();return e.jsxs(e.Fragment,{children:[c&&e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>a(!1)}),e.jsx(hI,{isOpen:o,onRequestClose:()=>i(!1)})]}),"To extend the compute size limit,"," ",c?e.jsx(R,{onClick:()=>{s("compute_widget_upgrade_clicked"),l?a(!0):i(!0)},children:d}):e.jsx(R,{href:u,disabled:p,onClick:()=>{s("compute_widget_upgrade_clicked")},children:d})]})};function rF(){const{project:t,isOwnProject:s}=F(),n=Ub(t),r=he();if(n||s&&(r.subscriptionType==="launch"||r.subscriptionType==="scale"))return e.jsx(nF,{})}const aF=({className:t})=>{const{trackUiInteraction:s}=P(),n=he(),[r,a]=m.useState(!1);return n.subscriptionType!=="launch"?null:e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>{a(!1)}}),e.jsxs("p",{className:t,children:["Need more resources?"," ",e.jsx(R,{onClick:()=>{s("edit_endpoint_upgrade_to_scale_clicked"),a(!0)},children:"Upgrade your plan"})]})]})},oF=({children:t,actionName:s,className:n})=>{const{isOwnProject:r}=F(),{trackUiInteraction:a}=P(),o=r,[i,c]=m.useState(!1),{billingUrl:l,isLoading:d}=so();return e.jsxs(e.Fragment,{children:[o&&e.jsx(lt,{type:Xe.ComputeSizeLimitReached,isOpen:i,onRequestClose:()=>{c(!1)}}),e.jsx(R,{href:o?void 0:l,disabled:d,className:n,onClick:()=>{a(s),o&&c(!0)},children:t||"Upgrade to a paid plan"})]})},iF=t=>{const{isFreeSubscription:s}=he();return s?e.jsx(oF,{...t}):null},Dl={title:"Members invited",inviteMore:"Invite more",done:"Done",sentText:"The following people will get an email invite soon.",footerText:"If they were Collaborators, they'll be promoted to Members."},cF="_modal_1ca1r_1",lF={modal:cF},dF=[{key:"email"},{key:"role",renderValue:({role:t})=>Ba[t]}],uF=({invitations:t,onInviteMore:s,onRequestClose:n})=>e.jsxs(na,{isOpen:!0,title:Dl.title,onRequestClose:n,children:[e.jsxs(ra,{className:lF.modal,children:[e.jsx(U,{label:Dl.sentText,children:e.jsx(xr,{cols:dF,data:t,keyField:"email",hideHeader:!0})}),e.jsx(T,{appearance:"secondary",children:Dl.footerText})]}),e.jsxs(Te,{children:[e.jsx(E,{appearance:"secondary",size:"l",onClick:()=>{s==null||s()},children:Dl.inviteMore}),e.jsx(dn,{size:"l",children:Dl.done})]})]}),Cx=()=>{const{currentData:t,isFetching:s}=CO();return s||!t?{isLoading:!0,allowInvites:!1}:{isLoading:!1,allowInvites:!mC(t.subscription_type)}},Yp=({children:t="Invite member",...s})=>{const{trackUiInteraction:n}=P(),{org:r}=re(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=Rt(),{allowInvites:i,isLoading:c}=Cx(),l=it(Je.InviteOrgMembers),d=it(Je.InviteOrgMembersSuccess,{syncWithUrl:!1}),[u,p]=m.useState(),[h,g]=m.useState(!1);return c?null:i?e.jsxs(e.Fragment,{children:[l.isModalOpen&&e.jsx(kO,{orgName:a,onSuccess:f=>{n("org_invite_member_confirmed"),l.closeModal(),p(f),d.openModal()},onRequestClose:()=>{n("org_invite_member_dismissed"),l.closeModal()}}),d.isModalOpen&&u!==void 0&&e.jsx(uF,{invitations:u,onRequestClose:()=>{n("org_invite_member_success_dismissed"),d.closeModal()},onInviteMore:()=>{n("org_invite_member_success_invite_more_clicked"),d.closeModal(),l.openModal()}}),e.jsx(E,{onClick:()=>{n("org_invite_member_clicked"),l.openModal()},disabled:!o,...s,children:t})]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.AllPlansSelection,isOpen:h,onRequestClose:()=>g(!1)}),e.jsx(E,{onClick:()=>{n("org_invite_member_upgrade_clicked"),g(!0)},children:"Upgrade plan"})]})},hF=t=>{if(t.limits.length===0)return;const s=t.limits[0];switch(s.name){case"subscription_type":{const n=Ya(s.expected),r=Ya(s.actual);return`Cannot transfer projects from ${n} to ${r} plan.`}case"projects_count":{const n=Number(s.expected)-Number(s.actual);return`Organization has ${n===0?"no":`only ${n}`} ${Rn("slot",n)} left for projects.`}case"project_region":return`Project regions (${s.actual}) are not allowed in the target organization.`;default:return"Unknown error"}},pF=t=>{if(t.projects.length===0)return;const s=[],n=[],r=[];for(const a of t.projects)switch(a.integration){case"github":{s.push(a.id);break}case"vercel":{n.push(a.id);break}case"outerbase":{r.push(a.id);break}default:return"Unknown error"}return r.length>0?`Cannot transfer projects with Outerbase integration. Outerbase projects: ${r.join(",")}`:s.length>0&&n.length>0?`Cannot transfer projects with Github/Vercel integrations. ${s.length} projects have github integration and ${n.length} have vercel integration`:s.length>0?`Cannot transfer projects with Github integration. Github projects: ${s.join(",")}`:n.length>0?`Cannot transfer projects with Vercel integrations. Vercel projects: ${n.join(",")}`:"Unknown error"},mF=t=>{t&&typeof t=="object"&&"limits"in t?Ye(hF(t)):t&&typeof t=="object"&&"projects"in t?Ye(pF(t)):Y(t)},pI=()=>{const{orgId:t}=re();return t?uu.useUpdateBillingAccountMutation():ym.useUpdateBillingAccountMutation()},gF=({onSuccess:t,onFail:s,children:n})=>{const{paymentInfo:r}=wm(),{orgId:a}=re(),[o]=pI(),i=Ss({defaultValues:{email:r==null?void 0:r.email}}),c=async({email:l})=>{try{await o({billing_account:{email:l,org_id:a}}),t&&t()}catch(d){s&&s(d)}};return e.jsx(Jt,{...i,children:e.jsx(qt,{onSubmit:i.handleSubmit(c),children:n})})},fF=()=>{var n;const{register:t,formState:s}=Ct();return e.jsx(e.Fragment,{children:e.jsx(U,{error:(n=s.errors.email)==null?void 0:n.message,label:"Email",children:e.jsx(ie,{...t("email",{required:{value:!0,message:"This field is required"},pattern:{value:Db,message:"Please input a valid email"}})})})})},_F=({isOpen:t,onRequestClose:s})=>{const{trackUiInteraction:n}=P();return e.jsx(na,{title:"Edit Billing Email",isOpen:t,onRequestClose:()=>{n("billing_edit_email_dismissed"),s==null||s()},children:e.jsxs(gF,{onSuccess:()=>{Ue(e.jsx(rt,{children:"Email updated"})),s==null||s()},onFail:()=>{Ue(e.jsx(ro,{children:"Request to update email failed"}))},children:[e.jsx(ra,{children:e.jsx(fF,{})}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{onClick:()=>n("billing_edit_email_submitted"),children:"Send"})]})]})})},bF=()=>ym.useLazyGetBillingAvailableCountriesQuery(void 0),vt={success:"Billing info was saved",info:"Changes will apply to future invoices.",required:"This field is required",title:"Edit billing info",companyLabel:"Company name",countryLabel:"Country",address1Label:"Address line 1",address2Label:"Address line 2",cityLabel:"City",postalCodeLabel:"Postal/ZIP",stateLabel:"State",taxTypeLabel:"VAT/Tax ID Type",taxIdLabel:"VAT/Tax ID",save:"Save",optional:"Optional"},xF="_root_10rv8_1",jF="_info_10rv8_7",vF="_field_10rv8_11",yF="_smallField_10rv8_15",fn={root:xF,info:jF,field:vF,smallField:yF},wF=({isOpen:t,onRequestClose:s})=>{var w,k,N,D,L,H,W,$,M;const{trackUiInteraction:n}=P(),{orgId:r}=re(),{paymentInfo:a}=wm(),[o,{data:i}]=bF(),[c,{isLoading:l}]=pI();m.useEffect(()=>{t&&o(void 0)},[t,o]);const d=m.useMemo(()=>(i==null?void 0:i.map(({code:se,name:ce})=>({value:se,label:ce})))??[],[i]),u=$e({defaultValues:{name:a==null?void 0:a.name,state:a==null?void 0:a.addressState,city:a==null?void 0:a.addressCity,line1:a==null?void 0:a.addressLine1,line2:a==null?void 0:a.addressLine2,postalCode:a==null?void 0:a.addressPostalCode,taxIdValue:a==null?void 0:a.taxId},shouldUnregister:!0}),{register:p,formState:h,watch:g,setValue:f}=u,_=g("country"),b=!!g("taxIdValue"),x=m.useMemo(()=>{var se,ce;return((ce=(se=i==null?void 0:i.find(({code:ee})=>ee===_))==null?void 0:se.tax_ids)==null?void 0:ce.map(({type:ee,description:K})=>({value:ee,label:K})))??[]},[i,_]),j=()=>{b||f("taxIdType","")},v=()=>{f("taxIdValue",""),f("taxIdType","")},y=()=>{s(),oe(vt.success)},S=async({name:se,country:ce,state:ee,city:K,line1:ae,line2:le,postalCode:ze,taxIdType:Ot,taxIdValue:mn})=>{try{await c({billing_account:{name:se,org_id:r,billing_info:{country:ce,city:K,state:ee,line1:ae,line2:le,postal_code:ze,tax_id:mn&&Ot?{id_type:Ot,id:mn}:void 0}}}).unwrap(),y()}catch(Wn){Sm(Wn)}};return e.jsxs(ps,{modalProps:{title:vt.title,isOpen:t,maxWidth:700,onRequestClose(){n("billing_edit_info_dismissed"),s()}},providerProps:u,onSubmit:S,children:[e.jsxs(De,{className:fn.root,children:[e.jsx(X,{className:fn.info,children:vt.info}),e.jsx(U,{label:vt.companyLabel,error:(w=h.errors.name)==null?void 0:w.message,className:fn.field,children:e.jsx(ie,{...p("name",{required:{value:!0,message:vt.required}}),disabled:l})}),e.jsx(U,{label:vt.countryLabel,error:(k=h.errors.country)==null?void 0:k.message,className:fn.field,children:e.jsx(Pe,{name:"country",defaultValue:a==null?void 0:a.addressCountry,rules:{required:{value:!0,message:vt.required}},control:u.control,render:({field:{onChange:se,...ce}})=>e.jsx(ct,{options:d,filterable:!0,"aria-label":vt.countryLabel,disabled:l,onChange:ee=>{se(ee),v()},...ce})})}),e.jsx(U,{label:vt.address1Label,error:(N=h.errors.line1)==null?void 0:N.message,className:fn.field,children:e.jsx(ie,{...p("line1",{required:{value:!0,message:vt.required}}),disabled:l})}),e.jsx(U,{label:vt.address2Label,error:(D=h.errors.line2)==null?void 0:D.message,className:fn.field,children:e.jsx(ie,{...p("line2"),disabled:l})}),e.jsx(U,{label:vt.cityLabel,error:(L=h.errors.city)==null?void 0:L.message,className:fn.smallField,children:e.jsx(ie,{...p("city",{required:{value:!0,message:vt.required}}),disabled:l})}),e.jsx(U,{label:vt.postalCodeLabel,error:(H=h.errors.postalCode)==null?void 0:H.message,className:fn.smallField,children:e.jsx(ie,{...p("postalCode",{required:{value:!0,message:vt.required}}),disabled:l})}),e.jsx(U,{label:vt.stateLabel,error:(W=h.errors.state)==null?void 0:W.message,className:fn.smallField,children:e.jsx(ie,{...p("state"),disabled:l})}),e.jsx(U,{label:vt.taxTypeLabel,error:($=h.errors.taxIdType)==null?void 0:$.message,className:fn.field,children:e.jsx(Pe,{name:"taxIdType",defaultValue:a==null?void 0:a.taxIdType,rules:{required:{value:b,message:vt.required}},control:u.control,render:({field:se})=>e.jsx(ct,{"aria-label":vt.taxTypeLabel,options:x,disabled:l||!x.length,placeholder:b?void 0:vt.optional,...se})})}),e.jsx(U,{label:vt.taxIdLabel,error:(M=h.errors.taxIdValue)==null?void 0:M.message,className:fn.field,children:e.jsx(ie,{...p("taxIdValue"),disabled:l||!x.length,placeholder:vt.optional,onBlur:j})})]}),e.jsxs(Te,{children:[e.jsx(qs,{disabled:l}),e.jsx(Ce,{onClick:()=>n("billing_edit_info_submitted"),children:vt.save})]})]})},SF=({label:t,appearance:s})=>{const{trackUiInteraction:n}=P(),[r,a]=m.useState(!1),o=()=>a(!0),i=()=>a(!1);return e.jsxs(e.Fragment,{children:[e.jsx(wF,{isOpen:r,onRequestClose:i}),e.jsx(gC,{appearance:s,onClick:()=>{n("billing_edit_info_clicked"),o()},label:t})]})},zi={success:"success",required:"This field is required",relatedCharge:"Related charge",description:"Problem description",descriptionPlaceholder:"Please provide a detailed description of the problem",subject:{paid:"Refund request",issued:"Credit note request"}},CF=({isOpen:t,chargeInfo:s,onRequestClose:n,invoiceId:r,amount:a,requestSubject:o,invoiceStatus:i})=>{var x,j;const{trackUiInteraction:c}=P(),{submitRefundRequestForm:l}=Nu(),{data:d}=kt(),[u,p]=m.useState(!1),h=$e({defaultValues:{relatedCharge:s}}),{register:g,formState:f,reset:_}=h,b=async({description:v})=>{if(d!==void 0)try{p(!0),await l(d.email,{subject:zi.subject[i],invoiceId:r,description:v,amount:a}),oe(zi.success),n()}catch(y){Y(y)}finally{p(!1)}};return m.useEffect(()=>{t&&_()},[t,_]),e.jsxs(ps,{modalProps:{title:o,isOpen:t,width:560,onRequestClose(){c("billing_invoice_refund_request_dismissed"),n()}},providerProps:h,onSubmit:b,children:[e.jsx(De,{children:e.jsxs(Bb,{children:[e.jsx(U,{label:zi.relatedCharge,error:(x=f.errors.relatedCharge)==null?void 0:x.message,children:e.jsx(ie,{...g("relatedCharge"),disabled:!0})}),e.jsx(U,{label:zi.description,error:(j=f.errors.description)==null?void 0:j.message,children:e.jsx(yi,{placeholder:zi.descriptionPlaceholder,autoFocus:!0,rows:3,disabled:u,...g("description",{required:{value:!0,message:zi.required}})})})]})}),e.jsxs(Te,{children:[e.jsx(qs,{disabled:u}),e.jsx(Ce,{onClick:()=>c("billing_invoice_refund_request_submitted"),children:o})]})]})},Tg={heading:"Neon subscription managed by Vercel",text:e.jsxs("span",{children:["Your Neon subscription is managed directly in your Vercel account.",e.jsx("br",{})," See ",e.jsx("strong",{children:"Integrations > Neon Database > Settings"})," ","in Vercel."]}),button:"Manage Neon subscription"},kF="_root_czdvg_1",IF={root:kF},PF=()=>{const{orgId:t,isLoading:s}=re();return e.jsxs("div",{className:IF.root,children:[e.jsx(z,{name:"vercel",size:46}),e.jsx(Z,{level:4,children:Tg.heading}),e.jsx(T,{align:"center",children:Tg.text}),e.jsx(E,{as:"a",appearance:"primary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${t}`,loading:s,children:Tg.button})]})},qi={companyName:"Company name",address:"Address",city:"City",postal:"Postal/ZIP",country:"Country",tax:"VAT/Tax ID"},TF="_root_1x455_1",AF="_doubleWidth_1x455_8",NF="_item_1x455_12",Uc={root:TF,doubleWidth:AF,item:NF},EF=()=>e.jsxs("div",{className:Uc.root,children:[e.jsx(B,{width:"100%",height:44,className:Uc.doubleWidth}),e.jsx(B,{width:"100%",height:44,className:Uc.doubleWidth}),e.jsx(B,{width:"100%",height:44}),e.jsx(B,{width:"100%",height:44}),e.jsx(B,{width:"100%",height:44}),e.jsx(B,{width:"100%",height:44})]}),OF="-",Hi=({label:t,value:s,isDoubleWidth:n=!1})=>e.jsxs("div",{className:V(Uc.item,{[Uc.doubleWidth]:n}),children:[e.jsx(Zt,{children:t}),e.jsx(Zt,{appearance:"secondary",children:s||OF})]}),$F=()=>{const{paymentInfo:t}=wm();if(!t)return null;const{name:s,addressLine1:n,addressLine2:r,addressCity:a,addressPostalCode:o,addressCountry:i,addressCountryName:c,taxId:l}=t;return e.jsxs("div",{className:Uc.root,children:[e.jsx(Hi,{label:qi.companyName,value:s,isDoubleWidth:!0}),e.jsx(Hi,{label:qi.address,value:`${n} ${r}`,isDoubleWidth:!0}),e.jsx(Hi,{label:qi.city,value:a}),e.jsx(Hi,{label:qi.postal,value:o}),e.jsx(Hi,{label:qi.country,value:c??i}),e.jsx(Hi,{label:qi.tax,value:l})]})},Vo={description:"Charges are applied to your card on the first day of the month.",paymentMethod:"Payment method",billingEmail:"Billing email",edit:"Edit",billingInfo:"Billing Info"},LF="_cards_1s849_1",RF="_doubleWidth_1s849_7",MF="_header_1s849_11",BF="_cardBg_1s849_18",$s={cards:LF,doubleWidth:RF,header:MF,cardBg:BF},DF=()=>{const{trackUiInteraction:t}=P(),[s,n]=m.useState(!1),r=()=>n(!0),a=()=>n(!1);return e.jsxs(e.Fragment,{children:[e.jsx(_F,{isOpen:s,onRequestClose:a}),e.jsx(gC,{appearance:"link",onClick:()=>{t("billing_edit_email_clicked"),r()},label:Vo.edit})]})},UF=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Dn,{children:[e.jsxs("div",{className:$s.header,children:[e.jsx(B,{width:160,height:28}),e.jsx(B,{width:26,height:20})]}),e.jsx(B,{width:"100%",height:21})]}),e.jsxs(Dn,{children:[e.jsxs("div",{className:$s.header,children:[e.jsx(B,{width:160,height:28}),e.jsx(B,{width:26,height:20})]}),e.jsx(B,{width:"100%",height:21})]}),e.jsxs(Dn,{className:$s.doubleWidth,children:[e.jsxs("div",{className:$s.header,children:[e.jsx(B,{width:100,height:28}),e.jsx(B,{width:26,height:20})]}),e.jsx(EF,{})]})]}),FF=({id:t,title:s})=>{const{paymentMethod:n,isFetching:r}=he(),{paymentInfo:a,isLoading:o}=wm(),i=n==="stripe",c=r||o;return e.jsxs(Sx,{title:s,id:t,children:[e.jsx(Zt,{children:Vo.description}),e.jsx("div",{className:$s.cards,children:c?e.jsx(UF,{}):e.jsxs(e.Fragment,{children:[i&&e.jsxs(Dn,{className:$s.cardBg,children:[e.jsxs("div",{className:$s.header,children:[e.jsx(Z,{level:3,children:Vo.paymentMethod}),e.jsx(IO,{appearance:"link",label:Vo.edit})]}),e.jsx(PO,{})]}),e.jsxs(Dn,{className:V($s.cardBg,{[$s.doubleWidth]:!i}),children:[e.jsxs("div",{className:$s.header,children:[e.jsx(Z,{level:3,children:Vo.billingEmail}),e.jsx(DF,{})]}),e.jsx(Zt,{appearance:"secondary",children:a==null?void 0:a.email})]}),e.jsxs(Dn,{className:V($s.cardBg,$s.doubleWidth),children:[e.jsxs("div",{className:$s.header,children:[e.jsx(Z,{level:3,children:Vo.billingInfo}),e.jsx(SF,{appearance:"link",label:Vo.edit})]}),e.jsx($F,{})]})]})})]})},Qv={freeV2ToV3MigrationText:t=>e.jsxs(e.Fragment,{children:["We've updated our Free plan. It now includes 10 projects, each with 0.5 GB of storage and 50 compute hours. See the details on our"," ",e.jsx(R,{href:vm,openInNewTab:!0,icon:"external_link",children:"pricing page"}),". ",e.jsx(R,{onClick:t,children:"Upgrade for more"}),"."]}),hideBtn:"Got it"},zF="_alert_1lbsr_1",qF={alert:zF},HF="free_v2",Yv="free",VF=4,WF=t=>{var r,a,o;if(!(t!=null&&t.length)||((r=t[0].plan_details)==null?void 0:r.name)!==Yv)return!1;const n=t.slice(0,VF);for(let i=0;i<n.length;i+=1){if(i+1===n.length)return!1;const c=n[i];if(((a=n[i+1].plan_details)==null?void 0:a.name)===HF&&((o=c.plan_details)==null?void 0:o.name)===Yv)return!0}return!1},GF=()=>{const{orgId:t}=re(),{consumptionPeriods:s,isConsumptionLoading:n}=hx(),[r,a]=Ds(_t.FreeV2ToV3MigrationAlertDimissed,t||"user",!1),[o,i]=m.useState(!1);return r||n||!WF(s)?null:e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"info",className:qF.alert,action:e.jsx(R,{onClick:()=>a(!0),children:Qv.hideBtn}),children:e.jsx(T,{children:Qv.freeV2ToV3MigrationText(()=>i(!0))})}),e.jsx(lt,{type:Xe.Default,isOpen:o,onRequestClose:()=>i(!1)})]})},KF={description:"Our plans are built to fit the size of your project. Pay a flat rate for a set plan, plus a little extra if you go over. Upgrade to the next tier as your project grows."},QF="_root_3tz0v_1",YF="_section_3tz0v_9",JF="_sectionHeader_3tz0v_16",ZF="_sectionTitle_3tz0v_22",lh={root:QF,section:YF,sectionHeader:JF,sectionTitle:ZF},Vi={planName:t=>`${t} Plan`,currentPlan:"Current plan",monthMinimumSpend:"month minimum spend",month:"month",whatIsIncluded:"What's included:",whatIsIncludedPerProject:"What's included per project:"},XF="_root_1xuz4_1",ez="_loaderWrapper_1xuz4_6",tz="_content_1xuz4_14",sz="_titleAndPrice_1xuz4_20",nz="_title_1xuz4_20",rz="_price_1xuz4_33",az="_amount_1xuz4_37",oz="_features_1xuz4_41",iz="_featuresList_1xuz4_47",cz="_featureItem_1xuz4_56",lz="_featureIcon_1xuz4_62",As={root:XF,loaderWrapper:ez,content:tz,titleAndPrice:sz,title:nz,price:rz,amount:az,features:oz,featuresList:iz,featureItem:cz,featureIcon:lz};function dz(){const t=TO(),s=Fb();return m.useMemo(()=>{var o,i,c;if(!t)return;const n=[],r=AO((o=t.pg_settings)==null?void 0:o["neon.max_cluster_size"]);r&&n.push({description:`${r} storage`}),Xt(s.max_autoscaling_cu)&&n.push({description:`Autoscaling to ${fC(s.max_autoscaling_cu)}`,hint:NO(s.max_autoscaling_cu)});const a=s.per_project.compute_time_seconds;if(Xt(a))n.push({description:`${Oc(a)} compute hours`});else{const l=EO((c=(i=t.metrics)==null?void 0:i.items)==null?void 0:c.per_project_aggr_compute_time,d=>`${Oc(d)} compute hours`);l&&n.push(l)}return Xt(s.max_branches)&&n.push({description:`${s.max_branches} branches`}),n},[s,t])}const uz=({titleId:t})=>{const{isPricingV3Account:s}=he(),n=_C(),r=dz();return n?e.jsx("div",{className:As.root,children:e.jsxs("div",{className:As.content,children:[e.jsxs("div",{className:As.titleAndPrice,children:[e.jsxs("div",{id:t,className:As.title,children:[e.jsx(Z,{level:1,size:"h2",children:Vi.planName(n.title)}),e.jsx(Ie,{children:Vi.currentPlan})]}),e.jsx("div",{className:As.price,children:bC(n.minimumSpend)?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:As.amount,children:us(n.minimumSpend??0,!0)})," ","/ ",Vi.monthMinimumSpend]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:As.amount,children:us(n.cost??0,!0)})," ","/ ",Vi.month]})})]}),e.jsxs("div",{className:As.features,children:[e.jsx(Z,{level:2,size:"h5",children:s?Vi.whatIsIncludedPerProject:Vi.whatIsIncluded}),e.jsx("ul",{className:As.featuresList,"data-qa":"current_plan_features_list",children:(r??n.usageMetrics).filter(({id:a})=>a!=="compute").map(({description:a,hint:o})=>e.jsxs("li",{className:As.featureItem,children:[e.jsx(z,{name:"check",size:24,className:As.featureIcon}),a,o&&e.jsx(Bs,{icon:"info",children:o})]},a))})]})]})}):e.jsx("div",{className:As.root,children:e.jsx("div",{id:t,className:As.loaderWrapper,children:e.jsx(on,{})})})},hz=({id:t,title:s})=>{const{trackUiInteraction:n}=P(),{shouldDisplayPricingV3:r}=xC(),a=o=>{n(`billing_upgrade_to_${jC(o)}_plan_clicked`)};return e.jsxs(e.Fragment,{children:[e.jsx(GF,{}),e.jsxs("div",{className:lh.root,"data-qa":"billing_plans_section",children:[e.jsx(uz,{titleId:t}),e.jsxs("div",{className:lh.section,children:[e.jsxs("div",{className:lh.sectionHeader,children:[e.jsxs("div",{className:lh.sectionTitle,children:[e.jsx(Z,{level:2,size:"h3",children:s}),e.jsx(D3,{})]}),e.jsx(Zt,{children:KF.description})]}),r?e.jsx(yR,{hideCurrentPlan:!0,onChangePlanClick:a}):e.jsx(OO,{type:Xe.Default,compact:!0,isFullFeatureList:!0,onUpgradeClick:a})]})]})]})},Ag={awsInfo:"To manage your Neon subscription for the above IDs, go to the AWS Marketplace Subscription Management.",awsAccountId:"AWS Account ID",awsEntitlementId:"AWS Entitlement ID"},pz="_awsCard_lpo77_1",mz="_awsCardItem_lpo77_7",Ng={awsCard:pz,awsCardItem:mz},gz=()=>{const{awsAccountId:t="N/A",awsEntitlementId:s="N/A"}=$O();return e.jsxs("div",{className:Ng.awsCard,children:[e.jsx(X,{children:Ag.awsInfo}),e.jsxs("div",{className:Ng.awsCardItem,children:[e.jsx(Zt,{appearance:"primary",children:Ag.awsAccountId}),e.jsx(Zt,{appearance:"secondary","data-qa":"aws_account_id",children:t})]}),e.jsxs("div",{className:Ng.awsCardItem,children:[e.jsx(Zt,{appearance:"primary",children:Ag.awsEntitlementId}),e.jsx(Zt,{appearance:"secondary","data-qa":"aws_entitlement_id",children:s})]})]})},xo={totalCost:"Total charges to date",totalCostV2Explanation:"Includes your plan's monthly fee and charges for extra usage beyond your plan's monthly allowances. The plan fee is prorated if you changed your plan during this billing period. This amount does not account for any credits you may have.",totalCostV3BelowMinimumSpendExplanation:"Includes your plan’s minimum monthly spend and any charges for usage beyond the included monthly allowances. The minimum spend amount is prorated if you changed plans during the billing period. This amount doesn’t reflect any applied credits.",totalCostV3Explanation:"This amount doesn’t reflect any applied credits.",creditsBalance:"Credit balance",creditsBalanceExplanation:"Credits are applied to future invoices before we charge your payment method. Once your credits run out, we’ll charge your default payment method.",minimumMonthlySpendApplied:t=>`${us(t)} minimum monthly fee applied`},fz="_summary_17qiv_1",_z="_totalCostsAmount_17qiv_13",bz="_minimumMonthlySpendApplied_17qiv_17",dh={summary:fz,totalCostsAmount:_z,minimumMonthlySpendApplied:bz},xz=()=>{const{isPricingV3Account:t}=he(),{consumptionPeriods:s,isConsumptionLoading:n}=hx(),{projectedServiceFee:r,isLoading:a}=Dm(),{extraAllowanceProjectedTotalCost:o,isLoading:i}=px(),{isLoading:c,creditBalance:l}=Uu(),{metrics:d,isLoading:u}=LO(),p=t?o:r+o,h=a||i||n||c||u,{totalCost:g,isTotalCostBelowMinimumSpend:f,planMinimumSpend:_}=m.useMemo(()=>{var v;const x=((v=s==null?void 0:s[0])==null?void 0:v.cost_total)||p,j=RO(d??{});return!t||j===0?{totalCost:x,planMinimumSpend:j}:{totalCost:Math.max(j,x),isTotalCostBelowMinimumSpend:x<j,planMinimumSpend:j}},[s,p,t,d]),b=m.useMemo(()=>t?f?xo.totalCostV3BelowMinimumSpendExplanation:xo.totalCostV3Explanation:xo.totalCostV2Explanation,[t,f]);return e.jsxs("div",{className:dh.summary,children:[e.jsxs("span",{children:[xo.totalCost," ",e.jsx(gv,{children:b})]}),h?e.jsx(B,{width:80,height:20}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:dh.totalCostsAmount,"data-qa":"total_cost",children:us(g)}),t&&f&&e.jsx("span",{className:dh.minimumMonthlySpendApplied,children:xo.minimumMonthlySpendApplied(_??0)}),l&&l.balance_cents>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[xo.creditsBalance," ",e.jsx(gv,{children:xo.creditsBalanceExplanation})]}),e.jsx("span",{className:dh.totalCostsAmount,"data-qa":"credits_balance",children:us(l.balance_cents)})]})]})]})},jz={viewInOrb:"View detailed usage in Orb"},vz="_directCard_1hn60_1",yz={directCard:vz},Jv=()=>{const{portalUrl:t}=he();return e.jsx("div",{className:yz.directCard,children:e.jsx(R,{openInNewTab:!0,href:t,icon:"external_link",children:jz.viewInOrb})})},wz={azureOrgInfo:e.jsxs(e.Fragment,{children:["To change the billing plan for your Azure subscription, see"," ",e.jsx(R,{href:MO,openInNewTab:!0,children:"changing your plan"}),"."]})},Sz=()=>{const{isAzureOrg:t}=re();return e.jsx(e.Fragment,{children:t&&e.jsx(X,{children:wz.azureOrgInfo})})},Cz="_collapseIcon_2dyyp_1",kz="_collapseIcon_collapsed_2dyyp_8",Iz="_usagePurchases_2dyyp_12",Pz="_usageItem_2dyyp_20",Tz="_usageTitle_2dyyp_31",Az="_usageDetails_2dyyp_37",Nz="_itemDescription_2dyyp_42",Ez="_itemCost_2dyyp_47",Pr={collapseIcon:Cz,collapseIcon_collapsed:kz,usagePurchases:Iz,usageItem:Pz,usageTitle:Tz,usageDetails:Az,itemDescription:Nz,itemCost:Ez},kx=({title:t,description:s,cost:n=0,purchases:r=[],"data-qa":a})=>{const[o,i]=m.useState(!0),c=()=>i(d=>!d),l=!!r.length;return e.jsxs("div",{className:Pr.usageItem,"data-qa":a,children:[e.jsx("div",{className:Pr.usageDetails,children:e.jsxs("div",{className:Pr.usageTitle,children:[l&&e.jsx(_r,{onClick:c,iconName:"chevron_down",iconSize:20,tooltip:o?"Expand":"Collapse",className:V(Pr.collapseIcon,{[Pr.collapseIcon_collapsed]:o})}),e.jsx("span",{"data-qa":"usage_title",children:t})]})}),e.jsx("div",{className:Pr.itemDescription,children:s}),e.jsx("div",{className:Pr.itemCost,children:us(n)}),l&&e.jsx(dx,{collapsed:o,className:Pr.usagePurchases,children:r.map(({purchasedOn:d,purchaseDescription:u})=>e.jsx("div",{className:Pr.itemDescription,children:u},d))})]})},si={extraUsage:"Extras",month:"month",plan:"plan",noExtrasDescription:"No extra charges yet — current usage is covered by your plan.",noChargesDescription:"No charges yet.",archiveStorage:"Archive storage"},Oz="_noChargesDescription_10078_1",$z="_wrapper_10078_6",Zv={noChargesDescription:Oz,wrapper:$z},Lz=()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{width:120,height:24}),e.jsx(B,{width:230,height:24}),e.jsx(B,{width:50,height:24})]}),Rz=()=>{const{metrics:t,isLoading:s}=zM(),n=m.useMemo(()=>t.filter(({cost:r})=>r>0),[t]);return s?e.jsx(Lz,{}):n.length?e.jsx("div",{className:Zv.wrapper,children:n.map(({displayName:r,description:a,cost:o})=>e.jsx(kx,{title:r,description:a,cost:o,"data-qa":"extra_usage_item"},r))}):e.jsx("div",{className:Zv.noChargesDescription,children:si.noChargesDescription})},Mz="_paidCard_1akh6_1",Bz="_paidCard_skeleton_1akh6_9",Dz="_paidCardDivider_1akh6_14",Uz="_sectionHeadline_1akh6_18",Fc={paidCard:Mz,paidCard_skeleton:Bz,paidCardDivider:Dz,sectionHeadline:Uz},Fz="_noExtrasDescription_t5zle_1",zz={noExtrasDescription:Fz},qz=["storage","syntheticStorage","compute","archiveStorage","projects"],Op=()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{width:120,height:24}),e.jsx(B,{width:230,height:24}),e.jsx(B,{width:50,height:24})]}),Hz=({metrics:t})=>{const{extraAllowanceProjectedCost:s,extraAllowanceDescription:n,extraAllowancePurchases:r,isLoading:a}=px(),o=m.useMemo(()=>He(qz.map(i=>{const c=t.find(({id:l,isFlexible:d})=>l===i&&d);if(c)return{id:c.id,title:c.title};if(i==="archiveStorage")return{id:i,title:si.archiveStorage}})),[t]);return a?e.jsx(Op,{}):o.length?o.map(({id:i,title:c})=>e.jsx(kx,{title:c,description:n[i],cost:s[i],purchases:r[i],"data-qa":"extra_usage_item"},i)):e.jsx("div",{className:zz.noExtrasDescription,children:si.noExtrasDescription})},Vz=()=>e.jsxs("div",{className:V(Fc.paidCard,Fc.paidCard_skeleton),children:[e.jsx(Op,{}),e.jsx(Gc,{className:Fc.paidCardDivider}),e.jsx(Op,{}),e.jsx(Op,{})]}),Wz=({plan:t})=>{const{isPricingV3Account:s}=he(),{startPeriod:n,projectedServiceFee:r,endPeriod:a,isLoading:o}=Dm(),i=m.useMemo(()=>{if(!t.cost)return"";if(r!==t.cost){const c=mt(a).diff(mt(n),"month",!0).toPrecision(1);return`${us(t.cost)} x ~${c} ${si.month}`}return`${us(t.cost)} x 1 ${si.month}`},[t.cost,r,n,a]);return o?e.jsx(Vz,{}):e.jsx("div",{className:Fc.paidCard,children:s?e.jsx(Rz,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:Fc.sectionHeadline,children:si.plan}),e.jsx(kx,{title:t.title,description:i,cost:r,"data-qa":"plan_details"})]}),e.jsxs("div",{children:[e.jsx("div",{className:Fc.sectionHeadline,children:si.extraUsage}),e.jsx(Hz,{metrics:t.usageMetrics})]})]})})},Gz="_root_1llkg_1",Kz="_planTag_1llkg_9",Qz="_changePlanBtnWrapper_1llkg_16",Eg={root:Gz,planTag:Kz,changePlanBtnWrapper:Qz},mI=({planName:t,showChangePlanButton:s=!1})=>{const[n,r]=m.useState(!1);return e.jsxs("div",{className:Eg.root,children:[e.jsx("div",{className:Eg.planTag,children:"Plan"}),e.jsx(Zt,{appearance:"headline","data-qa":"sub_plan_name",children:t}),s&&e.jsxs("div",{className:Eg.changePlanBtnWrapper,children:[e.jsx(s5,{setUpgradeModalOpen:r}),e.jsx(lt,{type:Xe.AllPlansSelection,isOpen:n,onRequestClose:()=>r(!1)})]})]})},Yz="_root_sxji6_1",Jz="_metric_sxji6_9",Zz="_checkIcon_sxji6_14",Xz="_hint_sxji6_18",uh={root:Yz,metric:Jz,checkIcon:Zz,hint:Xz},gI=({usageMetrics:t,className:s})=>e.jsx("ul",{className:V(uh.root,s),"data-qa":"plan_usage_metrics",children:t.map(({description:n,hint:r})=>e.jsxs("li",{className:uh.metric,children:[e.jsx(z,{name:"check",size:24,className:uh.checkIcon}),e.jsxs(Zt,{appearance:"tertiary",children:[n," ",r&&e.jsx(Bs,{icon:"info",size:"l",className:uh.hint,children:r})]})]},n))}),K_={included:"Included with",changePlan:"Change plan",changeInVercel:"Change in Vercel"},e5="_root_7l23x_1",t5="_planDesc_7l23x_6",Xv={root:e5,planDesc:t5},s5=t=>{const{isVercelOrg:s}=re();return s?e.jsx(E,{as:Ge,appearance:"secondary",href:BO,icon:"external_link",iconSide:"right",target:"_blank",children:K_.changeInVercel}):e.jsx(E,{appearance:"secondary",onClick:()=>t.setUpgradeModalOpen(!0),children:K_.changePlan})},n5=({plan:t,showChangePlanButton:s})=>t?e.jsxs("div",{className:Xv.root,children:[e.jsx(mI,{planName:t.title,showChangePlanButton:s}),e.jsxs("div",{className:Xv.planDesc,children:[e.jsx(Zt,{appearance:"primary",children:`${K_.included} ${t.title}:`}),e.jsx(gI,{usageMetrics:t.usageMetrics})]})]}):null,r5="_root_1usnh_1",a5="_groupedPlanFeatures_1usnh_7",o5="_descriptionGroup_1usnh_14",Og={root:r5,groupedPlanFeatures:a5,descriptionGroup:o5};function i5(){const{planInfo:t}=DO(),{subscriptionType:s,planDetails:n}=he(),r=t.limits??{},a=Ya(s,n),o=m.useMemo(()=>{const i={...t,metrics:t.metrics??{},features:t.features},c={included:CR(i,s),includedPerProject:SR(i),usageBasedPricing:wR(i)};return Xt(r.max_read_only_endpoints,!0)||c.includedPerProject.push({description:"Instant Read Replicas"}),c},[t,r.max_read_only_endpoints,a,s]);return m.useMemo(()=>[{title:"Included",items:He(o.included)},{title:"Included per project",items:He(o.includedPerProject)},{title:"Usage-based pricing",items:He(o.usageBasedPricing)}].filter(i=>i.items.length>0),[o])}const c5=({showChangePlanButton:t})=>{const{subscriptionType:s,planDetails:n}=he(),r=i5();return e.jsxs("div",{className:Og.root,children:[e.jsx(mI,{planName:Ya(s,n),showChangePlanButton:t}),e.jsx("div",{className:Og.groupedPlanFeatures,children:r.map(a=>e.jsxs("div",{className:Og.descriptionGroup,children:[e.jsxs(Z,{level:4,size:"h6",children:[a.title,":"]}),e.jsx(gI,{usageMetrics:a.items})]},a.title))})]})},$g={currentCosts:"Charges to date",staffAccountHeader:"Staff account active",staffAccountDescription:"This is a staff account. Use admin UI to change your plan."},l5="_root_1wom2_1",d5="_summaryCard_1wom2_7",u5="_centerVertically_1wom2_14",h5="_fullWidth_1wom2_20",p5="_contentWrapper_1wom2_24",m5="_noBottomPadding_1wom2_31",g5="_currentCostsHeader_1wom2_35",ha={root:l5,summaryCard:d5,centerVertically:u5,fullWidth:h5,contentWrapper:p5,noBottomPadding:m5,currentCostsHeader:g5},f5=({id:t,title:s})=>{const{subscriptionType:n,isMarketplaceAccount:r,isSelfServedAccount:a,isPaidSubscription:o,isStaffAccount:i,isTrialAccount:c,isPricingV3Account:l,isDirectSalesSubscription:d,planDetails:u}=he(),p=_C(),{orgId:h}=re(),{isOrgAdmin:g}=Rt(),f=w6({subscriptionType:n,isStaffAccount:i,isTrialAccount:c,isMarketplaceAccount:r,orgId:h,isOrgAdmin:g,planDetails:u}),{isAzureOrg:_,isVercelOrg:b}=re(),x=ge("show_azure_orgs_billing_cost_breakdown"),j=p!==void 0&&(a||_&&x&&o),v=d&&!l,y=d&&l;return e.jsx(Sx,{title:s,id:t,description:e.jsx(uI,{}),children:e.jsxs("div",{className:ha.root,children:[l?e.jsx(c5,{showChangePlanButton:f}):e.jsx(n5,{showChangePlanButton:f,plan:p}),v&&e.jsx(Jv,{}),e.jsxs(Dn,{bg:!1,padding:!1,border:!v,className:V(ha.summaryCard,{[ha.centerVertically]:!j,[ha.fullWidth]:!p&&!y}),children:[e.jsxs("div",{className:V(ha.contentWrapper,{[ha.noBottomPadding]:j}),children:[y&&e.jsx(Jv,{}),b&&e.jsx(PF,{}),n==="aws_marketplace"&&e.jsx(gz,{}),r&&e.jsx(Sz,{}),i&&e.jsxs("div",{children:[e.jsx(Z,{level:4,className:ha.currentCostsHeader,children:$g.staffAccountHeader}),e.jsx(T,{children:$g.staffAccountDescription})]}),j&&e.jsxs("div",{children:[e.jsx(Z,{level:4,className:ha.currentCostsHeader,children:$g.currentCosts}),e.jsx(Wz,{plan:p})]})]}),j&&e.jsx(xz,{})]})]})})},St={descriptionPaidPlan:"Your plan includes an allowance of data and storage resources that you can exceed as needed.",descriptionFreePlan:"Your plan includes an allowance of data and storage resources.",computeTitle:"Compute",computeDescription:"The total number of compute hours used.",computeExtra:"Additional compute usage:",nonPrimaryComputeTitle:"Branch compute",nonPrimaryComputeDescription:"The total number of compute hours used by non-default branches.",nonPrimaryComputeExtra:"Additional non-default compute usage:",storageTitle:"Storage",storageDescription:"Storage is the total volume of data and history stored in Neon.",storageExtra:"Additional storage usage:",projectsTitle:"Projects",projectsDescription:"Number of projects currently active in your account.",projectsExtra:"Additional projects usage:",dataTransferTitle:"Network transfer",dataTransferDescription:"The total volume of data transferred out of Neon (egress).",dataTransferExtra:"Additional network transfer usage:",archiveStorageTitle:"Archive storage",archiveStorageDescription:"The total number of gigabyte-months used for archived branches.",archiveStorageExtra:"Additional archive storage usage:",syntheticStorageTitle:"Storage",syntheticStorageDescription:"Storage is the total volume of data and history stored in Neon.",syntheticStorageExtra:"Additional storage usage:"},_5=(t,s,n)=>{if(n)return t<=.5*_g?"info":void 0;if(s)return t<=2*_g?"info":void 0;if(t<=0)return"error";if(t<=.1*_g)return"warning"},b5=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},x5=t=>{if(t>=1)return"error";if(t>=.8)return"warning"},j5=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},v5=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},y5=(t,s,n)=>{if(s)return t<=50?"info":void 0;if(t<=0)return"error";if(n){if(t<=5)return"warning";if(t<=10)return"info"}if(t<=1)return"warning";if(t<=3)return"info"},w5=t=>{if(t>=1)return"error";if(t>=.8)return"warning"},S5=(t,s)=>Math.min(Math.floor(t/s*100),100),jo=(t,s,n)=>{const r=n();if(!(!r||!Xt(s)))return{usagePercent:S5(t,s),severity:r}},C5=()=>{const{isFreeSubscription:t,subscriptionType:s}=he(),n=s==="scale"||s==="business",r=s==="launch",{usage:a}=mx(),o=gx(),{extraAllowanceAmount:{storage:i=0,projects:c=0}}=px(),l=jo(a.storage,o.storage+i,()=>_5(o.storage+i-a.storage,n,r)),d=jo(a.compute,o.compute,()=>b5(a.compute/o.compute,t)),u=jo(a.nonPrimaryCompute,o.nonPrimaryCompute,()=>x5(a.nonPrimaryCompute/o.nonPrimaryCompute)),p=jo(a.archiveStorage,o.archiveStorage,()=>j5(a.archiveStorage/o.archiveStorage,t)),h=jo(a.projects.value,o.projects+c,()=>y5(o.projects+c-a.projects.value,n,r)),g=jo(a.dataTransfer,o.dataTransfer,()=>w5(a.dataTransfer/o.dataTransfer)),f=jo(a.syntheticStorage,o.syntheticStorage,()=>v5(a.syntheticStorage/o.syntheticStorage,t));return{storage:l,compute:d,nonPrimaryCompute:u,projects:h,dataTransfer:g,archiveStorage:p,syntheticStorage:f}},ey=-1,k5=(t,s)=>{if(!Xt(s))return 0;const n=t-s;return Math.max(0,n)},I5=(t,s)=>`${Math.min(100,Math.floor(t/s*100))}%`;function Ul({value:t,allowance:s,unit:n,converter:r=Ob}){const a=n?` ${n}`:"";return`${r(t)}${Xt(s)?`/${r(s)}${a} - ${I5(t,s)}`:a}`}const vo=({allowance:t,usage:s,peakUsage:n,printValue:r=c=>c,unit:a,pluralizeUnit:o,isExtraAllowanceAllowed:i})=>{const c=typeof s=="object"?s.value:s,l=k5(c,t),d=c-l,u=t>0?Math.min(d,t):d;let p=r(c),h=r(u);typeof s=="object"&&s.isMoreThanFetched&&(p+="+",h+="+");const g={withinPlanUsage:h,baseLimit:t===ey?void 0:r(t),rawBaseAllowance:t===ey?void 0:t,totalUsage:p,peakUsage:n,unit:a,pluralizeUnit:o,rawWithinPlanUsage:u};return i?(g.extraUsage=r(l),g.rawExtraUsage=l):(g.overLimitUsage=r(l),g.rawOverLimitUsage=l),g},P5=()=>{var L,H,W,$,M,se,ce;const{isPaidAccount:t,isFreeSubscription:s}=he(),{usage:n,peakUsage:r,isLoading:a}=mx(),o=gx(),i=C5(),c=(ee,K)=>t||!K?void 0:ee;let l;if(s){const ee=vo({allowance:o.storage,usage:n.storage,printValue:Fr,unit:"GB",isExtraAllowanceAllowed:!1}),K=c(`${St.storageExtra} ${lr(ee.rawOverLimitUsage)}`,ee.rawOverLimitUsage);l={id:"storage",title:St.storageTitle,description:St.storageDescription,usage:Ul({value:n.storage,allowance:o.storage,unit:"GB",converter:Fr}),hint:K,overLimit:(L=i.storage)==null?void 0:L.severity,usageDetails:ee,isUpgradable:!0}}else{const ee=vo({allowance:o.syntheticStorage,usage:n.syntheticStorage,printValue:Fr,unit:"GB-month",isExtraAllowanceAllowed:!0}),K=c(`${St.syntheticStorageExtra} ${L_(ee.rawOverLimitUsage)}`,ee.rawOverLimitUsage);l={id:"syntheticStorage",title:St.syntheticStorageTitle,description:St.syntheticStorageDescription,usage:Ul({value:n.syntheticStorage,allowance:o.syntheticStorage,unit:"GB-month",converter:Fr}),hint:K,overLimit:(H=i.syntheticStorage)==null?void 0:H.severity,usageDetails:ee,isUpgradable:!1}}const d=vo({allowance:o.compute,usage:n.compute,printValue:Oc,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!s}),u=Ul({value:n.compute,allowance:o.compute,unit:"h",converter:Oc}),p=c(`${St.computeExtra} ${fv(d.rawOverLimitUsage)}`,d.rawOverLimitUsage),h=vo({allowance:o.nonPrimaryCompute,usage:n.nonPrimaryCompute,printValue:Oc,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!s}),g=Ul({value:n.nonPrimaryCompute,allowance:o.nonPrimaryCompute,unit:"h",converter:Oc}),f=c(`${St.nonPrimaryComputeExtra} ${fv(h.rawOverLimitUsage)}`,d.rawOverLimitUsage),_=vo({allowance:o.archiveStorage,usage:n.archiveStorage,printValue:Fr,unit:"GB-month",isExtraAllowanceAllowed:!s}),b=Ul({value:n.archiveStorage,allowance:o.archiveStorage,unit:"GB-month",converter:Fr}),x=c(`${St.archiveStorageExtra} ${L_(_.rawOverLimitUsage)}`,_.rawOverLimitUsage),j=vo({allowance:o.projects,usage:n.projects,peakUsage:s?void 0:r.projects,unit:"project",pluralizeUnit:!0,isExtraAllowanceAllowed:!s}),v=o.projects;let y=`${n.projects.value}`;if(n.projects.isMoreThanFetched){const ee=`${y}+`;y=ee,j.totalUsage=ee}const S=`${y}${Xt(v)?`/${v}`:""}`,w=c(`${St.projectsExtra} ${j.rawOverLimitUsage}`,j.rawOverLimitUsage),k=vo({allowance:o.dataTransfer,usage:n.dataTransfer,printValue:Fr,unit:"GB",isExtraAllowanceAllowed:!s}),N=`${bg(n.dataTransfer,!0)}/${bg(o.dataTransfer)}`,D=c(`${St.dataTransferExtra} ${bg(k.rawOverLimitUsage)}`,k.rawOverLimitUsage);return{usageMetrics:He([l,{id:"compute",title:St.computeTitle,description:St.computeDescription,usage:u,hint:p,overLimit:(W=i.compute)==null?void 0:W.severity,usageDetails:d,isUpgradable:s,hide:s&&!Xt(o.compute)},{id:"nonPrimaryCompute",title:St.nonPrimaryComputeTitle,description:St.nonPrimaryComputeDescription,usage:g,hint:f,overLimit:($=i.nonPrimaryCompute)==null?void 0:$.severity,isUpgradable:s,hide:!s,usageDetails:h},{id:"archiveStorage",title:St.archiveStorageTitle,description:St.archiveStorageDescription,usage:b,hint:x,overLimit:(M=i.archiveStorage)==null?void 0:M.severity,usageDetails:_,isUpgradable:s},{id:"projects",title:St.projectsTitle,description:St.projectsDescription,usage:S,hint:w,overLimit:(se=i.projects)==null?void 0:se.severity,usageDetails:j,isUpgradable:s,isMoreThanFetched:n.projects.isMoreThanFetched},{id:"dataTransfer",title:St.dataTransferTitle,description:St.dataTransferDescription,usage:N,hint:D,overLimit:(ce=i.dataTransfer)==null?void 0:ce.severity,usageDetails:k,isUpgradable:s,hide:!Xt(o.dataTransfer)}]),isLoading:a}},T5="_cards_y9pix_1",A5="_externalLinkIcon_y9pix_7",fI={cards:T5,externalLinkIcon:A5},N5={info:"most of",warning:"most of",error:"all"};function Lg(t,s,n){const r=UO[t],a=`You have used ${N5[s]} your ${r} allowance`;return n?`${a}, upgrade your account to increase your ${r} limit.`:`${a}.`}const E5={info:(t,s)=>Lg(t,"info",s),warning:(t,s)=>Lg(t,"warning",s),error:(t,s)=>Lg(t,"error",s)},O5="_text_oolkt_1",$5="_description_oolkt_8",L5="_bar_oolkt_14",R5="_overLimit_oolkt_18",hh={text:O5,description:$5,bar:L5,overLimit:R5},Kd={withinPlanUsage:"Within plan usage",overLimitUsage:"Over-limit usage",extra:"Extra",totalUsage:"Total usage",peakUsage:"Peak usage"},M5="_root_1p0zi_1",B5="_extra_1p0zi_8",D5="_current_1p0zi_9",U5="_peak_1p0zi_10",F5="_overlimit_1p0zi_11",z5="_mathSymbol_1p0zi_39",Pa={root:M5,extra:B5,current:D5,peak:U5,overlimit:F5,mathSymbol:z5},q5="_card_1yjgv_1",H5="_flexibleCard_1yjgv_12",V5="_label_1yjgv_16",W5="_value_1yjgv_22",G5="_limitDivider_1yjgv_27",Fl={card:q5,flexibleCard:H5,label:V5,value:W5,limitDivider:G5};function K5(t,s,n){return!n||!t&&t!==0?n:typeof s=="string"?Rn(n,parseInt(s,10)):typeof s=="number"?Rn(n,s):typeof t=="string"?Rn(n,parseInt(t,10)):Rn(n,t)}const ph=({value:t,limit:s,label:n,unit:r,pluralizeUnit:a,className:o,flexible:i})=>!t&&t!==0?null:e.jsxs("div",{className:V(Fl.card,{[Fl.flexibleCard]:i}),children:[e.jsx("div",{className:V(Fl.label,o),children:n}),e.jsxs("div",{children:[e.jsx("span",{className:Fl.value,children:t}),!!s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Fl.limitDivider,children:"/"}),s]}),r&&` ${a?K5(t,s,r):r}`]})]}),Q5=()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{width:"100%",height:60}),e.jsx(B,{width:"100%",height:60}),e.jsx(B,{width:"100%",height:60})]}),Y5=(t,s,n)=>t?{label:Kd.overLimitUsage,className:Pa.overlimit,value:s}:{label:Kd.extra,className:Pa.extra,value:n},J5=({withinPlanUsage:t,baseLimit:s,extraUsage:n,overLimitUsage:r,rawOverLimitUsage:a,peakUsage:o,totalUsage:i,unit:c,pluralizeUnit:l,isLoading:d=!1,shouldAlwaysDisplayExtra:u=!1})=>{if(d)return e.jsx("div",{className:Pa.root,children:e.jsx(Q5,{})});const p=!!(a&&a>0),h=u&&!!s||p,{label:g,className:f,value:_}=Y5(p,r,n);return e.jsxs("div",{className:Pa.root,children:[h&&e.jsxs(e.Fragment,{children:[e.jsx(ph,{label:Kd.withinPlanUsage,value:t,limit:s,unit:c,className:Pa.current,flexible:h,pluralizeUnit:l}),e.jsx("span",{className:Pa.mathSymbol,children:"+"}),e.jsx(ph,{label:g,value:_,unit:c,className:f,flexible:h,pluralizeUnit:l}),e.jsx("span",{className:Pa.mathSymbol,children:"="})]}),e.jsx(ph,{label:Kd.totalUsage,value:i,limit:u?void 0:s,unit:c,flexible:h,pluralizeUnit:l}),e.jsx(ph,{label:Kd.peakUsage,value:o,unit:c,className:Pa.peak,flexible:h,pluralizeUnit:l})]})},Z5="_container_xtg3h_1",X5="_barWrapper_xtg3h_6",e6="_bar_xtg3h_6",t6="_overLimit_xtg3h_21",s6="_usage_xtg3h_27",n6="_baseLimit_xtg3h_32",r6="_extraUsage_xtg3h_38",a6="_emptyExtraUsage_xtg3h_61",Gs={container:Z5,barWrapper:X5,bar:e6,overLimit:t6,usage:s6,baseLimit:n6,extraUsage:r6,emptyExtraUsage:a6},o6=.02,i6=1,ty=.25,sy=.75;function c6({withinPlanUsage:t,extraUsage:s,totalUsage:n}){const r=t!==0?s/n:0;return r>sy?sy:r>ty?r:ty}function l6({withinPlanUsage:t,baseAllowance:s,extraUsage:n,shouldAlwaysDisplayExtraBar:r}){const a=t+n;let o=c6({withinPlanUsage:t,extraUsage:n,totalUsage:a}),i=1-o;const c=.25*a;let l=c!==0?n/c:0;l=Math.min(l,i6);const d=s!==0?t/s:0;return l===0&&!r&&(o=0,i=1),{extraBarWidth:parseFloat(o.toFixed(2)),extraBarFillRatio:parseFloat(l.toFixed(2)),withinPlanUsageBarWidth:parseFloat(i.toFixed(2)),withinPlanUsageBarFillRatio:parseFloat(d.toFixed(2))}}const ny=t=>t===0?0:Math.max(t,o6)*100,d6=({hint:t,isLoading:s=!1,usageDetails:n,shouldAlwaysDisplayExtraBar:r})=>{const{rawWithinPlanUsage:a,rawExtraUsage:o,rawBaseAllowance:i,rawOverLimitUsage:c}=n;if(i===void 0||i<=0)return null;const l=(c||o)??0,d=c&&c>0,{withinPlanUsageBarWidth:u,withinPlanUsageBarFillRatio:p,extraBarWidth:h,extraBarFillRatio:g}=l6({withinPlanUsage:a,extraUsage:l,baseAllowance:i,shouldAlwaysDisplayExtraBar:r});return s?e.jsx(B,{height:10}):e.jsx(te,{content:t,children:e.jsxs("div",{className:Gs.container,children:[e.jsxs("div",{className:Gs.barWrapper,style:{width:`${u*100}%`},children:[!!p&&e.jsx("div",{style:{width:`${ny(p)}%`},className:V(Gs.bar,Gs.usage)}),e.jsx("div",{className:V(Gs.bar,Gs.baseLimit)})]}),h>0&&e.jsxs("div",{className:Gs.barWrapper,style:{width:`${h*100}%`},children:[e.jsx("div",{className:V(Gs.bar,Gs.emptyExtraUsage)}),g>0&&e.jsx("div",{style:{width:`${ny(g)}%`},className:V(Gs.bar,{[Gs.extraUsage]:!d,[Gs.overLimit]:d})})]})]})})},u6=({id:t,title:s,description:n,usage:r="",hint:a="",isLoading:o=!1,overLimit:i,usageDetails:c,shouldAlwaysDisplayExtra:l,isUpgradable:d,isMoreThanFetched:u})=>e.jsxs(Dn,{children:[e.jsx(Z,{level:3,children:s}),e.jsxs("div",{className:hh.text,children:[e.jsx("div",{className:hh.description,children:n}),!c&&(o?e.jsx(B,{width:60,height:20}):e.jsx(Zt,{appearance:"secondary",children:r}))]}),!!c.baseLimit&&!u&&e.jsx("div",{className:hh.bar,children:e.jsx(d6,{usageDetails:c,isLoading:o,hint:a,shouldAlwaysDisplayExtraBar:l})}),e.jsx(J5,{...c,shouldAlwaysDisplayExtra:l,isLoading:o}),i&&!u&&e.jsx(X,{appearance:i,className:hh.overLimit,children:E5[i](t,d)})]}),h6=()=>e.jsxs(R,{href:FO,openInNewTab:!0,children:["Explain metrics"," ",e.jsx(z,{size:14,name:"external_link",className:fI.externalLinkIcon})]}),p6=({id:t,title:s})=>{const{isFreeSubscription:n,isTrialAccount:r,isPaidAccount:a}=he(),o=a?St.descriptionPaidPlan:St.descriptionFreePlan,{usageMetrics:i,isLoading:c}=P5();return e.jsx(Sx,{title:s,description:e.jsxs(e.Fragment,{children:[o,(n||r)&&e.jsx(uI,{noColor:!0})]}),id:t,action:e.jsx(h6,{}),children:e.jsx("div",{className:fI.cards,children:i.filter(({hide:l})=>!l).map(l=>e.jsx(u6,{shouldAlwaysDisplayExtra:a,isLoading:c,...l},l.id))})})},m6={plans:{id:"plans",name:"Upgrade plan",Component:hz},usage:{id:"usage",name:"Usage",Component:p6},payment_info:{id:"payment_info",name:"Payment info",Component:FF},summary:{id:"summary",name:"Billing summary",titleOverride:"This month's summary",Component:f5}},g6={UNKNOWN:[],free_v2:["plans","usage"],launch:["summary","usage","payment_info"],scale:["summary","usage","payment_info"],business:["summary","usage","payment_info"],direct_sales:["summary","usage","payment_info"],direct_sales_v3:["summary","usage","payment_info"],aws_marketplace:["summary","usage"],vercel_pg_legacy:[],free_v3:["plans"],launch_v3:["summary","payment_info"],scale_v3:["summary","payment_info"]},f6=["summary","usage"],_6=["plans","usage"],b6=["summary","usage"],x6=[],j6=["UNKNOWN","aws_marketplace","vercel_pg_legacy"],mh=t=>t.map(s=>m6[s]),v6=t=>{const{subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o}=t;if(r)return mh(_6);if(n){const i=mh(f6);return o?i:i.filter(c=>!x6.includes(c.id))}return mh(a?b6:g6[s])},_I=()=>{const{isFetching:t,subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o}=he();return t?[]:v6({subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o})},y6=["launch","scale","business","launch_v3","scale_v3"],w6=({subscriptionType:t,isStaffAccount:s,isTrialAccount:n,isMarketplaceAccount:r,orgId:a,isOrgAdmin:o,planDetails:i})=>n?!1:s?!0:r||a&&!o||zO(t,i)?!1:y6.includes(t),S6=t=>!j6.includes(t),bI=({hint:t="",appearance:s,subscriptionType:n,planDetails:r})=>e.jsx(te,{content:t,children:e.jsx(Ie,{size:"m",appearance:s,"data-qa":"billing_plan_badge",children:Ya(n,r)})}),ry=t=>{const{subscriptionType:s,planDetails:n,isFetching:r}=he();return r?e.jsx(aI,{}):e.jsx(bI,{...t,subscriptionType:s,planDetails:n})},C6=t=>{const{subscriptionType:s,planDetails:n,isFetching:r}=vC();return r?e.jsx(aI,{}):e.jsx(bI,{...t,subscriptionType:s,planDetails:n})},k6=()=>{const{orgId:t}=re(),{data:s,isLoading:n}=ym.useGetBillingInvoicesQuery(t);return{invoices:s,isInvoicesLoading:n}},I6="_root_vk47n_1",P6="_content_vk47n_11",T6="_title_vk47n_18",Rg={root:I6,content:P6,title:T6},Ix=({title:t,description:s,action:n})=>e.jsxs("div",{className:Rg.root,children:[e.jsxs("div",{className:Rg.content,children:[e.jsx("div",{className:Rg.title,children:t}),s&&e.jsx(Zt,{children:s})]}),n]}),Mg={title:"New autoscaling settings",description:"All projects updated to your new autoscaling maximum.",button:"Learn about autoscaling"},A6=()=>{const t=qO(),{isPaidSubscription:s}=he();return!ge("growth_update_endpoint_settings_on_upgrade_from_free_plan")||!t||(t==null?void 0:t.plan)!=="free_v2"||!s?null:e.jsx(Ix,{title:Mg.title,description:Mg.description,action:e.jsx(E,{as:Ge,appearance:"secondary",href:HO,openInNewTab:!0,children:Mg.button})})},xI={title:t=>`Get started with your ${Ya(t)} plan`,gotIt:"Got it"},N6="_root_15467_1",E6="_header_15467_12",O6="_body_15467_18",Bg={root:N6,header:E6,body:O6},ay={invite:"Invite people to your organization to collaborate on projects",inviteButton:"Invite people"},$6=()=>e.jsx(Ix,{title:ay.invite,action:e.jsx(Yp,{appearance:"secondary",size:"l",children:ay.inviteButton})}),L6=()=>e.jsx($6,{}),jI={title:t=>`Review your ${t?"organization's ":""}billing information`,button:"Review billing details"},R6=()=>{const t=()=>{var s;(s=document.getElementById("payment_info"))==null||s.scrollIntoView()};return e.jsx(E,{appearance:"secondary",onClick:t,children:jI.button})},M6=({isOrg:t})=>e.jsx(Ix,{title:jI.title(t),action:e.jsx(R6,{})}),B6=()=>{const{orgId:t}=re(),{subscriptionType:s}=he();return{title:xI.title(s),actionsBody:e.jsxs(e.Fragment,{children:[!!t&&e.jsx(L6,{}),e.jsx(A6,{}),e.jsx(M6,{isOrg:!!t})]})}},D6=({hide:t,ref:s})=>{const{title:n,actionsBody:r}=B6();return e.jsxs("div",{ref:s,className:Bg.root,children:[e.jsxs("div",{className:Bg.header,children:[e.jsx(Z,{level:2,children:n}),e.jsx(E,{appearance:"secondary",onClick:t,children:xI.gotIt})]}),e.jsx("div",{className:Bg.body,children:r})]})},U6=(t,s)=>t/s*100,F6=t=>t>=100?"error":t>=80?"warning":null;class z6{constructor(s){hv(this,"data");this.data=s}analyzeUsage(){const s=this.getUsageDataList(),n=He(s.map(r=>{const{usage:a,limit:o,usageId:i,priority:c}=r;if(!Xt(o))return null;const l=U6(a,o),d=F6(l);return d?{usageId:i,severity:d,priority:c,usagePercent:l}:null}));return n.length===0?null:EU(n,[r=>({error:0,warning:1,info:2})[r.severity],r=>({dataTransfer:1,compute:2,storage:3})[r.usageId]],["asc","asc"])[0]}getUsageDataList(){return this.createUsageDataList()}createUsageDataList(){const{computeSeconds:s,maxClusterSize:n,project:r,limits:a}=this.data;return[{usageId:"storage",usage:(r==null?void 0:r.synthetic_storage_size)??0,limit:n??-1,priority:3},{usageId:"compute",usage:s,limit:(a==null?void 0:a.per_project.compute_time_seconds)??-1,priority:2},{usageId:"dataTransfer",usage:(r==null?void 0:r.data_transfer_bytes)??0,limit:(a==null?void 0:a.per_project.data_transfer_bytes)??-1,priority:1}]}}const q6=()=>{var u;const{isFreeSubscription:t}=he(),s=yC(),{projectId:n,project:r}=F(),{data:a}=Cm.useGetProjectConsumptionQuery(n),i=new U0((a==null?void 0:a.v3_metrics)??[]).collectProjectUsageMetrics(t,r),{limits:c}=It(),l=wC((u=s.pg_settings)==null?void 0:u["neon.max_cluster_size"]);return new z6({computeSeconds:i.computeSeconds,maxClusterSize:l??-1,project:r,limits:c}).analyzeUsage()},H6=t=>({dataTransfer:{error:"You've used all of your monthly network transfer allowance for this project.",warning:`You've used ${t}% of your monthly network transfer allowance for this project.`,info:""},compute:{error:"You've used all of your monthly compute allowance for this project.",warning:`You've used ${t}% of your monthly compute allowance for this project.`,info:""},storage:{error:"You've used all of your monthly storage allowance for this project.",warning:`You've used ${t}% of your monthly storage allowance for this project.`,info:""}}),V6=t=>H6(t.usagePercent)[t.usageId][t.severity],zl={getUsageLimitMessage:V6,badge:{info:"approaching limit",warning:"approaching limit",error:"limit reached"},upgradePlan:"Upgrade plan",upgradeWithCredits:t=>`Upgrade with ${t} credit`,reviewUsage:"Review usage"},W6="_root_1kbup_1",G6="_info_1kbup_7",K6="_warning_1kbup_11",Q6="_error_1kbup_15",Y6="_inner_1kbup_19",J6="_description_1kbup_25",Z6="_button_1kbup_29",$a={root:W6,info:G6,warning:K6,error:Q6,inner:Y6,description:J6,button:Z6},X6={info:$a.info,warning:$a.warning,error:$a.error},eq={info:"warning-knockout",warning:"warning-knockout",error:"error-knockout"};let oy=!1;const tq=({creditBalance:t})=>{const{trackUiInteraction:s}=P(),n=ge("growth_free_tier_autoscaling"),r=m.useMemo(()=>!!(t!=null&&t.balance_cents&&t.balance_cents>0),[t]),a=m.useMemo(()=>r?us((t==null?void 0:t.balance_cents)??0,!0):"",[t,r]),[o,i]=m.useState(!1),{isVercelOrg:c}=re(),l=()=>{s("overlimit_banner_review_usage_clicked",{is_vercel_org:c})},d=()=>{s("overlimit_banner_upgrade_clicked",{is_vercel_org:c,has_credits:r}),c||i(!0)},{billingUrl:u,isLoading:p}=so(),h=q6();if(m.useEffect(()=>{h&&!oy&&(s("overlimit_banner_shown",{usage_id:h.usageId,severity:h.severity,usage_percent:h.usagePercent,priority:h.priority,is_vercel_org:c}),oy=!0)},[h,s,c]),!h||!n)return null;const{usageId:g,severity:f,usagePercent:_}=h;return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.Default,isOpen:o,onRequestClose:()=>{i(!1)}}),e.jsx("div",{className:V($a.root,X6[f]),children:e.jsxs("div",{className:$a.inner,children:[e.jsx(Ie,{appearance:eq[f],children:zl.badge[f]}),e.jsx(T,{className:$a.description,children:zl.getUsageLimitMessage({usageId:g,severity:f,usagePercent:_})}),e.jsx(R,{href:u,disabled:p,className:$a.button,onClick:l,children:zl.reviewUsage}),e.jsx(R,{href:c?u:void 0,className:$a.button,onClick:d,children:r?zl.upgradeWithCredits(a):zl.upgradePlan})]})})]})},sq="_root_1pn1j_1",nq="_body_1pn1j_10",rq="_icon_1pn1j_17",Dg={root:sq,body:nq,icon:rq},Px=({title:t,children:s,className:n,type:r="info",...a})=>{const o=r==="warn"?"warning":"info",i=r==="warn"?"alert":"status";return e.jsxs("div",{role:i,className:V(n,Dg.root),...a,children:[e.jsx(z,{className:Dg.icon,name:o,size:20}),e.jsxs("div",{className:Dg.body,children:[t?e.jsx(Z,{level:5,children:t}):null,e.jsx("div",{children:s})]})]})},aq={[C.Root]:"root",[C.Home]:"home",[C.Welcome]:"welcome",[C.OrgWelcome]:"org_welcome",[C.Claim]:"claim",[C.ProjectsList]:"projects_list",[C.ProjectsSharedList]:"projects_shared_list",[C.ProjectsItem]:"projects_item_dashboard",[C.ProjectsItemSettings]:"projects_item_settings",[C.ProjectsItemIntegrations]:"projects_item_integrations",[C.ProjectsItemAuthorize]:"projects_item_authorize",[C.ProjectsItemIdentity]:"projects_item_identity",[C.ProjectsItemBranchesIdentity]:"projects_item_branches_identity",[C.UserBilling]:"billing",[C.UserSettings]:"user_settings",[C.ProjectsItemBranches]:"projects_item_branches",[C.ProjectsItemBranchesNew]:"projects_item_branches_new",[C.ProjectsItemBranchesLastUsed]:"projects_item_branches_last_used",[C.ProjectsItemBranchesItem]:"projects_item_branches_item",[C.ProjectsItemBranchesComputes]:"projects_item_branches_computes",[C.ProjectsItemBranchesRolesAndDatabases]:"projects_item_branches_roles_and_databases",[C.ProjectsItemBranchesCatalogs]:"projects_item_branches_catalogs",[C.ProjectsItemBranchesSyncedTables]:"projects_item_branches_synced_tables",[C.ProjectsItemBranchesChildBranches]:"projects_item_branches_child_branches",[C.ProjectsItemBranchesSQLEditor]:"projects_item_branches_sql_editor",[C.ProjectsItemBranchesRestore]:"projects_item_branches_restore",[C.ProjectsItemBranchesDataAPI]:"projects_item_branches_data_api",[C.ProjectsItemBranchesItemMonitoring]:"projects_item_monitoring",[C.ProjectsItemBranchesItemMonitoringMetrics]:"projects_item_monitoring_metrics",[C.ProjectsItemBranchesItemMonitoringOperations]:"projects_item_monitoring_operations",[C.ProjectsItemBranchesItemMonitoringActiveQueries]:"projects_item_monitoring_active_queries",[C.ProjectsItemBranchesItemMonitoringQueryHistory]:"projects_item_monitoring_query_history",[C.ProjectsItemDrizzle]:"projects_item_drizzle",[C.OrgRoot]:"org_root",[C.OrgProjectsList]:"org_projects_list",[C.OrgPeople]:"org_people",[C.OrgBilling]:"org_billing",[C.OrgSettings]:"org_settings",[C.UserIntegrations]:"user_integrations",[C.OrgIntegrations]:"org_integrations"};var ne={},Rd={exports:{}},oq=Rd.exports,iy;function iq(){return iy||(iy=1,function(t,s){(function(n,r){var a="1.0.38",o="",i="?",c="function",l="undefined",d="object",u="string",p="major",h="model",g="name",f="type",_="vendor",b="version",x="architecture",j="console",v="mobile",y="tablet",S="smarttv",w="wearable",k="embedded",N=500,D="Amazon",L="Apple",H="ASUS",W="BlackBerry",$="Browser",M="Chrome",se="Edge",ce="Firefox",ee="Google",K="Huawei",ae="LG",le="Microsoft",ze="Motorola",Ot="Opera",mn="Samsung",Wn="Sharp",pe="Sony",po="Xiaomi",mo="Zebra",Ju="Facebook",Al="Chromium OS",Zu="Mac OS",gg=function(Ee,We){var we={};for(var tt in Ee)We[tt]&&We[tt].length%2===0?we[tt]=We[tt].concat(Ee[tt]):we[tt]=Ee[tt];return we},$i=function(Ee){for(var We={},we=0;we<Ee.length;we++)We[Ee[we].toUpperCase()]=Ee[we];return We},Xu=function(Ee,We){return typeof Ee===u?go(We).indexOf(go(Ee))!==-1:!1},go=function(Ee){return Ee.toLowerCase()},eh=function(Ee){return typeof Ee===u?Ee.replace(/[^\d\.]/g,o).split(".")[0]:r},Li=function(Ee,We){if(typeof Ee===u)return Ee=Ee.replace(/^\s\s*/,o),typeof We===l?Ee:Ee.substring(0,N)},ua=function(Ee,We){for(var we=0,tt,Ws,Is,qe,je,Ps;we<We.length&&!je;){var Bi=We[we],Ol=We[we+1];for(tt=Ws=0;tt<Bi.length&&!je&&Bi[tt];)if(je=Bi[tt++].exec(Ee),je)for(Is=0;Is<Ol.length;Is++)Ps=je[++Ws],qe=Ol[Is],typeof qe===d&&qe.length>0?qe.length===2?typeof qe[1]==c?this[qe[0]]=qe[1].call(this,Ps):this[qe[0]]=qe[1]:qe.length===3?typeof qe[1]===c&&!(qe[1].exec&&qe[1].test)?this[qe[0]]=Ps?qe[1].call(this,Ps,qe[2]):r:this[qe[0]]=Ps?Ps.replace(qe[1],qe[2]):r:qe.length===4&&(this[qe[0]]=Ps?qe[3].call(this,Ps.replace(qe[1],qe[2])):r):this[qe]=Ps||r;we+=2}},Ri=function(Ee,We){for(var we in We)if(typeof We[we]===d&&We[we].length>0){for(var tt=0;tt<We[we].length;tt++)if(Xu(We[we][tt],Ee))return we===i?r:we}else if(Xu(We[we],Ee))return we===i?r:we;return Ee},Mi={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Nl={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},El={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,b],[/opios[\/ ]+([\w\.]+)/i],[b,[g,Ot+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[b,[g,Ot+" GX"]],[/\bopr\/([\w\.]+)/i],[b,[g,Ot]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[b,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,b],[/\bddg\/([\w\.]+)/i],[b,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[g,"UC"+$]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[b,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[b,[g,"Smart Lenovo "+$]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+$],b],[/\bfocus\/([\w\.]+)/i],[b,[g,ce+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[g,Ot+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[g,Ot+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[g,"MIUI "+$]],[/fxios\/([-\w\.]+)/i],[b,[g,ce]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+$]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+$],b],[/samsungbrowser\/([\w\.]+)/i],[b,[g,mn+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],b],[/metasr[\/ ]?([\d\.]+)/i],[b,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,b],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Ju],b],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[g,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,M+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[g,"Android "+$]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[b,Ri,Mi]],[/(webkit|khtml)\/([\w\.]+)/i],[g,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[g,ce+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,b],[/(cobalt)\/([\w\.]+)/i],[g,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,go]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,o,go]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,go]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[_,mn],[f,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[_,mn],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[_,L],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[_,L],[f,y]],[/(macintosh);/i],[h,[_,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[_,Wn],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[_,K],[f,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[_,K],[f,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[_,po],[f,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[_,po],[f,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[_,"OPPO"],[f,v]],[/\b(opd2\d{3}a?) bui/i],[h,[_,"OPPO"],[f,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[_,"Vivo"],[f,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[_,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[_,ze],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[_,ze],[f,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[_,ae],[f,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[_,ae],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[_,"Lenovo"],[f,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[_,"Nokia"],[f,v]],[/(pixel c)\b/i],[h,[_,ee],[f,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[_,ee],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[_,pe],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[_,pe],[f,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[_,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[_,D],[f,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[_,D],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[h,_,[f,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[_,W],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[_,H],[f,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[_,H],[f,v]],[/(nexus 9)/i],[h,[_,"HTC"],[f,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[h,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[_,"Acer"],[f,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[_,"Meizu"],[f,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[_,"Ulefone"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,h,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,h,[f,y]],[/(surface duo)/i],[h,[_,le],[f,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[_,"Fairphone"],[f,v]],[/(u304aa)/i],[h,[_,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[h,[_,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[h,[_,"RCA"],[f,y]],[/\b(venue[\d ]{2,7}) b/i],[h,[_,"Dell"],[f,y]],[/\b(q(?:mv|ta)\w+) b/i],[h,[_,"Verizon"],[f,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[_,"Barnes & Noble"],[f,y]],[/\b(tm\d{3}\w+) b/i],[h,[_,"NuVision"],[f,y]],[/\b(k88) b/i],[h,[_,"ZTE"],[f,y]],[/\b(nx\d{3}j) b/i],[h,[_,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[h,[_,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[h,[_,"Swiss"],[f,y]],[/\b((zeki)?tb.*\b) b/i],[h,[_,"Zeki"],[f,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],h,[f,y]],[/\b(ns-?\w{0,9}) b/i],[h,[_,"Insignia"],[f,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[_,"NextBook"],[f,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],h,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],h,[f,v]],[/\b(ph-1) /i],[h,[_,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[_,"Envizen"],[f,y]],[/\b(trio[-\w\. ]+) b/i],[h,[_,"MachSpeed"],[f,y]],[/\btu_(1491) b/i],[h,[_,"Rotor"],[f,y]],[/(shield[\w ]+) b/i],[h,[_,"Nvidia"],[f,y]],[/(sprint) (\w+)/i],[_,h,[f,v]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[_,le],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[_,mo],[f,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[_,mo],[f,v]],[/smart-tv.+(samsung)/i],[_,[f,S]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[_,mn],[f,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,ae],[f,S]],[/(apple) ?tv/i],[_,[h,L+" TV"],[f,S]],[/crkey/i],[[h,M+"cast"],[_,ee],[f,S]],[/droid.+aft(\w+)( bui|\))/i],[h,[_,D],[f,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[_,Wn],[f,S]],[/(bravia[\w ]+)( bui|\))/i],[h,[_,pe],[f,S]],[/(mitv-\w{5}) bui/i],[h,[_,po],[f,S]],[/Hbbtv.*(technisat) (.*);/i],[_,h,[f,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,Li],[h,Li],[f,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,h,[f,j]],[/droid.+; (shield) bui/i],[h,[_,"Nvidia"],[f,j]],[/(playstation [345portablevi]+)/i],[h,[_,pe],[f,j]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[_,le],[f,j]],[/((pebble))app/i],[_,h,[f,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[_,L],[f,w]],[/droid.+; (glass) \d/i],[h,[_,ee],[f,w]],[/droid.+; (wt63?0{2,3})\)/i],[h,[_,mo],[f,w]],[/(quest( \d| pro)?)/i],[h,[_,Ju],[f,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[f,k]],[/(aeobc)\b/i],[h,[_,D],[f,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[f,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[g,se+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,b],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[b,Ri,Nl]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,Ri,Nl],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,Zu],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,b],[/\(bb(10);/i],[b,[g,W]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[g,ce+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[b,[g,M+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,Al],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,b],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,b]]},_s=function(Ee,We){if(typeof Ee===d&&(We=Ee,Ee=r),!(this instanceof _s))return new _s(Ee,We).getResult();var we=typeof n!==l&&n.navigator?n.navigator:r,tt=Ee||(we&&we.userAgent?we.userAgent:o),Ws=we&&we.userAgentData?we.userAgentData:r,Is=We?gg(El,We):El,qe=we&&we.userAgent==tt;return this.getBrowser=function(){var je={};return je[g]=r,je[b]=r,ua.call(je,tt,Is.browser),je[p]=eh(je[b]),qe&&we&&we.brave&&typeof we.brave.isBrave==c&&(je[g]="Brave"),je},this.getCPU=function(){var je={};return je[x]=r,ua.call(je,tt,Is.cpu),je},this.getDevice=function(){var je={};return je[_]=r,je[h]=r,je[f]=r,ua.call(je,tt,Is.device),qe&&!je[f]&&Ws&&Ws.mobile&&(je[f]=v),qe&&je[h]=="Macintosh"&&we&&typeof we.standalone!==l&&we.maxTouchPoints&&we.maxTouchPoints>2&&(je[h]="iPad",je[f]=y),je},this.getEngine=function(){var je={};return je[g]=r,je[b]=r,ua.call(je,tt,Is.engine),je},this.getOS=function(){var je={};return je[g]=r,je[b]=r,ua.call(je,tt,Is.os),qe&&!je[g]&&Ws&&Ws.platform&&Ws.platform!="Unknown"&&(je[g]=Ws.platform.replace(/chrome os/i,Al).replace(/macos/i,Zu)),je},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return tt},this.setUA=function(je){return tt=typeof je===u&&je.length>N?Li(je,N):je,this},this.setUA(tt),this};_s.VERSION=a,_s.BROWSER=$i([g,b,p]),_s.CPU=$i([x]),_s.DEVICE=$i([h,_,f,j,v,S,y,w,k]),_s.ENGINE=_s.OS=$i([g,b]),t.exports&&(s=t.exports=_s),s.UAParser=_s;var Ir=typeof n!==l&&(n.jQuery||n.Zepto);if(Ir&&!Ir.ua){var fo=new _s;Ir.ua=fo.getResult(),Ir.ua.get=function(){return fo.getUA()},Ir.ua.set=function(Ee){fo.setUA(Ee);var We=fo.getResult();for(var we in We)Ir.ua[we]=We[we]}}})(typeof window=="object"?window:oq)}(Rd,Rd.exports)),Rd.exports}var cy;function cq(){if(cy)return ne;cy=1,Object.defineProperty(ne,"__esModule",{value:!0});function t(O){return O&&typeof O=="object"&&"default"in O?O.default:O}var s=Nm(),n=t(s),r=iq(),a=new r,o=a.getBrowser(),i=a.getCPU(),c=a.getDevice(),l=a.getEngine(),d=a.getOS(),u=a.getUA(),p=function(I){return a.setUA(I)},h=function(I){if(!I){console.error("No userAgent string was provided");return}var A=new r(I);return{UA:A,browser:A.getBrowser(),cpu:A.getCPU(),device:A.getDevice(),engine:A.getEngine(),os:A.getOS(),ua:A.getUA(),setUserAgent:function(J){return A.setUA(J)}}},g=Object.freeze({ClientUAInstance:a,browser:o,cpu:i,device:c,engine:l,os:d,ua:u,setUa:p,parseUserAgent:h});function f(O,I){var A=Object.keys(O);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(O);I&&(q=q.filter(function(J){return Object.getOwnPropertyDescriptor(O,J).enumerable})),A.push.apply(A,q)}return A}function _(O){for(var I=1;I<arguments.length;I++){var A=arguments[I]!=null?arguments[I]:{};I%2?f(Object(A),!0).forEach(function(q){y(O,q,A[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(q){Object.defineProperty(O,q,Object.getOwnPropertyDescriptor(A,q))})}return O}function b(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(I){return typeof I}:b=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},b(O)}function x(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function j(O,I){for(var A=0;A<I.length;A++){var q=I[A];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(O,q.key,q)}}function v(O,I,A){return I&&j(O.prototype,I),O}function y(O,I,A){return I in O?Object.defineProperty(O,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):O[I]=A,O}function S(){return S=Object.assign||function(O){for(var I=1;I<arguments.length;I++){var A=arguments[I];for(var q in A)Object.prototype.hasOwnProperty.call(A,q)&&(O[q]=A[q])}return O},S.apply(this,arguments)}function w(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(I&&I.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),I&&N(O,I)}function k(O){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},k(O)}function N(O,I){return N=Object.setPrototypeOf||function(q,J){return q.__proto__=J,q},N(O,I)}function D(O,I){if(O==null)return{};var A={},q=Object.keys(O),J,Re;for(Re=0;Re<q.length;Re++)J=q[Re],!(I.indexOf(J)>=0)&&(A[J]=O[J]);return A}function L(O,I){if(O==null)return{};var A=D(O,I),q,J;if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(O);for(J=0;J<Re.length;J++)q=Re[J],!(I.indexOf(q)>=0)&&Object.prototype.propertyIsEnumerable.call(O,q)&&(A[q]=O[q])}return A}function H(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function W(O,I){if(I&&(typeof I=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H(O)}function $(O,I){return M(O)||se(O,I)||ce(O,I)||K()}function M(O){if(Array.isArray(O))return O}function se(O,I){var A=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(A!=null){var q=[],J=!0,Re=!1,Mt,bs;try{for(A=A.call(O);!(J=(Mt=A.next()).done)&&(q.push(Mt.value),!(I&&q.length===I));J=!0);}catch(nh){Re=!0,bs=nh}finally{try{!J&&A.return!=null&&A.return()}finally{if(Re)throw bs}}return q}}function ce(O,I){if(O){if(typeof O=="string")return ee(O,I);var A=Object.prototype.toString.call(O).slice(8,-1);if(A==="Object"&&O.constructor&&(A=O.constructor.name),A==="Map"||A==="Set")return Array.from(O);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return ee(O,I)}}function ee(O,I){(I==null||I>O.length)&&(I=O.length);for(var A=0,q=new Array(I);A<I;A++)q[A]=O[A];return q}function K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},le={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},ze={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},Ot={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},mn=function(I){switch(I){case ae.Mobile:return{isMobile:!0};case ae.Tablet:return{isTablet:!0};case ae.SmartTv:return{isSmartTV:!0};case ae.Console:return{isConsole:!0};case ae.Wearable:return{isWearable:!0};case ae.Browser:return{isBrowser:!0};case ae.Embedded:return{isEmbedded:!0};default:return Ot}},Wn=function(I){return p(I)},pe=function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return I||A},po=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},mo=function(I){var A=po();return A&&A.platform&&(A.platform.indexOf(I)!==-1||A.platform==="MacIntel"&&A.maxTouchPoints>1&&!window.MSStream)},Ju=function(I,A,q,J,Re){return{isBrowser:I,browserMajorVersion:pe(A.major),browserFullVersion:pe(A.version),browserName:pe(A.name),engineName:pe(q.name),engineVersion:pe(q.version),osName:pe(J.name),osVersion:pe(J.version),userAgent:pe(Re)}},Al=function(I,A,q,J){return _({},I,{vendor:pe(A.vendor),model:pe(A.model),os:pe(q.name),osVersion:pe(q.version),ua:pe(J)})},Zu=function(I,A,q,J){return{isSmartTV:I,engineName:pe(A.name),engineVersion:pe(A.version),osName:pe(q.name),osVersion:pe(q.version),userAgent:pe(J)}},gg=function(I,A,q,J){return{isConsole:I,engineName:pe(A.name),engineVersion:pe(A.version),osName:pe(q.name),osVersion:pe(q.version),userAgent:pe(J)}},$i=function(I,A,q,J){return{isWearable:I,engineName:pe(A.name),engineVersion:pe(A.version),osName:pe(q.name),osVersion:pe(q.version),userAgent:pe(J)}},Xu=function(I,A,q,J,Re){return{isEmbedded:I,vendor:pe(A.vendor),model:pe(A.model),engineName:pe(q.name),engineVersion:pe(q.version),osName:pe(J.name),osVersion:pe(J.version),userAgent:pe(Re)}};function go(O){var I=O?h(O):g,A=I.device,q=I.browser,J=I.engine,Re=I.os,Mt=I.ua,bs=mn(A.type),nh=bs.isBrowser,FE=bs.isMobile,zE=bs.isTablet,cv=bs.isSmartTV,lv=bs.isConsole,dv=bs.isWearable,uv=bs.isEmbedded;if(nh)return Ju(nh,q,J,Re,Mt);if(cv)return Zu(cv,J,Re,Mt);if(lv)return gg(lv,J,Re,Mt);if(FE||zE)return Al(bs,A,Re,Mt);if(dv)return $i(dv,J,Re,Mt);if(uv)return Xu(uv,A,J,Re,Mt)}var eh=function(I){var A=I.type;return A===ae.Mobile},Li=function(I){var A=I.type;return A===ae.Tablet},ua=function(I){var A=I.type;return A===ae.Mobile||A===ae.Tablet},Ri=function(I){var A=I.type;return A===ae.SmartTv},Mi=function(I){var A=I.type;return A===ae.Browser},Nl=function(I){var A=I.type;return A===ae.Wearable},El=function(I){var A=I.type;return A===ae.Console},_s=function(I){var A=I.type;return A===ae.Embedded},Ir=function(I){var A=I.vendor;return pe(A)},fo=function(I){var A=I.model;return pe(A)},Ee=function(I){var A=I.type;return pe(A,"browser")},We=function(I){var A=I.name;return A===ze.Android},we=function(I){var A=I.name;return A===ze.Windows},tt=function(I){var A=I.name;return A===ze.MAC_OS},Ws=function(I){var A=I.name;return A===ze.WindowsPhone},Is=function(I){var A=I.name;return A===ze.IOS},qe=function(I){var A=I.version;return pe(A)},je=function(I){var A=I.name;return pe(A)},Ps=function(I){var A=I.name;return A===le.Chrome},Bi=function(I){var A=I.name;return A===le.Firefox},Ol=function(I){var A=I.name;return A===le.Chromium},th=function(I){var A=I.name;return A===le.Edge},Oj=function(I){var A=I.name;return A===le.Yandex},$j=function(I){var A=I.name;return A===le.Safari||A===le.MobileSafari},Lj=function(I){var A=I.name;return A===le.MobileSafari},Rj=function(I){var A=I.name;return A===le.Opera},Mj=function(I){var A=I.name;return A===le.InternetExplorer||A===le.Ie},Bj=function(I){var A=I.name;return A===le.MIUI},Dj=function(I){var A=I.name;return A===le.SamsungBrowser},Uj=function(I){var A=I.version;return pe(A)},Fj=function(I){var A=I.major;return pe(A)},zj=function(I){var A=I.name;return pe(A)},qj=function(I){var A=I.name;return pe(A)},Hj=function(I){var A=I.version;return pe(A)},Vj=function(){var I=po(),A=I&&I.userAgent&&I.userAgent.toLowerCase();return typeof A=="string"?/electron/.test(A):!1},Di=function(I){return typeof I=="string"&&I.indexOf("Edg/")!==-1},Wj=function(){var I=po();return I&&(/iPad|iPhone|iPod/.test(I.platform)||I.platform==="MacIntel"&&I.maxTouchPoints>1)&&!window.MSStream},Gn=function(){return mo("iPad")},Gj=function(){return mo("iPhone")},Kj=function(){return mo("iPod")},Qj=function(I){return pe(I)};function Yj(O){var I=O||g,A=I.device,q=I.browser,J=I.os,Re=I.engine,Mt=I.ua;return{isSmartTV:Ri(A),isConsole:El(A),isWearable:Nl(A),isEmbedded:_s(A),isMobileSafari:Lj(q)||Gn(),isChromium:Ol(q),isMobile:ua(A)||Gn(),isMobileOnly:eh(A),isTablet:Li(A)||Gn(),isBrowser:Mi(A),isDesktop:Mi(A),isAndroid:We(J),isWinPhone:Ws(J),isIOS:Is(J)||Gn(),isChrome:Ps(q),isFirefox:Bi(q),isSafari:$j(q),isOpera:Rj(q),isIE:Mj(q),osVersion:qe(J),osName:je(J),fullBrowserVersion:Uj(q),browserVersion:Fj(q),browserName:zj(q),mobileVendor:Ir(A),mobileModel:fo(A),engineName:qj(Re),engineVersion:Hj(Re),getUA:Qj(Mt),isEdge:th(q)||Di(Mt),isYandex:Oj(q),deviceType:Ee(A),isIOS13:Wj(),isIPad13:Gn(),isIPhone13:Gj(),isIPod13:Kj(),isElectron:Vj(),isEdgeChromium:Di(Mt),isLegacyEdge:th(q)&&!Di(Mt),isWindows:we(J),isMacOs:tt(J),isMIUI:Bj(q),isSamsungBrowser:Dj(q)}}var Jj=Ri(c),Zj=El(c),Xj=Nl(c),GN=_s(c),KN=Lj(o)||Gn(),QN=Ol(o),sh=ua(c)||Gn(),ev=eh(c),tv=Li(c)||Gn(),sv=Mi(c),YN=Mi(c),nv=We(d),rv=Ws(d),av=Is(d)||Gn(),JN=Ps(o),ZN=Bi(o),XN=$j(o),eE=Rj(o),ov=Mj(o),tE=qe(d),sE=je(d),nE=Uj(o),rE=Fj(o),aE=zj(o),oE=Ir(c),iE=fo(c),cE=qj(l),lE=Hj(l),dE=Qj(u),uE=th(o)||Di(u),hE=Oj(o),pE=Ee(c),mE=Wj(),gE=Gn(),fE=Gj(),_E=Kj(),bE=Vj(),xE=Di(u),jE=th(o)&&!Di(u),vE=we(d),yE=tt(d),wE=Bj(o),SE=Dj(o),CE=function(I){if(!I||typeof I!="string"){console.error("No valid user agent string was provided");return}var A=h(I),q=A.device,J=A.browser,Re=A.os,Mt=A.engine,bs=A.ua;return Yj({device:q,browser:J,os:Re,engine:Mt,ua:bs})},kE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return nv?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},IE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return sv?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},PE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return ov?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},TE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return av?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},AE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return sh?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},NE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return tv?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},EE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return rv?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},OE=function(I){var A=I.renderWithFragment,q=I.children;I.viewClassName,I.style;var J=L(I,["renderWithFragment","children","viewClassName","style"]);return ev?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},$E=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return Jj?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},LE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return Zj?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},RE=function(I){var A=I.renderWithFragment,q=I.children,J=L(I,["renderWithFragment","children"]);return Xj?A?n.createElement(s.Fragment,null,q):n.createElement("div",J,q):null},ME=function(I){var A=I.renderWithFragment,q=I.children;I.viewClassName,I.style;var J=I.condition,Re=L(I,["renderWithFragment","children","viewClassName","style","condition"]);return J?A?n.createElement(s.Fragment,null,q):n.createElement("div",Re,q):null};function BE(O){return function(I){w(A,I);function A(q){var J;return x(this,A),J=W(this,k(A).call(this,q)),J.isEventListenerAdded=!1,J.handleOrientationChange=J.handleOrientationChange.bind(H(J)),J.onOrientationChange=J.onOrientationChange.bind(H(J)),J.onPageLoad=J.onPageLoad.bind(H(J)),J.state={isLandscape:!1,isPortrait:!1},J}return v(A,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var J=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:J===0,isLandscape:J===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":b(window))!==void 0&&sh&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return n.createElement(O,S({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),A}(n.Component)}function DE(){var O=s.useState(function(){var Re=window.innerWidth>window.innerHeight?90:0;return{isPortrait:Re===0,isLandscape:Re===90,orientation:Re===0?"portrait":"landscape"}}),I=$(O,2),A=I[0],q=I[1],J=s.useCallback(function(){var Re=window.innerWidth>window.innerHeight?90:0,Mt={isPortrait:Re===0,isLandscape:Re===90,orientation:Re===0?"portrait":"landscape"};A.orientation!==Mt.orientation&&q(Mt)},[A.orientation]);return s.useEffect(function(){return(typeof window>"u"?"undefined":b(window))!==void 0&&sh&&(J(),window.addEventListener("load",J,!1),window.addEventListener("resize",J,!1)),function(){window.removeEventListener("resize",J,!1),window.removeEventListener("load",J,!1)}},[J]),A}function iv(O){var I=O||window.navigator.userAgent;return h(I)}function UE(O){var I=O||window.navigator.userAgent,A=iv(I),q=Yj(A);return[q,A]}return ne.AndroidView=kE,ne.BrowserTypes=le,ne.BrowserView=IE,ne.ConsoleView=LE,ne.CustomView=ME,ne.IEView=PE,ne.IOSView=TE,ne.MobileOnlyView=OE,ne.MobileView=AE,ne.OsTypes=ze,ne.SmartTVView=$E,ne.TabletView=NE,ne.WearableView=RE,ne.WinPhoneView=EE,ne.browserName=aE,ne.browserVersion=rE,ne.deviceDetect=go,ne.deviceType=pE,ne.engineName=cE,ne.engineVersion=lE,ne.fullBrowserVersion=nE,ne.getSelectorsByUserAgent=CE,ne.getUA=dE,ne.isAndroid=nv,ne.isBrowser=sv,ne.isChrome=JN,ne.isChromium=QN,ne.isConsole=Zj,ne.isDesktop=YN,ne.isEdge=uE,ne.isEdgeChromium=xE,ne.isElectron=bE,ne.isEmbedded=GN,ne.isFirefox=ZN,ne.isIE=ov,ne.isIOS=av,ne.isIOS13=mE,ne.isIPad13=gE,ne.isIPhone13=fE,ne.isIPod13=_E,ne.isLegacyEdge=jE,ne.isMIUI=wE,ne.isMacOs=yE,ne.isMobile=sh,ne.isMobileOnly=ev,ne.isMobileSafari=KN,ne.isOpera=eE,ne.isSafari=XN,ne.isSamsungBrowser=SE,ne.isSmartTV=Jj,ne.isTablet=tv,ne.isWearable=Xj,ne.isWinPhone=rv,ne.isWindows=vE,ne.isYandex=hE,ne.mobileModel=iE,ne.mobileVendor=oE,ne.osName=sE,ne.osVersion=tE,ne.parseUserAgent=h,ne.setUserAgent=Wn,ne.useDeviceData=iv,ne.useDeviceSelectors=UE,ne.useMobileOrientation=DE,ne.withOrientationChange=BE,ne}var Jp=cq();const lq=()=>{const{browser:t}=Jp.useDeviceData(window.navigator.userAgent);m.useEffect(()=>{t.name===Jp.BrowserTypes.Safari&&window.document.body.classList.add("safari")},[t])},dq=({children:t})=>t,uq=dq,hq=()=>{const t=Hd("promo"),s=et(),{refetch:n}=Uu(),{trackUiInteraction:r}=P();return m.useEffect(()=>{if(!t)return;G.applyPromoCode(t).then(({data:o})=>{Ue(e.jsx(rt,{children:`Congratulations! You have received ${us(o.credit_cents)} in credits for your Neon account!`})),r("promo_code_applied",{promo_code:t});try{n()}catch{}}).catch(Y);const a=new URLSearchParams(s.location.search);a.delete("promo"),s.replace({search:a.toString()})},[t,s,n,r]),null};function gh(t,s){return Object.keys(t).reduce(function(n,r){return n[r]=ut({timeZone:s},t[r]),n},{})}function ly(t,s){var n=Object.keys(ut(ut({},t),s));return n.reduce(function(r,a){return r[a]=ut(ut({},t[a]||{}),s[a]||{}),r},{})}function dy(t,s){if(!s)return t;var n=SM.formats;return ut(ut(ut({},n),t),{date:ly(gh(n.date,s),gh(t.date||{},s)),time:ly(gh(n.time,s),gh(t.time||{},s))})}var Q_=function(t,s,n,r,a){var o=t.locale,i=t.formats,c=t.messages,l=t.defaultLocale,d=t.defaultFormats,u=t.fallbackOnEmptyString,p=t.onError,h=t.timeZone,g=t.defaultRichTextElements;n===void 0&&(n={id:""});var f=n.id,_=n.defaultMessage;vM(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var b=String(f),x=c&&Object.prototype.hasOwnProperty.call(c,b)&&c[b];if(Array.isArray(x)&&x.length===1&&x[0].type===yM.literal)return x[0].value;if(!r&&x&&typeof x=="string"&&!g)return x.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=ut(ut({},g),r||{}),i=dy(i,h),d=dy(d,h),!x){if(u===!1&&x==="")return x;if((!_||o&&o.toLowerCase()!==l.toLowerCase())&&p(new wM(n,o)),_)try{var j=s.getMessageFormat(_,l,d,a);return j.format(r)}catch(v){return p(new xg('Error formatting default message for: "'.concat(b,'", rendering default message verbatim'),o,n,v)),typeof _=="string"?_:b}return b}try{var j=s.getMessageFormat(x,o,i,ut({formatters:s},a||{}));return j.format(r)}catch(v){p(new xg('Error formatting message: "'.concat(b,'", using ').concat(_?"default message":"id"," as fallback."),o,n,v))}if(_)try{var j=s.getMessageFormat(_,l,d,a);return j.format(r)}catch(v){p(new xg('Error formatting the default message for: "'.concat(b,'", rendering message verbatim'),o,n,v))}return typeof x=="string"?x:typeof _=="string"?_:b},pq=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function qu(t,s,n,r){var a=t.locale,o=t.formats,i=t.onError,c=t.timeZone;r===void 0&&(r={});var l=r.format,d=ut(ut({},c&&{timeZone:c}),l&&lx(o,s,l,i)),u=fl(r,pq,d);return s==="time"&&!u.hour&&!u.minute&&!u.second&&!u.timeStyle&&!u.dateStyle&&(u=ut(ut({},u),{hour:"numeric",minute:"numeric"})),n(a,u)}function mq(t,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return qu(t,"date",s,i).format(c)}catch(l){t.onError(new zn("Error formatting date.",t.locale,l))}return String(c)}function gq(t,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return qu(t,"time",s,i).format(c)}catch(l){t.onError(new zn("Error formatting time.",t.locale,l))}return String(c)}function fq(t,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=n[2],c=i===void 0?{}:i,l=typeof a=="string"?new Date(a||0):a,d=typeof o=="string"?new Date(o||0):o;try{return qu(t,"dateTimeRange",s,c).formatRange(l,d)}catch(u){t.onError(new zn("Error formatting date time range.",t.locale,u))}return String(l)}function _q(t,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return qu(t,"date",s,i).formatToParts(c)}catch(l){t.onError(new zn("Error formatting date.",t.locale,l))}return[]}function bq(t,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return qu(t,"time",s,i).formatToParts(c)}catch(l){t.onError(new zn("Error formatting time.",t.locale,l))}return[]}var xq=["style","type","fallback","languageDisplay"];function jq(t,s,n,r){var a=t.locale,o=t.onError,i=Intl.DisplayNames;i||o(new Mm(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Bm.MISSING_INTL_API));var c=fl(r,xq);try{return s(a,c).of(n)}catch(l){o(new zn("Error formatting display name.",a,l))}}var vq=["type","style"],uy=Date.now();function yq(t){return"".concat(uy,"_").concat(t,"_").concat(uy)}function wq(t,s,n,r){r===void 0&&(r={});var a=vI(t,s,n,r).reduce(function(o,i){var c=i.value;return typeof c!="string"?o.push(c):typeof o[o.length-1]=="string"?o[o.length-1]+=c:o.push(c),o},[]);return a.length===1?a[0]:a.length===0?"":a}function vI(t,s,n,r){var a=t.locale,o=t.onError;r===void 0&&(r={});var i=Intl.ListFormat;i||o(new Mm(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Bm.MISSING_INTL_API));var c=fl(r,vq);try{var l={},d=n.map(function(u,p){if(typeof u=="object"){var h=yq(p);return l[h]=u,h}return String(u)});return s(a,c).formatToParts(d).map(function(u){return u.type==="literal"?u:ut(ut({},u),{value:l[u.value]||u.value})})}catch(u){o(new zn("Error formatting list.",a,u))}return n}var Sq=["type"];function Cq(t,s,n,r){var a=t.locale,o=t.onError;r===void 0&&(r={}),Intl.PluralRules||o(new Mm(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Bm.MISSING_INTL_API));var i=fl(r,Sq);try{return s(a,i).select(n)}catch(c){o(new zn("Error formatting plural.",a,c))}return"other"}var kq=["numeric","style"];function Iq(t,s,n){var r=t.locale,a=t.formats,o=t.onError;n===void 0&&(n={});var i=n.format,c=!!i&&lx(a,"relative",i,o)||{},l=fl(n,kq,c);return s(r,l)}function Pq(t,s,n,r,a){a===void 0&&(a={}),r||(r="second");var o=Intl.RelativeTimeFormat;o||t.onError(new Mm(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Bm.MISSING_INTL_API));try{return Iq(t,s,a).format(n,r)}catch(i){t.onError(new zn("Error formatting relative time.",t.locale,i))}return String(n)}var Tq=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function yI(t,s,n){var r=t.locale,a=t.formats,o=t.onError;n===void 0&&(n={});var i=n.format,c=i&&lx(a,"number",i,o)||{},l=fl(n,Tq,c);return s(r,l)}function Aq(t,s,n,r){r===void 0&&(r={});try{return yI(t,s,r).format(n)}catch(a){t.onError(new zn("Error formatting number.",t.locale,a))}return String(n)}function Nq(t,s,n,r){r===void 0&&(r={});try{return yI(t,s,r).formatToParts(n)}catch(a){t.onError(new zn("Error formatting number.",t.locale,a))}return[]}function Eq(t){var s=t?t[Object.keys(t)[0]]:void 0;return typeof s=="string"}function Oq(t){t.onWarn&&t.defaultRichTextElements&&Eq(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function $q(t,s){var n=CM(s),r=ut(ut({},kM),t),a=r.locale,o=r.defaultLocale,i=r.onError;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&i?i(new Pv('Missing locale data for locale: "'.concat(a,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&i&&i(new Pv('Missing locale data for locale: "'.concat(a,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(i&&i(new IM('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),Oq(r),ut(ut({},r),{formatters:n,formatNumber:Aq.bind(null,r,n.getNumberFormat),formatNumberToParts:Nq.bind(null,r,n.getNumberFormat),formatRelativeTime:Pq.bind(null,r,n.getRelativeTimeFormat),formatDate:mq.bind(null,r,n.getDateTimeFormat),formatDateToParts:_q.bind(null,r,n.getDateTimeFormat),formatTime:gq.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:fq.bind(null,r,n.getDateTimeFormat),formatTimeToParts:bq.bind(null,r,n.getDateTimeFormat),formatPlural:Cq.bind(null,r,n.getPluralRules),formatMessage:Q_.bind(null,r,n),$t:Q_.bind(null,r,n),formatList:wq.bind(null,r,n.getListFormat),formatListToParts:vI.bind(null,r,n.getListFormat),formatDisplayName:jq.bind(null,r,n.getDisplayNames)})}function wI(t){return t&&Object.keys(t).reduce(function(s,n){var r=t[n];return s[n]=TM(r)?PM(r):r,s},{})}var hy=function(t,s,n,r){for(var a=[],o=4;o<arguments.length;o++)a[o-4]=arguments[o];var i=wI(r),c=Q_.apply(void 0,WO([t,s,n,i],a,!1));return Array.isArray(c)?AM(c):c},py=function(t,s){var n=t.defaultRichTextElements,r=VO(t,["defaultRichTextElements"]),a=wI(n),o=$q(ut(ut(ut({},R0),r),{defaultRichTextElements:a}),s),i={locale:o.locale,timeZone:o.timeZone,fallbackOnEmptyString:o.fallbackOnEmptyString,formats:o.formats,defaultLocale:o.defaultLocale,defaultFormats:o.defaultFormats,messages:o.messages,onError:o.onError,defaultRichTextElements:a};return ut(ut({},o),{formatMessage:hy.bind(null,i,o.formatters),$t:hy.bind(null,i,o.formatters)})};function Ug(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}var Lq=function(t){GO(s,t);function s(){var n=t!==null&&t.apply(this,arguments)||this;return n.cache=NM(),n.state={cache:n.cache,intl:py(Ug(n.props),n.cache),prevConfig:Ug(n.props)},n}return s.getDerivedStateFromProps=function(n,r){var a=r.prevConfig,o=r.cache,i=Ug(n);return EM(a,i)?null:{intl:py(i,o),prevConfig:i}},s.prototype.render=function(){return OM(this.state.intl),m.createElement($M,{value:this.state.intl},this.props.children)},s.displayName="IntlProvider",s.defaultProps=R0,s}(m.PureComponent);const Rq=[{type:0,value:"This project is now managed in Stack Auth. Open the Stack Auth dashboard to customize settings."}],Mq=[{type:0,value:"Postgres 18 is in Preview"}],Bq=[{type:0,value:"Neon user"}],Dq=[{type:0,value:"Quickly import your existing Postgres database to Neon. Follow these steps to check compatibility, and import your data."}],Uq=[{type:0,value:"Delete"}],Fq=[{type:0,value:"Branches with an expiration date cannot be set as default"}],zq=[{children:[{type:1,value:"branchName"}],type:8,value:"code"},{type:0,value:" is now set as a protected branch."}],qq=[{type:0,value:"General"}],Hq=[{type:0,value:"Create a Neon project"}],Vq=[{type:0,value:"Enabling logical replication:"}],Wq=[{type:0,value:"Get started with Neon"}],Gq=[{type:0,value:"Neon logo"}],Kq=[{type:0,value:"Import data to Neon"}],Qq=[{type:0,value:"Business insights from data and AI"}],Yq=[{type:0,value:"You can't make this branch default. It's already a default branch."}],Jq=[{type:0,value:"Changes your Postgres "},{children:[{type:0,value:"wal_level"}],type:8,value:"code"},{type:0,value:" setting to "},{children:[{type:0,value:"logical"}],type:8,value:"code"}],Zq=[{type:0,value:"Set as default"}],Xq=[{type:0,value:"This will permanently delete the branch "},{children:[{type:1,value:"branchName"}],type:8,value:"code"},{type:0,value:". Are you sure you want proceed?"}],e8=[{type:0,value:"Embed ready-made auth UI components into your app in minutes. User data lives directly in your Neon database, no syncing required."}],t8=[{type:0,value:"Neon, Inc."}],s8=[{type:0,value:"Set as unprotected"}],n8=[{type:0,value:"See "},{children:[{type:0,value:"Default branch"}],type:8,value:"link"},{type:0,value:" for more information."}],r8=[{type:0,value:"Set as protected"}],a8=[{type:0,value:"There are a few limitations to be aware of."}],o8=[{type:0,value:"This branch is archived. Setting it to protected will unarchive it."}],i8=[{type:0,value:"This tool checks compatibility before creating a copy of your data in Neon. Your source database remains untouched."}],c8=[{type:0,value:"Neon currently manages this project for you. To customize settings, you can transfer it to Stack Auth and manage it there."}],l8=[{type:0,value:"An update schedule hasn't been set for this project yet. You can choose a preferred schedule now, or Neon will set one for you in the coming weeks."}],d8=[{type:0,value:"Delete"}],u8=[{type:0,value:"The amount of data transferred out of Neon (egress) in the current billing period"}],h8=[{type:0,value:"Postgres databases"}],p8=[{type:0,value:"Set expiration"}],m8=[{type:0,value:"Restarts all computes in your Neon project, dropping any active connections"}],g8=[{type:0,value:`/*
In Neon, databases are stored on branches. By default, a project has one branch and one database.
You can select the branch and database to use from the drop-down menus above.

Try generating sample data and querying it by running the example statements below, or click
New Query to clear the editor.
*/
CREATE TABLE IF NOT EXISTS playing_with_neon(id SERIAL PRIMARY KEY, name TEXT NOT NULL, value REAL);
INSERT INTO playing_with_neon(name, value)
  SELECT LEFT(md5(i::TEXT), 10), random() FROM generate_series(1, 10) s(i);
SELECT * FROM playing_with_neon;`}],f8=[{type:0,value:"Create project"}],_8=[{children:[{type:1,value:"branchName"}],type:8,value:"code"},{type:0,value:" is now set as an unprotected branch."}],b8=[{type:0,value:"Rename"}],x8=[{type:0,value:"Update expiration"}],j8=[{type:0,value:"After enabling logical replication, the next steps are creating publications in Neon and configuring subscribers. For detailed instructions, please refer to our "},{children:[{type:0,value:"documentation"}],type:8,value:"link"}],v8=[{type:0,value:"Delete the branch?"}],y8=[{type:0,value:"You can't delete the default branch. To delete this branch, set another branch as the default."}],w8=[{type:0,value:"Neon currently supports Postgres 14 - 17"}],S8=[{type:0,value:"Default and Protected branches cannot have an expiration date."}],C8=[{type:0,value:"Learn more"}],k8={"+VqW+7":[{type:0,value:"Upload the database to Neon"}],"/ZQlsK":[{type:0,value:"Can not be turned off once enabled"}],"25rc5I":[{type:0,value:"Your app's users, in your Neon database"}],"2Jdord":[{type:0,value:"Branches with children cannot have an expiration date"}],"2KZk9I":[{type:0,value:"Neon RLS integration instructions"}],"36ljfs":[{type:0,value:"Query result"}],"5gPqpi":[{type:0,value:"Neon may occasionally restart computes outside the selected update window to address critical security issues or perform essential maintenance."}],"5j2JW0":[{type:0,value:"Set as unprotected"}],"7X0Q9c":[{type:0,value:"Rename the branch"}],"8Ve7cf":[{type:0,value:"Set as protected"}],"9gwEIu":[{type:0,value:"Set as protected"}],"9mxrEx":[{children:[{type:1,value:"branchName"}],type:8,value:"code"},{type:0,value:" will be set as your default branch."}],A8gtw5:Rq,"B6X/+P":[{type:0,value:"Analytics & AI on large-scale data"}],BmDOJK:Mq,DwtJ9f:Bq,GOfoKO:Dq,"GnN0x+":[{type:0,value:"Logical replication lets you replicate data changes from Neon to external data services and platforms."}],Gy61eh:Uq,IKmrmd:Fq,N5IUPN:zq,NJQjXS:qq,"Nm0+mG":[{type:0,value:"You can't delete protected branches. To delete this branch, change its status to unprotected."}],NqD1XB:Hq,P4YirL:Vq,PLn77g:Wq,"PPTt3+":[{type:0,value:"Create child branch"}],QKRCCe:Gq,R7Gmc6:Kq,"RC/oaP":[{type:0,value:"Compare to parent"}],TaTaEp:Qq,TosaI9:Yq,VM21aR:Jq,"We/vpg":[{type:0,value:"The compute endpoint associated with the default branch remains accessible if you exceed project limits, ensuring uninterrupted access to data on the default branch."}],"XNhA5/":[{type:0,value:"Use the commands below to import your database data. First, download your data using pg_dump. Then, upload it to Neon with pg_restore."}],"Z37Nt+":[{type:0,value:"Keep your computes up to date with the latest Postgres version updates, security patches, and Neon features. Updates require a brief restart of your project's computes. "},{children:[{type:0,value:"Learn more"}],type:8,value:"link"}],a83I3L:Zq,aOclzX:Xq,b03U4I:e8,b9ddJi:t8,bIGBsR:s8,"baS/+A":[{type:0,value:"Branches with an expiration date cannot have child branches"}],bwjOjq:n8,"dV+ue2":[{type:0,value:"Disable or set a custom timeout for Neon's autosuspend compute feature, which automatically suspends a compute after a period of inactivity."}],dlXiH9:r8,"dq2cu/":[{type:0,value:"Set as unprotected"}],e5BJqI:a8,eG4TIB:o8,f9vaUI:i8,fzzpSl:c8,gqhb2U:l8,"hop/tt":[{type:0,value:"Neon SQL Editor: data download"}],igFv8K:d8,ivvWBR:u8,j3uWlh:h8,kFrnoT:p8,kT2zWj:m8,kmHh2G:g8,mYJ7Lo:f8,"p+6ezX":[{type:0,value:"Set as default"}],paqVzP:_8,plO3dW:b8,tX7kDz:x8,tXNmWD:j8,ubQGRo:v8,vUtXcT:y8,weVW4p:w8,"wi/Wno":[{type:0,value:"Set as default"}],yLQs0w:S8,zlkeKQ:C8},I8=k8,P8=({children:t})=>e.jsx(Lq,{defaultLocale:"en",locale:"en",messages:I8,children:t}),T8=({children:t})=>{const[s,n]=m.useState(),[r,a]=m.useState(),[o,i]=m.useState();return e.jsx(SC.Provider,{value:{setProjectData:n,setBranchData:a,setRoleData:i,projectData:s,branchData:r,roleData:o},children:t})},Fm=m.createContext({isKeycloakUser:!1}),A8=({config:t,children:s})=>e.jsx(Fm.Provider,{value:{isKeycloakUser:t!==void 0},children:s}),SI=()=>{const{isKeycloakUser:t}=m.useContext(Fm),{data:s,isError:n}=bt({queryKey:["user_auth_info"],queryFn:()=>G.getCurrentUserAuthInfo(),select:({data:i})=>({userHasPassword:i.password_stored,userAuthAccounts:i.auth_accounts,userLinkedAccounts:i.linked_accounts})}),r=be(),a=m.useCallback(()=>{r.invalidateQueries({queryKey:["user_auth_info"]})},[r]);return{isKeycloakUser:t,isInitialized:s!==void 0,invalidate:a,isError:n,...s}},N8={github:"GitHub",google:"Google",hasura:"Hasura",microsoft:"Microsoft",microsoftv2:"Microsoft",keycloak:"Keycloak",vercelmp:"Vercel Marketplace"},Zp="upgrade";function my(){const{pathname:t,search:s,hash:n}=window.location,r=new URLSearchParams(s);r.delete(Zp);const a=`${t}${r}${n}`;window.history.replaceState(null,"",a)}const E8=({targetPlan:t})=>{const{orgId:s}=re(),{upgradeSubscription:n,isLoading:r}=QO(),{subscriptionType:a,hasSavedCreditCard:o}=he(),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),u=fr(()=>{my(),n(t,s)}),p=m.useRef(!1);if(m.useEffect(()=>{if(!r&&!p.current){if(p.current=!0,a===t){my();const h=Ya(t);Ue(e.jsx(rt,{children:`You are already on a "${h}" plan`}));return}o?l():u()}},[o,r,u,a,t,p]),a!==t)return e.jsx(YO,{isOpen:i,onRequestClose:d,subscriptionType:t,onConfirm:u})},O8=()=>{const{search:t}=il(),s=m.useMemo(()=>{const n=new URLSearchParams(t).get(Zp);if(!(!n||!KO(n))&&(n==="launch"||n==="scale"))return n},[t]);return s?e.jsx(E8,{targetPlan:s}):null},$8="_menu_1l1gk_1",L8={menu:$8},R8=()=>{const{data:t}=kt(),{trackUiInteraction:s}=P(),{themeOption:n,changeTheme:r}=JO(),a=m.useCallback(()=>{s("user_menu_opened")},[s]),o=m.useCallback(()=>{s("user_menu_sign_out_clicked"),CC().then(()=>zb())},[s]),i=m.useMemo(()=>He([{header:{title:t==null?void 0:t.displayName,subtitle:t==null?void 0:t.email},items:He([{label:"Account settings",href:C.UserSettings,onClick:()=>s("user_menu_account_clicked")},{label:`Theme: ${HM[n]}`,submenu:qM.map(({value:c,label:l})=>({label:l,icon:n===c?"check":void 0,onClick:()=>{s("user_menu_theme_submenu_clicked",{theme:c}),r(c)}}))}])},{items:[{label:"Logout",onClick:o}]}]),[t,n,o,s,r]);return t===void 0?null:e.jsx(e.Fragment,{children:e.jsx(Yt,{sections:i,onOpen:a,placement:"bottom right",menuClassName:L8.menu,children:e.jsx(VM,{name:t.displayName,image:t.image,"data-qa":"account_menu_button"})})})},gy={title:t=>`You have $${t} in Neon credits waiting to be accepted.`,button:"Claim credit"},M8="_root_z9bfw_1",B8="_button_z9bfw_10",D8="_content_z9bfw_19",U8="_closeButton_z9bfw_27",fh={root:M8,button:B8,content:D8,closeButton:U8},F8=({creditBalance:t,isMarketplaceAccount:s})=>{const n=et(),{orgId:r}=re(),{trackUiInteraction:a}=P({mountEvent:"claim_credits_banner_shown"}),[o,i]=Ds(_t.ClaimCreditsBannerDismissed,"hasClaimCreditsBannerBeenDismissed",!1),[c,l]=m.useState(!1);if(o)return null;const d=()=>{i(!0),a("claim_credits_banner_dismissed")},u=()=>{if(a("claim_credits_banner_cta_clicked"),s){const p=r?Q(C.OrgBilling,{orgId:r}):C.UserBilling;n.push(p);return}l(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:fh.root,children:[e.jsxs("div",{className:fh.content,children:[e.jsx(T,{children:gy.title(t)}),e.jsx(R,{className:fh.button,onClick:u,children:gy.button})]}),e.jsx("button",{type:"button",title:"Dismiss",onClick:d,className:fh.closeButton,children:e.jsx(z,{name:"close",size:16})})]}),e.jsx(lt,{type:Xe.Default,isOpen:c,onRequestClose:()=>{l(!1)}})]})},z8=()=>{const t=ge("claim_credit_flow_ux_changes"),s=ge("overlimit_banner"),{isFreeSubscription:n,isMarketplaceAccount:r,isPricingV3Account:a}=he(),o=!!wi({path:C.ProjectsItem}),i=m.useMemo(()=>n&&s&&o&&a,[n,s,o,a]),{creditBalance:c}=Uu();return i?e.jsx(tq,{creditBalance:c}):c!=null&&c.balance_cents&&(c==null?void 0:c.balance_cents)>0&&n&&t?e.jsx(F8,{creditBalance:ZO(c.balance_cents/100,2),isMarketplaceAccount:r}):null};function Tx(){const{params:{projectId:t},path:s}=wi(),{data:n}=Eu(),{data:r}=kt(),a=aa(r),o=n==null?void 0:n.some(i=>i.id===t);return a&&(o||s===C.ProjectsSharedList)}const ds={modalTitle:"Create organization",conversionRadioLabel:"Convert personal account",creationRadioLabel:"Create new",showBenefitsToggleLabel:t=>`${t?"Hide":"Show"} plan benefits`,orgNameLabel:"Organization name",orgSubscriptionTypeLabel:"Select plan",conversionAlert:"When you convert your personal account, projects and billing are moved to the new organization. This action is permanent and cannot be undone. Your personal account switches to the Free Plan.",submitButton:"Create organization",success:"Your organization was successfully created.",error:"Something went wrong while creating the organization",integrations:{conversionInfo:"During the conversion, ownership of the integration with the GitHub App (as well as the API Keys created by this integration) and the Vercel integration will be changed from your current user to the new organization."},freeDisabled:"You already have a free organization. Upgrade to add more.",creditsLabel:"Transfer available credits to new org",seeFullPricing:"See full pricing details"},q8="_root_1pqtu_1",H8="_labelContainer_1pqtu_11",fy={root:q8,labelContainer:H8},V8=({control:t,freeOrgAllowed:s,shouldLinkPricingDetails:n})=>{const{trackUiInteraction:r}=P(),a=(c,l)=>{c.onChange(l),r(`create_org_modal_${jC(l)}_plan_clicked`)},o=kR(),i=m.useMemo(()=>{const c=o.filter(l=>!l.isLegacyPlan);return s?c:c.filter(l=>!mC(l.subscriptionType))},[s,o]);return e.jsx(U,{label:e.jsxs("div",{className:fy.labelContainer,children:[ds.orgSubscriptionTypeLabel,n&&e.jsx(R,{openInNewTab:!0,href:vm,icon:"external_link",children:ds.seeFullPricing})]}),children:e.jsx(Pe,{name:"subscription_type",control:t,render:({field:c})=>e.jsx("div",{className:fy.root,children:i.map(({subscriptionType:l,planName:d,isLegacyPlan:u,price:p,minimumSpend:h,featureGroups:g})=>e.jsx(IR,{planName:d,isLegacyPlan:u,planChangeData:{type:"select",subscriptionType:l,isSelected:c.value===l},price:p,minimumSpend:h,featureGroups:g,hideIncludedTitle:u,onChangePlanClick:f=>a(c,f)},l))})})})},W8="_root_1hj1f_1",G8="_root_disabled_1hj1f_8",K8="_inner_1hj1f_12",Q8="_list_1hj1f_25",Y8="_planNameBlock_1hj1f_30",J8="_selectCircle_1hj1f_35",Z8="_textBlock_1hj1f_39",X8="_planName_1hj1f_30",e7="_priceBlock_1hj1f_50",t7="_price_1hj1f_50",s7="_description_1hj1f_61",n7="_item_1hj1f_81",r7="_icon_1hj1f_86",a7="_icon_includedFeature_1hj1f_90",o7="_icon_missingFeature_1hj1f_94",i7="_hint_1hj1f_98",Wt={root:W8,root_disabled:G8,inner:K8,list:Q8,planNameBlock:Y8,selectCircle:J8,textBlock:Z8,planName:X8,priceBlock:e7,price:t7,description:s7,item:n7,icon:r7,icon_includedFeature:a7,icon_missingFeature:o7,hint:i7},_h=({planName:t,selected:s,pricePerMonth:n,features:r,disabled:a,disabledHint:o,onSelect:i})=>e.jsx("label",{className:V(Wt.root,{[Wt.root_disabled]:a}),children:e.jsx(fi,{checked:s,disabled:a,wide:!0,circle:({checked:c})=>e.jsxs("div",{className:Wt.inner,children:[e.jsxs("div",{className:Wt.planNameBlock,children:[e.jsx("div",{className:Wt.selectCircle,children:e.jsx(XO,{checked:c,disabled:a})}),e.jsxs("div",{className:Wt.textBlock,children:[e.jsxs("span",{className:Wt.planName,children:[t,a&&e.jsxs(e.Fragment,{children:[" ",e.jsx(Bs,{icon:"info",size:"l",className:Wt.hint,children:o})]})]}),e.jsxs("span",{className:Wt.priceBlock,children:[e.jsx("span",{className:Wt.price,children:us(n,!0)}),"/month"]})]})]}),e.jsx("ul",{className:Wt.list,"data-test-qa":"upgrade_modal_feature_list",children:r.map(({id:l,description:d,hint:u,missingFeature:p})=>e.jsxs("li",{className:Wt.item,children:[p?e.jsx(z,{name:"cross_small",size:18,className:V(Wt.icon,Wt.icon_missingFeature)}):e.jsx(z,{name:"check",size:18,className:V(Wt.icon,Wt.icon_includedFeature)})," ",e.jsxs("span",{children:[e.jsx("span",{className:Wt.description,children:d}),u&&e.jsxs(e.Fragment,{children:[" ",e.jsx(Bs,{icon:"info",size:"l",className:Wt.hint,children:u})]})]})]},l))})]}),onChange:c=>{c.target.checked&&i()}})}),c7="_selectPlanLabel_trqdd_1",l7="_radioGroup_trqdd_7",_y={selectPlanLabel:c7,radioGroup:l7},d7=3,bh=(t,s)=>m.useMemo(()=>s?t:t.slice(0,d7),[t,s]),u7=({control:t,freeOrgAllowed:s})=>{const{trackUiInteraction:n}=P(),r=e$(),[a,o]=m.useState(!1),i=bh(r.free_v2.usageMetrics,a),c=bh(r.launch.usageMetrics,a),l=bh(r.scale.usageMetrics,a),d=bh(r.business.usageMetrics,a);return e.jsx(U,{label:e.jsxs("div",{className:_y.selectPlanLabel,children:[e.jsx("div",{children:ds.orgSubscriptionTypeLabel}),e.jsx(R,{onClick:()=>o(u=>!u),children:ds.showBenefitsToggleLabel(a)})]}),children:e.jsx(Pe,{name:"subscription_type",control:t,render:({field:u})=>e.jsxs("div",{className:_y.radioGroup,children:[s&&e.jsx(_h,{planName:r.free_v2.title,selected:u.value==="free_v2",pricePerMonth:r.free_v2.cost??0,features:i,disabledHint:ds.freeDisabled,onSelect:()=>{n("create_org_modal_free_plan_clicked"),u.onChange("free_v2")}}),e.jsx(_h,{planName:r.launch.title,selected:u.value==="launch",pricePerMonth:r.launch.cost??0,features:c,onSelect:()=>{n("create_org_modal_launch_plan_clicked"),u.onChange("launch")}}),e.jsx(_h,{planName:r.scale.title,selected:u.value==="scale",pricePerMonth:r.scale.cost??0,features:l,onSelect:()=>{n("create_org_modal_scale_plan_clicked"),u.onChange("scale")}}),e.jsx(_h,{planName:r.business.title,selected:u.value==="business",pricePerMonth:r.business.cost??0,features:d,onSelect:()=>{n("create_org_modal_business_plan_clicked"),u.onChange("business")}})]})})})},h7=({control:t,freeOrgAllowed:s,shouldDisplayPricingV3:n,shouldLinkPricingDetails:r})=>n?e.jsx(V8,{control:t,freeOrgAllowed:s,shouldLinkPricingDetails:r}):e.jsx(u7,{control:t,freeOrgAllowed:s}),p7="_personalAccount_a46f3_1",m7="_arrowContainer_a46f3_16",g7="_conversionAlert_a46f3_25",f7="_stickyHeader_a46f3_29",ql={personalAccount:p7,arrowContainer:m7,conversionAlert:g7,stickyHeader:f7},Y_="#success_org_create",xh=64,Ax=({onSuccess:t,onRequestClose:s})=>{var y,S;const{trackUiInteraction:n}=P(),{shouldDisplayPricingV3:r}=t$(),a=s$(),{data:o}=kt(),{isFreeSubscription:i}=vC(),{data:c}=Fn(),{creditBalance:l,isLoading:d}=Uu(),u=aa(o),p=!i&&!u,h=m.useMemo(()=>{var k;const w=((k=o==null?void 0:o.firstName)==null?void 0:k.trim())||(o==null?void 0:o.email)||"";return c!=null&&c.some(N=>N.name===w)?"":w},[c,o]),g=$e({defaultValues:{user_id:o==null?void 0:o.id,name:h,subscription_type:r?"launch_v3":"launch",creation_type:p?"convert":"create",transfer_credits:!1}}),f=et(),_=g.watch("creation_type");m.useEffect(()=>{!d&&_&&n("create_org_modal_shown",{creditBalance:(l==null?void 0:l.balance_cents)??0,creationTypeField:_})},[d,_,n,l==null?void 0:l.balance_cents]);const b=async w=>{if(_==="create")try{const k=await a({organization:{name:w.name},subscription_type:w.subscription_type,transfer_credits:w.transfer_credits});t==null||t({type:"create"}),"session_url"in k?window.location.href=k.session_url:"id"in k?f.push(`${Q(C.OrgProjectsList,{orgId:k.id})}${Y_}`):Y(ds.error)}catch(k){s==null||s(),Y(k)}else try{const N=(await G.convertUserToOrg({name:w.name})).data.id;t==null||t({type:"convert",orgId:N});const D=Q(C.OrgProjectsList,{orgId:N});window.location.href=`${Wa}${D}${Y_}`}catch(k){Y(k)}},x=ge("new_users_get_orgs"),{currentData:j}=kC(),v=x&&!j&&!(c!=null&&c.some(w=>w.plan==="free_v2"||w.plan==="free"));return e.jsxs(ps,{modalProps:{isOpen:!0,title:ds.modalTitle,width:v?1100:r?950:850,onRequestClose:s,className:ql.stickyHeader},providerProps:g,onSubmit:b,children:[e.jsxs(De,{gaps:!0,children:[p&&e.jsx(fu,{fullWidth:!1,children:e.jsx(Pe,{name:"creation_type",control:g.control,render:({field:w})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(fi,{...w,value:"convert",checked:w.value==="convert",children:ds.conversionRadioLabel})}),e.jsx("div",{children:e.jsx(fi,{...w,value:"create",checked:w.value==="create",children:ds.creationRadioLabel})})]})})}),_==="create"?e.jsxs(e.Fragment,{children:[e.jsx(U,{label:ds.orgNameLabel,error:(y=g.formState.errors.name)==null?void 0:y.message,children:e.jsx(ie,{autoFocus:!0,...g.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:xh,message:`Name should be less than ${xh} characters`}})})}),e.jsx(h7,{control:g.control,freeOrgAllowed:v,shouldDisplayPricingV3:r,shouldLinkPricingDetails:!0})]}):e.jsxs("div",{children:[e.jsxs(fu,{children:[e.jsx(U,{label:"Personal account","data-qa":"personal-account-info",children:e.jsxs("div",{className:ql.personalAccount,children:[e.jsx("div",{children:o==null?void 0:o.displayName}),e.jsx(C6,{})]})}),e.jsx("div",{className:ql.arrowContainer,children:e.jsx(z,{name:"arrow_right",size:16})}),e.jsx(U,{label:"New organization name",error:(S=g.formState.errors.name)==null?void 0:S.message,children:e.jsx(ie,{autoFocus:!0,...g.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:xh,message:`Name should be less than ${xh} characters`}})})})]}),e.jsx(X,{className:ql.conversionAlert,children:ds.conversionAlert}),_==="convert"&&e.jsx(X,{appearance:"warning",className:ql.conversionAlert,children:ds.integrations.conversionInfo})]})]}),e.jsxs(Te,{sticky:!0,children:[e.jsxs(PR,{children:[_==="convert"&&e.jsx(R,{openInNewTab:!0,href:vm,icon:"external_link",children:ds.seeFullPricing}),_==="create"&&((l==null?void 0:l.balance_cents)??0)>0&&e.jsx(e.Fragment,{children:e.jsxs(as,{...g.register("transfer_credits"),onChange:w=>{g.setValue("transfer_credits",w),n("create_org_modal_transfer_credits_toggle_changed",{enabled:w})},children:[ds.creditsLabel," (",us((l==null?void 0:l.balance_cents)??0),")"]})})]}),e.jsx(qs,{}),e.jsx(Ce,{children:ds.submitButton})]})]})},_7="_logo_bmde7_1",b7={logo:_7};function x7(){const{trackUiInteraction:t}=P(),s=Tx(),{formatMessage:n}=hn();return m.useMemo(()=>({...{href:s?C.ProjectsSharedList:C.Root,onClick:()=>t("breadcrumbs_root_link_clicked")},children:e.jsx(z,{name:"neon",size:26,className:b7.logo}),ariaLabel:n({id:"QKRCCe",defaultMessage:[{type:0,value:"Neon logo"}]})}),[n,s,t])}function j7(t){const{data:s}=kt(),{data:n}=Fn(),{path:r}=wi(),{trackUiInteraction:a}=P(),{org:o,isLoading:i}=re(),{data:c}=Eu(),l=Tx();return m.useMemo(()=>{if(i||s===void 0)return{loading:!0};const d=aa(s);let u=C.ProjectsList;return o&&(u=Q(C.OrgProjectsList,{orgId:o.id})),l&&(u=C.ProjectsSharedList),d&&r===C.UserSettings&&(u=C.UserSettings),{selectedKey:u,onOpen:()=>a("breadcrumbs_account_menu_opened"),items:He([u===C.UserSettings&&{label:"Account settings",href:C.UserSettings,hidden:!0},!d&&{title:"Personal account",items:[{label:s.displayName,href:C.ProjectsList,onClick:()=>a("breadcrumbs_account_menu_personal_account_selected"),triggerSuffix:e.jsx(ry,{})}]},{title:"Organizations",items:He([...(n??[]).map(({id:p,name:h})=>({href:Q(C.OrgProjectsList,{orgId:p}),label:h,onClick:()=>a("breadcrumbs_account_menu_org_selected"),triggerSuffix:e.jsx(ry,{})})),{icon:"add",label:"Create organization",onClick:()=>{a("breadcrumbs_account_menu_create_orgs_clicked"),t()}}])},d&&(!!(c!=null&&c.length)||r===C.ProjectsSharedList)&&{title:"Shared projects",items:[{href:C.ProjectsSharedList,label:"Projects shared with me"}]}])}},[t,o,s,i,n,c,l,r,a])}function v7(t){const{params:s,path:n}=wi(),{trackUiInteraction:r}=P(),{data:a,isLoading:o}=n$(t),{data:i,isLoading:c}=ws(),{data:l}=Eu(),d=Tx();return m.useMemo(()=>{if(!t)return null;if(!o&&a){if(c||!i)return{href:Q(C.ProjectsItem,{projectId:a.id}),children:a.name};const u=({id:g,name:f})=>({href:s.branchId&&g!==t?Q(C.ProjectsItem,{projectId:g}):Q(n,{...s,projectId:g}),label:f,onClick:()=>r("breadcrumbs_project_menu_item_selected")}),p=i.map(u),h=(l==null?void 0:l.map(u))??[];return{filterable:!0,qa:"breadcrumbs_project_select",onOpen:()=>r("breadcrumbs_project_menu_opened"),items:d?h:h!=null&&h.length?[{title:"Your projects",items:p},{title:"Shared with you",items:h}]:p}}return{loading:!0}},[c,o,i,s,n,a,t,l,d,r])}const CI=m.memo(({projectId:t})=>{const{trackUiInteraction:s}=P(),n=x7(),r=it(Je.CreateOrg),a=j7(r.openModal),o=v7(t),i=m.useMemo(()=>He([n,a,o]),[n,a,o]);return e.jsxs(e.Fragment,{children:[e.jsx(b4,{items:i}),r.isModalOpen&&e.jsx(Ax,{onSuccess:c=>{c.type!=="convert"&&s("create_org_modal_confirmed")},onRequestClose:()=>{r.closeModal(),s("create_org_modal_dismissed")}})]})});CI.displayName="ConsoleBreadcrumbs";const jh=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},y7=new Set(["__proto__","prototype","constructor"]),J_=(t,s)=>{if(!jh(s))return t;t||(t={});for(const[n,r]of Object.entries(s)){if(y7.has(n))continue;const a=t[n];if(jh(a)&&jh(r))t[n]=J_(a,r);else{if(r===void 0)continue;jh(r)?t[n]=J_({},r):Array.isArray(r)?t[n]=[...r]:t[n]=r}}return t};function zm(t={},s={}){return J_(structuredClone(s),structuredClone(t))}const qm={apiUrl:"https://api.markprompt.com"},Nx=["signal","apiUrl","headers"],Ex={};async function w7(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Nx.includes(c))),{signal:a,...o}=r??{},i=zm(o,{...qm,...Ex});try{const c=await fetch(`${i.apiUrl}/messages/${t.messageId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,vote:Number.parseInt(t.feedback.vote)}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function S7(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Nx.includes(c))),{signal:a,...o}=r??{},i=zm(o,{...qm,...Ex});try{const c=await fetch(`${i.apiUrl}/threads/${t.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csat:t.csat}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function C7(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Nx.includes(c))),{signal:a,...o}=r??{},i=zm(o,{...qm,...Ex});try{const c=await fetch(`${i.apiUrl}/threads/${t.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csatReason:t.reason}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}function k7(){const t=m.useRef(void 0),s=m.useCallback(()=>{t.current&&(t.current.abort(),t.current=void 0)},[]);return{ref:t,abort:s}}function I7({feedbackOptions:t,projectKey:s,apiUrl:n}){if(!s)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to useFeedback.");const{ref:r,abort:a}=k7(),o=m.useCallback(async(l,d)=>{if(a(),!d)return;const u=new AbortController;r.current=u;try{await w7({feedback:l,messageId:d},s,{...t,signal:u.signal,apiUrl:n})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,t,n]),i=m.useCallback(async(l,d)=>{a();const u=new AbortController;r.current=u;try{await S7({threadId:l,csat:d},s,{...t,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,t,n]),c=m.useCallback(async(l,d)=>{a();const u=new AbortController;r.current=u;try{await C7({threadId:l,reason:d},s,{...t,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,t,n]);return{submitFeedback:o,submitThreadCSAT:i,submitThreadCSATReason:c,abort:a}}function P7(t){return t instanceof DOMException&&t.name==="AbortError"||t instanceof Error&&t.message.includes("AbortError")}function T7(t){var s,n,r,a,o;return Array.isArray(t)&&typeof((n=(s=t.at(0))==null?void 0:s.file)==null?void 0:n.path)=="string"&&typeof((o=(a=(r=t.at(0))==null?void 0:r.file)==null?void 0:a.source)==null?void 0:o.type)=="string"}function A7(t){let s,n,r,a,o,i,c;return l(),{feed:d,reset:l};function l(){s=!0,n="",r=0,a=-1,o=void 0,i=void 0,c=""}function d(p){n=n?n+p:p,s&&N7(n)&&(n=n.slice(kI.length)),s=!1;const h=n.length;let g=0,f=!1;for(;g<h;){f&&(n[g]===`
`&&++g,f=!1);let _=-1,b=a,x;for(let j=r;_<0&&j<h;++j)x=n[j],x===":"&&b<0?b=j-g:x==="\r"?(f=!0,_=j-g):x===`
`&&(_=j-g);if(_<0){r=h-g,a=b;break}else r=0,a=-1;u(n,g,b,_),g+=_+1}g===h?n="":g>0&&(n=n.slice(g))}function u(p,h,g,f){if(f===0){c.length>0&&(t({type:"event",id:o,event:i||void 0,data:c.slice(0,-1)}),c="",o=void 0),i=void 0;return}const _=g<0,b=p.slice(h,h+(_?f:g));let x=0;_?x=f:p[h+g+1]===" "?x=g+2:x=g+1;const j=h+x,v=f-x,y=p.slice(j,j+v).toString();if(b==="data")c+=y?"".concat(y,`
`):`
`;else if(b==="event")i=y;else if(b==="id"&&!y.includes("\0"))o=y;else if(b==="retry"){const S=parseInt(y,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const kI=[239,187,191];function N7(t){return kI.every((s,n)=>t.charCodeAt(n)===s)}class by extends TransformStream{constructor(){let s;super({start(n){s=A7(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){s.feed(n)}})}}const E7=["additionalMetadata","agentSettings","allowFollowUpQuestions","apiUrl","assistantId","assistantVersionId","context","debug","doNotInjectContext","excludeFromInsights","frequencyPenalty","headers","iDontKnowMessage","jsonOutput","maxTokens","model","outputFormat","policiesOptions","messageTagOptions","presencePenalty","redact","retrievalOptions","sectionsMatchCount","sectionsMatchThreshold","skipSystemInstructions","stream","systemPrompt","temperature","threadId","threadMetadata","toolChoice","tools","topP","useReranker"],O7=t=>E7.includes(t);function yo(t){if(t!=null&&t.aborted)throw t.reason instanceof Error?t.reason:new Error(typeof t.reason=="string"?t.reason:"Aborted")}const $7=(t,s)=>{try{const n=t.headers.get(s);if(n){const r=new Uint8Array(n.split(",").map(Number)),o=new TextDecoder().decode(r);return JSON.parse(o)}}catch{}};function vh(t){return typeof t=="object"&&t!==null&&("threadId"in t&&typeof t.threadId=="string"||"messageId"in t&&typeof t.messageId=="string"||"references"in t&&T7(t.references))}function L7(t){return typeof t=="object"&&t!==null&&"object"in t&&t.object==="chat.completion"}const R7=t=>typeof t=="object"&&t!==null&&"content"in t&&(typeof t.content=="string"||t.content===null)&&"role"in t&&t.role==="assistant",II=t=>typeof t=="object"&&t!==null&&"id"in t&&typeof t.id=="string"&&"type"in t&&t.type==="function"&&"function"in t,xy=t=>Array.isArray(t)&&t.every(II),M7=t=>typeof t=="object"&&t!==null&&"object"in t&&typeof t.object=="string"&&t.object==="chat.completion.chunk",B7=t=>typeof t=="object"&&t!==null&&"text"in t,D7={frequencyPenalty:0,iDontKnowMessage:"Sorry, I am not sure how to answer that.",model:"gpt-4o",presencePenalty:0,temperature:.1,topP:1,stream:!0,outputFormat:"markdown"};async function*U7(t,s,n={}){if(!s)throw new Error("A projectKey is required.");if(!t||!Array.isArray(t)||t.length===0)return;const r=Object.fromEntries(Object.entries(n).filter(([L])=>O7(L))),{signal:a,tools:o,toolChoice:i,additionalMetadata:c,...l}=r,{debug:d,policiesOptions:u,messageTagOptions:p,retrievalOptions:h,...g}=zm({...l,tools:o==null?void 0:o.map(L=>({function:L.function,type:L.type})),toolChoice:i},{...qm,...r.assistantId?{}:D7}),f=crypto.randomUUID(),_=async function*(){let L;try{L=await fetch(`${g.apiUrl}/chat/events?messageId=${f}&projectKey=${s}`,{method:"GET",headers:new Headers({"X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),signal:a})}catch(W){console.error("Caught error fetching events",W);return}if(yo(n.signal),!L.ok||!L.body){console.error("Failed to fetch events",L);return}const H=L.body.pipeThrough(new TextDecoderStream).pipeThrough(new by).getReader();for(;;){yo(n.signal);const{value:W,done:$}=await H.read();if($)return;if(!W||W.data==="[DONE]")continue;let M;try{M=JSON.parse(W.data)}catch(se){console.error("Error parsing event",se);continue}typeof M.message=="string"&&(yield{event:M})}},b=async function*(){var ce,ee,K,ae;const L=t==null?void 0:t.slice(-1)[0],H=L==null?void 0:L.id,W=await fetch(`${g.apiUrl}/chat`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),body:JSON.stringify({projectKey:s,messages:t,debug:d,...g,policies:u,messageTags:p,retrieval:h,additionalMetadata:c,messageId:H}),signal:a}),$=$7(W,"x-markprompt-data");if(yo(n.signal),(ce=W.headers.get("Content-Type"))!=null&&ce.includes("application/json")){const le=await W.json();if(L7(le)&&vh($)&&((ee=le.choices)!=null&&ee[0]))return{...le.choices[0].message,...$};if(vh($)&&(yield $),B7(le)){yield{content:le.text,references:le.references,steps:le.steps,role:"assistant"};return}throw new Error("Malformed response from Markprompt API",{cause:le})}if(vh($)&&(yield $),!W.ok||!W.body){yo(n.signal);const le=await W.text();try{const ze=JSON.parse(le);if(ze&&typeof ze=="object"&&"error"in ze&&typeof ze.error=="string")throw new Error(ze.error)}catch{}throw new Error(le,{cause:{status:W.status,statusText:W.statusText}})}yo(n.signal);const M={},se=W.body.pipeThrough(new TextDecoderStream).pipeThrough(new by).getReader();for(;;){yo(n.signal);const{value:le,done:ze}=await se.read();if(ze)return;if(!le||le.data==="[DONE]")continue;const Ot=JSON.parse(le.data);if(!M7(Ot))throw new Error("Malformed response from Markprompt API",{cause:Ot});xU(M,(ae=(K=Ot.choices)==null?void 0:K[0])==null?void 0:ae.delta,F7),yield structuredClone(M)}},x=_(),j=b(),v={next:async()=>{const{value:L,done:H}=await x.next();return{type:"events",value:L,done:H}}},y={next:async()=>{const{value:L,done:H}=await j.next();return{type:"chat",value:L,done:H}}};let S;const w=[];let k,N,D=!1;for(;;){yo(n.signal),k=k??y.next(),N=N??(D?void 0:v.next());const L=await Promise.race([k,...N?[N]:[]]);if(L.type==="events"){N=void 0,L.value&&(w.push(L.value.event),yield structuredClone({events:w})),L.done&&(D=!0);continue}k=void 0;const H=L.value;if(H){if(vh(H)){S=H,yield S;continue}if(L.done&&R7(H)&&S)return{...H,...S};yield H}else if(L.done)return}}function F7(t,s){if(t==="assistant"&&s==="assistant")return"assistant";if(typeof t=="string"&&typeof s=="string")return t+s;if(typeof t=="string"&&!s)return t;if(typeof s=="string"&&!t)return s}const z7={},jy=t=>{let s;const n=new Set,r=(u,p)=>{const h=typeof u=="function"?u(s):u;if(!Object.is(h,s)){const g=s;s=p??(typeof h!="object"||h===null)?h:Object.assign({},s,h),n.forEach(f=>f(s,g))}},a=()=>s,l={setState:r,getState:a,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(z7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=s=t(r,a,l);return l},q7=t=>t?jy(t):jy,{useDebugValue:H7}=Oa,{useSyncExternalStoreWithSelector:V7}=r$,W7=t=>t;function G7(t,s=W7,n){const r=V7(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,n);return H7(r),r}const K7={};function PI(t,s){let n;try{n=t()}catch{return}return{getItem:a=>{var o;const i=l=>l===null?null:JSON.parse(l,s==null?void 0:s.reviver),c=(o=n.getItem(a))!=null?o:null;return c instanceof Promise?c.then(i):i(c)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,s==null?void 0:s.replacer)),removeItem:a=>n.removeItem(a)}}const _u=t=>s=>{try{const n=t(s);return n instanceof Promise?n:{then(r){return _u(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return _u(r)(n)}}}},Q7=(t,s)=>(n,r,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...s},i=!1;const c=new Set,l=new Set;let d;try{d=o.getStorage()}catch{}if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},r,a);const u=_u(o.serialize),p=()=>{const b=o.partialize({...r()});let x;const j=u({state:b,version:o.version}).then(v=>d.setItem(o.name,v)).catch(v=>{x=v});if(x)throw x;return j},h=a.setState;a.setState=(b,x)=>{h(b,x),p()};const g=t((...b)=>{n(...b),p()},r,a);let f;const _=()=>{var b;if(!d)return;i=!1,c.forEach(j=>j(r()));const x=((b=o.onRehydrateStorage)==null?void 0:b.call(o,r()))||void 0;return _u(d.getItem.bind(d))(o.name).then(j=>{if(j)return o.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate)return o.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var v;return f=o.merge(j,(v=r())!=null?v:g),n(f,!0),p()}).then(()=>{x==null||x(f,void 0),i=!0,l.forEach(j=>j(f))}).catch(j=>{x==null||x(void 0,j)})};return a.persist={setOptions:b=>{o={...o,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>_(),hasHydrated:()=>i,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),f||g},Y7=(t,s)=>(n,r,a)=>{let o={storage:PI(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...s},i=!1;const c=new Set,l=new Set;let d=o.storage;if(!d)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(..._)},r,a);const u=()=>{const _=o.partialize({...r()});return d.setItem(o.name,{state:_,version:o.version})},p=a.setState;a.setState=(_,b)=>{p(_,b),u()};const h=t((..._)=>{n(..._),u()},r,a);a.getInitialState=()=>h;let g;const f=()=>{var _,b;if(!d)return;i=!1,c.forEach(j=>{var v;return j((v=r())!=null?v:h)});const x=((b=o.onRehydrateStorage)==null?void 0:b.call(o,(_=r())!=null?_:h))||void 0;return _u(d.getItem.bind(d))(o.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate)return[!0,o.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var v;const[y,S]=j;if(g=o.merge(S,(v=r())!=null?v:h),n(g,!0),y)return u()}).then(()=>{x==null||x(g,void 0),g=r(),i=!0,l.forEach(j=>j(g))}).catch(j=>{x==null||x(void 0,j)})};return a.persist={setOptions:_=>{o={...o,..._},_.storage&&(d=_.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:_=>(c.add(_),()=>{c.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},o.skipHydration||f(),g||h},J7=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((K7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Q7(t,s)):Y7(t,s),Z7=J7;var TI=Symbol.for("immer-nothing"),vy=Symbol.for("immer-draftable"),Fs=Symbol.for("immer-state");function Ln(t,...s){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Yc=Object.getPrototypeOf;function Jc(t){return!!t&&!!t[Fs]}function bi(t){var s;return t?AI(t)||Array.isArray(t)||!!t[vy]||!!((s=t.constructor)!=null&&s[vy])||Vm(t)||Wm(t):!1}var X7=Object.prototype.constructor.toString();function AI(t){if(!t||typeof t!="object")return!1;const s=Yc(t);if(s===null)return!0;const n=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===X7}function Xp(t,s){Hm(t)===0?Reflect.ownKeys(t).forEach(n=>{s(n,t[n],t)}):t.forEach((n,r)=>s(r,n,t))}function Hm(t){const s=t[Fs];return s?s.type_:Array.isArray(t)?1:Vm(t)?2:Wm(t)?3:0}function Z_(t,s){return Hm(t)===2?t.has(s):Object.prototype.hasOwnProperty.call(t,s)}function NI(t,s,n){const r=Hm(t);r===2?t.set(s,n):r===3?t.add(n):t[s]=n}function e9(t,s){return t===s?t!==0||1/t===1/s:t!==t&&s!==s}function Vm(t){return t instanceof Map}function Wm(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function X_(t,s){if(Vm(t))return new Map(t);if(Wm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=AI(t);if(s===!0||s==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Fs];let a=Reflect.ownKeys(r);for(let o=0;o<a.length;o++){const i=a[o],c=r[i];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[i]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[i]})}return Object.create(Yc(t),r)}else{const r=Yc(t);if(r!==null&&n)return{...t};const a=Object.create(r);return Object.assign(a,t)}}function Ox(t,s=!1){return Gm(t)||Jc(t)||!bi(t)||(Hm(t)>1&&(t.set=t.add=t.clear=t.delete=t9),Object.freeze(t),s&&Object.entries(t).forEach(([n,r])=>Ox(r,!0))),t}function t9(){Ln(2)}function Gm(t){return Object.isFrozen(t)}var s9={};function xi(t){const s=s9[t];return s||Ln(0,t),s}var bu;function EI(){return bu}function n9(t,s){return{drafts_:[],parent_:t,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yy(t,s){s&&(xi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=s)}function eb(t){tb(t),t.drafts_.forEach(r9),t.drafts_=null}function tb(t){t===bu&&(bu=t.parent_)}function wy(t){return bu=n9(bu,t)}function r9(t){const s=t[Fs];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function Sy(t,s){s.unfinalizedDrafts_=s.drafts_.length;const n=s.drafts_[0];return t!==void 0&&t!==n?(n[Fs].modified_&&(eb(s),Ln(4)),bi(t)&&(t=em(s,t),s.parent_||tm(s,t)),s.patches_&&xi("Patches").generateReplacementPatches_(n[Fs].base_,t,s.patches_,s.inversePatches_)):t=em(s,n,[]),eb(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),t!==TI?t:void 0}function em(t,s,n){if(Gm(s))return s;const r=s[Fs];if(!r)return Xp(s,(a,o)=>Cy(t,r,s,a,o,n)),s;if(r.scope_!==t)return s;if(!r.modified_)return tm(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let o=a,i=!1;r.type_===3&&(o=new Set(a),a.clear(),i=!0),Xp(o,(c,l)=>Cy(t,r,a,c,l,n,i)),tm(t,a,!1),n&&t.patches_&&xi("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Cy(t,s,n,r,a,o,i){if(Jc(a)){const c=o&&s&&s.type_!==3&&!Z_(s.assigned_,r)?o.concat(r):void 0,l=em(t,a,c);if(NI(n,r,l),Jc(l))t.canAutoFreeze_=!1;else return}else i&&n.add(a);if(bi(a)&&!Gm(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;em(t,a),(!s||!s.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tm(t,a)}}function tm(t,s,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ox(s,n)}function a9(t,s){const n=Array.isArray(t),r={type_:n?1:0,scope_:s?s.scope_:EI(),modified_:!1,finalized_:!1,assigned_:{},parent_:s,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=$x;n&&(a=[r],o=xu);const{revoke:i,proxy:c}=Proxy.revocable(a,o);return r.draft_=c,r.revoke_=i,c}var $x={get(t,s){if(s===Fs)return t;const n=Wo(t);if(!Z_(n,s))return o9(t,n,s);const r=n[s];return t.finalized_||!bi(r)?r:r===Fg(t.base_,s)?(zg(t),t.copy_[s]=nb(r,t)):r},has(t,s){return s in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,s,n){const r=OI(Wo(t),s);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=Fg(Wo(t),s),o=a==null?void 0:a[Fs];if(o&&o.base_===n)return t.copy_[s]=n,t.assigned_[s]=!1,!0;if(e9(n,a)&&(n!==void 0||Z_(t.base_,s)))return!0;zg(t),sb(t)}return t.copy_[s]===n&&(n!==void 0||s in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[s])||(t.copy_[s]=n,t.assigned_[s]=!0),!0},deleteProperty(t,s){return Fg(t.base_,s)!==void 0||s in t.base_?(t.assigned_[s]=!1,zg(t),sb(t)):delete t.assigned_[s],t.copy_&&delete t.copy_[s],!0},getOwnPropertyDescriptor(t,s){const n=Wo(t),r=Reflect.getOwnPropertyDescriptor(n,s);return r&&{writable:!0,configurable:t.type_!==1||s!=="length",enumerable:r.enumerable,value:n[s]}},defineProperty(){Ln(11)},getPrototypeOf(t){return Yc(t.base_)},setPrototypeOf(){Ln(12)}},xu={};Xp($x,(t,s)=>{xu[t]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}});xu.deleteProperty=function(t,s){return xu.set.call(this,t,s,void 0)};xu.set=function(t,s,n){return $x.set.call(this,t[0],s,n,t[0])};function Fg(t,s){const n=t[Fs];return(n?Wo(n):t)[s]}function o9(t,s,n){var a;const r=OI(s,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function OI(t,s){if(!(s in t))return;let n=Yc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,s);if(r)return r;n=Yc(n)}}function sb(t){t.modified_||(t.modified_=!0,t.parent_&&sb(t.parent_))}function zg(t){t.copy_||(t.copy_=X_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var i9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(s,n,r)=>{if(typeof s=="function"&&typeof n!="function"){const o=n;n=s;const i=this;return function(l=o,...d){return i.produce(l,u=>n.call(this,u,...d))}}typeof n!="function"&&Ln(6),r!==void 0&&typeof r!="function"&&Ln(7);let a;if(bi(s)){const o=wy(this),i=nb(s,void 0);let c=!0;try{a=n(i),c=!1}finally{c?eb(o):tb(o)}return yy(o,r),Sy(a,o)}else if(!s||typeof s!="object"){if(a=n(s),a===void 0&&(a=s),a===TI&&(a=void 0),this.autoFreeze_&&Ox(a,!0),r){const o=[],i=[];xi("Patches").generateReplacementPatches_(s,a,o,i),r(o,i)}return a}else Ln(1,s)},this.produceWithPatches=(s,n)=>{if(typeof s=="function")return(i,...c)=>this.produceWithPatches(i,l=>s(l,...c));let r,a;return[this.produce(s,n,(i,c)=>{r=i,a=c}),r,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){bi(t)||Ln(8),Jc(t)&&(t=c9(t));const s=wy(this),n=nb(t,void 0);return n[Fs].isManual_=!0,tb(s),n}finishDraft(t,s){const n=t&&t[Fs];(!n||!n.isManual_)&&Ln(9);const{scope_:r}=n;return yy(r,s),Sy(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,s){let n;for(n=s.length-1;n>=0;n--){const a=s[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(s=s.slice(n+1));const r=xi("Patches").applyPatches_;return Jc(t)?r(t,s):this.produce(t,a=>r(a,s))}};function nb(t,s){const n=Vm(t)?xi("MapSet").proxyMap_(t,s):Wm(t)?xi("MapSet").proxySet_(t,s):a9(t,s);return(s?s.scope_:EI()).drafts_.push(n),n}function c9(t){return Jc(t)||Ln(10,t),$I(t)}function $I(t){if(!bi(t)||Gm(t))return t;const s=t[Fs];let n;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,n=X_(t,s.scope_.immer_.useStrictShallowCopy_)}else n=X_(t,!0);return Xp(n,(r,a)=>{NI(n,r,$I(a))}),s&&(s.finalized_=!1),n}var zs=new i9,l9=zs.produce;zs.produceWithPatches.bind(zs);zs.setAutoFreeze.bind(zs);zs.setUseStrictShallowCopy.bind(zs);zs.applyPatches.bind(zs);zs.createDraft.bind(zs);zs.finishDraft.bind(zs);const d9=t=>(s,n,r)=>(r.setState=(a,o,...i)=>{const c=typeof a=="function"?l9(a):a;return s(c,o,...i)},t(r.setState,n,r)),u9=d9,ky=async t=>{const s=Uint8Array.from(atob(t),n=>n.charCodeAt(0));return await globalThis.crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!0,["encrypt","decrypt"])},h9=(t,s)=>{const n=new Uint8Array(s.length+t.byteLength);return n.set(s,0),n.set(new Uint8Array(t),s.length),btoa(String.fromCharCode(...n))},p9=t=>{const s=atob(t),n=new Uint8Array([...s].map(o=>o.charCodeAt(0))),r=n.slice(0,12);return{ciphertext:n.slice(12).buffer,iv:r}},m9=async(t,s)=>{const n=globalThis.crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(t),a=await globalThis.crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{iv:n,ciphertext:a}},g9=async(t,s,n)=>{const r=await globalThis.crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,t);return new TextDecoder().decode(r)},f9=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>nn(async()=>{const{default:r}=await Promise.resolve().then(()=>jl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)};class Lx extends Error{constructor(s,n="FunctionsError",r){super(s),this.name=n,this.context=r}}class _9 extends Lx{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class b9 extends Lx{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class x9 extends Lx{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var rb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(rb||(rb={}));var j9=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class v9{constructor(s,{headers:n={},customFetch:r,region:a=rb.Any}={}){this.url=s,this.headers=n,this.region=a,this.fetch=f9(r)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var r;return j9(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:i}=n;let c={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(c["x-region"]=l);let d;i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(c["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(c["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${s}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:d}).catch(f=>{throw new _9(f)}),p=u.headers.get("x-relay-error");if(p&&p==="true")throw new b9(u);if(!u.ok)throw new x9(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return h==="application/json"?g=yield u.json():h==="application/octet-stream"?g=yield u.blob():h==="text/event-stream"?g=u:h==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(a){return{data:null,error:a}}})}}var Hl={},Wi={},Gi={},Ki={},Qi={},Yi={},y9=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zc=y9();const w9=Zc.fetch,LI=Zc.fetch.bind(Zc),RI=Zc.Headers,S9=Zc.Request,C9=Zc.Response,jl=Object.freeze(Object.defineProperty({__proto__:null,Headers:RI,Request:S9,Response:C9,default:LI,fetch:w9},Symbol.toStringTag,{value:"Module"})),k9=_R(jl);var yh={},Iy;function I9(){if(Iy)return yh;Iy=1,Object.defineProperty(yh,"__esModule",{value:!0});let t=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}};return yh.default=t,yh}var Py;function MI(){if(Py)return Yi;Py=1;var t=Yi&&Yi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Yi,"__esModule",{value:!0});const s=t(k9),n=t(I9());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let l=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,p,h;let g=null,f=null,_=null,b=d.status,x=d.statusText;if(d.ok){if(this.method!=="HEAD"){const S=await d.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=S:f=JSON.parse(S))}const v=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),y=(p=d.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");v&&y&&y.length>1&&(_=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(g={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,_=null,b=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await d.text();try{g=JSON.parse(v),Array.isArray(g)&&d.status===404&&(f=[],g=null,b=200,x="OK")}catch{d.status===404&&v===""?(b=204,x="No Content"):g={message:v}}if(g&&this.isMaybeSingle&&(!((h=g==null?void 0:g.details)===null||h===void 0)&&h.includes("0 rows"))&&(g=null,b=200,x="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:f,count:_,status:b,statusText:x}});return this.shouldThrowOnError||(l=l.catch(d=>{var u,p,h;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(p=d==null?void 0:d.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,i)}}return Yi.default=r,Yi}var Ty;function BI(){if(Ty)return Qi;Ty=1;var t=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});const s=t(MI());class n extends s.default{select(a){let o=!1;const i=(a??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:i,foreignTable:c,referencedTable:l=c}={}){const d=l?`${l}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:i=o}={}){const c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(c,`${a}`),this}range(a,o,{foreignTable:i,referencedTable:c=i}={}){const l=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(d,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:i=!1,buffers:c=!1,wal:l=!1,format:d="text"}={}){var u;const p=[a?"analyze":null,o?"verbose":null,i?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${p};`,d==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Qi.default=n,Qi}var Ay;function Rx(){if(Ay)return Ki;Ay=1;var t=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});const s=t(BI());class n extends s.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const i=Array.from(new Set(o)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:i,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${l}fts${d}.${o}`),this}match(a){return Object.entries(a).forEach(([o,i])=>{this.url.searchParams.append(o,`eq.${i}`)}),this}not(a,o,i){return this.url.searchParams.append(a,`not.${o}.${i}`),this}or(a,{foreignTable:o,referencedTable:i=o}={}){const c=i?`${i}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,o,i){return this.url.searchParams.append(a,`${o}.${i}`),this}}return Ki.default=n,Ki}var Ny;function DI(){if(Ny)return Gi;Ny=1;var t=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});const s=t(Rx());class n{constructor(a,{headers:o={},schema:i,fetch:c}){this.url=a,this.headers=o,this.schema=i,this.fetch=c}select(a,{head:o=!1,count:i}={}){const c=o?"HEAD":"GET";let l=!1;const d=(a??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:i=!0}={}){const c="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(a)){const d=a.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:i=!1,count:c,defaultToNull:l=!0}={}){const d="POST",u=[`resolution=${i?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),c&&u.push(`count=${c}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(a)){const p=a.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(p.length>0){const h=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const i="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),this.headers.Prefer=c.join(","),new s.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",i=[];return a&&i.push(`count=${a}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Gi.default=n,Gi}var Vl={},Wl={},Ey;function P9(){return Ey||(Ey=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.version=void 0,Wl.version="0.0.0-automated"),Wl}var Oy;function T9(){if(Oy)return Vl;Oy=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.DEFAULT_HEADERS=void 0;const t=P9();return Vl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Vl}var $y;function A9(){if($y)return Wi;$y=1;var t=Wi&&Wi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Wi,"__esModule",{value:!0});const s=t(DI()),n=t(Rx()),r=T9();class a{constructor(i,{headers:c={},schema:l,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=l,this.fetch=d}from(i){const c=new URL(`${this.url}/${i}`);return new s.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,c={},{head:l=!1,get:d=!1,count:u}={}){let p;const h=new URL(`${this.url}/rpc/${i}`);let g;l||d?(p=l?"HEAD":"GET",Object.entries(c).filter(([_,b])=>b!==void 0).map(([_,b])=>[_,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([_,b])=>{h.searchParams.append(_,b)})):(p="POST",g=c);const f=Object.assign({},this.headers);return u&&(f.Prefer=`count=${u}`),new n.default({method:p,url:h,headers:f,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return Wi.default=a,Wi}var Ly;function N9(){return Ly||(Ly=1,function(t){var s=Hl&&Hl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;var n=A9();Object.defineProperty(t,"PostgrestClient",{enumerable:!0,get:function(){return s(n).default}});var r=DI();Object.defineProperty(t,"PostgrestQueryBuilder",{enumerable:!0,get:function(){return s(r).default}});var a=Rx();Object.defineProperty(t,"PostgrestFilterBuilder",{enumerable:!0,get:function(){return s(a).default}});var o=BI();Object.defineProperty(t,"PostgrestTransformBuilder",{enumerable:!0,get:function(){return s(o).default}});var i=MI();Object.defineProperty(t,"PostgrestBuilder",{enumerable:!0,get:function(){return s(i).default}})}(Hl)),Hl}var E9=N9();const O9=bR(E9),{PostgrestClient:$9,PostgrestQueryBuilder:pIe,PostgrestFilterBuilder:mIe,PostgrestTransformBuilder:gIe,PostgrestBuilder:fIe}=O9,L9="2.10.2",R9={"X-Client-Info":`realtime-js/${L9}`},M9="1.0.0",UI=1e4,B9=1e3;var zc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zc||(zc={}));var Os;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Os||(Os={}));var En;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(En||(En={}));var ab;(function(t){t.websocket="websocket"})(ab||(ab={}));var Jo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jo||(Jo={}));class D9{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),r=new TextDecoder;return this._decodeBroadcast(s,n,r)}_decodeBroadcast(s,n,r){const a=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const c=r.decode(s.slice(i,i+a));i=i+a;const l=r.decode(s.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(s.slice(i,s.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class FI{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(dt||(dt={}));const Ry=(t,s,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(s).reduce((o,i)=>(o[i]=U9(i,t,s,a),o),{})},U9=(t,s,n,r)=>{const a=s.find(c=>c.name===t),o=a==null?void 0:a.type,i=n[t];return o&&!r.includes(o)?zI(o,i):ob(i)},zI=(t,s)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return H9(s,n)}switch(t){case dt.bool:return F9(s);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return z9(s);case dt.json:case dt.jsonb:return q9(s);case dt.timestamp:return V9(s);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return ob(s);default:return ob(s)}},ob=t=>t,F9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},z9=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},q9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},H9=(t,s)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(c=>zI(s,c))}return t},V9=t=>typeof t=="string"?t.replace(" ","T"):t,qI=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")};class qg{constructor(s,n,r={},a=UI){this.channel=s,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var r;return this._hasReceived(s)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(r=>r.status===s).forEach(r=>r.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var My;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(My||(My={}));class Qd{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qd.syncState(this.state,a,o,i),this.pendingDiffs.forEach(l=>{this.state=Qd.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qd.syncDiff(this.state,a,o,i),c())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,r,a){const o=this.cloneDeep(s),i=this.transformState(n),c={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const p=o[d];if(p){const h=u.map(b=>b.presence_ref),g=p.map(b=>b.presence_ref),f=u.filter(b=>g.indexOf(b.presence_ref)<0),_=p.filter(b=>h.indexOf(b.presence_ref)<0);f.length>0&&(c[d]=f),_.length>0&&(l[d]=_)}else c[d]=u}),this.syncDiff(o,{joins:c,leaves:l},r,a)}static syncDiff(s,n,r,a){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(c,l)=>{var d;const u=(d=s[c])!==null&&d!==void 0?d:[];if(s[c]=this.cloneDeep(l),u.length>0){const p=s[c].map(g=>g.presence_ref),h=u.filter(g=>p.indexOf(g.presence_ref)<0);s[c].unshift(...h)}r(c,u,l)}),this.map(i,(c,l)=>{let d=s[c];if(!d)return;const u=l.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),s[c]=d,a(c,d,l),d.length===0&&delete s[c]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(r=>n(r,s[r]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,r)=>{const a=s[r];return"metas"in a?n[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=a,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var By;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(By||(By={}));var Dy;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Dy||(Dy={}));var Uy;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Uy||(Uy={}));class Mx{constructor(s,n={config:{}},r){this.topic=s,this.params=n,this.socket=r,this.bindings={},this.state=Os.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qg(this,En.join,this.params,this.timeout),this.rejoinTimer=new FI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Os.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Os.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Os.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Os.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Qd(this),this.broadcastEndpointURL=qI(this.socket.endPoint)+"/api/broadcast"}subscribe(s,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:c}}=this.params;this._onError(u=>s&&s("CHANNEL_ERROR",u)),this._onClose(()=>s&&s("CLOSED"));const l={},d={broadcast:o,presence:i,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var p;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){s&&s("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,g=(p=h==null?void 0:h.length)!==null&&p!==void 0?p:0,f=[];for(let _=0;_<g;_++){const b=h[_],{filter:{event:x,schema:j,table:v,filter:y}}=b,S=u&&u[_];if(S&&S.event===x&&S.schema===j&&S.table===v&&S.filter===y)f.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),s&&s("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,s&&s("SUBSCRIBED");return}}).receive("error",u=>{s&&s("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{s&&s("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,r){return this._on(s,n,r)}async send(s,n={}){var r,a;if(!this._canPush()&&s.type==="broadcast"){const{event:o,payload:i}=s,c={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=l.body)===null||a===void 0?void 0:a.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,c,l;const d=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((l=(c=(i=this.params)===null||i===void 0?void 0:i.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=Os.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new qg(this,En.leave,{},s);a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(s,n,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),i=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),i}_push(s,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new qg(this,s,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(s,n,r){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,r){var a,o;const i=s.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=En;if(r&&[c,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var f,_,b;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(_=g.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(g=>g.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(g=>{var f,_,b,x,j,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const y=g.id,S=(f=g.filter)===null||f===void 0?void 0:f.event;return y&&((_=n.ids)===null||_===void 0?void 0:_.includes(y))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const y=(j=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return y==="*"||y===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof h=="object"&&"ids"in h){const f=h.data,{schema:_,table:b,commit_timestamp:x,type:j,errors:v}=f;h=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:x,eventType:j,new:{},old:{},errors:v}),this._getPayloadRecords(f))}g.callback(h,r)})}_isClosed(){return this.state===Os.closed}_isJoined(){return this.state===Os.joined}_isJoining(){return this.state===Os.joining}_isLeaving(){return this.state===Os.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,r){const a=s.toLocaleLowerCase(),o={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(s,n){const r=s.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Mx.isEqual(a.filter,n))}),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const r in s)if(s[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(En.close,{},s)}_onError(s){this._on(En.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Os.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=Ry(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=Ry(s.columns,s.old_record)),n}}const W9=()=>{},G9=typeof WebSocket<"u";class K9{constructor(s,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=R9,this.params={},this.timeout=UI,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=W9,this.conn=null,this.sendBuffer=[],this.serializer=new D9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...c)=>nn(async()=>{const{default:l}=await Promise.resolve().then(()=>jl);return{default:l}},void 0).then(({default:l})=>l(...c)):i=fetch,(...c)=>i(...c)},this.endPoint=`${s}/${ab.websocket}`,this.httpEndpoint=qI(s),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;a&&(this.accessToken=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new FI(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(G9){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Q9(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),nn(async()=>{const{default:s}=await import("./browser-C7egFT2Y.js").then(n=>n.b);return{default:s}},__vite__mapDeps([0,1])).then(({default:s})=>{this.conn=new s(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(s,n){this.conn&&(this.conn.onclose=function(){},s?this.conn.close(s,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),s}log(s,n,r){this.logger(s,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zc.connecting:return Jo.Connecting;case zc.open:return Jo.Open;case zc.closing:return Jo.Closing;default:return Jo.Closed}}isConnected(){return this.connectionState()===Jo.Open}channel(s,n={config:{}}){const r=new Mx(`realtime:${s}`,n,this);return this.channels.push(r),r}push(s){const{topic:n,event:r,payload:a,ref:o}=s,i=()=>{this.encode(s,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(s){this.accessToken=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(En.access_token,{access_token:s})})}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(r=>r.topic===s&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n._joinRef()!==s._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:M9}))}_onConnMessage(s){this.decode(s.data,n=>{let{topic:r,event:a,payload:o,ref:i}=n;(i&&i===this.pendingHeartbeatRef||a===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${a} ${i&&"("+i+")"||""}`,o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,o,i)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(s=>s())}_onConnClose(s){this.log("transport","close",s),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(s))}_onConnError(s){this.log("transport",s.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(s))}_triggerChanError(){this.channels.forEach(s=>s._trigger(En.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const r=s.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${s}${r}${a}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_sendHeartbeat(){var s;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(s=this.conn)===null||s===void 0||s.close(B9,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Q9{constructor(s,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=zc.connecting,this.send=()=>{},this.url=null,this.url=s,this.close=r.close}}class Bx extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function ts(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Y9 extends Bx{constructor(s,n){super(s),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fy extends Bx{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var J9=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const HI=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>nn(async()=>{const{default:r}=await Promise.resolve().then(()=>jl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},Z9=()=>J9(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nn(()=>Promise.resolve().then(()=>jl),void 0)).Response:Response});var vl=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const Hg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),X9=(t,s)=>vl(void 0,void 0,void 0,function*(){const n=yield Z9();t instanceof n?t.json().then(r=>{s(new Y9(Hg(r),t.status||500))}).catch(r=>{s(new Fy(Hg(r),r))}):s(new Fy(Hg(t),t))}),eH=(t,s,n,r)=>{const a={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};function Km(t,s,n,r,a,o){return vl(this,void 0,void 0,function*(){return new Promise((i,c)=>{t(n,eH(s,r,a,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>X9(l,c))})})}function ib(t,s,n,r){return vl(this,void 0,void 0,function*(){return Km(t,"GET",s,n,r)})}function Ta(t,s,n,r,a){return vl(this,void 0,void 0,function*(){return Km(t,"POST",s,r,a,n)})}function tH(t,s,n,r,a){return vl(this,void 0,void 0,function*(){return Km(t,"PUT",s,r,a,n)})}function VI(t,s,n,r,a){return vl(this,void 0,void 0,function*(){return Km(t,"DELETE",s,r,a,n)})}var Ks=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const sH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nH{constructor(s,n={},r,a){this.url=s,this.headers=n,this.bucketId=r,this.fetch=HI(a)}uploadOrUpdate(s,n,r,a){return Ks(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},zy),a),c=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,c["cache-control"]=`max-age=${i.cacheControl}`,c["content-type"]=i.contentType);const l=this._removeEmptyFolders(n),d=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:s,body:o,headers:c},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield u.json();return u.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}upload(s,n,r){return Ks(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,r)})}uploadToSignedUrl(s,n,r,a){return Ks(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(s),i=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${i}`);c.searchParams.set("token",n);try{let l;const d=Object.assign({upsert:zy.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:l,headers:u}),h=yield p.json();return p.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ts(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(s,n){return Ks(this,void 0,void 0,function*(){try{let r=this._getFinalPath(s);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield Ta(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),i=new URL(this.url+o.url),c=i.searchParams.get("token");if(!c)throw new Bx("No token returned by API");return{data:{signedUrl:i.toString(),path:s,token:c},error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}update(s,n,r){return Ks(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,r)})}move(s,n,r){return Ks(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}copy(s,n,r){return Ks(this,void 0,void 0,function*(){try{return{data:{path:(yield Ta(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}createSignedUrl(s,n,r){return Ks(this,void 0,void 0,function*(){try{let a=this._getFinalPath(s),o=yield Ta(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}createSignedUrls(s,n,r){return Ks(this,void 0,void 0,function*(){try{const a=yield Ta(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}download(s,n){return Ks(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const c=this._getFinalPath(s);return{data:yield(yield ib(this.fetch,`${this.url}/${a}/${c}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(ts(c))return{data:null,error:c};throw c}})}getPublicUrl(s,n){const r=this._getFinalPath(s),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&a.push(l);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(s){return Ks(this,void 0,void 0,function*(){try{return{data:yield VI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}})}list(s,n,r){return Ks(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},sH),n),{prefix:s||""});return{data:yield Ta(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}_getFinalPath(s){return`${this.bucketId}/${s}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const rH="2.6.0",aH={"X-Client-Info":`storage-js/${rH}`};var Ji=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class oH{constructor(s,n={},r){this.url=s,this.headers=Object.assign(Object.assign({},aH),n),this.fetch=HI(r)}listBuckets(){return Ji(this,void 0,void 0,function*(){try{return{data:yield ib(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(ts(s))return{data:null,error:s};throw s}})}getBucket(s){return Ji(this,void 0,void 0,function*(){try{return{data:yield ib(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return Ji(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}updateBucket(s,n){return Ji(this,void 0,void 0,function*(){try{return{data:yield tH(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}emptyBucket(s){return Ji(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}})}deleteBucket(s){return Ji(this,void 0,void 0,function*(){try{return{data:yield VI(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}})}}class iH extends oH{constructor(s,n={},r){super(s,n,r)}from(s){return new nH(this.url,this.headers,s,this.fetch)}}const cH="2.44.2";let Md="";typeof Deno<"u"?Md="deno":typeof document<"u"?Md="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Md="react-native":Md="node";const lH={"X-Client-Info":`supabase-js-${Md}/${cH}`},dH={headers:lH},uH={schema:"public"},hH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pH={};var mH=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const gH=t=>{let s;return t?s=t:typeof fetch>"u"?s=LI:s=fetch,(...n)=>s(...n)},fH=()=>typeof Headers>"u"?RI:Headers,_H=(t,s,n)=>{const r=gH(n),a=fH();return(o,i)=>mH(void 0,void 0,void 0,function*(){var c;const l=(c=yield s())!==null&&c!==void 0?c:t;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};function bH(t){return t.replace(/\/$/,"")}function xH(t,s){const{db:n,auth:r,realtime:a,global:o}=t,{db:i,auth:c,realtime:l,global:d}=s;return{db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign({},d),o)}}const WI="2.64.2",jH="http://localhost:9999",vH="supabase.auth.token",yH={"X-Client-Info":`gotrue-js/${WI}`},qy=10,cb="X-Supabase-Api-Version",GI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function wH(t){return Math.round(Date.now()/1e3)+t}function SH(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Tn=()=>typeof document<"u",wo={tested:!1,writable:!1},Yd=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wo.tested)return wo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),wo.tested=!0,wo.writable=!0}catch{wo.tested=!0,wo.writable=!1}return wo.writable};function Vg(t){const s={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{s[o]=a})}catch{}return n.searchParams.forEach((r,a)=>{s[a]=r}),s}const KI=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>nn(async()=>{const{default:r}=await Promise.resolve().then(()=>jl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},CH=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",QI=async(t,s,n)=>{await t.setItem(s,JSON.stringify(n))},wh=async(t,s)=>{const n=await t.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wg=async(t,s)=>{await t.removeItem(s)};function kH(t){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,a,o,i,c,l,d,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)i=s.indexOf(t.charAt(u++)),c=s.indexOf(t.charAt(u++)),l=s.indexOf(t.charAt(u++)),d=s.indexOf(t.charAt(u++)),r=i<<2|c>>4,a=(c&15)<<4|l>>2,o=(l&3)<<6|d,n=n+String.fromCharCode(r),l!=64&&a!=0&&(n=n+String.fromCharCode(a)),d!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class Qm{constructor(){this.promise=new Qm.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}Qm.promiseConstructor=Promise;function Hy(t){const s=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!s.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(kH(r))}async function IH(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function PH(t,s){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!s(o,null,i)){r(i);return}}catch(i){if(!s(o,i)){a(i);return}}})()})}function TH(t){return("0"+t.toString(16)).substr(-2)}function AH(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(s),Array.from(s,TH).join("")}async function NH(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}function EH(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function OH(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await NH(t);return EH(n)}async function Zi(t,s,n=!1){const r=AH();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await QI(t,`${s}-code-verifier`,a);const o=await OH(r);return[o,r===o?"plain":"s256"]}const $H=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LH(t){const s=t.headers.get(cb);if(!s||!s.match($H))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}class Dx extends Error{constructor(s,n,r){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RH extends Dx{constructor(s,n,r){super(s,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MH(t){return Me(t)&&t.name==="AuthApiError"}class YI extends Dx{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class Ai extends Dx{constructor(s,n,r,a){super(s,r,a),this.name=n,this.status=r}}class So extends Ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Gg extends Ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sh extends Ai{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Ch extends Ai{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vy extends Ai{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lb extends Ai{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function Kg(t){return Me(t)&&t.name==="AuthRetryableFetchError"}class Wy extends Ai{constructor(s,n,r){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var BH=function(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const Go=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),DH=[502,503,504];async function Gy(t){var s;if(!CH(t))throw new lb(Go(t),0);if(DH.includes(t.status))throw new lb(Go(t),t.status);let n;try{n=await t.json()}catch(o){throw new YI(Go(o),o)}let r;const a=LH(t);if(a&&a.getTime()>=GI["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wy(Go(n),t.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Wy(Go(n),t.status,n.weak_password.reasons);throw new RH(Go(n),t.status||500,r)}const UH=(t,s,n,r)=>{const a={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Fe(t,s,n,r){var a;const o=Object.assign({},r==null?void 0:r.headers);o[cb]||(o[cb]=GI["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const c=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await FH(t,s,n+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function FH(t,s,n,r,a,o){const i=UH(s,r,a,o);let c;try{c=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new lb(Go(l),0)}if(c.ok||await Gy(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Gy(l)}}function ka(t){var s;let n=null;VH(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=wH(t.expires_in)));const r=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:n,user:r},error:null}}function Ky(t){const s=ka(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(s.data.weak_password=t.weak_password),s}function La(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function zH(t){return{data:t,error:null}}function qH(t){const{action_link:s,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=t,i=BH(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:s,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},l=Object.assign({},i);return{data:{properties:c,user:l},error:null}}function HH(t){return t}function VH(t){return t.access_token&&t.refresh_token&&t.expires_in}var WH=function(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class GH{constructor({url:s="",headers:n={},fetch:r}){this.url=s,this.headers=n,this.fetch=KI(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(s,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:La})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(s){try{const{options:n}=s,r=WH(s,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:qH,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:La})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,r,a,o,i,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=s==null?void 0:s.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:HH});if(u.error)throw u.error;const p=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(f=>{const _=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(f.split(";")[1].split("=")[1]);d[`${b}Page`]=_}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Me(d))return{data:{users:[]},error:d};throw d}}async getUserById(s){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:La})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:La})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(s,n=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:La})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(s){try{const{data:n,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(s){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const KH={getItem:t=>Yd()?globalThis.localStorage.getItem(t):null,setItem:(t,s)=>{Yd()&&globalThis.localStorage.setItem(t,s)},removeItem:t=>{Yd()&&globalThis.localStorage.removeItem(t)}};function Qy(t={}){return{getItem:s=>t[s]||null,setItem:(s,n)=>{t[s]=n},removeItem:s=>{delete t[s]}}}function QH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xi={debug:!!(globalThis&&Yd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JI extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class YH extends JI{}async function JH(t,s,n){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const r=new globalThis.AbortController;return s>0&&setTimeout(()=>{r.abort(),Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(s===0)throw Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new YH(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}QH();const ZH={url:jH,storageKey:vH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Gl=30*1e3,Yy=3;async function Jy(t,s,n){return await n()}class ju{constructor(s){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ju.nextInstanceID,ju.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},ZH),s);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GH({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=KI(a.fetch),this.lock=a.lock||Jy,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JH:this.lock=Jy,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Yd()?this.storage=KH:(this.memoryStorage={},this.storage=Qy(this.memoryStorage)):(this.memoryStorage={},this.storage=Qy(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${WI}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const s=Tn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",s),s||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(s);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Me(s)?{error:s}:{error:new YI("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,r,a;try{await this._removeSession();const o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=s==null?void 0:s.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=s==null?void 0:s.options)===null||a===void 0?void 0:a.captchaToken}},xform:ka}),{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(s){var n,r,a;try{await this._removeSession();let o;if("email"in s){const{email:u,password:p,options:h}=s;let g=null,f=null;this.flowType==="pkce"&&([g,f]=await Zi(this.storage,this.storageKey)),o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:f},xform:ka})}else if("phone"in s){const{phone:u,password:p,options:h}=s;o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ka})}else throw new Sh("You must provide either an email or phone number and a password");const{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(s){try{await this._removeSession();let n;if("email"in s){const{email:o,password:i,options:c}=s;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ky})}else if("phone"in s){const{phone:o,password:i,options:c}=s;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ky})}else throw new Sh("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,r,a,o;return await this._removeSession(),await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=s.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=s.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=s.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async _exchangeCodeForSession(s){const n=await wh(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/"),{data:o,error:i}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:r},xform:ka});return await Wg(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null,redirectType:null},error:i}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Gg}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}async signInWithIdToken(s){await this._removeSession();try{const{options:n,provider:r,token:a,access_token:o,nonce:i}=s,c=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ka}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,r,a,o,i;try{if(await this._removeSession(),"email"in s){const{email:c,options:l}=s;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Zi(this.storage,this.storageKey));const{error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in s){const{phone:c,options:l}=s,{data:d,error:u}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Sh("You must provide either an email or phone number.")}catch(c){if(Me(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(s){var n,r;try{s.type!=="email_change"&&s.type!=="phone_change"&&await this._removeSession();let a,o;"options"in s&&(a=(n=s.options)===null||n===void 0?void 0:n.redirectTo,o=(r=s.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:c}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ka});if(c)throw c;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(s){var n,r,a;try{await this._removeSession();let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Zi(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(r=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=s==null?void 0:s.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:zH})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:r}=s;if(r)throw r;if(!n)throw new So;const{error:a}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{s.type!="email_change"&&s.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in s){const{email:r,type:a,options:o}=s,{error:i}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in s){const{phone:r,type:a,options:o}=s,{data:i,error:c}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:c}}throw new Sh("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await wh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const r=s.expires_at?s.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",s.expires_at),!r){if(this.storage.isServer){const i=this.suppressGetSessionWarning;s=new Proxy(s,{get(l,d,u){return!i&&d==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,d,u)}})}return{data:{session:s},error:null}}const{session:a,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:La}):await this._useSession(async n=>{var r,a,o;const{data:i,error:c}=n;if(c)throw c;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new So}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:La})})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new So;const i=a.session;let c=null,l=null;this.flowType==="pkce"&&s.email!=null&&([c,l]=await Zi(this.storage,this.storageKey));const{data:d,error:u}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:c,code_challenge_method:l}),jwt:i.access_token,xform:La});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}_decodeJWT(s){return Hy(s)}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new So;const n=Date.now()/1e3;let r=n,a=!0,o=null;const i=Hy(s.access_token);if(i.exp&&(r=i.exp,a=r<=n),a){const{session:c,error:l}=await this._callRefreshToken(s.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:l}=await this._getUser(s.access_token);if(l)throw l;o={access_token:s.access_token,refresh_token:s.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var r;if(!s){const{data:i,error:c}=n;if(c)throw c;s=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(s!=null&&s.refresh_token))throw new So;const{session:a,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s){try{if(!Tn())throw new Ch("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ch("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!s)throw new Vy("Not a valid PKCE flow url.");const n=Vg(window.location.href);if(s){if(!n.code)throw new Vy("No code detected.");const{data:j,error:v}=await this._exchangeCodeForSession(n.code);if(v)throw v;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:j.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Ch(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:c,expires_at:l,token_type:d}=n;if(!o||!c||!i||!d)throw new Ch("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(c);let h=u+p;l&&(h=parseInt(l));const g=h-u;g*1e3<=Gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const f=h-p;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,u);const{data:_,error:b}=await this._getUser(o);if(b)throw b;const x={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:h,refresh_token:i,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:n.type},error:null}}catch(n){if(Me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const s=Vg(window.location.href);return!!(Tn()&&(s.access_token||s.error_description))}async _isPKCEFlow(){const s=Vg(window.location.href),n=await wh(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{error:o};const i=(r=a.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:c}=await this.admin.signOut(i,s);if(c&&!(MH(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return s!=="others"&&(await this._removeSession(),await Wg(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(s){const n=SH(),r={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(s){return await this._useSession(async n=>{var r,a;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(s))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",s,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",o),console.error(o)}})}async resetPasswordForEmail(s,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Zi(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var s;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:r,error:a}=await this._useSession(async o=>{var i,c,l,d,u;const{data:p,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(c=s.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Tn()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:s.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:s.provider,url:null},error:r};throw r}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)throw i;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await PH(async a=>(a>0&&await IH(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ka})),(a,o)=>{const i=200*Math.pow(2,a);return o&&Kg(o)&&Date.now()+i-r<Gl})}catch(r){if(this._debug(n,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:s,url:r},error:null}}async _recoverAndRefresh(){var s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await wh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),o=((s=r.expires_at)!==null&&s!==void 0?s:1/0)<a+qy;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${qy}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Kg(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(s){var n,r;if(!s)throw new So;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Qm;const{data:o,error:i}=await this._refreshAccessToken(s);if(i)throw i;if(!o.session)throw new So;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),Me(o)){const i={session:null,error:o};return Kg(o)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(s,n,r=!0){const a=`#_notifyAllSubscribers(${s})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:s,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(s,n)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await QI(this.storage,this.storageKey,s)}async _removeSession(){this._debug("#_removeSession()"),await Wg(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Gl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-s)/Gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gl}ms, refresh threshold is ${Yy} ticks`),a<=Yy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof JI)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Zi(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${s}?${a.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)return{data:null,error:i};const{data:c,error:l}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:s.friendlyName,factor_type:s.factorType,issuer:s.issuer},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:c}=await Fe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:r}=await this._challenge({factorId:s.factorId});return r?{data:null,error:r}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(s==null?void 0:s.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:r,totp:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,r;const{data:{session:a},error:o}=s;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(a.access_token);let c=null;i.aal&&(c=i.aal);let l=c;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}ju.nextInstanceID=0;const XH=ju;class eV extends XH{constructor(s){super(s)}}var tV=function(t,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class sV{constructor(s,n,r){var a,o,i;if(this.supabaseUrl=s,this.supabaseKey=n,!s)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=bH(s);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:uH,realtime:pH,auth:Object.assign(Object.assign({},hH),{storageKey:l}),global:dH},u=xH(r??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=_H(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new $9(`${c}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new v9(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new iH(this.storageUrl,this.headers,this.fetch)}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return tV(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:o,flowType:i,debug:c},l,d){var u;const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eV({url:this.authUrl,headers:Object.assign(Object.assign({},p),l),storageKey:o,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,flowType:i,debug:c,fetch:d,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(s){return new K9(this.realtimeUrl,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):s==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nV=(t,s,n)=>new sV(t,s,n),rV=(t,s)=>nV(t,s),pa=new WeakMap,Ko=new WeakMap,Qr=new WeakMap;var aV={};const sm=Symbol("anyProducer"),Zy=Promise.resolve(),nm=Symbol("listenerAdded"),rm=Symbol("listenerRemoved");let am=!1,Qg=!1;const om=t=>typeof t=="string"||typeof t=="symbol"||typeof t=="number";function ec(t){if(!om(t))throw new TypeError("`eventName` must be a string, symbol, or number")}function kh(t){if(typeof t!="function")throw new TypeError("listener must be a function")}function tc(t,s){const n=Ko.get(t);if(n.has(s))return n.get(s)}function Jd(t,s){const n=om(s)?s:sm,r=Qr.get(t);if(r.has(n))return r.get(n)}function oV(t,s,n){const r=Qr.get(t);if(r.has(s))for(const a of r.get(s))a.enqueue(n);if(r.has(sm)){const a=Promise.all([s,n]);for(const o of r.get(sm))o.enqueue(a)}}function Xy(t,s){s=Array.isArray(s)?s:[s];let n=!1,r=()=>{},a=[];const o={enqueue(i){a.push(i),r()},finish(){n=!0,r()}};for(const i of s){let c=Jd(t,i);c||(c=new Set,Qr.get(t).set(i,c)),c.add(o)}return{async next(){return a?a.length===0?n?(a=void 0,this.next()):(await new Promise(i=>{r=i}),this.next()):{done:!1,value:await a.shift()}:{done:!0}},async return(i){a=void 0;for(const c of s){const l=Jd(t,c);l&&(l.delete(o),l.size===0&&Qr.get(t).delete(c))}return r(),arguments.length>0?{done:!0,value:await i}:{done:!0}},[Symbol.asyncIterator](){return this}}}function ew(t){if(t===void 0)return tw;if(!Array.isArray(t))throw new TypeError("`methodNames` must be an array of strings");for(const s of t)if(!tw.includes(s))throw typeof s!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${s} is not Emittery method`);return t}const Ac=t=>t===nm||t===rm;function Ih(t,s,n){if(Ac(s))try{am=!0,t.emit(s,n)}finally{am=!1}}class ji{static mixin(s,n){return n=ew(n),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const i of n)if(r.prototype[i]!==void 0)throw new Error(`The property \`${i}\` already exists on \`target\``);function a(){return Object.defineProperty(this,s,{enumerable:!1,value:new ji}),this[s]}Object.defineProperty(r.prototype,s,{enumerable:!1,get:a});const o=i=>function(...c){return this[s][i](...c)};for(const i of n)Object.defineProperty(r.prototype,i,{enumerable:!1,value:o(i)});return r}}static get isDebugEnabled(){if(typeof aV!="object")return Qg;const{env:s}=globalThis.process??{env:{}};return s.DEBUG==="emittery"||s.DEBUG==="*"||Qg}static set isDebugEnabled(s){Qg=s}constructor(s={}){pa.set(this,new Set),Ko.set(this,new Map),Qr.set(this,new Map),Qr.get(this).set(sm,new Set),this.debug=s.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,r,a,o)=>{try{o=JSON.stringify(o)}catch{o=`Object with the following keys failed to stringify: ${Object.keys(o).join(",")}`}(typeof a=="symbol"||typeof a=="number")&&(a=a.toString());const i=new Date,c=`${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}`;console.log(`[${c}][emittery:${n}][${r}] Event Name: ${a}
	data: ${o}`)})}logIfDebugEnabled(s,n,r){(ji.isDebugEnabled||this.debug.enabled)&&this.debug.logger(s,this.debug.name,n,r)}on(s,n,{signal:r}={}){kh(n),s=Array.isArray(s)?s:[s];for(const o of s){ec(o);let i=tc(this,o);i||(i=new Set,Ko.get(this).set(o,i)),i.add(n),this.logIfDebugEnabled("subscribe",o,void 0),Ac(o)||Ih(this,nm,{eventName:o,listener:n})}const a=()=>{this.off(s,n),r==null||r.removeEventListener("abort",a)};return r==null||r.addEventListener("abort",a,{once:!0}),r!=null&&r.aborted&&a(),a}off(s,n){kh(n),s=Array.isArray(s)?s:[s];for(const r of s){ec(r);const a=tc(this,r);a&&(a.delete(n),a.size===0&&Ko.get(this).delete(r)),this.logIfDebugEnabled("unsubscribe",r,void 0),Ac(r)||Ih(this,rm,{eventName:r,listener:n})}}once(s){let n;const r=new Promise(a=>{n=this.on(s,o=>{n(),a(o)})});return r.off=n,r}events(s){s=Array.isArray(s)?s:[s];for(const n of s)ec(n);return Xy(this,s)}async emit(s,n){if(ec(s),Ac(s)&&!am)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",s,n),oV(this,s,n);const r=tc(this,s)??new Set,a=pa.get(this),o=[...r],i=Ac(s)?[]:[...a];await Zy,await Promise.all([...o.map(async c=>{if(r.has(c))return c(n)}),...i.map(async c=>{if(a.has(c))return c(s,n)})])}async emitSerial(s,n){if(ec(s),Ac(s)&&!am)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",s,n);const r=tc(this,s)??new Set,a=pa.get(this),o=[...r],i=[...a];await Zy;for(const c of o)r.has(c)&&await c(n);for(const c of i)a.has(c)&&await c(s,n)}onAny(s,{signal:n}={}){kh(s),this.logIfDebugEnabled("subscribeAny",void 0,void 0),pa.get(this).add(s),Ih(this,nm,{listener:s});const r=()=>{this.offAny(s),n==null||n.removeEventListener("abort",r)};return n==null||n.addEventListener("abort",r,{once:!0}),n!=null&&n.aborted&&r(),r}anyEvent(){return Xy(this)}offAny(s){kh(s),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Ih(this,rm,{listener:s}),pa.get(this).delete(s)}clearListeners(s){s=Array.isArray(s)?s:[s];for(const n of s)if(this.logIfDebugEnabled("clear",n,void 0),om(n)){const r=tc(this,n);r&&r.clear();const a=Jd(this,n);if(a){for(const o of a)o.finish();a.clear()}}else{pa.get(this).clear();for(const[r,a]of Ko.get(this).entries())a.clear(),Ko.get(this).delete(r);for(const[r,a]of Qr.get(this).entries()){for(const o of a)o.finish();a.clear(),Qr.get(this).delete(r)}}}listenerCount(s){var r,a,o;s=Array.isArray(s)?s:[s];let n=0;for(const i of s){if(om(i)){n+=pa.get(this).size+(((r=tc(this,i))==null?void 0:r.size)??0)+(((a=Jd(this,i))==null?void 0:a.size)??0)+(((o=Jd(this))==null?void 0:o.size)??0);continue}i!==void 0&&ec(i),n+=pa.get(this).size;for(const c of Ko.get(this).values())n+=c.size;for(const c of Qr.get(this).values())n+=c.size}return n}bindMethods(s,n){if(typeof s!="object"||s===null)throw new TypeError("`target` must be an object");n=ew(n);for(const r of n){if(s[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(s,r,{enumerable:!1,value:this[r].bind(this)})}}}const tw=Object.getOwnPropertyNames(ji.prototype).filter(t=>t!=="constructor");Object.defineProperty(ji,"listenerAdded",{value:nm,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(ji,"listenerRemoved",{value:rm,writable:!1,enumerable:!0,configurable:!1});function ZI(t){return t!=null}function iV(t){return t==null||typeof t!="object"?!1:typeof t[Symbol.iterator]=="function"}function cV(t){return s=>s[t]!==void 0&&s[t]!==null}function lV(t,s){return n=>n[t]===s}const dV=t=>typeof t=="object"&&t!==null&&"type"in t&&t.type==="error";new ji;function uV(t){return t.map((s,n)=>{switch(s.role){case"assistant":{const{id:r,content:a,role:o,tool_calls:i}=s,c={id:r,content:a??"",role:o};if(xy(i)){c.tool_calls=i;const l=t[n+1];if(l&&l.role!=="tool")return}return c}case"tool":{const{id:r,content:a,role:o,tool_call_id:i}=s;if(!i)throw new Error("tool_call_id is required");return{id:r,content:a??"",role:o,tool_call_id:i}}case"user":{const{id:r,content:a,role:o,name:i}=s;return{id:r,content:a??"",role:o,...i?{name:i}:{}}}}}).filter(ZI).filter((s,n,r)=>!(n===r.length-1&&s.role==="assistant"&&xy(s.tool_calls)&&s.content===null))}const db=(t,s)=>{const n={...t??{},...s??{}};for(const r of Object.keys(n))n[r]=typeof(t==null?void 0:t[r])=="object"&&typeof(s==null?void 0:s[r])=="object"?db(t[r],s[r]):structuredClone(n[r]);return n},sw="message",hV=({chatOptions:t,debug:s,persistChatHistory:n,maxHistorySize:r,projectKey:a,storeKey:o,apiUrl:i,headers:c})=>{if(!a)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to createChatStore.");if(r&&(!Number.isSafeInteger(r)||r<0))throw new Error("Markprompt: chatOptions.maxHistorySize must be a positive integer");return q7()(u9(Z7((l,d)=>({apiUrl:i,headers:c,projectKey:a,messages:[],didAcceptDisclaimer:!1,threadIdsByProjectKey:{[a]:[]},messagesByThreadId:{},toolCallsByToolCallId:{},didAcceptDisclaimerByProjectKey:{},capMessagesByThreadId:()=>{l(u=>{if(!r||r<=0)return u;const p=Object.entries(u.messagesByThreadId).sort(([g,{lastUpdated:f}],[_,{lastUpdated:b}])=>new Date(b).getTime()-new Date(f).getTime()).slice(r).map(([g])=>g);for(const g of p)delete u.messagesByThreadId[g];const h=Object.keys(u.messagesByThreadId);u.threadIdsByProjectKey[a]=(u.threadIdsByProjectKey[a]||[]).filter(g=>h.includes(g)),rw(u,a,n?"localStorage":"sessionStorage")})},setThreadId:u=>{l(p=>{var h;(h=p.threadIdsByProjectKey)[a]??(h[a]=[]),p.threadId=u,iV(p.threadIdsByProjectKey[a])||(p.threadIdsByProjectKey[a]=[]),p.threadIdsByProjectKey[a]=[...new Set([...p.threadIdsByProjectKey[a],u])],p.messagesByThreadId[u]={lastUpdated:new Date().toISOString(),messages:p.messages},p.capMessagesByThreadId()})},selectThread:u=>{var p,h,g,f;u&&u===d().threadId||((h=(p=d()).abort)==null||h.call(p),l(_=>{var b;if(!u){_.threadId=void 0,_.messages=[];return}_.threadId=u,_.messages=((b=_.messagesByThreadId[u])==null?void 0:b.messages)??[]}),(f=(g=d().options)==null?void 0:g.liveChatOptions)!=null&&f.enabled&&d().setupLiveChat())},setMessages:u=>{l(p=>{p.messages=u;const h=p.threadId;h&&(p.messagesByThreadId[h]={lastUpdated:new Date().toISOString(),messages:u},p.capMessagesByThreadId())})},setMessageById:(u,p)=>{l(h=>{let g=h.messages.findIndex(b=>b.id===u);g=g===-1?h.messages.length:g;let f=h.messages[g]??{};f={...f,...p},h.messages[g]=f;const _=h.threadId;_&&(h.messagesByThreadId[_]={lastUpdated:new Date().toISOString(),messages:h.messages},rw(h,a,n?"localStorage":"sessionStorage"))})},setToolCallById(u,p){l(h=>{h.toolCallsByToolCallId[u]={...h.toolCallsByToolCallId[u],...p}})},submitChat:async(u,p)=>{var D,L,H,W,$,M,se,ce,ee;const h=d().realtimeChat;if(h&&u.some(K=>K.role==="user")){const K=u.find(ae=>ae.role==="user");if(K&&typeof K.content=="string"){h.sendMessage(K.content).catch(ae=>{console.error("Failed to send message via realtime chat:",ae)});return}}const g=Array.from({length:u.length},()=>self.crypto.randomUUID()),f=self.crypto.randomUUID();l(K=>{K.messages.push(...u.map((ae,le)=>({...ae,id:g[le],references:[],state:"indeterminate"})),{id:f,role:"assistant",state:"indeterminate"})}),(L=(D=d()).abort)==null||L.call(D);const _=(H=d().messages.findLast(K=>K.role==="user"&&K.state!=="done"&&K.state!=="cancelled"&&!g.includes(K.id)))==null?void 0:H.id;_&&d().setMessageById(_,{state:"cancelled"});const b=new AbortController,x=()=>{b.abort();for(const K of[...g,f])d().setMessageById(K,{state:"cancelled"})};l(K=>{K.abort=x});const j=uV(d().messages);for(const K of[...g,f])d().setMessageById(K,{state:"preload"});const v=(W=d().options)==null?void 0:W.user,y=(($=d().options)==null?void 0:$.useConversations)??!1,S=db(db(((M=d().options)==null?void 0:M.additionalMetadata)??{},p||{}),{internal:{...y?{storeAsConversation:y,assignToAi:!0}:{},...v?{user:v}:{}}}),w={apiUrl:d().apiUrl,headers:d().headers,threadId:d().threadId,signal:b.signal,debug:s,...d().options,tools:(ce=(se=d().options)==null?void 0:se.tools)==null?void 0:ce.map(K=>K.tool),additionalMetadata:S};try{for await(const K of U7(j,a,w))if(!b.signal.aborted){K.threadId&&d().setThreadId(K.threadId);for(const ae of g)d().setMessageById(ae,{state:"streaming-answer"});d().setMessageById(f,{state:"streaming-answer",...K})}}catch(K){if(console.error(K),P7(K))return;for(const ae of[...g,f])d().setMessageById(ae,{state:"cancelled"});d().setMessageById(f,{error:K instanceof Error?K:new Error(String(K))})}if(d().capMessagesByThreadId(),d().abort===x&&l(K=>{K.abort=void 0}),b.signal.aborted)return;for(const K of[...g,f]){const ae=d().messages.find(le=>le.id===K);ae&&ae.state!=="cancelled"&&d().setMessageById(K,{state:"done"})}const k=d().messages.find(K=>K.id===f);if(!((k==null?void 0:k.role)==="assistant"&&(k!=null&&k.tool_calls)))return;const N=(ee=d().options)==null?void 0:ee.tools;N&&k.tool_calls.every(K=>{var ze;const ae=(ze=K.function)==null?void 0:ze.name,le=N.find(Ot=>Ot.tool.function.name===ae);return(le==null?void 0:le.requireConfirmation)===!1})&&await d().submitToolCalls(k)},async submitToolCalls(u){var g;if(!(u.role==="assistant"&&u.tool_calls))return;const p=(g=d().options)==null?void 0:g.tools;if(!p)return;const h=await Promise.allSettled(u.tool_calls.filter(II).map(async f=>{var b;const _=p.find(x=>{var j;return x.tool.function.name===((j=f.function)==null?void 0:j.name)});if(!_)throw new Error("Tool not found");try{d().setToolCallById(f.id,{status:"loading"});const x=d().threadId;if(!x)throw new Error("No Thread ID");const j=await _.call(((b=f.function)==null?void 0:b.arguments)||"{}",{threadId:x});return d().setToolCallById(f.id,{result:j,status:"done"}),{result:j,tool_call:f,tool:_}}catch(x){d().setToolCallById(f.id,{status:"error",error:x instanceof Error?x.message:String(x)})}}));d().submitChat(h.filter(lV("status","fulfilled")).filter(cV("value")).map(f=>{var _,b;return{role:"tool",name:(_=f.value)==null?void 0:_.tool.tool.function.name,tool_call_id:f.value.tool_call.id,content:(b=f.value)==null?void 0:b.result}}))},options:t??{},setOptions:u=>{var g;const p=(g=d().options)==null?void 0:g.liveChatOptions;l(f=>{f.options=u});const h=u.liveChatOptions;h!=null&&h.enabled?d().setupLiveChat():!(h!=null&&h.enabled)&&(p!=null&&p.enabled)&&d().closeLiveChat()},setDidAcceptDisclaimer:u=>{l(p=>{p.projectKey&&(p.didAcceptDisclaimerByProjectKey[p.projectKey]=u,p.didAcceptDisclaimer=u)})},regenerateLastAnswer:()=>{const u=[...d().messages],p=u.findLastIndex(g=>g.role==="user");if(p<0)return;const h=u[p];h.content&&(d().setMessages(u.slice(0,p)),d().submitChat([{role:"user",content:h.content}]))},setupLiveChat:async()=>{var h,g;d().closeLiveChat();const u=(h=d().options)==null?void 0:h.liveChatOptions,p=(g=d().options)==null?void 0:g.user;if(u!=null&&u.enabled&&p){const f=d().threadId??self.crypto.randomUUID();d().selectThread(f);const _=await fetch(`${d().apiUrl}/live-chat/sessions?projectKey=${d().projectKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:f})}).then(b=>b.json()).then(b=>b);try{const b=rV(_.connectionInfo.url,_.connectionInfo.anonKey),x=_.channelName,j=b.channel(x);let v=!1;const y="name"in p?{name:p.name,email:p.email,type:"customer"}:{encrypted:p.encrypted,type:"customer"},S=await ky(_.key);j.on("broadcast",{event:sw},async N=>{const D=N.payload;if("name"in D.user&&"name"in p&&D.user.name===p.name||"encrypted"in D.user&&"encrypted"in p&&D.user.encrypted===p.encrypted)return;const{iv:L,ciphertext:H}=p9(D.content),W=await g9(H,S,L),$={id:D.id,role:"assistant",content:W,state:"done",references:[]};l(M=>{M.messages.push($),M.threadId&&(M.messagesByThreadId[M.threadId]={lastUpdated:new Date().toISOString(),messages:M.messages})})}).on("broadcast",{event:"assign-to-ai"},N=>{if(N.payload.conversationId===d().threadId){d().closeLiveChat();const L=d().messages.at(-1);(L==null?void 0:L.role)==="user"&&(l(H=>{H.messages=H.messages.slice(0,-1)}),d().submitChat([L],{internal:{dontStoreUserMessage:!0}}))}}).subscribe(async N=>{var D,L;N==="SUBSCRIBED"?(v=!0,(L=(D=d()).liveChatConnectionCallback)==null||L.call(D,"connected"),await j.track(y)):await j.untrack(y)});const w={sendMessage:async N=>{if(!j||!v)return;const D=self.crypto.randomUUID(),L={id:D,role:"user",content:N,state:"done",references:[]};l(ce=>(ce.messages.push(L),ce.threadId&&(ce.messagesByThreadId[ce.threadId]={lastUpdated:new Date().toISOString(),messages:ce.messages}),ce));const H=await ky(_.key),{ciphertext:W,iv:$}=await m9(N,H),M=h9(W,$),se={id:D,content:M,user:y,createdAt:new Date().toISOString()};await j.send({type:"broadcast",event:sw,payload:se})},isConnected:!1,cleanup:()=>{b.removeChannel(j)}};Object.defineProperty(w,"isConnected",{get:()=>v}),l(N=>(N.realtimeChat=w,N));const k=setInterval(()=>{var D,L,H,W;const N=d().realtimeChat;N!=null&&N.isConnected?(L=(D=d()).liveChatConnectionCallback)==null||L.call(D,"connected"):(W=(H=d()).liveChatConnectionCallback)==null||W.call(H,"disconnected")},3e3);l(N=>(N.liveChatConnectionInterval=k,N))}catch(b){console.error("Failed to set up live chat:",b)}}},setLiveChatConnectionCallback:u=>{l(p=>(p.liveChatConnectionCallback=u,p))},closeLiveChat:()=>{const u=d().liveChatConnectionInterval;u&&(clearInterval(u),l(h=>(h.liveChatConnectionInterval=void 0,h)));const p=d().realtimeChat;p&&(p.cleanup(),l(h=>(h.realtimeChat=void 0,h)))},setHeaders:u=>{l(p=>(p.headers=u,p))}}),{name:o??"markprompt",version:1,storage:PI(()=>n?localStorage:sessionStorage,{reviver:(l,d)=>{if(d&&dV(d)){const u=new Error(d.message);return u.name=d.name,d.stack&&(u.stack=d.stack),d.cause&&(u.cause=d.cause),u}return d},replacer:(l,d)=>d instanceof Error?Object.fromEntries([["type","error"],["name",d.name],["message",d.message],["cause",d.cause]].filter(([,u])=>u!==void 0)):d}),partialize:l=>({threadIdsByProjectKey:l.threadIdsByProjectKey,messagesByThreadId:l.messagesByThreadId,toolCallsByToolCallId:l.toolCallsByToolCallId,didAcceptDisclaimerByProjectKey:l.didAcceptDisclaimerByProjectKey}),onRehydrateStorage:()=>l=>{var x,j,v;if(!l||typeof l!="object")return;(!((x=l.options)!=null&&x.disclaimerView)||a&&((j=l.didAcceptDisclaimerByProjectKey)!=null&&j[a]))&&l.setDidAcceptDisclaimer(!0),r&&r>0&&l.capMessagesByThreadId();const{threadIdsByProjectKey:d,messagesByThreadId:u}=l,p=(d==null?void 0:d[a])??[],h=new Date,g=new Date(h.getTime()-4*60*60*1e3),f=Object.entries(u).filter(([y])=>p.includes(y)).filter(([,{lastUpdated:y}])=>new Date(y)>g).sort(([,{lastUpdated:y}],[,{lastUpdated:S}])=>S.localeCompare(y));if(f.length===0||!ZI(f[0]))return;const[_,{messages:b}]=f[0];l.setThreadId(_),l.setMessages(b.map(y=>({...y,state:y.state==="preload"||y.state==="streaming-answer"?"cancelled":y.state}))),(v=t==null?void 0:t.liveChatOptions)!=null&&v.enabled&&setTimeout(()=>{l.setupLiveChat()},0)}})))},XI=m.createContext(null);function zr(t){const s=m.useContext(XI);if(!s)throw new Error("Missing ChatContext.Provider in the tree");return G7(s,t)}const nw=4e6;function rw(t,s,n){try{const r=n==="localStorage"?localStorage:sessionStorage;if(new Blob(Object.values(r)).size<nw)return;console.warn("Storage limit exceeded, purging old threads...");const o=Object.entries(t.messagesByThreadId).sort(([,i],[,c])=>new Date(i.lastUpdated).getTime()-new Date(c.lastUpdated).getTime());for(;new Blob(Object.values(r)).size>nw&&o.length!==0;){const[i]=o.shift();delete t.messagesByThreadId[i],t.threadIdsByProjectKey[s]=t.threadIdsByProjectKey[s].filter(c=>c!==i)}}catch(r){console.error("Error purging storage:",r)}}function pV(t){var d,u,p;const{chatOptions:s,children:n,debug:r,projectKey:a,storeKey:o,apiUrl:i,headers:c}=t,l=m.useRef({storeKey:void 0,store:null});return(!((d=l.current)!=null&&d.store)||((u=l.current)==null?void 0:u.storeKey)!==o)&&(l.current={storeKey:o,store:hV({apiUrl:i,headers:c,projectKey:a,chatOptions:s,debug:r,persistChatHistory:s==null?void 0:s.history,maxHistorySize:s==null?void 0:s.maxHistorySize,storeKey:o})}),m.useEffect(()=>{var h,g;s&&((g=(h=l.current)==null?void 0:h.store)==null||g.getState().setOptions(s))},[s]),e.jsx(XI.Provider,{value:(p=l.current)==null?void 0:p.store,children:n})}const Yg={feedback:"Did this solve your issue?",yes:"Yes",no:"No"},mV="_root_10or9_1",gV="_actions_10or9_8",aw={root:mV,actions:gV},fV=({isLoading:t,onFeedbackSubmit:s})=>{const{trackUiInteraction:n}=P();return e.jsxs("div",{className:aw.root,children:[e.jsx(T,{size:"s",appearance:"secondary",children:Yg.feedback}),e.jsxs("div",{className:aw.actions,children:[e.jsx(E,{appearance:"secondary",disabled:t,onClick:()=>{n("markprompt_get_help_feedback_positive_clicked"),s("positive")},children:Yg.yes}),e.jsx(E,{appearance:"secondary",disabled:t,onClick:()=>{n("markprompt_get_help_feedback_negative_clicked"),s("negative")},children:Yg.no})]})]})},Aa={title:"Get help",promptPlaceholder:"I am having trouble with...",clear:"Clear",ask:"Ask",feedbackResponse:"I'm glad to hear that the information helped resolve your issue! If you have any more questions or need further assistance, feel free to reach out.",feedbackNegative:"It did not help me",placeholder:t=>`${t?`Hi ${t}, `:""}I'm the Neon AI assistant. I'm designed to quickly answer your questions and guide you through any issues.
   If we need to dig deeper, I'll get you in touch with our support team.
    
  Can you provide me a little context on which area of Neon you are needing help with?`},_V="_content_77285_1",bV="_prompt_77285_8",xV="_promptActions_77285_15",Jg={content:_V,prompt:bV,promptActions:xV};function Zo(){return Zo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zo.apply(this,arguments)}const jV=["children","options"],xe={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var ow;(function(t){t[t.MAX=0]="MAX",t[t.HIGH=1]="HIGH",t[t.MED=2]="MED",t[t.LOW=3]="LOW",t[t.MIN=4]="MIN"})(ow||(ow={}));const iw=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((t,s)=>(t[s.toLowerCase()]=s,t),{class:"className",for:"htmlFor"}),cw={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},vV=["style","script"],yV=["src","href","data","formAction","srcDoc","action"],wV=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,SV=/mailto:/i,CV=/\n{2,}$/,eP=/^(\s*>[\s\S]*?)(?=\n\n|$)/,kV=/^ *> ?/gm,IV=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,PV=/^ {2,}\n/,TV=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,tP=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,sP=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,AV=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,NV=/^(?:\n *)*\n/,EV=/\r\n?/g,OV=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,$V=/^\[\^([^\]]+)]/,LV=/\f/g,RV=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,MV=/^\s*?\[(x|\s)\]/,nP=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,rP=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,aP=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,ub=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,BV=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,oP=/^<!--[\s\S]*?(?:-->)/,DV=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,hb=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,UV=/^\{.*\}$/,FV=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,zV=/^<([^ >]+@[^ >]+)>/,qV=/^<([^ >]+:\/[^ >]+)>/,HV=/-([a-z])?/gi,iP=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,VV=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,WV=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,GV=/^\[([^\]]*)\] ?\[([^\]]*)\]/,KV=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,QV=/\t/g,YV=/(^ *\||\| *$)/g,JV=/^ *:-+: *$/,ZV=/^ *:-+ *$/,XV=/^ *-+: *$/,Ym="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",eW=new RegExp(`^([*_])\\1${Ym}\\1\\1(?!\\1)`),tW=new RegExp(`^([*_])${Ym}\\1(?!\\1)`),sW=new RegExp(`^(==)${Ym}\\1`),nW=new RegExp(`^(~~)${Ym}\\1`),rW=/^\\([^0-9A-Za-z\s])/,lw=/\\([^0-9A-Za-z\s])/g,aW=/^([\s\S](?:(?!  |[0-9]\.)[^=*_~\-\n<`\\\[!])*)/,oW=/^\n+/,iW=/^([ \t]*)/,cW=/\\([^\\])/g,lW=/(?:^|\n)( *)$/,Ux="(?:\\d+\\.)",Fx="(?:[*+-])";function cP(t){return"( *)("+(t===1?Ux:Fx)+") +"}const lP=cP(1),dP=cP(2);function uP(t){return new RegExp("^"+(t===1?lP:dP))}const dW=uP(1),uW=uP(2);function hP(t){return new RegExp("^"+(t===1?lP:dP)+"[^\\n]*(?:\\n(?!\\1"+(t===1?Ux:Fx)+" )[^\\n]*)*(\\n|$)","gm")}const hW=hP(1),pW=hP(2);function pP(t){const s=t===1?Ux:Fx;return new RegExp("^( *)("+s+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+s+" (?!"+s+" ))\\n*|\\s*\\n*$)")}const mP=pP(1),gP=pP(2);function dw(t,s){const n=s===1,r=n?mP:gP,a=n?hW:pW,o=n?dW:uW;return{match:Xc(function(i,c){const l=lW.exec(c.prevCapture);return l&&(c.list||!c.inline&&!c.simple)?r.exec(i=l[1]+i):null}),order:1,parse(i,c,l){const d=n?+i[2]:void 0,u=i[0].replace(CV,`
`).match(a);let p=!1;return{items:u.map(function(h,g){const f=o.exec(h)[0].length,_=new RegExp("^ {1,"+f+"}","gm"),b=h.replace(_,"").replace(o,""),x=g===u.length-1,j=b.indexOf(`

`)!==-1||x&&p;p=j;const v=l.inline,y=l.list;let S;l.list=!0,j?(l.inline=!1,S=vu(b)+`

`):(l.inline=!0,S=vu(b));const w=c(S,l);return l.inline=v,l.list=y,w}),ordered:n,start:d}},render:(i,c,l)=>t(i.ordered?"ol":"ul",{key:l.key,start:i.type===xe.orderedList?i.start:void 0},i.items.map(function(d,u){return t("li",{key:u},c(d,l))}))}}const mW=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),gW=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,fP=[eP,tP,sP,nP,aP,rP,iP,mP,gP],fW=[...fP,/^[^\n]+(?:  \n|\n{2,})/,ub,oP,hb];function vu(t){let s=t.length;for(;s>0&&t[s-1]<=" ";)s--;return t.slice(0,s)}function Kl(t){return t.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function _W(t){return XV.test(t)?"right":JV.test(t)?"center":ZV.test(t)?"left":null}function uw(t,s,n,r){const a=n.inTable;n.inTable=!0;let o=[[]],i="";function c(){if(!i)return;const l=o[o.length-1];l.push.apply(l,s(i,n)),i=""}return t.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((l,d,u)=>{l.trim()==="|"&&(c(),r)?d!==0&&d!==u.length-1&&o.push([]):i+=l}),c(),n.inTable=a,o}function bW(t,s,n){n.inline=!0;const r=t[2]?t[2].replace(YV,"").split("|").map(_W):[],a=t[3]?function(i,c,l){return i.trim().split(`
`).map(function(d){return uw(d,c,l,!0)})}(t[3],s,n):[],o=uw(t[1],s,n,!!a.length);return n.inline=!1,a.length?{align:r,cells:a,header:o,type:xe.table}:{children:o,type:xe.paragraph}}function hw(t,s){return t.align[s]==null?{}:{textAlign:t.align[s]}}function Xc(t){return t.inline=1,t}function ma(t){return Xc(function(s,n){return n.inline?t.exec(s):null})}function ga(t){return Xc(function(s,n){return n.inline||n.simple?t.exec(s):null})}function Tr(t){return function(s,n){return n.inline||n.simple?null:t.exec(s)}}function Ql(t){return Xc(function(s){return t.exec(s)})}function xW(t,s){if(s.inline||s.simple)return null;let n="";t.split(`
`).every(a=>(a+=`
`,!fP.some(o=>o.test(a))&&(n+=a,!!a.trim())));const r=vu(n);return r==""?null:[n,,r]}const jW=/(javascript|vbscript|data(?!:image)):/i;function vW(t){try{const s=decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"");if(jW.test(s))return null}catch{return null}return t}function pw(t){return t.replace(cW,"$1")}function $p(t,s,n){const r=n.inline||!1,a=n.simple||!1;n.inline=!0,n.simple=!0;const o=t(s,n);return n.inline=r,n.simple=a,o}function yW(t,s,n){const r=n.inline||!1,a=n.simple||!1;n.inline=!1,n.simple=!0;const o=t(s,n);return n.inline=r,n.simple=a,o}function wW(t,s,n){const r=n.inline||!1;n.inline=!1;const a=t(s,n);return n.inline=r,a}const Zg=(t,s,n)=>({children:$p(s,t[2],n)});function Xg(){return{}}function ef(){return null}function SW(...t){return t.filter(Boolean).join(" ")}function tf(t,s,n){let r=t;const a=s.split(".");for(;a.length&&(r=r[a[0]],r!==void 0);)a.shift();return r||n}function CW(t="",s={}){function n(h,g,...f){const _=tf(s.overrides,`${h}.props`,{});return s.createElement(function(b,x){const j=tf(x,b);return j?typeof j=="function"||typeof j=="object"&&"render"in j?j:tf(x,`${b}.component`,b):b}(h,s.overrides),Zo({},g,_,{className:SW(g==null?void 0:g.className,_.className)||void 0}),...f)}function r(h){h=h.replace(RV,"");let g=!1;s.forceInline?g=!0:s.forceBlock||(g=KV.test(h)===!1);const f=d(l(g?h:`${vu(h).replace(oW,"")}

`,{inline:g}));for(;typeof f[f.length-1]=="string"&&!f[f.length-1].trim();)f.pop();if(s.wrapper===null)return f;const _=s.wrapper||(g?"span":"div");let b;if(f.length>1||s.forceWrapper)b=f;else{if(f.length===1)return b=f[0],typeof b=="string"?n("span",{key:"outer"},b):b;b=null}return s.createElement(_,{key:"outer"},b)}function a(h,g){const f=g.match(wV);return f?f.reduce(function(_,b){const x=b.indexOf("=");if(x!==-1){const j=function(w){return w.indexOf("-")!==-1&&w.match(DV)===null&&(w=w.replace(HV,function(k,N){return N.toUpperCase()})),w}(b.slice(0,x)).trim(),v=function(w){const k=w[0];return(k==='"'||k==="'")&&w.length>=2&&w[w.length-1]===k?w.slice(1,-1):w}(b.slice(x+1).trim()),y=iw[j]||j;if(y==="ref")return _;const S=_[y]=function(w,k,N,D){return k==="style"?function(L){const H=[];let W="",$=!1,M=!1,se="";if(!L)return H;for(let ee=0;ee<L.length;ee++){const K=L[ee];if(K!=='"'&&K!=="'"||$||(M?K===se&&(M=!1,se=""):(M=!0,se=K)),K==="("&&W.endsWith("url")?$=!0:K===")"&&$&&($=!1),K!==";"||M||$)W+=K;else{const ae=W.trim();if(ae){const le=ae.indexOf(":");if(le>0){const ze=ae.slice(0,le).trim(),Ot=ae.slice(le+1).trim();H.push([ze,Ot])}}W=""}}const ce=W.trim();if(ce){const ee=ce.indexOf(":");if(ee>0){const K=ce.slice(0,ee).trim(),ae=ce.slice(ee+1).trim();H.push([K,ae])}}return H}(N).reduce(function(L,[H,W]){return L[H.replace(/(-[a-z])/g,$=>$[1].toUpperCase())]=D(W,w,H),L},{}):yV.indexOf(k)!==-1?D(N,w,k):(N.match(UV)&&(N=N.slice(1,N.length-1)),N==="true"||N!=="false"&&N)}(h,j,v,s.sanitizer);typeof S=="string"&&(ub.test(S)||hb.test(S))&&(_[y]=r(S.trim()))}else b!=="style"&&(_[iw[b]||b]=!0);return _},{}):null}s.overrides=s.overrides||{},s.sanitizer=s.sanitizer||vW,s.slugify=s.slugify||Kl,s.namedCodesToUnicode=s.namedCodesToUnicode?Zo({},cw,s.namedCodesToUnicode):cw,s.createElement=s.createElement||m.createElement;const o=[],i={},c={[xe.blockQuote]:{match:Tr(eP),order:1,parse(h,g,f){const[,_,b]=h[0].replace(kV,"").match(IV);return{alert:_,children:g(b,f)}},render(h,g,f){const _={key:f.key};return h.alert&&(_.className="markdown-alert-"+s.slugify(h.alert.toLowerCase(),Kl),h.children.unshift({attrs:{},children:[{type:xe.text,text:h.alert}],noInnerParse:!0,type:xe.htmlBlock,tag:"header"})),n("blockquote",_,g(h.children,f))}},[xe.breakLine]:{match:Ql(PV),order:1,parse:Xg,render:(h,g,f)=>n("br",{key:f.key})},[xe.breakThematic]:{match:Tr(TV),order:1,parse:Xg,render:(h,g,f)=>n("hr",{key:f.key})},[xe.codeBlock]:{match:Tr(sP),order:0,parse:h=>({lang:void 0,text:vu(h[0].replace(/^ {4}/gm,"")).replace(lw,"$1")}),render:(h,g,f)=>n("pre",{key:f.key},n("code",Zo({},h.attrs,{className:h.lang?`lang-${h.lang}`:""}),h.text))},[xe.codeFenced]:{match:Tr(tP),order:0,parse:h=>({attrs:a("code",h[3]||""),lang:h[2]||void 0,text:h[4],type:xe.codeBlock})},[xe.codeInline]:{match:ga(AV),order:3,parse:h=>({text:h[2].replace(lw,"$1")}),render:(h,g,f)=>n("code",{key:f.key},h.text)},[xe.footnote]:{match:Tr(OV),order:0,parse:h=>(o.push({footnote:h[2],identifier:h[1]}),{}),render:ef},[xe.footnoteReference]:{match:ma($V),order:1,parse:h=>({target:`#${s.slugify(h[1],Kl)}`,text:h[1]}),render:(h,g,f)=>n("a",{key:f.key,href:s.sanitizer(h.target,"a","href")},n("sup",{key:f.key},h.text))},[xe.gfmTask]:{match:ma(MV),order:1,parse:h=>({completed:h[1].toLowerCase()==="x"}),render:(h,g,f)=>n("input",{checked:h.completed,key:f.key,readOnly:!0,type:"checkbox"})},[xe.heading]:{match:Tr(s.enforceAtxHeadings?rP:nP),order:1,parse:(h,g,f)=>({children:$p(g,h[2],f),id:s.slugify(h[2],Kl),level:h[1].length}),render:(h,g,f)=>n(`h${h.level}`,{id:h.id,key:f.key},g(h.children,f))},[xe.headingSetext]:{match:Tr(aP),order:0,parse:(h,g,f)=>({children:$p(g,h[1],f),level:h[2]==="="?1:2,type:xe.heading})},[xe.htmlBlock]:{match:Ql(ub),order:1,parse(h,g,f){const[,_]=h[3].match(iW),b=new RegExp(`^${_}`,"gm"),x=h[3].replace(b,""),j=(v=x,fW.some(N=>N.test(v))?wW:$p);var v;const y=h[1].toLowerCase(),S=vV.indexOf(y)!==-1,w=(S?y:h[1]).trim(),k={attrs:a(w,h[2]),noInnerParse:S,tag:w};return f.inAnchor=f.inAnchor||y==="a",S?k.text=h[3]:k.children=j(g,x,f),f.inAnchor=!1,k},render:(h,g,f)=>n(h.tag,Zo({key:f.key},h.attrs),h.text||(h.children?g(h.children,f):""))},[xe.htmlSelfClosing]:{match:Ql(hb),order:1,parse(h){const g=h[1].trim();return{attrs:a(g,h[2]||""),tag:g}},render:(h,g,f)=>n(h.tag,Zo({},h.attrs,{key:f.key}))},[xe.htmlComment]:{match:Ql(oP),order:1,parse:()=>({}),render:ef},[xe.image]:{match:ga(gW),order:1,parse:h=>({alt:h[1],target:pw(h[2]),title:h[3]}),render:(h,g,f)=>n("img",{key:f.key,alt:h.alt||void 0,title:h.title||void 0,src:s.sanitizer(h.target,"img","src")})},[xe.link]:{match:ma(mW),order:3,parse:(h,g,f)=>({children:yW(g,h[1],f),target:pw(h[2]),title:h[3]}),render:(h,g,f)=>n("a",{key:f.key,href:s.sanitizer(h.target,"a","href"),title:h.title},g(h.children,f))},[xe.linkAngleBraceStyleDetector]:{match:ma(qV),order:0,parse:h=>({children:[{text:h[1],type:xe.text}],target:h[1],type:xe.link})},[xe.linkBareUrlDetector]:{match:Xc((h,g)=>g.inAnchor||s.disableAutoLink?null:ma(FV)(h,g)),order:0,parse:h=>({children:[{text:h[1],type:xe.text}],target:h[1],title:void 0,type:xe.link})},[xe.linkMailtoDetector]:{match:ma(zV),order:0,parse(h){let g=h[1],f=h[1];return SV.test(f)||(f="mailto:"+f),{children:[{text:g.replace("mailto:",""),type:xe.text}],target:f,type:xe.link}}},[xe.orderedList]:dw(n,1),[xe.unorderedList]:dw(n,2),[xe.newlineCoalescer]:{match:Tr(NV),order:3,parse:Xg,render:()=>`
`},[xe.paragraph]:{match:Xc(xW),order:3,parse:Zg,render:(h,g,f)=>n("p",{key:f.key},g(h.children,f))},[xe.ref]:{match:ma(VV),order:0,parse:h=>(i[h[1]]={target:h[2],title:h[4]},{}),render:ef},[xe.refImage]:{match:ga(WV),order:0,parse:h=>({alt:h[1]||void 0,ref:h[2]}),render:(h,g,f)=>i[h.ref]?n("img",{key:f.key,alt:h.alt,src:s.sanitizer(i[h.ref].target,"img","src"),title:i[h.ref].title}):null},[xe.refLink]:{match:ma(GV),order:0,parse:(h,g,f)=>({children:g(h[1],f),fallbackChildren:h[0],ref:h[2]}),render:(h,g,f)=>i[h.ref]?n("a",{key:f.key,href:s.sanitizer(i[h.ref].target,"a","href"),title:i[h.ref].title},g(h.children,f)):n("span",{key:f.key},h.fallbackChildren)},[xe.table]:{match:Tr(iP),order:1,parse:bW,render(h,g,f){const _=h;return n("table",{key:f.key},n("thead",null,n("tr",null,_.header.map(function(b,x){return n("th",{key:x,style:hw(_,x)},g(b,f))}))),n("tbody",null,_.cells.map(function(b,x){return n("tr",{key:x},b.map(function(j,v){return n("td",{key:v,style:hw(_,v)},g(j,f))}))})))}},[xe.text]:{match:Ql(aW),order:4,parse:h=>({text:h[0].replace(BV,(g,f)=>s.namedCodesToUnicode[f]?s.namedCodesToUnicode[f]:g)}),render:h=>h.text},[xe.textBolded]:{match:ga(eW),order:2,parse:(h,g,f)=>({children:g(h[2],f)}),render:(h,g,f)=>n("strong",{key:f.key},g(h.children,f))},[xe.textEmphasized]:{match:ga(tW),order:3,parse:(h,g,f)=>({children:g(h[2],f)}),render:(h,g,f)=>n("em",{key:f.key},g(h.children,f))},[xe.textEscaped]:{match:ga(rW),order:1,parse:h=>({text:h[1],type:xe.text})},[xe.textMarked]:{match:ga(sW),order:3,parse:Zg,render:(h,g,f)=>n("mark",{key:f.key},g(h.children,f))},[xe.textStrikethroughed]:{match:ga(nW),order:3,parse:Zg,render:(h,g,f)=>n("del",{key:f.key},g(h.children,f))}};s.disableParsingRawHTML===!0&&(delete c[xe.htmlBlock],delete c[xe.htmlSelfClosing]);const l=function(h){let g=Object.keys(h);function f(_,b){let x,j,v=[],y="",S="";for(b.prevCapture=b.prevCapture||"";_;){let w=0;for(;w<g.length;){if(y=g[w],x=h[y],b.inline&&!x.match.inline){w++;continue}const k=x.match(_,b);if(k){S=k[0],b.prevCapture+=S,_=_.substring(S.length),j=x.parse(k,f,b),j.type==null&&(j.type=y),v.push(j);break}w++}}return b.prevCapture="",v}return g.sort(function(_,b){let x=h[_].order,j=h[b].order;return x!==j?x-j:_<b?-1:1}),function(_,b){return f(function(x){return x.replace(EV,`
`).replace(LV,"").replace(QV,"    ")}(_),b)}}(c),d=(u=function(h,g){return function(f,_,b){const x=h[f.type].render;return g?g(()=>x(f,_,b),f,_,b):x(f,_,b)}}(c,s.renderRule),function h(g,f={}){if(Array.isArray(g)){const _=f.key,b=[];let x=!1;for(let j=0;j<g.length;j++){f.key=j;const v=h(g[j],f),y=typeof v=="string";y&&x?b[b.length-1]+=v:v!==null&&b.push(v),x=y}return f.key=_,b}return u(g,h,f)});var u;const p=r(t);return o.length?n("div",null,p,n("footer",{key:"footer"},o.map(function(h){return n("div",{id:s.slugify(h.identifier,Kl),key:h.identifier},h.identifier,d(l(h.footnote,{inline:!0})))}))):p}const kW=t=>{let{children:s="",options:n}=t,r=function(a,o){if(a==null)return{};var i,c,l={},d=Object.keys(a);for(c=0;c<d.length;c++)o.indexOf(i=d[c])>=0||(l[i]=a[i]);return l}(t,jV);return m.cloneElement(CW(s,n),r)},IW={LRNotice:"We have temporarily paused new enrollments in our Logical Replication Beta program. This pause is aimed at evaluating the feature's performance and incorporating feedback from our early adopters. Please stay tuned for updates, and thank you for your interest. We plan to reopen enrollment again soon."},PW="_root_7v7ia_1",TW="_title_7v7ia_19",AW="_subTitle_7v7ia_23",NW="_text_7v7ia_27",EW="_codeBlock_7v7ia_31",OW="_alert_7v7ia_35",$W="_img_7v7ia_39",LW="_tabs_7v7ia_43",xs={root:PW,title:TW,subTitle:AW,text:NW,codeBlock:EW,alert:OW,img:$W,tabs:LW},fa={component:()=>null},sf={bash:"text",sql:"sql",javascript:"javascript",ts:"javascript",toml:"toml",yaml:"yaml",text:"text",json:"json",graphql:"javascript",undefined:"text"},RW=t=>{var o;const s=JSON.parse((t==null?void 0:t.labels)||"[]").map((i,c)=>({label:i,value:c})),[n,r]=m.useState(0),a=i=>{r(i)};return s.length?e.jsxs(e.Fragment,{children:[e.jsx(qn,{options:s,value:n,onChange:a,className:xs.tabs}),(o=t.children)==null?void 0:o.filter(i=>typeof i!="string").map((i,c)=>c!==n?null:i)]}):null},MW={h1:{component:Z,props:{level:1,className:xs.title}},h2:{component:Z,props:{level:2,className:xs.title}},h3:{component:Z,props:{level:3,className:xs.subTitle}},h4:{component:Z,props:{level:4,className:xs.subTitle}},h5:{component:Z,props:{level:5,className:xs.subTitle}},h6:{component:Z,props:{level:6,className:xs.subTitle}},p:{component:T,props:{className:xs.text}},pre:{component:t=>{var r,a;const s=(r=t.children.props.className)==null?void 0:r.match(/lang-([a-z]*)\b/gm),n=(a=s==null?void 0:s.at(0))==null?void 0:a.replace("lang-","");return e.jsx(rn,{className:xs.codeBlock,mode:sf[n]||"text",children:t.children.props.children})}},code:{component:t=>{const s=t.children.split(`
`),n=s[0];return Object.keys(sf).includes(n)?(s.shift(),e.jsx(rn,{className:xs.codeBlock,mode:sf[n]||"text",children:s.join(`
`)})):e.jsx(Ae,{children:t.children})}},video:{component:()=>null},a:{component:t=>{if(t.href.startsWith("#"))return t.children;const n=t.href.startsWith("/")?`${Hp}${t.href.slice(1)}`:t.href;return e.jsx(R,{openInNewTab:!0,href:n,children:t.children})}},img:{component:t=>{const s=`${Hp}${t.src.slice(1)}`;return e.jsx("img",{src:s,alt:t.alt,width:"100%",className:xs.img})}},Admonition:{component:X,props:{className:xs.alert}},DetailIconCards:{component:({children:t})=>e.jsx("ul",{children:t.map(s=>e.jsx("li",{children:s},s.key))})},Tabs:{component:RW},TabItem:{component:({children:t})=>t},LRNotice:{component:X,props:{className:xs.alert,appearance:"warning",children:IW.LRNotice}},NeedHelp:fa,YoutubeIframe:fa,DefinitionList:fa,CodeTabs:fa,TechnologyNavigation:fa,CommunityBanner:fa,CTA:fa,SignUp:fa},_P=({md:t})=>e.jsx("div",{className:xs.root,children:e.jsx(kW,{options:{overrides:MW},children:t})}),BW={error:"Sorry...something went wrong on our side and we can't respond at the moment."},DW="_root_1ee3v_1",UW={root:DW},bP=({isLastMessage:t})=>{const{trackUiInteraction:s}=P(),n=zr(r=>r.regenerateLastAnswer);return e.jsxs("div",{className:UW.root,children:[e.jsx(T,{children:BW.error}),t&&e.jsx(_r,{iconName:"reset",tooltip:"Regenerate",onClick:()=>{s("markprompt_get_help_regenerate_response_clicked"),n()}})]})},FW="_root_r4l6r_1",zW="_content_r4l6r_11",qW="_loadingDots_r4l6r_19",HW="_dot_r4l6r_27",Lc={root:FW,content:zW,loadingDots:qW,dot:HW},VW=({state:t,isLastMessage:s})=>{switch(t){case"indeterminate":case"preload":return e.jsxs("div",{className:Lc.loadingDots,children:[e.jsx("span",{className:Lc.dot}),e.jsx("span",{className:Lc.dot}),e.jsx("span",{className:Lc.dot})]});case"cancelled":return e.jsx(bP,{isLastMessage:s});default:return null}},Zd=({role:t,content:s,state:n,userImage:r,userFirstName:a,children:o,isLastMessage:i})=>{const c=t==="user";return e.jsxs("div",{className:Lc.root,children:[e.jsx(Ou,{size:"m",image:c?r:e.jsx(z,{name:"neon",size:14}),name:c?a:void 0,isRounded:!0}),e.jsxs("div",{className:Lc.content,children:[t==="assistant"&&e.jsx(VW,{state:n,isLastMessage:i}),s&&e.jsx(_P,{md:s.toString()}),o]})]})},ui=t=>["integrations_by_project",t],xP=({enabled:t=!0})=>{const{orgId:s}=re(),n=a$(s);return bt({queryKey:ui(s),queryFn:()=>G.listProjects({limit:200,org_id:s}),select:({data:r})=>r.integrations??r.applications,enabled:t&&!n})},WW="_root_2h35h_1",GW="_addIntegrationButton_2h35h_7",mw={root:WW,addIntegrationButton:GW},KW={vercel:"vercel",github:"github",datadog:"datadog",opentelemetry:"opentelemetry"},QW=({projectId:t,integrations:s=[]})=>{const n=et(),r=Q(C.ProjectsItemIntegrations,{projectId:t}),a=()=>{n.push(r)};return e.jsxs("div",{className:mw.root,children:[s.map(o=>e.jsx(z,{name:KW[o],size:16},o)),!s.length&&e.jsx(R,{icon:"add_outlined",onClick:a,className:mw.addIntegrationButton,children:"Add"})]})},Jm=()=>{const t=ao("metrics_export");return{datadog:!t,opentelemetry:!t}},YW=()=>({datadog:Xe.ExportMetrics,opentelemetry:Xe.ExportMetrics}),zx=()=>({opentelemetry:!ge("otel_integration_no_beta_badge")}),hs=t=>["integrations",t],Hu=()=>{const{projectId:t}=F();return bt({queryKey:hs(t),queryFn:async()=>{var o;const[s,n]=await Promise.all([G.listUserAvailableApplications({project_id:t}),G.getProjectMonitoringIntegrations(t).catch(()=>({data:{integrations:[],exported_telemetry_counts:[]}}))]),r=(o=n==null?void 0:n.data.integrations)==null?void 0:o.reduce((i,{status:c,config:l})=>{var d,u;switch(l.type){case"debug":return i;case"datadog":return{...i,datadog:{site:l.site,status:c,logs:l.logs,metrics:l.metrics,exportStats:(d=n==null?void 0:n.data.exported_telemetry_counts)==null?void 0:d.filter(({exporter:p})=>p==="datadog")}};case"opentelemetry":return{...i,opentelemetry:{status:c,connection:l.connection,telemetry:l.telemetry,resource:l.resource,exportStats:(u=n==null?void 0:n.data.exported_telemetry_counts)==null?void 0:u.filter(({exporter:p})=>p==="otlp")}}}return i},{});return{...s==null?void 0:s.data.applications.filter(i=>i.active).reduce((i,c)=>c.client_type==="vercel"?c.vercel?{...i,vercel:c.vercel}:i:c.client_type==="UNKNOWN"?i:{...i,[c.client_type]:{}},{}),...r}}})},Yl={orgAdmin:"You must be an admin to transfer organization projects",vercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",noOrgs:"Project cannot be transferred because you are not a member of any valid target organizations",sharedProjects:"Shared projects cannot be transferred",integrations:"Unable to transfer due to existing integrations. Please remove them first, then reinstall after the transfer."},JW=({isOwnProject:t,isMyOrgProject:s,isOrgAdmin:n,hasOrgDestinations:r,isVercelOrg:a,hasIntegrations:o})=>{if(o)return Yl.integrations;if(!r)return Yl.noOrgs;if(s)return n?a?Yl.vercelOrg:void 0:Yl.orgAdmin;if(!t)return Yl.sharedProjects},jP=t=>{const{data:s,isLoading:n}=Fn();if(t===void 0||n)return{isLoading:!0,orgs:void 0};const r=t[0].org_id,a=t.some(i=>{var c;return(c=i==null?void 0:i.settings)==null?void 0:c.hipaa});return{isLoading:!1,orgs:s==null?void 0:s.filter(i=>i.id!==r&&(!!i.allow_hipaa_projects||!a))}},vP=()=>{const{project:t,isOwnProject:s}=F(),{data:n}=Fn(),{orgs:r,isLoading:a}=jP(t?[t]:void 0),{isVercelOrg:o,isLoading:i}=re(),{isOrgAdmin:c,isLoading:l}=Rt(),{data:d,isLoading:u}=Hu();if(i||l||u||a)return{enabled:!1,isLoading:!0,disabledMessage:void 0};const p=!!(t!=null&&t.org_id&&(n!=null&&n.some(b=>b.id===(t==null?void 0:t.org_id)))),g=((r==null?void 0:r.length)??0)>0,f=(d==null?void 0:d.vercel)!==void 0||(d==null?void 0:d.github)!==void 0,_=JW({isOwnProject:s,isMyOrgProject:p,isOrgAdmin:c,hasOrgDestinations:g,isVercelOrg:o,hasIntegrations:f});return{enabled:!_,isLoading:!1,disabledMessage:_}},_a={title:t=>`Transfer ${Rn("project",t)}`,descriptionSingle:t=>e.jsxs(e.Fragment,{children:["Transfer ",e.jsx("b",{children:t})," to"]}),descriptionMultiple:t=>`Transfer ${t} projects to`,tableColumnLabel:"Organization",confirmationButtonText:"Transfer",successSingle:(t,s)=>e.jsxs(e.Fragment,{children:["Project ",e.jsx("b",{children:t})," was successfully moved to ",e.jsx("b",{children:s}),". Existing members can now access the project through the org, and are no longer listed as collaborators."]}),successMultiple:(t,s)=>e.jsxs(e.Fragment,{children:[t," projects were successfully moved to ",e.jsx("b",{children:s}),". Existing members can now access the projects through the org, and are no longer listed as collaborators."]}),noOrgs:t=>`${Rn("Project",t)} cannot be transferred because you are not a member of any valid target organizations`},yP=({projects:t,onRequestClose:s,onSuccess:n,disabledMessage:r,isLoading:a})=>{const{orgs:o,isLoading:i}=jP(t);let c=r;!c&&(o==null?void 0:o.length)===0&&(c=_a.noOrgs(t.length));const l=$e({defaultValues:{targetOrgId:void 0}}),d=o$(),u=m.useCallback(async({targetOrgId:g})=>{const f=o.find(_=>_.id===g).name;try{await d({fromOrgId:t[0].org_id,projectIds:t.map(b=>b.id),toOrgId:g});const _=t.length===1?_a.successSingle(t[0].name,f):_a.successMultiple(t.length,f);oe(_),n(g)}catch(_){mF(_)}},[n,o,t,d]),{field:p}=qb({name:"targetOrgId",control:l.control}),h=m.useMemo(()=>[{key:"id",label:_a.tableColumnLabel,renderValue:({id:g,name:f})=>e.jsx("div",{children:e.jsx(fi,{name:p.name,checked:p.value===g,onChange:()=>p.onChange(g),children:f})})}],[p]);return e.jsx(ps,{providerProps:l,onSubmit:u,modalProps:{isOpen:!0,title:_a.title(t.length),onRequestClose:s},children:a||i?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[e.jsx(De,{gaps:!0,children:c?e.jsx(T,{appearance:"secondary",children:c}):e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"secondary",children:t.length===1?_a.descriptionSingle(t[0].name):_a.descriptionMultiple(t.length)}),e.jsx(xr,{cols:h,isLoading:o===void 0,data:o===void 0?[]:o,maxHeight:350})]})}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{"data-qa":"project_transfer_confirmation_submit_button",disabled:o===void 0||p.value===void 0||!!c,children:_a.confirmationButtonText})]})]})})},wP=({project:t,...s})=>{const{isLoading:n,disabledMessage:r}=vP();return e.jsx(yP,{projects:[t],disabledMessage:r,isLoading:n,...s})};function SP(t){const s=dr(t);m.useEffect(()=>(window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s)}),[s])}const ZW=960;function CP({rootRef:t,shouldShowGlobe:s}){const n=m.useCallback(()=>s?s():t.current?t.current.clientWidth>=ZW:!1,[t,s]),[r,a]=m.useState(n);return m.useEffect(()=>{a(n)},[n]),SP(()=>{a(n)}),r}var gw=["x","y","z"],Br=function(t){Object.assign(this,{uniforms:{},geometry:{vertices:[{x:0,y:0,z:0}]},mode:0,modifiers:{},attributes:[],multiplier:1,buffers:[]}),Object.assign(this,t),this.prepareProgram(),this.prepareUniforms(),this.prepareAttributes()};Br.prototype.compileShader=function(t,s){var n=this.gl.createShader(t);return this.gl.shaderSource(n,s),this.gl.compileShader(n),n},Br.prototype.prepareProgram=function(){var t=this.gl,s=this.vertex,n=this.fragment,r=t.createProgram();t.attachShader(r,this.compileShader(35633,s)),t.attachShader(r,this.compileShader(35632,n)),t.linkProgram(r),t.useProgram(r),this.program=r},Br.prototype.prepareUniforms=function(){for(var t=Object.keys(this.uniforms),s=0;s<t.length;s+=1){var n=this.gl.getUniformLocation(this.program,t[s]);this.uniforms[t[s]].location=n}},Br.prototype.prepareAttributes=function(){this.geometry.vertices!==void 0&&this.attributes.push({name:"aPosition",size:3}),this.geometry.normal!==void 0&&this.attributes.push({name:"aNormal",size:3}),this.attributeKeys=[];for(var t=0;t<this.attributes.length;t+=1)this.attributeKeys.push(this.attributes[t].name),this.prepareAttribute(this.attributes[t])},Br.prototype.prepareAttribute=function(t){for(var s=this.geometry,n=this.multiplier,r=s.vertices,a=s.normal,o=new Float32Array(n*r.length*t.size),i=0;i<n;i+=1)for(var c=t.data&&t.data(i,n),l=i*r.length*t.size,d=0;d<r.length;d+=1)for(var u=0;u<t.size;u+=1){var p=this.modifiers[t.name];o[l]=p!==void 0?p(c,d,u,this):t.name==="aPosition"?r[d][gw[u]]:t.name==="aNormal"?a[d][gw[u]]:c[u],l+=1}this.attributes[this.attributeKeys.indexOf(t.name)].data=o,this.prepareBuffer(this.attributes[this.attributeKeys.indexOf(t.name)])},Br.prototype.prepareBuffer=function(t){var s=t.data,n=t.name,r=t.size,a=this.gl.createBuffer();this.gl.bindBuffer(34962,a),this.gl.bufferData(34962,s,35044);var o=this.gl.getAttribLocation(this.program,n);this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(o,r,5126,!1,0,0),this.buffers[this.attributeKeys.indexOf(t.name)]={buffer:a,location:o,size:r}},Br.prototype.render=function(t){var s=this,n=this.uniforms,r=this.multiplier,a=this.gl;a.useProgram(this.program);for(var o=0;o<this.buffers.length;o+=1){var i=this.buffers[o],c=i.location,l=i.buffer,d=i.size;a.enableVertexAttribArray(c),a.bindBuffer(34962,l),a.vertexAttribPointer(c,d,5126,!1,0,0)}Object.keys(t).forEach(function(u){n[u].value=t[u].value}),Object.keys(n).forEach(function(u){var p=n[u];s.uniformMap[p.type](p.location,p.value)}),a.drawArrays(this.mode,0,r*this.geometry.vertices.length),this.onRender&&this.onRender(this)},Br.prototype.destroy=function(){for(var t=0;t<this.buffers.length;t+=1)this.gl.deleteBuffer(this.buffers[t].buffer);this.gl.deleteProgram(this.program),this.gl=null};var Qo=function(t){var s=this,n=t||{},r=n.canvas;r===void 0&&(r=document.querySelector("canvas"));var a=n.context;a===void 0&&(a={});var o=n.contextType;o===void 0&&(o="experimental-webgl");var i=n.settings;i===void 0&&(i={});var c=r.getContext(o,Object.assign({alpha:!1,antialias:!1},a));Object.assign(this,{gl:c,canvas:r,uniforms:{},instances:new Map,shouldRender:!0}),Object.assign(this,{devicePixelRatio:1,clearColor:[1,1,1,1],position:{x:0,y:0,z:2},clip:[.001,100]}),Object.assign(this,i),this.uniformMap={float:function(l,d){return c.uniform1f(l,d)},vec2:function(l,d){return c.uniform2fv(l,d)},vec3:function(l,d){return c.uniform3fv(l,d)},vec4:function(l,d){return c.uniform4fv(l,d)},mat2:function(l,d){return c.uniformMatrix2fv(l,!1,d)},mat3:function(l,d){return c.uniformMatrix3fv(l,!1,d)},mat4:function(l,d){return c.uniformMatrix4fv(l,!1,d)}},c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),c.getContextAttributes().alpha===!1&&(c.clearColor.apply(c,this.clearColor),c.clearDepth(1)),this.onSetup&&this.onSetup(c),window.addEventListener("resize",function(){return s.resize()}),this.resize(),this.render()};Qo.prototype.resize=function(){var t=this.gl,s=this.canvas,n=this.devicePixelRatio,r=this.position;s.width=s.clientWidth*n,s.height=s.clientHeight*n;var a=t.drawingBufferWidth,o=t.drawingBufferHeight,i=a/o;t.viewport(0,0,a,o);var c=Math.tan(Math.PI/180*22.5),l=[1,0,0,0,0,1,0,0,0,0,1,0,r.x,r.y,(i<1?1:i)*-r.z,1];this.uniforms.uProjectionMatrix={type:"mat4",value:[.5/c,0,0,0,0,i/c*.5,0,0,0,0,-(this.clip[1]+this.clip[0])/(this.clip[1]-this.clip[0]),-1,0,0,-2*this.clip[1]*(this.clip[0]/(this.clip[1]-this.clip[0])),0]},this.uniforms.uViewMatrix={type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},this.uniforms.uModelMatrix={type:"mat4",value:l}},Qo.prototype.toggle=function(t){t!==this.shouldRender&&(this.shouldRender=t!==void 0?t:!this.shouldRender,this.shouldRender&&this.render())},Qo.prototype.render=function(){var t=this;this.gl.clear(16640),this.instances.forEach(function(s){s.render(t.uniforms)}),this.onRender&&this.onRender(this),this.shouldRender&&requestAnimationFrame(function(){return t.render()})},Qo.prototype.add=function(t,s){s===void 0&&(s={uniforms:{}}),s.uniforms===void 0&&(s.uniforms={}),Object.assign(s.uniforms,JSON.parse(JSON.stringify(this.uniforms))),Object.assign(s,{gl:this.gl,uniformMap:this.uniformMap});var n=new Br(s);return this.instances.set(t,n),n},Qo.prototype.remove=function(t){var s=this.instances.get(t);s!==void 0&&(s.destroy(),this.instances.delete(t))},Qo.prototype.destroy=function(){var t=this;this.instances.forEach(function(s,n){s.destroy(),t.instances.delete(n)}),this.toggle(!1)};var kP="phi",IP="theta",PP="mapSamples",TP="mapBrightness",AP="baseColor",NP="markerColor",EP="glowColor",Jl="markers",OP="diffuse",fw="devicePixelRatio",$P="dark",LP="offset",RP="scale",MP="opacity",BP="mapBaseBrightness",_w={[kP]:"A",[IP]:"B",[PP]:"m",[TP]:"E",[AP]:"R",[NP]:"S",[EP]:"z",[OP]:"F",[$P]:"G",[LP]:"y",[RP]:"C",[MP]:"H",[BP]:"I"},{PI:nf,sin:bw,cos:xw}=Math,jw=t=>[].concat(...t.map(s=>{let[n,r]=s.location;n=n*nf/180,r=r*nf/180-nf;let a=xw(n),o=[-a*xw(r),bw(n),a*bw(r),s.size],i=s.color?[...s.color,1]:[0,0,0,0];return[...o,...i]}),[0,0,0,0,0,0,0,0]),XW=(t,s)=>{let n=(o,i,c)=>({type:o,value:typeof s[i]>"u"?c:s[i]}),r=t.getContext("webgl2")?"webgl2":t.getContext("webgl")?"webgl":"experimental-webgl",a=new Qo({canvas:t,contextType:r,context:{alpha:!0,stencil:!1,antialias:!0,depth:!1,preserveDrawingBuffer:!1,...s.context},settings:{[fw]:s[fw]||1,onSetup:o=>{let i=o.RGB,c=o.UNSIGNED_BYTE,l=o.TEXTURE_2D,d=o.createTexture();o.bindTexture(l,d),o.texImage2D(l,0,i,1,1,0,i,c,new Uint8Array([0,0,0,0]));let u=new Image;u.onload=()=>{o.bindTexture(l,d),o.texImage2D(l,0,i,i,c,u),o.generateMipmap(l);let p=o.getParameter(o.CURRENT_PROGRAM),h=o.getUniformLocation(p,"J");o.texParameteri(l,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(l,o.TEXTURE_MAG_FILTER,o.NEAREST),o.uniform1i(h,0)},u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAACAAQAAAADMzoqnAAAAAXNSR0IArs4c6QAABA5JREFUeNrV179uHEUAx/Hf3JpbF+E2VASBsmVKTBcpKJs3SMEDcDwBiVJAAewYEBUivIHT0uUBIt0YCovKD0CRjUC4QfHYh8hYXu+P25vZ2Zm9c66gMd/GJ/tz82d3bk8GN4SrByYF2366FNTACIAkivVAAazQdnf3MvAlbNUQfOPAdQDvSAimMWhwy4I2g4SU+Kp04ISLpPBAKLxPyic3O/CCi+Y7rUJbiodcpDOFY7CgxCEXmdYD2EYK2s5lApOx5pEDDYCUwM1XdJUwBV11QQMg59kePSCaPAASQMEL2hwo6TJFgxpg+TgC2ymXPbuvc40awr3D1QCFfbH9kcoqAOkZozpQo0aqAGQRKCog/+tjkgbNFEtg2FffBvBGlSxHoAaAa1u6X4PBAwDiR8FFsrQgeUhfJTSALaB9jy5NCybJPn1SVFiWk7ywN+KzhH1aKAuydhGkbEF4lWohLXDXavlyFgHY7LBnLRdlAP6BS5Cc8RfVDXbkwN/oIvmY+6obbNeBP0JwTuMGu9gTzy1Q4RS/cWpfzszeYwd+CAFrtBW/Hur0gLbJGlD+/OjVwe/drfBxkbbg63dndEDfiEBlAd7ac0BPe1D6Jd8dfbLH+RI0OzseFB5s01/M+gMdAeluLOCAuaUA9Lezo/vSgXoCX9rtEiXnp7Q1W/CNyWcd8DXoS6jH/YZ5vAJEWY2dXFQe2TUgaFaNejCzJ98g6HnlVrsE58sDcYqg+9XY75fPqdoh/kRQWiXKg8MWlJQxUFMPjqnyujhFBE7UxIMjyszk0QwQlFsezImsyvUYYYVED2pk6m0Tg8T04Fwjk2kdAwSACqlM6gRRt3vQYAFGX0Ah7Ebx1H+MDRI5ui0QldH4j7FGcm90XdxD2Jg1AOEAVAKhEFXSn4cKUELurIAKwJ3MArypPscQaLhJFICJ0ohjDySAdH8AhDtCiTuMycH8CXzhH9jUACAO5uMhoAwA5i+T6WAKmmAqnLy80wxHqIPFYpqCwxGaYLt4Dyievg5kEoVEUAhs6pqKgFtDQYOuaXypaWKQfIuwwoGSZgfLsu/XAtI8cGN+h7Cc1A5oLOMhwlIPXuhu48AIvsSBkvtV9wsJRKCyYLfq5lTrQMFd1a262oqBck9K1V0YjQg0iEYYgpS1A9GlXQV5cykwm4A7BzVsxQqo7E+zCegO7Ma7yKgsuOcfKbMBwLC8wvVNYDsANYalEpOAa6zpWjTeMKGwEwC1CiQewJc5EKfgy7GmRAZA4vUVGwE2dPM/g0xuAInE/yG5aZ8ISxWGfYigUVbdyBElTHh2uCwGdfCkOLGgQVBh3Ewp+/QK4CDlR5Ws/Zf7yhCf8pH7vinWAvoVCQ6zz0NX5V/6GkAVV+2/5qsJ/gU8bsxpM8IeAQAAAABJRU5ErkJggg=="}}});return a.add("",{vertex:"attribute vec3 aPosition;uniform mat4 uProjectionMatrix;uniform mat4 uModelMatrix;uniform mat4 uViewMatrix;void main(){gl_Position=uProjectionMatrix*uModelMatrix*uViewMatrix*vec4(aPosition,1.);}",fragment:"precision highp float;uniform vec2 t,y;uniform vec3 R,S,z;uniform vec4 v[64*2];uniform float A,B,m,C,D,E,F,G,H,I;uniform sampler2D J;float K=1./m;mat3 L(float a,float b){float c=cos(a),d=cos(b),e=sin(a),f=sin(b);return mat3(d,f*e,-f*c,0.,c,e,f,d*-e,d*c);}vec3 w(vec3 c,out float x){c=c.xzy;float p=max(2.,floor(log2(2.236068*m*3.141593*(1.-c.z*c.z))*.72021));vec2 g=floor(pow(1.618034,p)/2.236068*vec2(1.,1.618034)+.5),d=fract((g+1.)*.618034)*6.283185-3.883222,e=-2.*g,f=vec2(atan(c.y,c.x),c.z-1.),q=floor(vec2(e.y*f.x-d.y*(f.y*m+1.),-e.x*f.x+d.x*(f.y*m+1.))/(d.x*e.y-e.x*d.y));float n=3.141593;vec3 r;for(float h=0.;h<4.;h+=1.){vec2 s=vec2(mod(h,2.),floor(h*.5));float j=dot(g,q+s);if(j>m)continue;float a=j,b=0.;if(a>=524288.)a-=524288.,b+=.803894;if(a>=262144.)a-=262144.,b+=.901947;if(a>=131072.)a-=131072.,b+=.950973;if(a>=65536.)a-=65536.,b+=.475487;if(a>=32768.)a-=32768.,b+=.737743;if(a>=16384.)a-=16384.,b+=.868872;if(a>=8192.)a-=8192.,b+=.934436;if(a>=4096.)a-=4096.,b+=.467218;if(a>=2048.)a-=2048.,b+=.733609;if(a>=1024.)a-=1024.,b+=.866804;if(a>=512.)a-=512.,b+=.433402;if(a>=256.)a-=256.,b+=.216701;if(a>=128.)a-=128.,b+=.108351;if(a>=64.)a-=64.,b+=.554175;if(a>=32.)a-=32.,b+=.777088;if(a>=16.)a-=16.,b+=.888544;if(a>=8.)a-=8.,b+=.944272;if(a>=4.)a-=4.,b+=.472136;if(a>=2.)a-=2.,b+=.236068;if(a>=1.)a-=1.,b+=.618034;float k=fract(b)*6.283185,i=1.-2.*j*K,l=sqrt(1.-i*i);vec3 o=vec3(cos(k)*l,sin(k)*l,i);float u=length(c-o);if(u<n)n=u,r=o;}x=n;return r.xzy;}void main(){vec2 b=(gl_FragCoord.xy/t*2.-1.)/C-y*vec2(1.,-1.)/t;b.x*=t.x/t.y;float c=dot(b,b);vec4 x=vec4(0.);float n=0.;if(c<=.64){for(int g=0;g<2;g++){vec4 e=vec4(0.);float a;vec3 u=vec3(0.,0.,1.),h=normalize(vec3(b,sqrt(.64-c)));h.z*=g>0?-1.:1.,u.z*=g>0?-1.:1.;vec3 i=h*L(B,A),j=w(i,a);float o=asin(j.y),k=acos(-j.x/cos(o));k=j.z<0.?-k:k;float M=max(texture2D(J,vec2(k*.5/3.141593,-(o/3.141593+.5))).x,I),N=smoothstep(8e-3,0.,a),l=dot(h,u),p=pow(l,F)*E,q=M*N*p,T=mix((1.-q)*pow(l,.4),q,G)+.1;e+=vec4(R*T,1.);int U=int(D);float V=0.;for(int d=0;d<64;d++){if(d>=U)break;vec4 r=v[d*2],O=v[d*2+1];vec3 s=r.xyz,P=s-i;float f=r.w;if(dot(P,P)>f*f*4.)continue;vec3 W=w(s,a);a=length(W-i);if(a<f)V+=smoothstep(f*.5,0.,a),e.xyz=O.w>.5?mix(e.xyz,O.xyz,smoothstep(f*.5,0.,a)*p):mix(e.xyz,S,smoothstep(f*.5,0.,a)*p);}e.xyz+=pow(1.-l,4.)*z,x+=e*(1.+(g>0?-H:H))/2.;}n=pow(dot(normalize(vec3(-b,sqrt(1.-c))),vec3(0.,0.,1.)),4.)*smoothstep(0.,1.,.2/(c-.64));}else{float Q=sqrt(.2/(c-.64));n=smoothstep(.5,1.,Q/(Q+1.));}gl_FragColor=x+vec4(n*z,n);}",uniforms:{t:{type:"vec2",value:[s.width,s.height]},A:n("float",kP),B:n("float",IP),m:n("float",PP),E:n("float",TP),I:n("float",BP),R:n("vec3",AP),S:n("vec3",NP),F:n("float",OP),z:n("vec3",EP),G:n("float",$P),v:{type:"vec4",value:jw(s[Jl])},D:{type:"float",value:s[Jl].length},y:n("vec2",LP,[0,0]),C:n("float",RP,1),H:n("float",MP,1)},mode:4,geometry:{vertices:[{x:-100,y:100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0},{x:100,y:-100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0}]},onRender:({uniforms:o})=>{let i={};if(s.onRender){i=s.onRender(i)||i;for(let c in _w)i[c]!==void 0&&(o[_w[c]].value=i[c]);i[Jl]!==void 0&&(o.v.value=jw(i[Jl]),o.D.value=i[Jl].length),i.width&&i.height&&(o.t.value=[i.width,i.height])}}}),a};const eG="_root_7dhda_1",tG="_root_hiding_7dhda_9",sG="_wrapper_7dhda_13",nG="_canvas_7dhda_28",rG="_regionHint_7dhda_33",Zl={root:eG,root_hiding:tG,wrapper:sG,canvas:nG,regionHint:rG},aG={dark:0,diffuse:0,mapBrightness:12,mapBaseBrightness:0,opacity:.95,baseColor:[.9490196078431372,1,.9803921568627451],glowColor:[1,1,1],markerColor:[.2784313725490196,.9372549019607843,.5764705882352941]},oG={dark:.8,diffuse:2.5,mapBrightness:3,mapBaseBrightness:.1,opacity:1,baseColor:[.3843137254901961,.3843137254901961,.3843137254901961],glowColor:[.09803921568627451,.09803921568627451,.09803921568627451],markerColor:[.2784313725490196,.9372549019607843,.5764705882352941]};function iG({size:t,pixelRatio:s,position:n,marker:r,theme:a,onRender:o}){return{...a==="light"?aG:oG,devicePixelRatio:s,width:t*s,height:t*s,phi:n.phi,theta:n.theta,scale:1.115,mapSamples:39e3,offset:[0,0],markers:r?[{location:[r.position.lat,r.position.lng],size:.04}]:[],onRender:o}}const rf={regionTitle:"Region",descriptionTitle:"Your free plan includes:",descriptionPoints:["0.5 GB storage","Scales to zero when inactive","Autoscaling up to 2 CU","10 branches per project"]},cG="_wrapper_lygj5_1",lG="_wrapper_appearing_lygj5_19",dG="_iconColumn_lygj5_24",uG="_icon_lygj5_24",hG="_contentColumn_lygj5_32",pG="_regionBlock_lygj5_38",mG="_blockTitle_lygj5_44",gG="_regionName_lygj5_51",fG="_specBlock_lygj5_57",_G="_featureList_lygj5_63",_n={wrapper:cG,wrapper_appearing:lG,iconColumn:dG,icon:uG,contentColumn:hG,regionBlock:pG,blockTitle:mG,regionName:gG,specBlock:fG,featureList:_G},bG=250,xG=({className:t,regionName:s})=>{const[n,r]=m.useState(s),[a,o]=m.useState("HIDING"),{isFreeSubscription:i}=he();return m.useEffect(()=>{o("HIDING");const c=window.setTimeout(()=>{r(s),o("APPEARING")},bG);return()=>{window.clearTimeout(c)}},[s]),e.jsxs("div",{className:V(t,_n.wrapper,{[_n.wrapper_appearing]:a==="APPEARING"}),children:[e.jsx("div",{className:_n.iconColumn,children:e.jsx(z,{className:_n.icon,name:"compute_time",size:24})}),e.jsxs("div",{className:_n.contentColumn,children:[e.jsxs("div",{className:_n.regionBlock,children:[e.jsx("h2",{className:_n.blockTitle,children:rf.regionTitle}),e.jsx("div",{className:_n.regionName,children:n})]}),i&&e.jsxs("div",{className:_n.specBlock,children:[e.jsx("h2",{className:_n.blockTitle,children:rf.descriptionTitle}),e.jsx("ul",{className:_n.featureList,children:rf.descriptionPoints.map((c,l)=>e.jsx("li",{children:c},l))})]})]})]})};var Lp=(t=>(t.SHOW="SHOW",t.HIDING="HIDING",t.HIDE="HIDE",t))(Lp||{});function DP({wrapperRef:t,maxSize:s,adjustHeight:n}){const[r,a]=m.useState("HIDE"),[o,i]=m.useState(0);function c(p){return Math.min(s,p.clientWidth)}function l({clientWidth:p,clientHeight:h}){return Math.min(p,h)}const d=dr(()=>{if(t.current){a("SHOW");const p=Math.min(s,n?l(t.current):c(t.current));i(p)}}),u=m.useMemo(()=>ix(d,500,{leading:!1,trailing:!0}),[d]);return m.useLayoutEffect(()=>{d()},[d]),SP(()=>{if(!t.current)return;l(t.current)!==o&&(a("HIDING"),u())}),{globeState:r,size:o}}function jG({lat:t,lng:s}){return{phi:Math.PI-(s*Math.PI/180-Math.PI/2),theta:t*Math.PI/180}}const im=700,vG=.008,vw=5e-4,Ph=.08,yw={phi:4.26,theta:.39},yG=({marker:t,globeClassName:s,adjustHeight:n=!1})=>{const r=m.useRef(null),a=m.useMemo(()=>window.devicePixelRatio??1,[]),o=m.useRef(void 0),i=m.useRef(null),{colorScheme:c}=oo(),{size:l,globeState:d}=DP({wrapperRef:i,maxSize:im,adjustHeight:n}),[u,p]=m.useState(t?"MARKER":"SPINNING"),h=m.useRef(!0),g=m.useRef(yw),f=m.useRef(yw),_=m.useRef(void 0),b=dr(()=>{h.current=!1;const x=performance.now(),j=_.current;_.current=x;const{current:v}=f;let y=0;if(j&&(y=Math.max(0,x-j)),y===0)return v;const S=y*.0625,w=Math.PI*2,k=o.current,N=g.current;if(u==="SPINNING")v.phi+=vG*S;else{const D=(N.phi-v.phi+w)%w,L=(v.phi-N.phi+w)%w;let H;D<L?H=D*Ph:H=-L*Ph;const W=v.theta*(1-Ph)+N.theta*Ph-v.theta;!h.current&&Math.abs(H)<vw&&Math.abs(W)<vw&&k.toggle(!1),v.phi+=H*S,v.theta+=W*S}return v});return m.useEffect(()=>{let x=window.setTimeout(()=>{try{x=void 0,h.current=!0,_.current=void 0,o.current=XW(r.current,iG({size:l,position:f.current,pixelRatio:a,marker:t,theme:c,onRender:b}))}catch(j){const v=Nt(j);Ye(v)}},0);return()=>{x&&window.clearTimeout(x),o.current&&(o.current.destroy(),o.current=void 0)}},[c,t,l,a,b]),m.useEffect(()=>{var x;if(t){const j=jG(t.position);g.current={phi:j.phi,theta:j.theta-.22},p("MARKER")}else p("SPINNING");_.current=void 0,(x=o.current)==null||x.toggle(!0)},[t]),e.jsx("div",{ref:i,className:V(Zl.root,{[Zl.root_hiding]:d===Lp.HIDING}),children:e.jsx("div",{className:V(s,Zl.wrapper),style:{"--local-globe-size":`${l}px`,"--local-max-globe-size":`${im}px`},children:(d===Lp.SHOW||d===Lp.HIDING)&&e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:r,className:Zl.canvas,width:l*a,height:l*a,style:{width:l,height:l}}),t&&e.jsx(xG,{className:Zl.regionHint,regionName:t.label})]})})})},wG=Object.freeze(Object.defineProperty({__proto__:null,Globe:yG,MAX_GLOBE_SIZE:im},Symbol.toStringTag,{value:"Module"})),SG=()=>{const t=m.useRef(null),{size:s}=DP({wrapperRef:t,maxSize:im,adjustHeight:!1});return e.jsx("div",{ref:t,style:{height:s}})},CG="_root_wmqqq_1",kG={root:CG},IG=m.lazy(async()=>({default:(await nn(()=>Promise.resolve().then(()=>wG),void 0)).Globe})),UP=({globeClassName:t,adjustHeight:s})=>{const{watch:n}=Ct(),r=j2(),a=n("platformId"),o=n("regionId"),i=m.useMemo(()=>r.find(d=>d.id===a),[r,a]),c=m.useMemo(()=>i&&i.regions.find(d=>d.id===o),[i,o]),l=m.useMemo(()=>c&&c.geo_coordinates?{id:c.id,label:c.name,position:c.geo_coordinates}:void 0,[c]);return e.jsx("div",{className:kG.root,children:e.jsx(m.Suspense,{fallback:e.jsx(SG,{}),children:e.jsx(IG,{marker:l,globeClassName:t,adjustHeight:s})})})},PG="_contentWithGlobe_1qs1m_1",TG="_contentWithDetails_1qs1m_8",AG="_globe_1qs1m_18",af={contentWithGlobe:PG,contentWithDetails:TG,globe:AG},NG=1024,EG=()=>window.innerWidth>=NG,OG=({isOpen:t,onRequestClose:s,settings:n,onSuccess:r,preferredDefaults:a,createdBy:o})=>{const{trackUiInteraction:i}=P(),{formatMessage:c}=hn(),l=et(),d=m.useRef(null),u=CP({rootRef:d,shouldShowGlobe:EG}),{onProjectCreate:p}=IC(),{setPassword:h}=gl(),g=m.useCallback(()=>{i("project_form_dismissed"),s==null||s()},[i,s]),f=m.useCallback(b=>{p(b);let x=Q(C.ProjectsItem,{projectId:b.project.id});b.useNeonAuth&&(x=Q(C.ProjectsItemIdentity,{projectId:b.project.id}),i("project_form_use_neon_auth_submitted")),l.push(x)},[l,p,i]),_=m.useCallback(b=>{if(h(b.project.id,b.roles),s==null||s(),r){r(b);return}f(b)},[f,s,r,h]);return e.jsx(cx,{isOpen:t,onRequestClose:g,title:c({id:"mYJ7Lo",defaultMessage:[{type:0,value:"Create project"}]}),width:1318,height:720,footer:e.jsxs(e.Fragment,{children:[e.jsx(E,{type:"submit",form:"create_project_form_id",onClick:()=>{i("project_form_submitted")},size:"l",children:"Create"}),e.jsx(dn,{appearance:"secondary",size:"l",children:"Cancel"})]}),children:e.jsx(v2,{id:"create_project_form_id",settings:n,onSuccess:_,preferredDefaults:a,formBodyClassName:V({[af.contentWithGlobe]:!0,[af.contentWithDetails]:!1}),createdBy:o,children:e.jsxs(e.Fragment,{children:[e.jsx(X0,{}),u&&e.jsx(UP,{globeClassName:af.globe,adjustHeight:!0})]})})})},Th={vercelOrg:"To create a new project, use the Neon Postgres integration in Vercel",projectCreationForbidden:"Sorry, you can't create projects for now",projectCreationAvailable:t=>`You can create ${t} more ${Rn("project",t)}`,limitReached:"You can not create any more projects for now"},qx=({children:t,settings:s,onSuccess:n,preferredDefaults:r,...a})=>{const{trackUiInteraction:o}=P(),{flags:{projectCreationForbidden:i}}=i$(),c=c$(),{data:l}=ws(),{max_projects:d}=Fb(),u=he(),{isVercelOrg:p}=re(),h=u.isFreeSubscription||u.subscriptionType==="launch",g=!n,{isModalOpen:f,openModal:_,closeModal:b}=it(Je.CreateProject,{syncWithUrl:g}),[x,j]=m.useState(!1),v=(l==null?void 0:l.length)||0,y=d!==-1&&v>=d,S=m.useMemo(()=>{if(p)return Th.vercelOrg;if(i)return Th.projectCreationForbidden;if(Xt(d)){if(!y){const w=d-v;return Th.projectCreationAvailable(w)}return Th.limitReached}},[y,v,i,d,p]);return e.jsxs(e.Fragment,{children:[e.jsx(OG,{isOpen:f,onRequestClose:b,settings:s,preferredDefaults:r,onSuccess:n}),h&&e.jsx(lt,{type:Xe.ProjectsLimitReached,isOpen:x,onRequestClose:()=>j(!1)}),h&&!i&&y&&!u.isMarketplaceAccount?e.jsx(E,{...a,"data-qa":"project_create_button",onClick:()=>{o("create_project_button_limited_clicked"),j(!0)},children:t||"Create project"}):e.jsx(te,{content:S,disabled:!S,children:e.jsx("div",{style:{display:"inline-block"},children:e.jsx(E,{...a,disabled:c||i||p||a.disabled,"data-qa":"project_create_button",onClick:()=>{o("create_project_button_clicked"),_()},children:t||"New project"})})})]})},FP=({project:t,isUserProject:s,onProjectTransfer:n})=>{const{trackUiInteraction:r}=P(),a=m.useCallback(()=>{r("projects_list_item_menu_opened")},[r]),{data:o}=Fn(),i=(o==null?void 0:o.length)??0,c=!!(t!=null&&t.org_id&&(o!=null&&o.some(h=>h.id===t.org_id))),d=i>(c?1:0),u=(s||c)&&d,p=m.useMemo(()=>[{items:He([{icon:"overview",label:"Dashboard",href:Q(C.ProjectsItem,{projectId:t.id}),onClick(){r("projects_list_item_menu_dashboard_clicked")},"data-qa":"project-dashboard-link"},{icon:"editor",label:"SQL Editor",href:Q(de.ProjectsItemQuery,{projectId:t.id}),onClick(){r("projects_list_item_menu_sql_editor_clicked")},"data-qa":"project-sql-editor-link"},u&&{icon:"connect_with",label:"Transfer project",onClick(){r("projects_list_item_menu_transfer_project_clicked"),n==null||n()},"data-qa":"project-transfer-link"},{icon:"settings",label:"Settings",href:Q(C.ProjectsItemSettings,{projectId:t.id}),onClick(){r("projects_list_item_menu_settings_clicked")},"data-qa":"project-settings-link"}])}],[t,r,u,n]);return e.jsx(Yt,{sections:p,placement:"bottom right",children:e.jsx(ms,{"data-qa":"project-actions","aria-label":`Actions with project ${t.name}`,onClick:a})})},js={normal:"",warning:"",error:"",unlimited:""},ww={storage:{normal:t=>`Your storage usage is well within the ${t} GB limit. You've got space to grow.`,warning:t=>`You're nearing your storage limit of ${t} GB. Free up space or upgrade to avoid issues.`,error:"Storage limit reached. Further database operations will fail unless you free up space or upgrade.",unlimited:""},compute:{normal:"Your compute usage is within the limits of your plan.",warning:"You're approaching your compute usage limit. Consider upgrading to avoid suspension.",error:"Compute limit exceeded. Compute operations are suspended until your next billing cycle or upgrade.",unlimited:"24/7 availability at the default 0.25 vCPU with 1 GB RAM"},branchCompute:{normal:t=>`Your branch computes are within the allowed ${t} hours per month across all branches.`,warning:t=>`You're nearing the ${t}-hour limit for branch computes. Consider optimizing or upgrading your plan.`,error:"Branch compute limit reached. Further operations on non-default branches will be paused until the next billing cycle or upgrade.",unlimited:""},dataTransfer:{normal:t=>`Network transfer is within your plan's ${t} GB-month limit.`,warning:t=>`You're close to reaching your network transfer limit of ${t} GB-month. Monitor usage to avoid suspension.`,error:"Network transfer limit exceeded. Compute is suspended until the next billing cycle or upgrade.",unlimited:""},branches:{normal:t=>`You're within the allowed number of ${t} branches for your plan.`,warning:t=>`You're nearing the maximum number of ${t} branches. Upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:t=>`You're within the allowed number of ${t} projects for your plan.`,warning:"You're nearing the maximum number of projects. Upgrade for more.",error:"Projects limit reached. Remove unused projects or upgrade your plan.",unlimited:""},publicDataTransfer:js,privateDataTransfer:js},sr={storage:{normal:t=>`Your storage usage is well within your ${t} GB allowance.`,warning:t=>`You're nearing your storage allowance of ${t} GB. Extra charges will apply if you go over.`,error:"You've reached your storage allowance. You'll be charged for any extra storage you add.",unlimited:""},compute:{normal:"Your compute usage is within your plan's allowance.",warning:"You're almost at your compute allowance. Extra charges will apply if you go over.",error:"You've reached your compute allowance. You'll be charged for any additional compute time.",unlimited:""},branches:{normal:t=>`You're within the allowed number of ${t} branches for your project.`,warning:t=>`You're nearing the maximum number of ${t} branches. Remove unused branches or upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:t=>`You're within the allowed number of ${t} projects for your plan.`,warning:t=>`You're nearing the maximum number of ${t} projects. Remove unused projects to stay within your limit.`,error:"You've reached your project limit. Remove unused projects to continue.",unlimited:""},branchCompute:js,dataTransfer:js,publicDataTransfer:js,privateDataTransfer:js},sc={...sr.projects,warning:t=>`You're nearing the maximum number of ${t} projects. Extra charges will apply if you go over.`,error:"You've reached your project limit. Extra charges will apply for any new projects you create.",unlimited:""},$G={free_v2:ww,free_v3:ww,launch_v3:sr,launch:sr,scale:{...sr,projects:sc},business:{...sr,projects:sc},scale_v3:{...sr,projects:sc},aws_marketplace:{...sr,projects:sc},direct_sales:{...sr,projects:sc},direct_sales_v3:{...sr,projects:sc},vercel_pg_legacy:{...sr},UNKNOWN:{branchCompute:js,storage:js,compute:js,dataTransfer:js,branches:js,projects:js,publicDataTransfer:js,privateDataTransfer:js}},el={titleForProjectLevel:"Usage since",titleForAccountLevel:"Account Usage",upgradeButtonContent:"Upgrade",extendLimitsButtonContent:"Upgrade to extend limits",toNow:"to now",divider:"•"},LG=(t,s,n)=>$G[n][t][s],RG=(t,s)=>Xt(s)?t>=s?"error":t>=s*.8?"warning":"normal":"unlimited",MG=({usageType:t,usage:s,allowance:n,subscriptionType:r})=>{const a=RG(s,n);return{usageState:a,tooltip:LG(t,a,r)}},Sw=({converterFn:t,value:s})=>s===void 0?"-":(t?t(s):s.toString()).split(" ")[0],BG=({converterFn:t,value:s})=>s===void 0?"":(t?t(s):s.toString()).split(" ")[1]||"",DG=(t,s)=>t&&!Xt(s),ns=({usageType:t,usage:s,allowance:n,isFreeSubscription:r,converterFn:a,showAllowance:o,isPaidSubscription:i,subscriptionType:c})=>{const l=Wc(s)?s.value:s,d=BG({converterFn:a,value:l}),{usageState:u,tooltip:p}=MG({usageType:t,usage:l,allowance:n,subscriptionType:c}),h=n===-1?"∞":Sw({converterFn:a,value:n}),g=typeof p=="function"?p(h):p;let f=Sw({converterFn:a,value:l});return Wc(s)&&s.isMoreThanFetched&&(f=`${f}+`),i?{usageType:t,usage:f,allowance:h,usageState:"normal",tooltip:g,isUnlimited:!1,showAllowance:o,unit:d}:{usageType:t,usage:f,allowance:h,usageState:u,tooltip:g,isUnlimited:DG(r,n),converterFn:a,showAllowance:o,unit:d}},zP=t=>t.map(s=>({...s,tooltip:"",usageState:"normal"})),UG=()=>{const{isFreeSubscription:t,isPaidSubscription:s,subscriptionType:n}=he(),{usage:r,isLoading:a}=mx(),{startPeriod:o}=Dm(),i=gx();return{items:m.useMemo(()=>[ns({isFreeSubscription:t,usageType:"storage",usage:r.storage,allowance:i.storage,converterFn:lr,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"compute",usage:r.compute,allowance:i.compute,converterFn:Ja,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),t&&ns({isFreeSubscription:t,usageType:"branchCompute",usage:r.nonPrimaryCompute,allowance:i.nonPrimaryCompute,converterFn:Ja,showAllowance:!0,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"dataTransfer",usage:r.dataTransfer,allowance:i.dataTransfer,converterFn:lr,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"projects",usage:r.projects,allowance:i.projects,showAllowance:!0,isPaidSubscription:s,subscriptionType:n})].filter(Boolean),[t,r.storage,r.compute,r.nonPrimaryCompute,r.dataTransfer,r.projects,i.storage,i.compute,i.nonPrimaryCompute,i.dataTransfer,i.projects,s,n]),isLoading:a,startPeriod:pr(o,ke.Date)}},FG="_statisticValues_o7viv_1",zG="_statisticIcon_o7viv_7",qG="_color_warning_o7viv_11",HG="_color_error_o7viv_15",nc={statisticValues:FG,statisticIcon:zG,color_warning:qG,color_error:HG},VG=({usageState:t,usage:s,showAllowance:n,allowance:r,unit:a})=>e.jsxs("span",{className:nc.statisticValues,"data-qa":`usage-card-usage-${t}`,children:[e.jsx(Z,{level:2,className:V({[nc.color_error]:t==="error",[nc.color_warning]:t==="warning"}),children:s}),n&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"/"}),e.jsx(T,{"data-qa":"usage-card-allowance",children:r})]}),e.jsx(T,{children:a}),t!=="normal"&&t!=="unlimited"&&e.jsx(z,{"data-qa":`usage-card-icon-${t}`,className:V(nc.statisticIcon,{[nc.color_error]:t==="error",[nc.color_warning]:t==="warning"}),name:"warning",size:12})]}),WG={storage:"Storage",compute:"Compute",branchCompute:"Branch compute",dataTransfer:"Network transfer",publicDataTransfer:"Public transfer",privateDataTransfer:"Private transfer",branches:"Branches",projects:"Projects"},GG={unlimited:"Unlimited"},KG="_root_1x3wy_1",QG="_statisticTitle_1x3wy_13",YG="_statisticValues_1x3wy_18",Ah={root:KG,statisticTitle:QG,statisticValues:YG},JG=({data:t,isLoading:s=!0})=>s||!t?e.jsx("div",{className:Ah.root,children:e.jsx(B,{"data-qa":"usage-card-loading",width:"100%",height:30})}):e.jsx(te,{content:t.tooltip,maxWidth:200,children:e.jsxs("div",{className:Ah.root,"data-qa":"usage-card",children:[e.jsx(Z,{level:6,className:Ah.statisticTitle,children:WG[t.usageType]}),t.isUnlimited?e.jsx(Z,{level:5,className:Ah.statisticValues,children:GG.unlimited}):e.jsx(VG,{...t})]})}),ZG="_root_1uexv_1",XG={root:ZG},eK=()=>e.jsxs(T,{size:"s",className:XG.root,children:["Metrics may be delayed up to one hour."," ",e.jsx(Ge,{href:l$,openInNewTab:!0,children:"Learn more here"}),"."]}),tK="_cards_5erur_1",sK={cards:tK},nK=({setUpgradePopupOpened:t,setEnterpriseTrialModalOpened:s,upgradePopupOpened:n,enterpriseTrialModalOpened:r})=>{const a=he(),{trackUiInteraction:o}=P(),i=m.useMemo(()=>a.subscriptionType==="scale",[a.subscriptionType]),c=m.useMemo(()=>!i&&a.subscriptionType!=="business"&&a.subscriptionType!=="scale_v3",[i,a.subscriptionType]);return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.Default,isOpen:n,onRequestClose:()=>t(!1)}),e.jsx(hI,{isOpen:r,onRequestClose:()=>s(!1)}),e.jsx(R,{onClick:()=>{o("usage_widget_upgrade_clicked"),i||c?t(!0):s(!0)},children:c?el.upgradeButtonContent:el.extendLimitsButtonContent})]})},rK=t=>{const s=he(),[n,r]=m.useState(!1),[a,o]=m.useState(!1),i=m.useMemo(()=>t.type==="project",[t.type]);if(!t.showUpgrade)return null;const c=!i&&e.jsxs("span",{children:[t.startPeriod," ",el.toNow]}),l=s.isFreeSubscription&&e.jsx(nK,{setUpgradePopupOpened:r,setEnterpriseTrialModalOpened:o,upgradePopupOpened:n,enterpriseTrialModalOpened:a});return e.jsxs("div",{children:[c,c&&l&&e.jsx("span",{children:` ${el.divider} `}),l]})},Hx=({data:{items:t,isLoading:s,startPeriod:n},showUpgrade:r,type:a})=>{const{isMarketplaceAccount:o}=he(),i=m.useMemo(()=>a==="project"?`${el.titleForProjectLevel} ${n}`:el.titleForAccountLevel,[n,a]);return e.jsxs(Si,{title:i,links:!o&&e.jsx(rK,{type:a,startPeriod:n,showUpgrade:r}),children:[e.jsx("div",{className:sK.cards,children:t.map(c=>e.jsx(JG,{data:c,isLoading:s},c.usageType))}),e.jsx(eK,{})]})},aK=({showUpgrade:t})=>{const s=UG();return e.jsx(Hx,{data:s,showUpgrade:t,type:"account"})},oK={migrateToNeon:"Import data"},iK="_steps_18n6i_1",cK="_stepHeader_18n6i_30",lK="_stepCompletedIcon_18n6i_36",dK="_stepCounter_18n6i_40",uK="_stepDescription_18n6i_57",Xd={steps:iK,stepHeader:cK,stepCompletedIcon:lK,stepCounter:dK,stepDescription:uK},qP=({children:t})=>e.jsx("div",{className:Xd.steps,children:t}),hK=({title:t,isStepCompleted:s})=>e.jsxs("div",{className:Xd.stepHeader,children:[s?e.jsx(z,{name:"check_circle_inverted2",className:Xd.stepCompletedIcon,size:24}):e.jsx("div",{className:Xd.stepCounter}),e.jsx(Z,{level:4,children:t})]}),pb=({title:t,description:s,children:n,isStepCompleted:r,isStepCollapsed:a,onStepCollapse:o})=>e.jsxs(cI,{header:e.jsx(hK,{title:t,isStepCompleted:r}),isCollapsed:a,onCollapseStateChange:o,children:[s?e.jsx(T,{as:"p",appearance:"secondary",className:Xd.stepDescription,children:s}):null,n]}),pK=["run_checks","create_project","move_data","actual_import"],HP=m.createContext(null),yl=d$(HP),cm=()=>{const{currentStepIdx:t,setCurrentStepIdx:s,setStepCollapsed:n,mode:r}=yl(),a=m.useMemo(()=>pK.filter(l=>r==="auto"?l!=="move_data":l!=="actual_import"),[r]),o=m.useCallback(l=>{for(let d=0;d<a.length;d+=1)if(l===a[d])return d<=t;return!1},[t,a]),i=m.useCallback(l=>{for(let d=0;d<a.length;d+=1)if(l===a[d])return d<t;return!1},[t,a]),c=m.useCallback((l,d=!1)=>{d&&n(a[t],!0);const u=Math.max(a.indexOf(l),t);s(u),n(l,!1)},[t,s,n,a]);return{isStepEnabled:o,continueTo:c,isStepCompleted:i}},mK=({project:t,children:s,mode:n})=>{const[r,a]=m.useState(""),[o,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(0),[p,h]=m.useState(new Set(["create_project","move_data","actual_import"])),[g,f]=m.useState(t??null),[_,b]=m.useState(null),x=m.useCallback(y=>p.has(y),[p]),j=m.useCallback((y,S)=>{h(w=>S?new Set([...w,y]):new Set([...w].filter(k=>k!==y)))},[h]),v=m.useMemo(()=>({sourceDatabaseUrl:r,setSourceDatabaseUrl:a,targetDatabaseUrl:o,setTargetDatabaseUrl:i,newProjectConfiguration:c,setNewProjectConfiguration:l,currentStepIdx:d,setCurrentStepIdx:u,isStepCollapsed:x,setStepCollapsed:j,createdProject:g,setCreatedProject:f,createdBranch:_,setCreatedBranch:b,mode:n}),[r,o,c,d,x,j,g,_,n]);return e.jsx(HP.Provider,{value:v,children:s})},gK=({id:t,title:s,description:n,content:r})=>{const{isStepCollapsed:a,setStepCollapsed:o}=yl(),{isStepCompleted:i}=cm(),{trackUiInteraction:c}=P(),l=m.useCallback(d=>{o(t,d),c(d?"migration_assistant_step_collapsed":"migration_assistant_step_expanded",{step:t})},[t,o,c]);return e.jsx(pb,{title:s,isStepCompleted:i(t),isStepCollapsed:a(t),description:n,onStepCollapse:l,children:r})},fK=({steps:t})=>e.jsx(qP,{children:t.map(s=>e.jsx(gK,{...s},s.id))}),of={title:"Import Data Assistant",learnMore:"Learn more"},_K="_content_1d2xh_1",bK="_title_1d2xh_8",Cw={content:_K,title:bK},eu={stepTitle:"Start import process",startImport:"Start import",description:"Click the button below to start the import process.",importLockedTooltip:"Project is being created, please wait.",importWarning:`This data import feature is currently in beta and may not be fully stable.
    Users should expect that some imports may fail.
    We're actively improving the stability and will update as the feature matures.`},xK="_tooltipButtonWrapper_1t02y_1",jK="_importWarning_1t02y_5",kw={tooltipButtonWrapper:xK,importWarning:jK},vK=()=>{const{sourceDatabaseUrl:t,createdProject:s}=yl(),[n,r]=m.useState(!1),a=et(),{trackUiInteraction:o}=P(),i=m.useCallback(async()=>{if(!s)throw new Error("Project not created");r(!0);try{o("migration_assistant_actual_import_start_clicked");const{data:{branch:d}}=await G.createProjectBranchImport(s.id,{import_options:{source_connection_string:t},branch_create:{branch:{name:"import"},endpoints:[{type:"read_write"}]}});a.push(Q(C.ProjectsItemBranchesItem,{projectId:s.id,branchId:d.id}))}catch(d){Y(d)}finally{r(!1)}},[s,a,t,o]),{data:c}=Em({projectId:s==null?void 0:s.id}),l=m.useMemo(()=>{if(!c)return!0;for(const d of c.pages)for(const u of d.operations)if(u.status==="running"||u.status==="scheduling")return!0;return!1},[c]);return e.jsxs("div",{children:[e.jsx(X,{className:kw.importWarning,children:eu.importWarning}),e.jsx(te,{content:l?eu.importLockedTooltip:void 0,placement:"top",zIndex:100,children:e.jsx("div",{className:kw.tooltipButtonWrapper,children:e.jsx(E,{appearance:"primary",loading:n,onClick:i,disabled:n||!s||!t||l,children:eu.startImport})})})]})},yK={id:"actual_import",title:eu.stepTitle,description:eu.description,content:e.jsx(vK,{})},VP={createProjectButton:"Create new project",description:"Create a project to host your database. We've tried to match defaults to your source database (region, Postgres version)."},wK="_container_4s2wx_1",SK={container:wK},CK=()=>{const{setTargetDatabaseUrl:t,setCreatedProject:s,setCreatedBranch:n,newProjectConfiguration:r}=yl(),{isStepEnabled:a,continueTo:o,isStepCompleted:i}=cm(),{trackUiInteraction:c}=P(),l=r!=null&&r.region?`aws-${r.region}`:"aws-us-east-2",d={platformId:"aws",databaseVersion:r==null?void 0:r.databaseVersion,regionId:l},u=m.useCallback(p=>{c("migration_assistant_on_new_project_created",{project_id:p.project.id}),s(p.project),n(p.branch),p.connection_uris.length>0&&(t(p.connection_uris[0].connection_uri),o("actual_import"))},[o,n,s,t,c]);return e.jsx("div",{className:SK.container,children:e.jsx(qx,{disabled:!a("create_project")||i("create_project"),preferredDefaults:d,onSuccess:u,children:VP.createProjectButton})})},WP={id:"create_project",title:e.jsx(gt,{id:"NqD1XB",defaultMessage:[{type:0,value:"Create a Neon project"}]}),description:VP.description,content:e.jsx(CK,{})},rc={pgdumpMessage:"Download a copy of your database",pgdumpInstructions:t=>`pg_dump --no-owner --no-privileges --no-publications --no-subscriptions --no-tablespaces -Fc -v -d "${t}" -f database.bak`,pgrestoreInstructions:t=>`pg_restore -v -d "${t}" database.bak`,monitorProgressMessage:"Monitor the operations progress in your terminal.",allDone:"All done?",goToProject:"Go to project"},kK="_container_1u5zb_1",IK="_group_1u5zb_7",PK="_hint_1u5zb_13",TK="_goToProjectButton_1u5zb_20",ac={container:kK,group:IK,hint:PK,goToProjectButton:TK},AK={databaseUrlPlaceholder:"<postgres connection string>"},Iw=t=>t.length>0?t:AK.databaseUrlPlaceholder,NK=()=>{const{sourceDatabaseUrl:t,targetDatabaseUrl:s,createdProject:n}=yl(),r=et(),{trackUiInteraction:a}=P(),o=m.useCallback(()=>{if(!n)throw new Error("Project should be created at this point");a("migration_assistant_go_to_project_clicked"),r.push(Q(C.ProjectsItem,{projectId:n.id}))},[r,n,a]);return e.jsxs("div",{className:ac.container,children:[e.jsxs("div",{className:ac.group,children:[e.jsx(T,{as:"p",appearance:"secondary",children:rc.pgdumpMessage}),e.jsx(rn,{mode:"text",copy:{onCopy:()=>a("migration_assistant_copy_pgdump_clicked")},children:rc.pgdumpInstructions(Iw(t))})]}),e.jsxs("div",{className:ac.group,children:[e.jsx(T,{as:"p",appearance:"secondary",children:e.jsx(gt,{id:"+VqW+7",defaultMessage:[{type:0,value:"Upload the database to Neon"}]})}),e.jsx(rn,{mode:"text",copy:{onCopy:()=>a("migration_assistant_copy_pgrestore_clicked")},children:rc.pgrestoreInstructions(Iw(s))})]}),e.jsxs("div",{className:ac.hint,children:[e.jsx(z,{name:"terminal",size:16}),rc.monitorProgressMessage]}),e.jsxs("div",{className:ac.group,children:[rc.allDone,e.jsx(E,{appearance:"secondary",onClick:o,disabled:!n,className:ac.goToProjectButton,children:rc.goToProject})]})]})},GP={id:"move_data",title:e.jsx(gt,{id:"R7Gmc6",defaultMessage:[{type:0,value:"Import data to Neon"}]}),description:e.jsx(gt,{id:"XNhA5/",defaultMessage:[{type:0,value:"Use the commands below to import your database data. First, download your data using pg_dump. Then, upload it to Neon with pg_restore."}]}),content:e.jsx(NK,{})},EK="_container_1aadf_1",OK="_colorCheckPassed_1aadf_7",$K="_checksPassedContainer_1aadf_11",mb={container:EK,colorCheckPassed:OK,checksPassedContainer:$K},Pw={buttonLabel:"Contact support",modalTitle:"Report a problem"},KP=({subject:t,description:s})=>{const[n,r]=m.useState(!1),a=m.useCallback(()=>r(!0),[r]),o=m.useCallback(()=>r(!1),[r]);return e.jsxs(e.Fragment,{children:[e.jsx(Ci,{onRequestClose:o,isOpen:n,title:Pw.modalTitle,defaultValues:{subject:t,description:s}}),e.jsx(E,{appearance:"secondary",onClick:a,children:Pw.buttonLabel})]})},LK=t=>({db_is_reachable:{title:"Cannot connect to the source database",description:"We were not able to connect to the source database.",recoverySuggestion:"Please check your connection string and try again."},db_version:{title:"Postgres version is not supported",description:t({id:"weVW4p",defaultMessage:[{type:0,value:"Neon currently supports Postgres 14 - 17"}]}),recoverySuggestion:"Please upgrade your database to a supported version or contact support."},db_version_too_new:{title:"Source Postgres version is too new",recoverySuggestion:"Create project with the same or newer PostgreSQL version than your source database."},non_default_tablespaces:{title:"Non-default tablespaces"},non_default_settings:{title:"Non-default settings"},extension_support:{title:"Found unsupported extensions"},extension_compatibility:{title:"Found incompatible extension versions"},cu_limits:{title:"We were not able to determine appropriate instance size"},database_list:{title:"We were not able to query databases"},service_type:{title:"We were not able to detect source database service provider"},service_region:{title:"We were not able to detect database region"}}),Tw={supportMessageSubject:t=>`Migration Assistant:"${t}"`,supportMessageDescription:(t,s)=>`Migration Assistant check "${t}" has failed with the error: "${s}"`},RK="_container_vv55i_1",MK="_title_vv55i_8",BK="_error_vv55i_13",DK="_warning_vv55i_17",Nh={container:RK,title:MK,error:BK,warning:DK},UK=({rule:t,description:s,warning:n})=>{const{formatMessage:r}=hn(),a=m.useMemo(()=>LK(r)[t],[r,t]);if(!a)return null;const{title:o,description:i=s,recoverySuggestion:c}=a,l=Tw.supportMessageSubject(o),d=Tw.supportMessageDescription(t,s),u=!!n;return e.jsx(cI,{initiallyCollapsed:!0,size:"s",header:e.jsxs(Z,{className:Nh.title,level:6,children:[e.jsx(z,{name:"warning",size:20,className:V({[Nh.error]:!u,[Nh.warning]:u})}),o]}),children:e.jsxs("div",{className:Nh.container,children:[e.jsx("p",{children:i}),c&&e.jsx("p",{children:c}),!u&&e.jsx(KP,{subject:l,description:d})]})})},FK=()=>e.jsxs("div",{className:mb.checksPassedContainer,children:[e.jsx(z,{name:"check",size:20,className:mb.colorCheckPassed}),"All checks have passed!"]}),QP=({checks:t})=>{if(!t.length)return null;const s=t.filter(n=>!n.succeed);return s.length?e.jsx("div",{className:mb.container,children:s.map(n=>e.jsx(UK,{...n},n.rule))}):e.jsx(FK,{})},tu={stepTitle:"Check compatibility",loaderText:"Running checks...",description:"We'll analyze your database and provide recommendations for a successful data import. No changes will be made to your source database.",connectionStringLabel:"Current database connection string",runChecksButtonLabel:"Run Checks"},zK="_container_m4alz_1",qK="_form_m4alz_7",HK="_connectionStringFormField_m4alz_14",VK="_loaderContainer_m4alz_18",Eh={container:zK,form:qK,connectionStringFormField:HK,loaderContainer:VK},WK=()=>{const{isStepCompleted:t}=cm(),{sourceDatabaseUrl:s,setSourceDatabaseUrl:n,setNewProjectConfiguration:r}=yl(),{continueTo:a}=cm(),[o,i]=m.useState(!1),[c,l]=m.useState([]),{trackUiInteraction:d}=P(),u=m.useCallback(g=>{n(g.target.value)},[n]),p=!o&&s.trim()&&!t("run_checks"),h=m.useCallback(async()=>{if(d("migration_assistant_run_checks_clicked"),!!p)try{i(!0),l([]);const{data:{data:g,new_project_configuration:f}}=await G.getMigrationChecklist({connection_uri:s.trim()});f&&r({databaseVersion:f.database_version,region:f.service_region}),l(g);const _=g.filter(x=>x.warning===!0&&!x.succeed).map(x=>x.rule),b=g.filter(x=>!x.succeed&&!x.warning).map(x=>x.rule);d("migration_assistant_run_checks_completed",{warnings:_,errors:b}),b.length||a("create_project",!_.length)}catch(g){Y(g)}finally{i(!1)}},[a,r,p,s,d]);return e.jsxs("div",{className:Eh.container,children:[e.jsxs(qt,{onSubmit:h,formBodyClassName:Eh.form,children:[e.jsx(U,{label:tu.connectionStringLabel,className:Eh.connectionStringFormField,children:e.jsx(ie,{disabled:o||t("run_checks"),placeholder:"postgresql://",size:"s",value:s,onChange:u})}),e.jsx(E,{onClick:h,appearance:"primary",type:"submit",disabled:!p,children:tu.runChecksButtonLabel})]}),o?e.jsxs("div",{className:Eh.loaderContainer,children:[e.jsx(on,{}),tu.loaderText]}):e.jsx(QP,{checks:c})]})},GK={id:"run_checks",title:tu.stepTitle,description:tu.description,content:e.jsx(WK,{})},KK=[GK,WP,GP],YP=({project:t,onCloseDrawer:s})=>{const{importAvailableRegions:n}=io(),r=!t||n.find(c=>c.id===(t==null?void 0:t.region_id)),a=r?"auto":"manual";P({mountEvent:{name:"migration_assistant_drawer_opened",params:{mode:a}},unmountEvent:{name:"migration_assistant_drawer_closed",params:{mode:a}}});const o=!!t,i=m.useMemo(()=>KK.map(c=>r&&c===GP?yK:c).filter(c=>!(o&&c===WP)),[r,o]);return e.jsx(oa,{isOpen:!0,size:"l","aria-label":of.title,onRequestClose:s,children:e.jsx(ia,{title:e.jsxs("div",{className:Cw.title,children:[of.title," ",e.jsx(Ie,{appearance:"experimental",size:"m",children:"Beta"})]}),children:e.jsxs("div",{className:Cw.content,children:[e.jsxs(T,{as:"p",appearance:"secondary",children:[e.jsx(gt,{id:"GOfoKO",defaultMessage:[{type:0,value:"Quickly import your existing Postgres database to Neon. Follow these steps to check compatibility, and import your data."}]})," ",e.jsx(R,{href:u$,openInNewTab:!0,icon:"external_link",children:of.learnMore})]}),e.jsx(mK,{project:t,mode:a,children:e.jsx(fK,{steps:i})})]})})})},JP=()=>{const t=it(Je.ImportDataAssistant),{isSuspendedAccount:s}=he();return e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(YP,{onCloseDrawer:()=>t.closeModal()}),e.jsx(E,{onClick:()=>t.openModal(),appearance:"secondary",disabled:s,children:oK.migrateToNeon})]})},cf={title:"HIPAA support is active",description:"Your organization has HIPAA support enabled. You can create or enable HIPAA-compliant projects, or contact support to disable it.",closeButton:"Close"},QK=()=>{const t=it(Je.HipaaProjectDeletedModal);return e.jsxs(ft,{isOpen:t.isModalOpen,onRequestClose:t.closeModal,title:cf.title,width:621,children:[e.jsx(De,{children:e.jsx(T,{children:cf.description})}),e.jsx(Te,{children:e.jsx(E,{onClick:t.closeModal,appearance:"primary",size:"l",children:cf.closeButton})})]})},lf={title:"You currently have no projects",description:"Create a project to get started with your Postgres database.",createProject:"Create project"},YK="_root_xtvp2_1",JK="_icon_xtvp2_12",ZK="_description_xtvp2_16",XK="_actions_xtvp2_21",Oh={root:YK,icon:JK,description:ZK,actions:XK},eQ=()=>e.jsxs("div",{className:Oh.root,"data-qa":"no_projects",children:[e.jsx(z,{name:"project",size:36,className:Oh.icon}),e.jsx(Z,{level:3,children:lf.title}),e.jsx(T,{appearance:"secondary",size:"l",className:Oh.description,children:lf.description}),e.jsxs("div",{className:Oh.actions,children:[e.jsx(qx,{children:lf.createProject}),e.jsx(JP,{})]})]}),tQ="_usageContainer_13ii1_1",sQ="_projectNameCell_13ii1_5",nQ="_projectName_13ii1_5",df={usageContainer:tQ,projectNameCell:sQ,projectName:nQ},$h={title:"Unable to fetch projects list",titleShared:"Unable to fetch shared projects list",description:"We couldn't fetch your current projects, please refresh to try again.",descriptionShared:"We couldn't fetch your shared projects, please refresh to try again."},gb=({variant:t})=>e.jsx(Fu,{title:t==="shared"?$h.titleShared:$h.title,subtitle:t==="shared"?$h.descriptionShared:$h.description,actions:e.jsx(E,{appearance:"primary",onClick:()=>window.location.reload(),size:"s","data-qa":"refresh_page_button",children:"Refresh page"})}),rQ=(t,s)=>t?s?"Projects":`${PC(t.name)} projects`:"Your projects",lm=(t,s)=>{const n=(t??[]).map(a=>({id:a.id,project:a})),r=(s??[]).map(a=>({id:a}));return[...n,...r]},aQ=()=>{const{trackUiInteraction:t}=P(),{data:s,isLoading:n,unavailableIds:r,error:a}=ws(),{isPricingV3Account:o,isFetching:i}=he();m.useEffect(()=>{window.location.hash===Y_&&(oe("Your organization was successfully created."),window.history.replaceState(null,""," "))},[]);const c=m.useMemo(()=>lm(s,r),[s,r]),{data:l,isLoading:d,unavailableIds:u,error:p}=Hb(),h=m.useMemo(()=>lm(l,u),[l,u]),{org:g,isLoading:f,isVercelOrg:_}=re(),b=n||d||f||i,x=et(),{getRegionSafe:j}=io(),v=m.useMemo(()=>[{key:"name",label:"Name",renderValue:({project:$})=>$?e.jsxs("div",{className:df.projectNameCell,children:[e.jsx("span",{className:df.projectName,children:$.name}),$.hipaa_enabled_at!==void 0&&e.jsx(te,{content:"HIPAA compliant",children:e.jsx(Ie,{children:"HIPAA"})})]}):e.jsx(B,{height:12})},{key:"region_name",label:"Region",renderValue:({project:$})=>{var M;return $?e.jsx(T,{children:(M=j($.platform_id,$.region_id))==null?void 0:M.name}):e.jsx(B,{height:12})}},{key:"created_at",label:"Created at",renderValue:({project:$})=>$?e.jsx(T,{appearance:"secondary",children:fe($.created_at)}):e.jsx(B,{height:12})},{key:"synthetic_storage_size",label:"Storage",renderValue:({project:$})=>$?e.jsx(T,{nowrap:!0,children:$.synthetic_storage_size?cl($.synthetic_storage_size):"-"}):e.jsx(B,{height:12,width:24})},{key:"pg_version",label:"Postgres version",renderValue:({project:$})=>$?$.pg_version:e.jsx(B,{height:12,width:24})}],[j]),y=it(Je.TransferProject),[S,w]=m.useState(),k={key:"actions",label:"",renderValue:({project:$})=>$?e.jsx(FP,{project:$,isUserProject:g===void 0&&!!(s!=null&&s.some(({id:M})=>M===$.id)),onProjectTransfer:()=>{w($),y.openModal()}}):null,tdAttrs:{style:{width:"62px"}}},N=m.useCallback(({project:$},M)=>{if(!$)return;const se=Q(C.ProjectsItem,{projectId:$.id});if(M.metaKey||M.ctrlKey){t("project_list_project_opened_new_tab"),window.open(Wa+se,"");return}t("project_list_project_opened"),x.push(se)},[x,t]),D=rQ(g,_),L=!!(c!=null&&c.length),H=!!(h!=null&&h.length),W=L||H;return e.jsxs(e.Fragment,{children:[y.isModalOpen&&S&&e.jsx(Vb,{projectId:S.id,children:e.jsx(wP,{project:S,onRequestClose:()=>{y.closeModal(),t("transfer_project_modal_dismissed")},onSuccess:$=>{y.closeModal(),t("transfer_project_modal_confirmed"),x.push(Q(C.OrgProjectsList,{orgId:$}))}})}),e.jsx(bl,{title:D,actions:W&&e.jsxs(e.Fragment,{children:[e.jsx(qx,{}),e.jsx(JP,{})]})}),!i&&!o&&e.jsx("div",{className:df.usageContainer,children:e.jsx(aK,{showUpgrade:L})}),(b||L||!!a)&&e.jsx(Sg,{children:a?e.jsx(gb,{variant:"owned"}):e.jsx(hQ,{onClickTransfer:$=>{w($),y.openModal()}})}),(h&&h.length>0||!!p)&&e.jsxs(e.Fragment,{children:[e.jsx(Sg,{children:e.jsx(TR,{children:"Shared with you"})}),e.jsx(Sg,{children:p?e.jsx(gb,{variant:"shared"}):e.jsx(xr,{isLoading:b,cols:[...v,k],data:b?[]:h,onRowClick:N,style:{tableLayout:"fixed"}})})]}),!W&&!b&&!a&&!p&&e.jsx(eQ,{}),e.jsx(QK,{})]})},oQ="_wrapper_1fmct_1",iQ="_projectNameCell_1fmct_7",cQ="_projectName_1fmct_7",fb={wrapper:oQ,projectNameCell:iQ,projectName:cQ},lQ=()=>{const{trackUiInteraction:t}=P(),s=m.useCallback(()=>{t("projects_list_item_menu_opened")},[t]),{data:n}=Fn();return{createActions:m.useCallback(({project:a,isUserProject:o,onProjectTransfer:i})=>{const c=(n==null?void 0:n.length)??0,l=!!(a!=null&&a.org_id&&(n!=null&&n.some(h=>h.id===a.org_id))),u=c>(l?1:0),p=(o||l)&&u;return He([{icon:"overview",label:"Dashboard",href:Q(C.ProjectsItem,{projectId:a.id}),onClick(){t("projects_list_item_menu_dashboard_clicked")},"data-qa":"project-dashboard-link"},{icon:"editor",label:"SQL Editor",href:Q(de.ProjectsItemQuery,{projectId:a.id}),onClick(){t("projects_list_item_menu_sql_editor_clicked")},"data-qa":"project-sql-editor-link"},p&&{icon:"connect_with",label:"Transfer project",onClick(){t("projects_list_item_menu_transfer_project_clicked"),i()},"data-qa":"project-transfer-link"},{icon:"settings",label:"Settings",href:Q(C.ProjectsItemSettings,{projectId:a.id}),onClick(){t("projects_list_item_menu_settings_clicked")},"data-qa":"project-settings-link"}])},[n,t]),onOpen:s}},dQ=({search:t})=>{const{trackUiInteraction:s}=P(),n=m.useRef(new Set),r=WM[0],[a,o]=Un("page-size",{historyMethod:"push"}),[i,c]=Un("cursor",{historyMethod:"push"}),{orgId:l}=re(),d=a!=null?Number(a):r,{data:u,cursor:p,...h}=R_(l,d,i??void 0,t),{data:g}=R_(l,d,p,t),f=!!(g&&g.length>0),_=!!i,b=m.useCallback(()=>{if(!p||!f)return;n.current.add(p),c(p)},[p,f,c]),x=m.useCallback(()=>{if(!i)return;const w=Array.from(n.current),k=w.findIndex(D=>D===i)??-1;if(k<0)return;const N=k-1;c(w[N])},[i,c]),j=m.useCallback(()=>{c(void 0)},[c]),v=m.useCallback(w=>{switch(s("projects_list_pagination_page_changed",{...w}),w.direction){case"first":j();break;case"next":b();break;case"previous":x();break}},[j,b,x,s]),y=m.useCallback(w=>{s("projects_list_pagination_page_size_changed",{...w}),o(String(w.pageSize)),j()},[j,o,s]),S=m.useMemo(()=>({pageSize:d,onPageSizeChange:y,onPageChange:v,hasNextPage:f,hasPreviousPage:_}),[d,y,v,f,_]);return{data:u,pagination:S,...h}},uQ=(t,s,n,r)=>[{rowHeader:!0,id:"name",header:"Name",render:({project:a})=>a?e.jsxs("div",{className:fb.projectNameCell,children:[e.jsx(F0,{title:a.name,className:fb.projectName,searchWords:s.split(" "),textToHighlight:a.name}),!r&&a.hipaa_enabled_at!==void 0&&e.jsx(te,{content:"HIPAA compliant",children:e.jsx(Ie,{children:"HIPAA"})})]}):e.jsx(B,{height:12})},{id:"region_name",header:"Region",render:({project:a})=>{var o;return a?(o=t(a.platform_id,a.region_id))==null?void 0:o.name:e.jsx(B,{height:12})}},{id:"created_at",header:"Created at",render:({project:a})=>a?fe(a.created_at):e.jsx(B,{height:12})},{id:"synthetic_storage_size",header:"Storage",render:({project:a})=>a?e.jsx(T,{nowrap:!0,children:a.synthetic_storage_size?cl(a.synthetic_storage_size):"-"}):e.jsx(B,{height:12,width:24})},{id:"compute_last_active_at",header:"Compute last active at",render:({project:a})=>a!=null&&a.compute_last_active_at?fe(a.compute_last_active_at):e.jsx(B,{height:12})},{id:"pg_version",header:"Postgres version",render:({project:a})=>a?e.jsx(T,{children:a.pg_version}):e.jsx(B,{height:12,width:24})},...n&&r?[{id:"hipaa_compliance",header:"HIPAA",render:({project:a})=>(a==null?void 0:a.hipaa_enabled_at)!==void 0?e.jsx(Bn,{label:"ENABLED",appearance:"success"}):e.jsx(Bn,{label:"DISABLED",appearance:"default"})}]:[]],hQ=({onClickTransfer:t})=>{const s=ge("project_integrations_column"),n=ge("hipaa_self_serve_console"),[r,a]=Un("q"),{data:o,isLoading:i,unavailableIds:c,pagination:l}=dQ({search:r??""}),{org:d,isLoading:u}=re(),p=ki("allow_hipaa_projects"),{trackUiInteraction:h}=P(),{data:g,isLoading:f}=xP({enabled:s}),_=u||i||f,{getRegionSafe:b}=io(),x=m.useMemo(()=>lm(o,c),[o,c]),{createActions:j,onOpen:v}=lQ(),y=m.useMemo(()=>s?[{id:"integrations",header:"Integrations",render:({project:w})=>w?e.jsx(QW,{projectId:w.id,integrations:g==null?void 0:g[w.id]}):null}]:[],[s,g]),S=m.useCallback(({project:w})=>{w&&h("project_list_project_opened")},[h]);return e.jsxs("div",{className:fb.wrapper,children:[e.jsx(fx,{onChange:a,size:"s",value:r??"",minLength:0}),e.jsx(Cs,{"data-qa":"data-table","aria-label":"Owned projects list",columns:[...uQ(b,r??"",p??!1,n??!1),...y],rowActions:({project:w})=>w?j({project:w,isUserProject:d===void 0&&!!(o!=null&&o.some(({id:k})=>k===w.id)),onProjectTransfer:()=>t(w)}):[],onOpenActionsMenu:v,pageSize:l.pageSize,onRowClick:_?void 0:S,rowHref:({project:w})=>w&&!_?Q(C.ProjectsItem,{projectId:w.id}):void 0,getRowId:({id:w})=>w,isLoading:_,rows:x,onPageChange:l.onPageChange,onPageSizeChange:l.onPageSizeChange,hasNextPage:l.hasNextPage,hasPreviousPage:l.hasPreviousPage,manualPagination:!0,hideTotalCount:!0})]})},ni={title:{project:"What project are you referring to?",branch:"What branch are you referring to?"},orgLabel:"Select organization",projectLabel:"Select project",branchLabel:"Select branch",createTicketDescription:"You can contact support by opening a support ticket. Describe your issue in detail, select the appropriate severity level, and submit the ticket.",createTicketButton:"Create a support ticket",discordDescription:e.jsxs(e.Fragment,{children:["You can get support joining"," ",e.jsx(R,{href:hu,openInNewTab:!0,children:"Neon Discord Community"}),". There you can ask questions from Neon team members and community."]})},pQ="_root_29frr_1",mQ="_selectTool_29frr_5",gQ="_selectItem_29frr_11",fQ="_createTicketTool_29frr_17",Rc={root:pQ,selectTool:mQ,selectItem:gQ,createTicketTool:fQ};var hi=(t=>(t.AskForProject="askForProject",t.AskForBranch="askForBranch",t.CreateTicket="createTicket",t))(hi||{});const Aw=({saveContext:t,onToolSubmit:s,isDisabled:n,type:r})=>{const[a,o]=m.useState(),[i,c]=m.useState(),[l,d]=m.useState(),{data:u}=Fn(),{data:p}=kt(),h=aa(p),{data:g}=R_(a==="personal_account"?void 0:a),f=m.useMemo(()=>{const S=(u==null?void 0:u.map(w=>({value:w.id,label:w.name})))??[];return h||S.push({value:"personal_account",label:"Personal account"}),S},[u,h]),_=(g==null?void 0:g.map(S=>({value:S.id,label:S.name})))??[],{branchOptions:b}=Wb(i),x=({accountId:S,projectId:w,branchId:k})=>{const N=f.find(H=>H.value===S),D=_.find(H=>H.value===w),L=b.find(H=>H.value===k);t==null||t({account:N,project:D,branch:L})},j=S=>{S&&(o(String(S)),c(void 0),d(void 0))},v=S=>{S&&(c(String(S)),d(void 0),r==="project"&&(x({accountId:a,projectId:S}),s==null||s()))},y=S=>{S&&(d(String(S)),r==="branch"&&(x({accountId:a,projectId:i,branchId:S}),s==null||s()))};return m.useEffect(()=>{(f==null?void 0:f.length)===1&&o(f[0].value)},[f]),e.jsxs("div",{className:Rc.selectTool,children:[e.jsx(T,{children:ni.title[r]}),(f==null?void 0:f.length)>1&&e.jsxs("div",{className:Rc.selectItem,children:[e.jsx(T,{children:ni.orgLabel}),e.jsx(ct,{value:a,options:f,onChange:j,disabled:n})]}),e.jsxs("div",{className:Rc.selectItem,children:[e.jsx(T,{children:ni.projectLabel}),e.jsx(ct,{"aria-label":"Select project",value:i,options:_,onChange:v,disabled:n||!a})]}),r==="branch"&&e.jsxs("div",{className:Rc.selectItem,children:[e.jsx(T,{children:ni.branchLabel}),e.jsx(ct,{"aria-label":"Select branch",value:l,options:b,onChange:y,disabled:n||!i})]})]})},_Q=({openSupport:t,isDisabled:s,confirmationText:n})=>zr(a=>{var o;return(o=a.options)==null?void 0:o.context.isSupportFormEnabled})?e.jsxs("div",{className:Rc.createTicketTool,children:[e.jsx(T,{children:n??ni.createTicketDescription}),e.jsx(E,{appearance:"secondary",onClick:t,disabled:s,children:ni.createTicketButton})]}):e.jsx(T,{children:ni.discordDescription}),bQ=t=>{var s;return t&&((s=JSON.parse(t))==null?void 0:s.confirmationText)},ZP=({toolCalls:t,saveContext:s,onToolSubmit:n,openSupport:r,isLastMessage:a})=>t?t.map(({id:o,function:i})=>e.jsx("div",{className:Rc.root,children:(()=>{switch(i.name){case hi.AskForProject:return e.jsx(Aw,{type:"project",saveContext:s,onToolSubmit:n,isDisabled:!a});case hi.AskForBranch:return e.jsx(Aw,{type:"branch",saveContext:s,onToolSubmit:n,isDisabled:!a});case hi.CreateTicket:return e.jsx(_Q,{openSupport:r,isDisabled:!a,confirmationText:bQ(i.arguments)});default:return e.jsx(bP,{isLastMessage:a})}})()},o)):null,xQ=t=>({id:"markprompt-assistant-placeholder-message-id",role:"assistant",content:Aa.placeholder(t==null?void 0:t.firstName),state:"done"}),XP=t=>({id:`markprompt-assistant-resolved-message-${t}`,role:"assistant",content:Aa.feedbackResponse,state:"done"}),jQ=({userData:t,threadId:s,threadMessages:n,isResolved:r})=>e.jsxs(e.Fragment,{children:[n.map(a=>a.role!=="tool"&&e.jsx(Zd,{...a,userFirstName:t==null?void 0:t.firstName,userImage:t==null?void 0:t.image,children:a.role==="assistant"&&e.jsx(ZP,{toolCalls:a.tool_calls})},a.id)),r&&e.jsx(Zd,{...XP(s)})]}),vQ=({isOpen:t,onRequestClose:s,openSupport:n,saveContext:r,clearContext:a,isLoading:o})=>{const{trackUiInteraction:i}=P(),c=m.useRef(null),{data:l}=kt(),[d,u]=m.useState(""),[p,h]=m.useState(!1),[g,f]=Ds(_t.MarkpromptFeedbackState,"resolvedByThreadId",{}),_=zr(M=>M.messages),b=zr(M=>M.messagesByThreadId),x=zr(M=>M.submitChat),j=zr(M=>M.submitToolCalls),v=zr(M=>M.projectKey),{submitFeedback:y}=I7({projectKey:v}),S=zr(M=>M.selectThread),w=zr(M=>M.threadId),k=m.useRef(!!(w&&g[w])),N=()=>u(""),D=()=>{i("markprompt_get_help_ask_clicked"),k.current&&(S(void 0),k.current=!1),x([{role:"user",content:d.trim()}]),N()},L=M=>()=>{setTimeout(()=>j(M))},H=M=>{M.key==="Enter"&&(M.ctrlKey||M.metaKey)&&D()},W=M=>async se=>{try{switch(h(!0),se){case"positive":await y({vote:"1"},M),w&&f(ce=>({...ce,[w]:!0})),a(),k.current=!0;break;case"negative":await y({vote:"-1"},M),x([{role:"user",content:Aa.feedbackNegative}]);break}}catch(ce){const ee=Nt(ce);Ye(ee)}finally{h(!1)}},$=m.useCallback(()=>{c.current&&c.current.scrollIntoView({behavior:"instant"})},[]);return m.useEffect(()=>{t&&(i("markprompt_get_help_opened"),$())},[t,$,i]),m.useEffect(()=>{_.length&&$()},[_,$]),e.jsx(oa,{zIndex:2,isOpen:t,"aria-label":Aa.title,onRequestClose:s,size:"l",children:o?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[e.jsxs(ia,{title:Aa.title,children:[e.jsxs("div",{className:Jg.content,children:[e.jsx(Zd,{...xQ(l)}),Object.entries(b).filter(([M])=>M!==w).sort(([,M],[,se])=>mt(M.lastUpdated).unix()-mt(se.lastUpdated).unix()).map(([M,{messages:se}])=>e.jsx(jQ,{threadId:M,threadMessages:se,isResolved:!!g[M],userData:l},M)),_.map((M,se)=>M.role!=="tool"&&e.jsxs(Zd,{...M,userFirstName:l==null?void 0:l.firstName,userImage:l==null?void 0:l.image,isLastMessage:_.length-1===se,children:[M.role==="assistant"&&M.state==="done"&&e.jsx(ZP,{toolCalls:M.tool_calls,onToolSubmit:L(M),saveContext:r,openSupport:()=>{i("markprompt_get_help_create_ticket_clicked"),n(w)},isLastMessage:_.length-1===se}),M.role==="assistant"&&_.length-1===se&&M.state==="done"&&!M.tool_calls&&M.messageId&&w&&!g[w]&&e.jsx(fV,{isLoading:p,onFeedbackSubmit:W(M.messageId)})]},M.id)),w&&g[w]&&e.jsx(Zd,{...XP(w)})]}),e.jsx("div",{ref:c,style:{height:1}})]}),e.jsx(ux,{children:e.jsxs("div",{className:Jg.prompt,children:[e.jsx(yi,{value:d,onChange:M=>u(M.target.value),onKeyDown:H,placeholder:Aa.promptPlaceholder,rows:5,autoFocus:!0}),e.jsxs("div",{className:Jg.promptActions,children:[!!d.length&&e.jsx(E,{appearance:"clear",onClick:()=>{i("markprompt_get_help_clear_clicked"),N()},children:Aa.clear}),e.jsx(E,{onClick:D,disabled:!d.length,children:Aa.ask})]})]})})]})})},yQ=({isOpen:t,onRequestClose:s})=>{var w,k,N,D,L,H;const{trackUiInteraction:n}=P(),{markprompt:r}=h$(),[a,o]=m.useState(!1),{data:i,isLoading:c}=kt(),{data:l,isLoading:d}=kC(),u=p$(),p=!(u.isLoading||u.isEverythingDisabled),h=u.isLoading||d||c,g=l==null?void 0:l.subscription_type,f=Ya(g),[_,b]=m.useState(),[x,j]=m.useState(),v=m.useCallback(()=>{b(void 0)},[]),y=m.useCallback(W=>{j(W),o(!0)},[]),S=m.useCallback(async(W,$)=>{try{await fetch(`https://api.markprompt.com/threads/${W}`,{method:"POST",headers:{"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21"},body:JSON.stringify({projectKey:(r==null?void 0:r.projectKey)||"local",metadata:{caseNumber:$},strategy:"merge"})})}catch(M){Ye(Nt(M))}},[r==null?void 0:r.projectKey]);return e.jsxs(e.Fragment,{children:[e.jsx(Ci,{isOpen:a,onRequestClose:()=>{n("support_form_dismissed"),o(!1),j(void 0)},defaultValues:{accountIdOption:_==null?void 0:_.account,projectIdOption:_==null?void 0:_.project,branchIdOption:_==null?void 0:_.branch,markpromptThreadId:x},onSuccess:m.useCallback(W=>{x&&S(x,W)},[x,S])}),e.jsx(pV,{projectKey:(r==null?void 0:r.projectKey)||"local",storeKey:i==null?void 0:i.id,chatOptions:{maxHistorySize:3,assistantId:(r==null?void 0:r.assistantId)||"local",assistantVersionId:r==null?void 0:r.agentVersion,toolChoice:"auto",tools:[{tool:{type:"function",function:{name:hi.AskForProject}},call:()=>{var W;return Promise.resolve(`The projectId was provided, projectId: ${(W=_==null?void 0:_.project)==null?void 0:W.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:hi.AskForBranch}},call:()=>{var W;return Promise.resolve(`The branchId was provided, branchId: ${(W=_==null?void 0:_.branch)==null?void 0:W.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:hi.CreateTicket}},call:()=>Promise.resolve("Create support ticket modal is opened"),requireConfirmation:!0}],context:{accountId:(w=_==null?void 0:_.account)==null?void 0:w.value,accountName:(k=_==null?void 0:_.account)==null?void 0:k.label,projectId:(N=_==null?void 0:_.project)==null?void 0:N.value,projectName:(D=_==null?void 0:_.project)==null?void 0:D.label,branchId:(L=_==null?void 0:_.branch)==null?void 0:L.value,branchName:(H=_==null?void 0:_.branch)==null?void 0:H.label,billingPlan:f,isSupportFormEnabled:p},threadMetadata:{userId:i==null?void 0:i.id,billingPlan:f,isSupportFormEnabled:p},history:!1},children:e.jsx(vQ,{isOpen:t,onRequestClose:s,openSupport:y,saveContext:b,clearContext:v,isLoading:h})})]})},wQ=()=>{const{trackUiInteraction:t}=P(),s=Gb("support_agent"),n=m.useCallback(()=>{t("resources_menu_opened")},[t]),{isModalOpen:r,openModal:a,closeModal:o}=it(Je.Support),{isModalOpen:i,openModal:c,closeModal:l}=it(Je.Feedback),d=m.useMemo(()=>[{items:[{label:"Feedback",icon:"feedback",onClick:()=>{t("resources_menu_feedback_clicked"),c()}},s?{label:"Get help",icon:"help",onClick:()=>{t("resources_menu_get_help_clicked"),a()}}:{label:"Support",icon:"help",onClick:()=>{t("resources_menu_support_clicked"),a()}},{label:"Docs",href:m$,openInNewTab:!0,icon:"docs",onClick:()=>{t("resources_menu_docs_clicked")}},{label:"API Reference",icon:"docs",href:g$,openInNewTab:!0,onClick:()=>{t("resources_menu_api_reference_clicked")}},{label:"Changelog",href:f$,openInNewTab:!0,icon:"release",onClick:()=>{t("resources_menu_changelog_clicked")}},{label:"Trust Center",href:_$,openInNewTab:!0,icon:"trust",onClick:()=>{t("resources_menu_trust_center_clicked")}},{label:"neon.com",href:"https://neon.com/home",openInNewTab:!0,icon:"neon_circle",onClick:()=>{t("resources_menu_open_homepage")}}]}],[c,a,t,s]);return e.jsxs(e.Fragment,{children:[i&&e.jsx(TC,{isOpen:!0,onRequestClose:()=>{t("feedback_form_dismissed"),l()},openSupport:()=>{l(),a()}}),s?e.jsx(yQ,{isOpen:r,onRequestClose:()=>{t("markprompt_get_help_closed"),o()}}):e.jsx(Ci,{isOpen:r,onRequestClose:()=>{t("support_form_dismissed"),o()}}),e.jsx(Yt,{sections:d,onOpen:n,placement:"bottom right",children:e.jsx(E,{appearance:"secondary","aria-label":"Resources menu",icon:"question"})})]})},uf={description:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"Your account has been suspended."})," Update your payment information or contact support"]}),azurePortal:"Go to Azure portal",support:"Contact support"},SQ="_root_1ujo2_1",CQ="_icon_1ujo2_10",kQ="_actions_1ujo2_14",hf={root:SQ,icon:CQ,actions:kQ},IQ=()=>{const{trackUiInteraction:t}=P(),{isAzureOrg:s,isLoading:n}=re(),{isSuspendedAccount:r,isFetching:a}=he(),{isModalOpen:o,openModal:i,closeModal:c}=it(Je.Support);return r&&!(n&&a)?e.jsxs(e.Fragment,{children:[e.jsx(Ci,{onRequestClose:()=>{t("support_form_dismissed"),c()},isOpen:o}),e.jsxs("div",{className:hf.root,children:[e.jsx(z,{name:"warning",size:20,className:hf.icon}),e.jsx(T,{children:uf.description}),e.jsxs("div",{className:hf.actions,children:[s&&e.jsx(E,{appearance:"primary",as:Ge,openInNewTab:!0,href:b$,onClick:()=>{t("suspended_account_banner_go_to_azure_clicked")},children:uf.azurePortal}),e.jsx(E,{appearance:"secondary",onClick:()=>{t("suspended_account_banner_support_clicked"),i()},children:uf.support})]})]})]}):null},PQ=()=>{const t=et(),{orgId:s}=re(),[n,r]=m.useState(!1),{creditBalance:a,isLoading:o}=Uu(),i=(a==null?void 0:a.balance_cents)!==void 0&&a.balance_cents>0,c=a!=null&&a.balance_cents?us(a.balance_cents,!0):"",{trackUiInteraction:l}=P(),d=ge("claim_credit_flow_ux_changes");m.useEffect(()=>{o||l("global_upgrade_button_shown",{has_credit_balance:i})},[o,i,l]);const{isFreeSubscription:u,subscriptionType:p,isMarketplaceAccount:h,isSelfServedAccount:g}=he();if(!(u||g&&(p==="launch"||p==="scale")))return null;const _=()=>i?d?`Claim ${c} credit`:`Upgrade (${c} Credit)`:"Upgrade",b=()=>{if(l("global_upgrade_button_clicked",{is_marketplace_account:h}),h){const x=s?Q(C.OrgBilling,{orgId:s}):C.UserBilling;return t.push(x)}r(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:b,appearance:u?"primary":"secondary",size:"s",children:_()}),e.jsx(lt,{type:Xe.Default,isOpen:n,onRequestClose:()=>{r(!1)}})]})},TQ="_root_coijc_1",AQ="_image_coijc_6",NQ="_card_coijc_11",EQ="_body_coijc_17",OQ="_header_coijc_23",$Q="_infoIcon_coijc_28",LQ="_dismissButton_coijc_34",RQ="_icon_coijc_38",MQ="_content_coijc_42",Qn={root:TQ,image:AQ,card:NQ,body:EQ,header:OQ,infoIcon:$Q,dismissButton:LQ,icon:RQ,content:MQ},BQ=({title:t,image:s,children:n,onDismiss:r})=>e.jsxs("div",{className:Qn.root,children:[e.jsx("img",{src:s,alt:"","aria-hidden":!0,className:Qn.image}),e.jsxs("div",{className:Qn.card,children:[e.jsx("div",{className:Qn.infoIcon,children:e.jsx(z,{name:"info",size:16,className:Qn.icon})}),e.jsxs("div",{className:Qn.body,children:[e.jsx("div",{className:Qn.header,children:t}),e.jsx("div",{className:Qn.content,children:n})]}),r&&e.jsx("button",{type:"button",title:"Dismiss",className:Qn.dismissButton,onClick:r,children:e.jsx(z,{name:"cross_small",size:20,className:Qn.icon})})]})]}),DQ="/assets/assets/slack_image-BAo_HRN4.png",UQ="_footer_17f6w_1",FQ={footer:UQ},zQ=({onDismiss:t})=>{const{trackUiInteraction:s}=P({mountEvent:"notifications_announcement_slack_app_shown"});return e.jsxs(BQ,{title:"Track your Neon projects in Slack",image:DQ,children:["Monitor your projects, track account and project usage, and invite users to your organization directly from Slack.",e.jsxs("div",{className:FQ.footer,children:[e.jsx(E,{as:Ge,icon:"external_link",iconSide:"right",href:"https://neon.com/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("notifications_announcement_slack_app_link_clicked")},children:"Add Neon App to Slack"}),e.jsx(E,{appearance:"secondary",onClick:()=>{s("notifications_announcement_slack_app_dismissed"),t()},children:"Dismiss"})]})]})},qQ=({announcements:t,onAnnouncementDismiss:s,onMount:n,onUnmount:r})=>(m.useEffect(()=>(n(),r),[]),e.jsx(e.Fragment,{children:t.map(a=>{switch(a){case"slack_app":return e.jsx(zQ,{onDismiss:()=>s(a)},a)}return null})})),eT=_t.NotificationAnnouncements;function dm(){let t;try{t=Us.get(eT)}catch{}return t??{seen:[],dismissed:[]}}function tT(t){try{Us.set(eT,t)}catch{}}function HQ(t){const s=dm();tT({...s,seen:[...new Set([...s.seen,...t]).keys()]})}function VQ(t){const s=dm(),n={...s,dismissed:[...new Set([...s.dismissed,t]).keys()]};return tT(n),n}function WQ(){const{trackUiInteraction:t}=P(),[s,n]=m.useState(dm),r=Kb("growth_slack_app_announcement")==="notification",a=m.useMemo(()=>{const u=[];return r&&u.push("slack_app"),u.filter(p=>!s.dismissed.includes(p))},[r,s.dismissed]),o=u=>{n(VQ(u))},i=()=>{HQ(a)},c=()=>{n(u=>({...u,seen:dm().seen}))},l=a.filter(u=>!s.seen.includes(u)).length,d=l>0;return m.useEffect(()=>{d&&t("notifications_unread_badge_shown")},[t,d]),{unreadCount:l,announcements:a.length>0?e.jsx(qQ,{announcements:a,onAnnouncementDismiss:o,onMount:i,onUnmount:c}):null}}const tl=z_.createApi({reducerPath:"notifications",baseQuery:AC,endpoints:t=>({getNotifications:t.query({query:({projectId:s})=>G.getProjectNotifications(s)})})}),GQ=Qb({name:"monitoringAlerts",initialState:{isLoading:!1,isOpen:!1,showModal:!1,selectedNotificationItem:null,isEndpointEditFormOpened:!1,notificationItems:[],showUpgradePlanModal:!1,isCleared:!1,prevNotificationCount:0},extraReducers:t=>{t.addMatcher(tl.endpoints.getNotifications.matchFulfilled,(s,{payload:n})=>{var a;s.prevNotificationCount||(s.prevNotificationCount=((a=n.data)==null?void 0:a.length)??0),n.data&&n.data.length>s.prevNotificationCount&&(s.isCleared=!1)}),t.addMatcher(tl.endpoints.getNotifications.matchRejected,(s,n)=>{let r;n.payload&&typeof n.payload=="object"&&"message"in n.payload&&typeof n.payload.message=="string"?r=n.payload.message:n.error&&(r=n.error.message),x$({message:`api call getNotifications failed: ${r||"getNotifications rejected"}`,level:"warning"})})},reducers:{setIsCleared:(t,{payload:s})=>{t.isCleared=s},setPrevNotificationCount:(t,{payload:s})=>{t.prevNotificationCount=s},setShowUpgradePlanModal:(t,{payload:s})=>{t.showUpgradePlanModal=s},setIsLoading:(t,{payload:s})=>{t.isLoading=s},setIsOpen:(t,{payload:s})=>{t.isOpen=s},setShowModal:(t,{payload:s})=>{t.showModal=s},setSelectedNotificationItem:(t,{payload:s})=>{t.selectedNotificationItem=s},setIsEndpointEditFormOpened:(t,{payload:s})=>{t.isEndpointEditFormOpened=s}}}),yu=Yb(GQ);function*KQ(){try{const t=Us.get(_t.MonitoringAlertsState);if(t){const s=JSON.parse(t);yield OC(yu.actions.setIsCleared(!!(s!=null&&s.isCleared)))}}catch{Us.remove(_t.MonitoringAlertsState)}}function*QQ(){yield M0(yu.actionTypes,function*(){const s=yield $C(yu.selector);Us.set(_t.MonitoringAlertsState,JSON.stringify(s))})}function*YQ(){yield NC(KQ),yield EC(QQ)}yu.setSaga(YQ);const Qt=yu,JQ="_notificationCount_126xu_1",ZQ="_notificationButton_custom_126xu_5",XQ="_notificationButton_info_126xu_26",eY="_notificationButton_warning_126xu_33",Lh={notificationCount:JQ,notificationButton_custom:ZQ,notificationButton_info:XQ,notificationButton_warning:eY},tY=({unreadAnnouncementsCount:t})=>{var g;const{projectId:s}=F(),{data:n}=tl.useGetNotificationsQuery({projectId:s}),{isOpen:r,isCleared:a}=ll(Qt.selector),o=cn(),{trackUiInteraction:i}=P(),c=((g=n==null?void 0:n.data)==null?void 0:g.length)??0,l=c>0&&!a,d=t>0,u=c+t,p=l||d;let h;return l?h="warning":d&&(h="info"),e.jsx(E,{className:V({[Lh.notificationButton_custom]:!!h,[Lh.notificationButton_info]:h==="info",[Lh.notificationButton_warning]:h==="warning"}),icon:"notification",iconSide:"left",onClick:()=>{i("monitoring_alerts_opened"),o(Qt.actions.setIsOpen(!r))},appearance:"secondary","aria-label":"Open notification panel",children:p&&e.jsx("span",{className:Lh.notificationCount,children:u})})},sY="_notificationInfoContainer_6xwvd_1",nY="_iconAndTextContainer_6xwvd_9",rY="_notificationInfoTitle_6xwvd_13",aY="_notificationStatBase_6xwvd_19",oY="_notificationStat_info_6xwvd_23",iY="_notificationStat_warning_6xwvd_28",cY="_iconContainer_6xwvd_33",lY="_infoIcon_6xwvd_37",dY="_warningIcon_6xwvd_41",uY="_arrayIcon_6xwvd_45",Yn={notificationInfoContainer:sY,iconAndTextContainer:nY,notificationInfoTitle:rY,notificationStatBase:aY,notificationStat_info:oY,notificationStat_warning:iY,iconContainer:cY,infoIcon:lY,warningIcon:dY,arrayIcon:uY},hY=t=>{switch(t){case"cpu":return"monitoring_alerts_notification_shown_cpu";case"connections":return"monitoring_alerts_notification_shown_connections";case"ram":return"monitoring_alerts_notification_shown_ram"}},pY=({item:t})=>{const s=cn(),{trackUiInteraction:n}=P({mountEvent:{name:hY(t.metric),params:{formattedValue:t.formattedValue}}});return e.jsxs("button",{type:"button",className:Yn.notificationInfoContainer,onClick:()=>{n("monitoring_alerts_notification_clicked",{type:t.metric,formattedValue:t.formattedValue}),s(Qt.actions.setIsOpen(!1)),s(Qt.actions.setSelectedNotificationItem(t)),s(Qt.actions.setShowModal(!0))},children:[e.jsxs("div",{className:Yn.iconAndTextContainer,children:[e.jsx("div",{className:Yn.iconContainer,children:e.jsx(z,{className:V({[Yn.infoIcon]:t.type==="info",[Yn.warningIcon]:t.type==="warning"}),name:t.type==="info"?"info":"warning",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:Yn.notificationInfoTitle,children:t.title}),e.jsx("p",{className:V(Yn.notificationStatBase,{[Yn.notificationStat_info]:t.type==="info",[Yn.notificationStat_warning]:t.type==="warning"}),children:t.formattedValue})]})]}),e.jsx("div",{children:e.jsx(z,{className:Yn.arrayIcon,name:"arrow_right",size:16})})]})},mY=t=>tl.useGetNotificationsQuery({projectId:t}),gY={empty:"No new notifications"},fY="_container_1w84n_1",_Y="_loaderContainer_1w84n_5",bY="_empty_1w84n_13",xY="_timeStampContainer_1w84n_19",jY="_timeStampContent_1w84n_26",Xl={container:fY,loaderContainer:_Y,empty:bY,timeStampContainer:xY,timeStampContent:jY};mt.extend(j$);const vY=({announcements:t})=>{var a;const{projectId:s}=dl(),{data:n,isLoading:r}=mY(s);return r?e.jsx("div",{children:e.jsx("div",{className:Xl.loaderContainer,children:e.jsx(on,{size:20})})}):!(n!=null&&n.data)&&!t?e.jsx("div",{children:e.jsx("p",{className:Xl.empty,children:gY.empty})}):e.jsxs("div",{className:Xl.container,children:[(a=n==null?void 0:n.data)==null?void 0:a.map(o=>e.jsx(pY,{item:o},o.formattedValue)),t,(n==null?void 0:n.rw_endpoint_last_active_at)&&e.jsx("div",{className:Xl.timeStampContainer,children:e.jsx("p",{className:Xl.timeStampContent,children:`Last updated ${mt(new Date(n.rw_endpoint_last_active_at)).fromNow()}`})})]})},Vx=t=>{switch(t){case 0:return"5 minutes (default)";case-1:return"never";default:{const{highestValue:s,highestUnit:n}=km(t);return`${s} ${Rn(n,s)}`}}};function sT(t){return!t||t<1?1:t}const yY="_root_1ousv_1",wY={root:yY},qc=({icon:t,className:s,children:n})=>e.jsxs("div",{className:V(wY.root,s),children:[e.jsx(z,{name:t,size:16}),e.jsx("div",{children:n})]}),Zm=()=>{const{limits:t}=It();return t==null?void 0:t.max_autoscaling_cu},Wx=()=>{const{limits:t}=It();return t==null?void 0:t.max_fixed_size_cu},Nw=Intl.NumberFormat("en-US"),Tt={headers:{autoscaling:"Autoscaling",computeSize:"Compute size"},autoscaling:{fromTitle:"Scale from",toTitle:"Scale up to",minSelectLabel:"Autoscaling minimal value",maxSelectLabel:"Autoscaling maximum value",hint:"Configure the autoscaling range",warning:"Autoscaling range is invalid: (max-min)>8"},largeScaling:{scaleButton:"Autoscale",largeProvisionedButton:"Larger Computes",selectLabel:"Large provisioned CU value",hint:"Choose a fixed size for larger computes"},maxConnections:{message:(t,s,n)=>e.jsxs(e.Fragment,{children:["Connections limit: ",Nw.format(t)," direct connections / ",Nw.format(v$)," ","pooled connections."," ",e.jsx(te,{appearance:"rich",content:n,children:s})]}),tooltip:t=>e.jsx("span",{className:t,children:"Learn more"}),tooltipHeader:"Connection pooling",tooltipBody:e.jsxs(e.Fragment,{children:["Use a pooled connection string for connection pooling. This adds the"," ",e.jsx(Ae,{children:"-pooler"})," option to your endpoint ID."]}),tooltipLink:"Learn more"},upgradeForMore:"Upgrade for larger computes",autoscalingWarning:"Changing compute size settings will briefly interrupt database connections."},SY="_root_kjhlj_1",CY="_header_kjhlj_7",kY="_withHint_kjhlj_14",IY="_values_kjhlj_20",PY="_value_kjhlj_20",TY="_title_kjhlj_31",AY="_cu_kjhlj_36",NY="_selectsWrap_kjhlj_41",EY="_selects_kjhlj_41",OY="_select_kjhlj_41",$Y="_selectInput_kjhlj_56",LY="_toggleButton_kjhlj_62",RY="_tooltip_kjhlj_68",MY="_tooltipContent_kjhlj_72",BY="_tooltipBody_kjhlj_78",Ft={root:SY,header:CY,withHint:kY,values:IY,value:PY,title:TY,cu:AY,selectsWrap:NY,selects:EY,select:OY,selectInput:$Y,toggleButton:LY,tooltip:RY,tooltipContent:MY,tooltipBody:BY},nT=m.memo(({value:t,onChange:s,maxValue:n,scale:r,disabled:a})=>{const o=jg(r,n),i=jg(r,t.min),c=jg(r,t.max),l=c>o?o:c,d=i===l&&i-1<0?0:i,u=m.useCallback(g=>s({min:r[Math.min(...g)],max:r[Math.max(...g)]}),[s,r]),p=g=>{const f=r[Math.min(...g)],_=r[Math.max(...g)];return LC({min:f,max:_})},h=m.useCallback(g=>r[g].toString().replace(/^0(?=\.)/,""),[r]);return e.jsx(y$,{left:d,right:l,disabled:a||o===0,min:0,max:o===0?r.length-1:o,onChange:u,formatMark:h,isValidRange:p})});nT.displayName="CPUUnitsSlider";const Gx=({autoscalingRange:t})=>e.jsx(qc,{icon:"pooler",children:Tt.maxConnections.message(RC(t),Tt.maxConnections.tooltip(Ft.tooltip),e.jsxs("div",{className:Ft.tooltipContent,children:[e.jsx(Z,{level:6,children:Tt.maxConnections.tooltipHeader}),e.jsx("div",{className:Ft.tooltipBody,children:Tt.maxConnections.tooltipBody}),e.jsx(R,{openInNewTab:!0,href:MC,children:Tt.maxConnections.tooltipLink})]}))}),rT=()=>{var a,o;const{trigger:t,formState:{isValid:s,errors:n}}=Ct();m.useEffect(()=>{t("autoscaling")},[t,s]);const r=(o=(a=n.autoscaling)==null?void 0:a.min)==null?void 0:o.message;return e.jsxs(e.Fragment,{children:[!s&&n.autoscaling?e.jsx(T,{appearance:"warning",children:Tt.autoscaling.warning}):null,r?e.jsx(T,{appearance:"error",children:r}):null]})},DY=()=>{const{control:t}=Ct(),s=Wx(),n=m.useMemo(()=>(s?ii.filter(a=>a<=s):ii).map(a=>({value:a,label:fC(a)})),[s]);return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:Tt.largeScaling.hint}),e.jsx(Pe,{name:"largeProvisioned",control:t,render:({field:r})=>e.jsxs(e.Fragment,{children:[e.jsx(ct,{...r,options:n,"aria-label":Tt.largeScaling.selectLabel}),e.jsx(Gx,{autoscalingRange:{min:r.value,max:r.value}})]})})]})},UY=()=>{const{control:t,watch:s}=Ct(),n=Zm(),r=m.useMemo(()=>(n?Jr.filter(o=>o<=n):Jr).map(o=>({value:o,label:S$(o)})),[n]);return e.jsxs("div",{className:Ft.selectsWrap,children:[e.jsx("span",{children:Tt.autoscaling.hint}),e.jsxs("div",{className:Ft.selects,children:[e.jsx(Pe,{name:"autoscaling.min",control:t,render:({field:a})=>e.jsx(U,{className:Ft.select,label:Tt.autoscaling.fromTitle,children:e.jsxs("div",{className:Ft.selectInput,children:[e.jsx(ct,{...a,options:r,disabled:a.disabled||!n,"aria-label":Tt.autoscaling.minSelectLabel}),e.jsx("span",{className:Ft.cu,children:Mn(a.value)})]})})}),e.jsx(Pe,{name:"autoscaling.max",control:t,render:({field:a})=>e.jsx(U,{className:Ft.select,label:Tt.autoscaling.toTitle,children:e.jsxs("div",{className:Ft.selectInput,children:[e.jsx(ct,{...a,options:r,"aria-label":Tt.autoscaling.maxSelectLabel}),e.jsx("span",{className:Ft.cu,children:Mn(a.value)})]})})})]}),e.jsx(rT,{}),e.jsx(Gx,{autoscalingRange:s("autoscaling")})]})},Ew=({value:t,title:s})=>e.jsxs("div",{className:Ft.value,children:[e.jsx("span",{className:Ft.title,children:s}),e.jsx("span",{className:Ft.cu,"data-qa":"autoscaling-slider-value",children:Mn(t)})]}),FY=()=>{const t=Ct();return e.jsx(Pe,{name:"largeProvisionedEnabled",control:t.control,render:({field:s})=>e.jsxs($u,{children:[e.jsx(mr,{active:!s.value,onClick:()=>s.onChange(!1),children:Tt.largeScaling.scaleButton}),e.jsxs(mr,{active:s.value,onClick:()=>s.onChange(!0),disabled:s.disabled,className:Ft.toggleButton,children:[Tt.largeScaling.largeProvisionedButton," ",e.jsx(Ie,{appearance:"experimental",size:"m",children:"Beta"})]})]})})},zY=({originalValues:t})=>{const s=Ct().watch("autoscaling");return s.min!==t.min||s.max!==t.max?e.jsx(X,{appearance:"warning",children:Tt.autoscalingWarning}):null},qY=({originalAutoscalingValues:t})=>{const{control:s}=Ct(),n=Zm();return e.jsx(Pe,{name:"autoscaling",control:s,render:({field:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Ft.withHint,children:[e.jsx("span",{children:Tt.autoscaling.hint}),e.jsx(nT,{value:r.value,onChange:r.onChange,maxValue:n??Jr[Jr.length-1],disabled:!n,scale:Jr})]}),e.jsxs("div",{className:Ft.values,children:[e.jsx(Ew,{value:r.value.min,title:Tt.autoscaling.fromTitle}),e.jsx(Ew,{value:r.value.max,title:Tt.autoscaling.toTitle})]}),e.jsx(rT,{}),e.jsx(Gx,{autoscalingRange:r.value}),t?e.jsx(zY,{originalValues:t}):null]})})},Ow=({originalAutoscalingValues:t})=>{const s=Zm();return!s||s<=w$?e.jsx(qY,{originalAutoscalingValues:t}):e.jsx(UY,{})},HY=t=>{const s=Wx(),[n,r]=m.useState(!1),a=s&&ii.some(c=>c<=s),i=Ct().watch("largeProvisionedEnabled");return e.jsxs("div",{className:Ft.root,children:[e.jsxs("div",{className:Ft.header,children:[e.jsx(Z,{level:3,size:"h4",children:a?Tt.headers.computeSize:Tt.headers.autoscaling}),t.upgradeable?e.jsx(R,{onClick:()=>r(!0),children:Tt.upgradeForMore}):null,e.jsx(lt,{type:Xe.ComputeSizeLimitReached,isOpen:n,onRequestClose:()=>r(!1)})]}),a?e.jsxs("div",{className:Ft.withHint,children:[e.jsx(FY,{}),i?e.jsx(DY,{}):e.jsx(Ow,{...t})]}):e.jsx(Ow,{...t})]})},VY={value:Math.floor(BC/ur[Zr.Minutes]),unit:Zr.Minutes},$w=[{label:"Seconds",value:Zr.Seconds},{label:"Minutes",value:Zr.Minutes},{label:"Hours",value:Zr.Hours},{label:"Days",value:Zr.Days}];function aT(t){if(!t||t<0)return VY;const{highestValue:s,highestUnit:n}=km(t);return{value:s,unit:n}}function WY(t){return t.value*ur[t.unit]}const Ns={header:"Scale to zero",enable:"Scale to zero after",enableV2:`Scale to zero after ${Lu(BC)} of inactivity`,never:"Never",coldStart:"Compute activation takes only a few hundred milliseconds.",alwaysActive:"The compute remains active at all times. It will only be restarted for scheduled updates.",unitLabel:"Scale to zero time unit",timeoutLabel:"Scale to zero timeout",autosuspendDisabled:t=>e.jsxs(e.Fragment,{children:["Scales to zero after ",e.jsx("strong",{children:"5 minutes"})," of inactivity."," ",t," to configure this setting."]}),autosuspendDisabledV2:e.jsxs(e.Fragment,{children:["Scales to zero after ",e.jsx("strong",{children:"5 minutes"})," of inactivity."]}),upgradeLinkText:"Upgrade your plan"},GY="_root_2ai5k_1",KY="_elements_2ai5k_7",QY="_inputs_2ai5k_13",YY="_valueInput_2ai5k_18",JY="_unitInput_2ai5k_22",ed={root:GY,elements:KY,inputs:QY,valueInput:YY,unitInput:JY},ZY=()=>{var a,o;const{trigger:t,formState:{isValid:s,errors:n}}=Ct();m.useEffect(()=>{t("autosuspend")},[t,s]);const r=(o=(a=n.autosuspend)==null?void 0:a.value)==null?void 0:o.message;return e.jsx(e.Fragment,{children:r?e.jsx(T,{appearance:"error",children:r}):null})},XY=()=>{const{control:t,watch:s,trigger:n}=Ct(),{trackUiInteraction:r}=P(),{isDirectSalesSubscription:a}=he(),o=ao("edit_suspend_timeout"),i=ge("disallow_autosuspend_timeout_customization"),{limits:c}=It(),l=sT(c==null?void 0:c.min_autosuspend_seconds),[d,u]=m.useState(!1),p=s("autosuspend"),h=!i||a||p.enabled&&!(p.value===5&&p.unit==="minutes"),[g,f]=m.useState(h);return!g&&h&&f(!0),e.jsxs("div",{className:ed.root,children:[e.jsx(Z,{level:3,size:"h4",children:Ns.header}),o?e.jsxs("div",{className:ed.elements,children:[e.jsx(Pe,{name:"autosuspend.enabled",control:t,render:({field:_})=>e.jsx(as,{isSelected:_.value,isDisabled:_.disabled,onChange:b=>{r(b?"compute_drawer_autosuspend_enabled":"compute_drawer_autosuspend_disabled"),_.onChange(b),n("autosuspend")},"aria-label":g?Ns.enable:Ns.enableV2,children:g?Ns.enable:Ns.enableV2})}),p.enabled?e.jsxs(e.Fragment,{children:[g&&e.jsxs("div",{className:ed.inputs,children:[e.jsx(Pe,{name:"autosuspend.value",control:t,render:({field:_,fieldState:b})=>e.jsx(U,{error:!!b.error,"aria-label":Ns.timeoutLabel,children:e.jsx(ie,{..._,onChange:x=>_.onChange(Number(x.target.value)),type:"number",className:ed.valueInput})})}),e.jsx(Pe,{name:"autosuspend.unit",control:t,render:({field:_,fieldState:b})=>e.jsx(U,{error:!!b.error,"aria-label":Ns.unitLabel,children:e.jsx(ct,{..._,options:_.value!=="seconds"&&l>=60?$w.filter(({value:x})=>x!=="seconds"):$w,"aria-label":Ns.unitLabel,className:ed.unitInput})})})]}),e.jsx(ZY,{}),e.jsx(qc,{icon:"info",children:Ns.coldStart})]}):e.jsx(qc,{icon:"lightning",children:Ns.alwaysActive})]}):e.jsxs(qc,{icon:"pause",children:[i?Ns.autosuspendDisabledV2:Ns.autosuspendDisabled(e.jsx(R,{onClick:()=>u(!0),children:Ns.upgradeLinkText})),e.jsx(lt,{type:Xe.ComputeSizeLimitReached,isOpen:d,onRequestClose:()=>u(!1)})]})]})},Ls={createTitle:t=>{switch(t){case"read_only":return"Add read replica";case"read_write":return"Add primary compute"}},editTitle:t=>{switch(t){case"read_only":return"Edit read replica";case"read_write":return"Edit primary compute"}},buttons:{save:"Save",add:"Add",delete:"Delete",cancel:"Cancel",addButtonLimitMessage:"You reached the limit of computes."},loadingBranchWarning:"Please wait for a branch to load...",protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again.",vercelWarning:"Deleting the read-write compute on the root branch is not available for Vercel-managed projects."},eJ="_wrapper_1bf1f_1",tJ="_form_1bf1f_7",sJ="_divider_1bf1f_11",nJ="_addSaveCancel_1bf1f_18",rJ="_buttons_1bf1f_23",ir={wrapper:eJ,form:tJ,divider:sJ,addSaveCancel:nJ,buttons:rJ},Rh={errors:{minBiggerThanMax:"Minimum value should be less or equal to maximum value",suspendTimeToLow:({min:t})=>`The minimum setting is ${_v(t)}.`,suspendTimeToHigh:({max:t})=>`The maximum setting is ${_v(t)}.`,suspendTimeEmpty:"Auto suspend timeout can not be empty."}},aJ=t=>Ap({largeProvisionedEnabled:_i().optional(),autoscaling:Ap({min:tn(),max:tn()}).refine(({min:s,max:n})=>s<=n,{message:Rh.errors.minBiggerThanMax,path:["min"]}).refine(s=>LC(s)),largeProvisioned:tn(),autosuspend:Ap({enabled:_i(),value:tn().gt(0,Rh.errors.suspendTimeEmpty),unit:nk([Ld("seconds"),Ld("minutes"),Ld("hours"),Ld("days")])}).refine(({enabled:s,value:n,unit:r})=>s?n>=Math.ceil(t/ur[r]):!0,()=>({path:["value"],message:Rh.errors.suspendTimeToLow({min:t})})).refine(({enabled:s,value:n,unit:r})=>s?n<=Math.floor(bv/ur[r]):!0,()=>({path:["value"],message:Rh.errors.suspendTimeToHigh({max:bv})})),name:nt().max(64).min(1).optional()}),oT=(t,s)=>s?t.autosuspend.enabled?{suspend_timeout_seconds:WY({...t.autosuspend,unit:t.autosuspend.unit})}:{suspend_timeout_seconds:-1}:{},iT=t=>t.largeProvisionedEnabled?{autoscaling_limit_min_cu:t.largeProvisioned,autoscaling_limit_max_cu:t.largeProvisioned}:{autoscaling_limit_min_cu:t.autoscaling.min,autoscaling_limit_max_cu:t.autoscaling.max},oJ=(t,s)=>{const n=DC(s);return{provisioner:t.provisioner!==n?n:void 0}},cT=t=>t.name!=null?{name:t.name}:null,iJ=(t,s,n)=>{const{trackUiInteraction:r}=P(),{getRegion:a}=io(),o=ao("edit_suspend_timeout"),i=Mb({projectId:s.project_id},{onSuccess:n});return m.useCallback(c=>{r("compute_drawer_save_clicked"),i.mutate({endpointId:s.id,request:{endpoint:{...oJ(s,a(t.platform_id,t.region_id)),...iT(c),...oT(c,o),...cT(c)}}})},[a,t.platform_id,t.region_id,r,i,s,o])},cJ=(t,s,n)=>{var d;const{trackUiInteraction:r}=P(),{getRegion:a}=io(),o=Hs({projectId:t.id,branchId:s}),i=ao("edit_suspend_timeout"),c=C$({projectId:t.id},{onSuccess:n}),l=(d=o.data)!=null&&d.endpoints.some(br)?"read_only":"read_write";return m.useCallback(u=>{r("compute_drawer_create_clicked"),c.mutate({request:{endpoint:{branch_id:s,type:l,provisioner:DC(a(t.platform_id,t.region_id)),...iT(u),...oT(u,i),...cT(u)}}})},[r,c,t.platform_id,t.region_id,s,l,a,i])},lT=(t,s)=>{const{trackUiInteraction:n}=P(),r=UC(),a=FC({projectId:t.project_id},{onSuccess:s});return m.useCallback(async()=>{n("compute_drawer_delete_clicked"),await r(t)&&a.mutate({endpointId:t.id})},[r,a,t,n])},dT=(t,s)=>({largeProvisionedEnabled:ii.includes(t.autoscaling_limit_min_cu),autoscaling:{min:Jr.includes(t.autoscaling_limit_min_cu)?t.autoscaling_limit_min_cu:Jr[0],max:Jr.includes(t.autoscaling_limit_max_cu)?t.autoscaling_limit_max_cu:Jr[0]},largeProvisioned:ii.includes(t.autoscaling_limit_min_cu)?t.autoscaling_limit_min_cu:ii[0],autosuspend:{enabled:s?t.suspend_timeout_seconds!==-1:!1,...aT(t.suspend_timeout_seconds)},name:t.name}),lJ=t=>{const s=ao("edit_suspend_timeout"),{isDirectSalesSubscription:n}=he(),r=ge("disallow_autosuspend_timeout_customization"),a=Zm(),o=Wx(),i=t.default_endpoint_settings,c=(i==null?void 0:i.autoscaling_limit_min_cu)??0,l=(i==null?void 0:i.autoscaling_limit_max_cu)??0,d=c===l?c:0,u=o?Dc(d,ii[0],o):d,p=r&&!n?0:(i==null?void 0:i.suspend_timeout_seconds)??0;return{autoscaling:{min:a?Dc(c,xv,a):c,max:a?Dc(l,xv,a):l},largeProvisioned:u,largeProvisionedEnabled:u===d,autosuspend:{enabled:s&&p>=0,...aT(p)}}},uT=t=>{const{limits:s}=It(),n=sT(s==null?void 0:s.min_autosuspend_seconds),r=$e({defaultValues:t,resolver:Ii(aJ(n))}),{trigger:a}=r;return m.useEffect(()=>{a()},[a]),r},dJ=({children:t,onCancel:s,onRequestClose:n,...r})=>{var u,p;const{trackUiInteraction:a}=P(),o=uT(lJ(r.project)),i=It(),c=ln({projectId:r.project.id}),l=i.isLoading?null:((u=i.limits)==null?void 0:u.max_read_only_endpoints)??-1;m.useEffect(()=>{var x;const h=((x=c.data)==null?void 0:x.endpoints)??[],g=h.filter(j=>j.branch_id===r.branchId),f=l===null||c.isLoading||h.filter(k$).length>=(l===-1?1/0:l),_=c.isLoading||g.some(br),b=r.endpointType==="read_only"?f:_;b&&!o.formState.errors.root?o.setError("root",{type:"disabled",message:Ls.buttons.addButtonLimitMessage}):!b&&o.formState.errors.root&&o.clearErrors("root")},[o,l,c.data,c.isLoading,r.branchId,r.endpointType]);const d=cJ(r.project,r.branchId,n);return e.jsx(Jt,{...o,children:e.jsx("form",{onSubmit:o.handleSubmit(d),className:ir.form,children:e.jsx(ia,{title:Ls.createTitle(r.endpointType),alwaysShowScrollbar:!0,footer:e.jsxs("div",{className:ir.addSaveCancel,children:[e.jsx(E,{appearance:"secondary",onClick:()=>{a("compute_drawer_create_form_cancelled"),s()},children:Ls.buttons.cancel}),e.jsx(te,{content:((p=o.formState.errors.root)==null?void 0:p.message)??"-",disabled:!o.formState.errors.root,children:e.jsx("div",{children:e.jsx(Ce,{children:Ls.buttons.add})})})]}),children:e.jsxs("div",{className:ir.wrapper,children:[e.jsxs(U,{id:"endpoint_name",children:[e.jsx(Im,{children:"Name"}),e.jsx(ie,{placeholder:"Name your compute (Optional)",...o.register("name",{setValueAs:h=>h||void 0})})]}),e.jsx("div",{className:ir.divider}),t]})})})})},uJ=({children:t,onCancel:s,onRequestClose:n,...r})=>{const{trackUiInteraction:a}=P(),o=ao("edit_suspend_timeout"),i=uT(dT(r.endpoint,o)),c=iJ(r.project,r.endpoint,()=>{n(),oe("Endpoint is updated successfully!")}),l=lT(r.endpoint,n),{branchesById:d}=xt(),u=d[r.endpoint.branch_id],{isVercelOrg:p}=re(),h=u?u.protected?Ls.protectedBranchWarning:p&&r.endpoint.type==="read_write"&&!u.parent_id?Ls.vercelWarning:void 0:Ls.loadingBranchWarning;return e.jsx(Jt,{...i,children:e.jsx("form",{onSubmit:i.handleSubmit(c),className:ir.form,children:e.jsx(ia,{title:Ls.editTitle(r.endpoint.type),alwaysShowScrollbar:!0,footer:e.jsxs("div",{className:ir.buttons,children:[e.jsx(te,{content:h,disabled:!h,children:e.jsx("div",{children:e.jsx(E,{appearance:"danger",onClick:l,disabled:!!h,children:Ls.buttons.delete})})}),e.jsxs("div",{className:ir.addSaveCancel,children:[e.jsx(E,{appearance:"secondary",onClick:()=>{a("compute_drawer_edit_form_cancelled"),s()},children:Ls.buttons.cancel}),e.jsx(Ce,{children:Ls.buttons.save})]})]}),children:e.jsxs("div",{className:ir.wrapper,children:[e.jsxs(U,{id:"endpoint_name",children:[e.jsx(Im,{children:"Name"}),e.jsx(ie,{...i.register("name",{setValueAs:g=>g||void 0}),placeholder:r.endpoint.id})]}),e.jsx("div",{className:ir.divider}),t]})})})})},uo=({isOpen:t=!1,drawerZIndex:s,onRequestClose:n,...r})=>{var i;const{trackUiInteraction:a}=P();m.useEffect(()=>{t&&a("compute_drawer_shown")},[t,a]);const o=e.jsxs(e.Fragment,{children:[e.jsx(HY,{upgradeable:["launch","free_v2"].includes((i=r.project.owner)==null?void 0:i.subscription_type),originalAutoscalingValues:r.mode==="edit"?dT(r.endpoint,!1).autoscaling:void 0}),e.jsx("div",{className:ir.divider}),e.jsx(XY,{})]});return e.jsx(oa,{isOpen:t,"aria-label":r.mode==="create"?Ls.createTitle(r.endpointType):Ls.editTitle(r.endpoint.type),onRequestClose:n,size:"m",zIndex:s,children:r.mode==="create"?e.jsx(dJ,{...r,onCancel:n,onRequestClose:n,children:o}):e.jsx(uJ,{...r,onCancel:n,onRequestClose:n,children:o})})},hJ="_alertContainer_x3tvp_1",pJ="_alertTitle_x3tvp_7",mJ="_alertIcon_x3tvp_11",gJ="_subDescription_x3tvp_16",fJ="_solution_x3tvp_20",Co={alertContainer:hJ,alertTitle:pJ,alertIcon:mJ,subDescription:gJ,solution:fJ},Lw={upgrade_plan:"Upgrade",upgrade_cu:"Edit compute"},_J=({content:t})=>{const s=et(),{selectedNotificationItem:n}=ll(Qt.selector),r=cn(),{trackUiInteraction:a}=P(),{billingUrl:o}=so(),i=()=>{r(Qt.actions.setShowModal(!1))},c=()=>{a("monitoring_alerts_notification_upgrade_clicked"),i(),r(Qt.actions.setShowUpgradePlanModal(!0))},l=h=>{a("monitoring_alerts_notification_edit_compute_clicked"),i(),r(Qt.actions.setIsEndpointEditFormOpened(h))};m.useEffect(()=>()=>{r(Qt.actions.setShowModal(!1))},[r]);const d=m.useCallback(()=>{s.push(`${o}#usage`)},[s,o]),u=n&&n.action==="upgrade_cu"?Lw.upgrade_cu:Lw.upgrade_plan,p=t.action&&n&&(t==null?void 0:t.action[n.action]);return n?e.jsxs(e.Fragment,{children:[e.jsxs(De,{children:[e.jsxs("div",{className:Co.alertContainer,children:[e.jsx(z,{name:"info",size:16,className:Co.alertIcon}),e.jsx(Z,{level:2,size:"h5",className:Co.alertTitle,children:t.alertTitle})]}),e.jsx("p",{children:t.alertDescription(n==null?void 0:n.value)}),t.alertSubDescription&&e.jsx("p",{className:Co.subDescription,children:t.alertSubDescription(n.value)}),t.action&&e.jsx("p",{className:Co.subDescription,children:p}),t.tipsTitle&&t.tips&&e.jsxs("div",{className:Co.solution,children:[e.jsx(Z,{level:2,size:"h5",className:Co.alertTitle,children:t.tipsTitle}),t.tips&&e.jsx("ol",{children:t.tips.map(h=>e.jsx("li",{children:h},h))})]})]}),e.jsxs(Te,{children:[e.jsx(E,{appearance:"secondary",size:"l",onClick:()=>{i(),d()},children:"Review Usage"}),e.jsx(E,{appearance:"primary",size:"l",onClick:()=>{n&&(n.action==="upgrade_plan"?c():l(!0))},children:u})]})]}):null},bJ={connections:[{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of 112 concurrent connections provided by your Free Plan .25 vCPU compute size.",alertSubDescription:()=>"Upgrade to a paid plan to get more connections.",plans:["free_v2"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Upgrade your plan to get more connections.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["launch"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["scale"]}],ram:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade to a paid plan for larger compute sizes with more RAM"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade your plan for larger compute sizes with more RAM"],action:{upgrade_plan:"Upgrade your plan to get more RAM.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max RAM for your plan",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM"],action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["scale"]}],cpu:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Upgrade your plan to get more compute"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the max CU allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load","Upgrade your plan to get more compute"],action:{upgrade_plan:"Upgrade your plan to get more CU.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max CU for your plan",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load"],action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["scale"]}]},xJ=()=>{const{data:t}=kt(),{selectedNotificationItem:s}=ll(Qt.selector);return m.useMemo(()=>{if(!s||t===void 0)return;const n=bJ[s.metric];return n==null?void 0:n.find(r=>r.plans.includes(t.plan))},[t,s])},jJ=()=>{var g,f;const{showModal:t,showUpgradePlanModal:s,isEndpointEditFormOpened:n,selectedNotificationItem:r}=ll(Qt.selector),a=cn(),{project:o,projectId:i}=F(),{data:c}=tl.useGetNotificationsQuery({projectId:i}),l=ln({projectId:i}),d=xJ(),u=()=>{a(Qt.actions.setShowUpgradePlanModal(!1))},p=_=>{a(Qt.actions.setIsEndpointEditFormOpened(_))},h=c?(f=(g=l.data)==null?void 0:g.endpoints)==null?void 0:f.find(_=>_.id===c.endpointId):void 0;return!r||!d||!c||!o?null:e.jsxs(e.Fragment,{children:[e.jsx(ft,{width:800,isOpen:t,onRequestClose:()=>{a(Qt.actions.setShowModal(!1))},title:d.modalTile(r.value),children:e.jsx(_J,{content:d})}),s&&e.jsx(lt,{type:Xe.Default,isOpen:s,onRequestClose:()=>{u()}}),n&&h&&e.jsx(uo,{isOpen:!0,mode:"edit",project:o,endpoint:h,onRequestClose:()=>p(!1)})]})},vJ="_menu_m4x1n_1",yJ={menu:vJ},wJ=()=>{const{isOpen:t}=ll(Qt.selector),s=cn(),{unreadCount:n,announcements:r}=WQ(),a=m.useRef(null),o=()=>{s(Qt.actions.setIsOpen(!1))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:a,children:[e.jsx(tY,{unreadAnnouncementsCount:n}),e.jsx(jJ,{})]}),e.jsx(jm,{triggerRef:a,isOpen:t,placement:"bottom right",className:yJ.menu,onOpenChange:o,children:e.jsx(vY,{announcements:r})})]})},SJ=()=>{const{pathname:t}=oC(),{projectId:s}=dl(),n=ge("growth_monitoring_alerts"),r=t.startsWith(`/projects/${s}`);return!n||!r?null:e.jsx(wJ,{})},Rw={OK:{tooltip:"All Systems Operational",badge:"All ok"},INCIDENTS:{tooltip:"There are ongoing incidents",badge:"Incidents"},INCIDENT:{tooltip:"There is an ongoing incident",badge:"Incident"},MAINTENANCE:{tooltip:"Scheduled maintenance going on",badge:"Maintenance"}},CJ="_container_y8x8c_1",kJ="_dot_y8x8c_7",IJ="_ok_y8x8c_13",PJ="_incidents_y8x8c_17",TJ="_maintenance_y8x8c_21",td={container:CJ,dot:kJ,ok:IJ,incidents:PJ,maintenance:TJ},AJ=({status:t})=>e.jsx(te,{content:Rw[t].tooltip,children:e.jsx("a",{href:I$,target:"_blank",rel:"noreferrer",children:e.jsx(Ie,{children:e.jsxs("div",{className:td.container,children:[e.jsx("p",{"data-qa":"system-status-text",className:V(td.dot,{[td.incidents]:t==="INCIDENTS"||t==="INCIDENT",[td.maintenance]:t==="MAINTENANCE",[td.ok]:t==="OK"})}),Rw[t].badge]})})})}),NJ=Et({page_title:nt(),page_url:nt(),ongoing_incidents:di(Np()),in_progress_maintenances:di(Np()),scheduled_maintenances:di(Np())}),EJ=Et({subpage:nt(),summary:NJ}),OJ=Et({subpages:di(EJ)}),pf={FETCH_ERROR:"Failed to fetch status",PARSE_ERROR:"Invalid data received from status API",UNKNOWN_ERROR:"An unknown error occurred while fetching status"},$J=t=>{const{subpages:s}=t,n=$U(s,a=>a.summary.ongoing_incidents.length),r=s.some(a=>a.summary.in_progress_maintenances.length>0);return n>1?"INCIDENTS":n===1?"INCIDENT":r?"MAINTENANCE":"OK"},LJ=async()=>{try{const t=await fetch(P$);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json(),n=OJ.safeParse(s);if(!n.success)throw new q_(n.error.errors);return $J(n.data)}catch(t){throw t instanceof q_?new Error(`${pf.PARSE_ERROR}: ${t.message}`):t instanceof Error?new Error(`${pf.FETCH_ERROR}: ${t.message}`):new Error(pf.UNKNOWN_ERROR)}},RJ=()=>{const{data:t,error:s}=bt({queryKey:["system-status"],queryFn:LJ,staleTime:3e5});return m.useEffect(()=>{s&&gi(s)},[s]),t?e.jsx(AJ,{"data-qa":"system-status-badge",status:t}):null},MJ="_header_ui17l_1",BJ="_header_compact_ui17l_12",DJ="_quickNav_ui17l_20",mf={header:MJ,header_compact:BJ,quickNav:DJ},um=m.memo(({projectId:t,isError:s})=>e.jsxs(e.Fragment,{children:[!s&&!0&&e.jsx(z8,{}),e.jsxs("div",{className:V(mf.header,{[mf.header_compact]:!1}),children:[s?e.jsx("div",{}):e.jsx(CI,{projectId:t}),e.jsxs("div",{className:mf.quickNav,children:[e.jsxs(e.Fragment,{children:[e.jsx(RJ,{}),e.jsx(SJ,{}),e.jsx(wQ,{}),e.jsx(PQ,{})]}),e.jsx(R8,{})]})]}),!s&&e.jsx(IQ,{})]}));um.displayName="LayoutHeader";const hT=m.memo(()=>{const{projectId:t,project:s,isLoading:n,error:r}=F();return e.jsx(um,{projectId:t,isError:!n&&!s||!!r})});hT.displayName="ProjectHeader";const UJ=()=>null,pT="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}@{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?sslmode=require{{#channelBinding}}&channel_binding=require{{/channelBinding}}",mT="Host={{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}; Database={{{pgEncodedDatabase}}}; Username={{{pgEncodedRole}}}; {{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}Password={{{pgEncodedPasswordOrPlaceholder}}}; {{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}SSL Mode=VerifyFull; Channel Binding=Require;",FJ=`# Add these at the top of your settings.py
import os
from dotenv import load_dotenv
from urllib.parse import urlparse, parse_qsl

load_dotenv()

# Replace the DATABASES section of your settings.py with this
tmpPostgres = urlparse(os.getenv("DATABASE_URL"))

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': tmpPostgres.path.replace('/', ''),
        'USER': tmpPostgres.username,
        'PASSWORD': tmpPostgres.password,
        'HOST': tmpPostgres.hostname,
        'PORT': 5432,
        'OPTIONS': dict(parse_qsl(tmpPostgres.query)),
    }
}
`,zJ="DATABASE_URL='{{> connstring}}'",qJ=`"{{> connstring_dotnet }}"
`,HJ=`{
  ...
  "ConnectionStrings": {
    "DefaultConnection": "{{> connstring_dotnet }}"
  },
  ...
}
`,VJ=`package main

import (
	"context"
	"fmt"
	"log"
	"os"

	"github.com/jackc/pgx/v5"
	"github.com/joho/godotenv"
)

func main() {
	err := godotenv.Load()
	if err != nil {
		log.Fatal("Error loading .env file")
	}
	connStr := os.Getenv("DATABASE_URL")
	conn, err := pgx.Connect(context.Background(), connStr)
	if err != nil {
		panic(err)
	}
	defer conn.Close(context.Background())
	_, err = conn.Exec(context.Background(), "CREATE TABLE IF NOT EXISTS playing_with_neon(id SERIAL PRIMARY KEY, name TEXT NOT NULL, value REAL);")
	if err != nil {
		panic(err)
	}
	_, err = conn.Exec(context.Background(), "INSERT INTO playing_with_neon(name, value) SELECT LEFT(md5(i::TEXT), 10), random() FROM generate_series(1, 10) s(i);")
	if err != nil {
		panic(err)
	}
	rows, err := conn.Query(context.Background(), "SELECT * FROM playing_with_neon")
	if err != nil {
		panic(err)
	}
	defer rows.Close()
	for rows.Next() {
		var id int32
		var name string
		var value float32
		if err := rows.Scan(&id, &name, &value); err != nil {
			panic(err)
		}
		fmt.Printf("%d | %s | %f\\n", id, name, value)
	}
}`,WJ="DATABASE_URL='{{> connstring}}'",GJ=`//Let it be table 't' with a single column 'text' of a type 'Text'. Once created, you can put some rows into it and finally navigate to the API section for endpoint creation. In the GraphQL tab, we can query our table with GraphQL, for example:

query MyQuery {
t {
text
}
}
Save this GraphQL query as an HTTP API endpoint by clicking the REST tab. Let us call the endpoint 'query_t'.

Finally, you can use this endpoint to get the table content now. For example, that is how it works from the shell:

$ curl -H 'x-hasura-admin-secret: {admin_secret}' https://{projectName}.hasura.app/api/rest/query_t
{"t":[{"text":"test"}]}
`,KJ=`jdbc:postgresql://{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?user={{{pgEncodedRole}}}{{#storePasswords}}&password={{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}&sslmode=require&channelBinding=require
`,QJ=`// database.service.ts
import { neon } from '@neondatabase/serverless';
import { Injectable } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';

@Injectable()
export class DatabaseService {
    private readonly sql;

    constructor(private configService: ConfigService) {
        const databaseUrl = this.configService.get('DATABASE_URL');
        this.sql = neon(databaseUrl);
    }
        async getData() {
        const data = await this.sql\`...\`;
        return data;
    }
}
`,YJ=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,JJ=`// app/actions.ts
"use server";
import { neon } from "@neondatabase/serverless";

export async function getData() {
    const sql = neon(process.env.DATABASE_URL);
    const data = await sql\`...\`;
    return data;
}
`,ZJ=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,XJ=`require("dotenv").config();

const http = require("http");
const { neon } = require("@neondatabase/serverless");

const sql = neon(process.env.DATABASE_URL);

const requestHandler = async (req, res) => {
  const result = await sql\`SELECT version()\`;
  const { version } = result[0];
  res.writeHead(200, { "Content-Type": "text/plain" });
  res.end(version);
};

http.createServer(requestHandler).listen(3000, () => {
  console.log("Server running at http://localhost:3000");
});`,eZ="DATABASE_URL='{{> connstring}}'",tZ=`{{#preferPooled}}
PGHOST='{{{poolerHost}}}'
{{/preferPooled}}
{{^preferPooled}}
PGHOST='{{{host}}}'
{{/preferPooled}}
PGDATABASE='{{{pgEncodedDatabase}}}'
PGUSER='{{{pgEncodedRole}}}'
{{#pgPasswordOrPlaceholder}}PGPASSWORD='{{{pgPasswordOrPlaceholder}}}'{{/pgPasswordOrPlaceholder}}
PGSSLMODE='require'
PGCHANNELBINDING='require'
`,sZ=`// prisma/schema.prisma
datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}
`,nZ=`DATABASE_URL="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{poolerHost}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
# uncomment next line if you use Prisma <5.10
# DATABASE_URL_UNPOOLED="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{host}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
`,rZ=`psql '{{> connstring}}'
`,aZ=`psql -h pg.neon.tech
`,oZ="# To be done",iZ=`import { neon } from '@neondatabase/serverless';

const sql = neon('{{> connstring}}');

const posts = await sql('SELECT * FROM posts');

// See https://neon.com/docs/serverless/serverless-driver
// for more information
`,cZ=`import { neon } from '@neondatabase/serverless';

// Retrieve the JWT token (implementation depends on your auth system)
const authToken = getAuthToken();

// Initialize the Neon client with connection string and auth token
const sql = neon('{{> connstring}}', { authToken });

// Run a query
const posts = await sql('SELECT * FROM posts');

// See https://neon.com/docs/serverless/serverless-driver
// for more information
`,lZ=`import { Pool } from '@neondatabase/serverless';

const pool = new Pool({ connectionString: '{{> connstring}}' });

const { rows: [post] } = await pool.query('SELECT * FROM posts');

pool.end();
`,dZ=`import os
import asyncio
import re
from sqlalchemy import text
from dotenv import load_dotenv
from sqlalchemy.ext.asyncio import create_async_engine

load_dotenv()

async def async_main() -> None:
    engine = create_async_engine(re.sub(r'^postgresql:', 'postgresql+asyncpg:', os.getenv('DATABASE_URL')), echo=True)
    async with engine.connect() as conn:
        result = await conn.execute(text("select 'hello world'"))
        print(result.fetchall())
    await engine.dispose()

asyncio.run(async_main())`,uZ="DATABASE_URL='{{> connstring}}'",hZ=`# cat .env | grep DATABASE_URL
DATABASE_URL="{{> connstring}}&charset=utf8"
`,pZ=Object.freeze(Object.defineProperty({__proto__:null,_connstring:pT,_connstring_dotnet:mT,django:FJ,django_env:zJ,dotnet_appsettings:HJ,dotnet_ssl:qJ,go:VJ,go_env:WJ,hasura:GJ,java:KJ,nestjs:QJ,nestjs_env:YJ,nextjs:JJ,nextjs_env:ZJ,nodejs:XJ,nodejs_env:eZ,parameters:tZ,prismajs:sZ,prismajs_env:nZ,psql:rZ,psql_passwordless:aZ,ruby:oZ,serverless_http:iZ,serverless_http_jwt:cZ,serverless_web_sockets:lZ,sql_alchemy:dZ,sql_alchemy_env:uZ,symfony:hZ},Symbol.toStringTag,{value:"Module"}));var ue=(t=>(t.ConnectionString="connection_string",t.ParametersOnly="parameters_only",t.Psql="psql",t.NextJS="nextjs",t.PrismaJS="prismajs",t.Django="django",t.Java="java",t.SQLAlchemy="sql_alchemy",t.NodeJS="nodejs",t.Symfony="symfony",t.Go="go",t.Serverless="serverless",t.ServerlessJWT="serverless_jwt",t.NestJS="nestjs",t.DotNet="dotnet",t))(ue||{});const mZ=He(["psql","connection_string","parameters_only","nextjs","prismajs","nodejs","dotnet","django","sql_alchemy","java","symfony","go","serverless","nestjs"]),gZ=He(["connection_string","parameters_only","serverless_jwt"]),fZ={connstring:pT.trim(),connstring_dotnet:mT.trim()},Kx={[ue.ConnectionString]:{value:ue.ConnectionString,label:"Connection string",tabs:[{value:ue.ConnectionString,label:"Connection string",template:"_connstring",hasSecrets:!0,language:"text"}]},[ue.ParametersOnly]:{value:ue.ParametersOnly,label:"Parameters only",tabs:[{value:ue.ParametersOnly,label:"Parameters only",template:"parameters",hasSecrets:!0,language:"nix"}]},[ue.Psql]:{value:ue.Psql,label:"psql",tabs:He([{value:ue.Psql,label:"connection string",template:"psql",hasSecrets:!0,language:"nix"},{value:"passwordless_auth",label:"passwordless auth",template:"psql_passwordless",hasSecrets:!1,language:"nix"}])},[ue.NextJS]:{value:ue.NextJS,label:"Next.js",tabs:[{value:ue.NextJS,label:"actions.ts",template:"nextjs",language:"javascript"},{value:"env",label:".env",template:"nextjs_env",hasSecrets:!0,language:"nix"}]},[ue.PrismaJS]:{value:ue.PrismaJS,label:"Prisma",tabs:[{value:ue.PrismaJS,label:"schema.prisma",template:"prismajs",language:"prisma"},{value:"env",label:".env",template:"prismajs_env",hasSecrets:!0,language:"nix"}]},[ue.DotNet]:{value:ue.DotNet,label:".NET",tabs:[{value:ue.DotNet,label:"Connection string",template:"dotnet_ssl",hasSecrets:!0,language:"java"},{value:"appsettings",label:"Entity Framework (appsettings.json)",template:"dotnet_appsettings",hasSecrets:!0,language:"nix"}]},[ue.Django]:{value:ue.Django,label:"Django",tabs:[{value:ue.Django,label:"settings.py",template:"django",hasSecrets:!1,language:"python"},{value:"env",label:".env",template:"django_env",hasSecrets:!0,language:"nix"}]},[ue.Java]:{value:ue.Java,label:"Java",tabs:[{value:ue.Java,label:"Java",template:"java",hasSecrets:!0,language:"text"}]},[ue.SQLAlchemy]:{value:ue.SQLAlchemy,label:"SQLAlchemy",tabs:[{value:ue.SQLAlchemy,label:"SQLAlchemy",template:"sql_alchemy",language:"python"},{value:"env",label:".env",template:"sql_alchemy_env",hasSecrets:!0,language:"nix"}]},[ue.NodeJS]:{value:ue.NodeJS,label:"Node.js",tabs:[{value:ue.NodeJS,label:"src/app.js",template:"nodejs",language:"javascript"},{value:"env",label:".env",template:"nodejs_env",hasSecrets:!0,language:"nix"}]},[ue.Symfony]:{value:ue.Symfony,label:"Symfony",tabs:[{value:ue.Symfony,label:"Symfony",template:"symfony",hasSecrets:!0,language:"nix"}]},[ue.Go]:{value:ue.Go,label:"Go",tabs:[{value:ue.Go,label:"Go",template:"go",language:"golang"},{value:"env",label:".env",template:"go_env",hasSecrets:!0,language:"nix"}]},[ue.Serverless]:{value:ue.Serverless,label:"Neon Serverless Driver",tabs:[{value:"http",label:"HTTP (Recommended)",template:"serverless_http",hasSecrets:!0,language:"javascript"},{value:"websockets",label:"WebSockets",template:"serverless_web_sockets",hasSecrets:!0,language:"javascript"}]},[ue.ServerlessJWT]:{value:ue.ServerlessJWT,label:"Neon Serverless Driver (JWT)",tabs:[{value:"http-jwt",label:"HTTP (Recommended)",template:"serverless_http_jwt",language:"javascript",hasSecrets:!0}]},[ue.NestJS]:{value:ue.NestJS,label:"NestJS",tabs:[{value:ue.NestJS,label:"database.service.ts",template:"nestjs",language:"javascript"},{value:"env",label:".env",template:"nestjs_env",hasSecrets:!0,language:"nix"}]}},_Z=(t="password")=>(t==="passwordless"?gZ:mZ).map(n=>Kx[n]),bZ=Object.fromEntries(Object.values(Kx).flatMap(t=>t.tabs.map(s=>[s.template,pZ[s.template].trim()])));/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var xZ=Object.prototype.toString,wl=Array.isArray||function(s){return xZ.call(s)==="[object Array]"};function Qx(t){return typeof t=="function"}function jZ(t){return wl(t)?"array":typeof t}function gf(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Mw(t,s){return t!=null&&typeof t=="object"&&s in t}function vZ(t,s){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(s)}var yZ=RegExp.prototype.test;function wZ(t,s){return yZ.call(t,s)}var SZ=/\S/;function CZ(t){return!wZ(SZ,t)}var kZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function IZ(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return kZ[n]})}var PZ=/\s*/,TZ=/\s+/,Bw=/\s*=/,AZ=/\s*\}/,NZ=/#|\^|\/|>|\{|&|=|!/;function EZ(t,s){if(!t)return[];var n=!1,r=[],a=[],o=[],i=!1,c=!1,l="",d=0;function u(){if(i&&!c)for(;o.length;)delete a[o.pop()];else o=[];i=!1,c=!1}var p,h,g;function f(N){if(typeof N=="string"&&(N=N.split(TZ,2)),!wl(N)||N.length!==2)throw new Error("Invalid tags: "+N);p=new RegExp(gf(N[0])+"\\s*"),h=new RegExp("\\s*"+gf(N[1])),g=new RegExp("\\s*"+gf("}"+N[1]))}f(s||an.tags);for(var _=new Vu(t),b,x,j,v,y,S;!_.eos();){if(b=_.pos,j=_.scanUntil(p),j)for(var w=0,k=j.length;w<k;++w)v=j.charAt(w),CZ(v)?(o.push(a.length),l+=v):(c=!0,n=!0,l+=" "),a.push(["text",v,b,b+1]),b+=1,v===`
`&&(u(),l="",d=0,n=!1);if(!_.scan(p))break;if(i=!0,x=_.scan(NZ)||"name",_.scan(PZ),x==="="?(j=_.scanUntil(Bw),_.scan(Bw),_.scanUntil(h)):x==="{"?(j=_.scanUntil(g),_.scan(AZ),_.scanUntil(h),x="&"):j=_.scanUntil(h),!_.scan(h))throw new Error("Unclosed tag at "+_.pos);if(x==">"?y=[x,j,b,_.pos,l,d,n]:y=[x,j,b,_.pos],d++,a.push(y),x==="#"||x==="^")r.push(y);else if(x==="/"){if(S=r.pop(),!S)throw new Error('Unopened section "'+j+'" at '+b);if(S[1]!==j)throw new Error('Unclosed section "'+S[1]+'" at '+b)}else x==="name"||x==="{"||x==="&"?c=!0:x==="="&&f(j)}if(u(),S=r.pop(),S)throw new Error('Unclosed section "'+S[1]+'" at '+_.pos);return $Z(OZ(a))}function OZ(t){for(var s=[],n,r,a=0,o=t.length;a<o;++a)n=t[a],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(s.push(n),r=n));return s}function $Z(t){for(var s=[],n=s,r=[],a,o,i=0,c=t.length;i<c;++i)switch(a=t[i],a[0]){case"#":case"^":n.push(a),r.push(a),n=a[4]=[];break;case"/":o=r.pop(),o[5]=a[2],n=r.length>0?r[r.length-1][4]:s;break;default:n.push(a)}return s}function Vu(t){this.string=t,this.tail=t,this.pos=0}Vu.prototype.eos=function(){return this.tail===""};Vu.prototype.scan=function(s){var n=this.tail.match(s);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};Vu.prototype.scanUntil=function(s){var n=this.tail.search(s),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function sl(t,s){this.view=t,this.cache={".":this.view},this.parent=s}sl.prototype.push=function(s){return new sl(s,this)};sl.prototype.lookup=function(s){var n=this.cache,r;if(n.hasOwnProperty(s))r=n[s];else{for(var a=this,o,i,c,l=!1;a;){if(s.indexOf(".")>0)for(o=a.view,i=s.split("."),c=0;o!=null&&c<i.length;)c===i.length-1&&(l=Mw(o,i[c])||vZ(o,i[c])),o=o[i[c++]];else o=a.view[s],l=Mw(a.view,s);if(l){r=o;break}a=a.parent}n[s]=r}return Qx(r)&&(r=r.call(this.view)),r};function gs(){this.templateCache={_cache:{},set:function(s,n){this._cache[s]=n},get:function(s){return this._cache[s]},clear:function(){this._cache={}}}}gs.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};gs.prototype.parse=function(s,n){var r=this.templateCache,a=s+":"+(n||an.tags).join(":"),o=typeof r<"u",i=o?r.get(a):void 0;return i==null&&(i=EZ(s,n),o&&r.set(a,i)),i};gs.prototype.render=function(s,n,r,a){var o=this.getConfigTags(a),i=this.parse(s,o),c=n instanceof sl?n:new sl(n,void 0);return this.renderTokens(i,c,r,s,a)};gs.prototype.renderTokens=function(s,n,r,a,o){for(var i="",c,l,d,u=0,p=s.length;u<p;++u)d=void 0,c=s[u],l=c[0],l==="#"?d=this.renderSection(c,n,r,a,o):l==="^"?d=this.renderInverted(c,n,r,a,o):l===">"?d=this.renderPartial(c,n,r,o):l==="&"?d=this.unescapedValue(c,n):l==="name"?d=this.escapedValue(c,n,o):l==="text"&&(d=this.rawValue(c)),d!==void 0&&(i+=d);return i};gs.prototype.renderSection=function(s,n,r,a,o){var i=this,c="",l=n.lookup(s[1]);function d(h){return i.render(h,n,r,o)}if(l){if(wl(l))for(var u=0,p=l.length;u<p;++u)c+=this.renderTokens(s[4],n.push(l[u]),r,a,o);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")c+=this.renderTokens(s[4],n.push(l),r,a,o);else if(Qx(l)){if(typeof a!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,a.slice(s[3],s[5]),d),l!=null&&(c+=l)}else c+=this.renderTokens(s[4],n,r,a,o);return c}};gs.prototype.renderInverted=function(s,n,r,a,o){var i=n.lookup(s[1]);if(!i||wl(i)&&i.length===0)return this.renderTokens(s[4],n,r,a,o)};gs.prototype.indentPartial=function(s,n,r){for(var a=n.replace(/[^ \t]/g,""),o=s.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!r)&&(o[i]=a+o[i]);return o.join(`
`)};gs.prototype.renderPartial=function(s,n,r,a){if(r){var o=this.getConfigTags(a),i=Qx(r)?r(s[1]):r[s[1]];if(i!=null){var c=s[6],l=s[5],d=s[4],u=i;l==0&&d&&(u=this.indentPartial(i,d,c));var p=this.parse(u,o);return this.renderTokens(p,n,r,u,a)}}};gs.prototype.unescapedValue=function(s,n){var r=n.lookup(s[1]);if(r!=null)return r};gs.prototype.escapedValue=function(s,n,r){var a=this.getConfigEscape(r)||an.escape,o=n.lookup(s[1]);if(o!=null)return typeof o=="number"&&a===an.escape?String(o):a(o)};gs.prototype.rawValue=function(s){return s[1]};gs.prototype.getConfigTags=function(s){return wl(s)?s:s&&typeof s=="object"?s.tags:void 0};gs.prototype.getConfigEscape=function(s){if(s&&typeof s=="object"&&!wl(s))return s.escape};var an={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){wu.templateCache=t},get templateCache(){return wu.templateCache}},wu=new gs;an.clearCache=function(){return wu.clearCache()};an.parse=function(s,n){return wu.parse(s,n)};an.render=function(s,n,r,a){if(typeof s!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+jZ(s)+'" was given as the first argument for mustache#render(template, view, partials)');return wu.render(s,n,r,a)};an.escape=IZ;an.Scanner=Vu;an.Context=sl;an.Writer=gs;const LZ=({database:t,endpoint:s,role:n,password:r,poolerEnabled:a})=>({pgEncodedRole:Ui(n==null?void 0:n.name),singleQuoteEscapedRole:vg(n==null?void 0:n.name),roleIsEncoded:(n==null?void 0:n.name)!==Ui(n==null?void 0:n.name),pgEncodedDatabase:Ui(t==null?void 0:t.name),singleQuoteEscapedDatabase:vg(t==null?void 0:t.name),databaseIsEncoded:(t==null?void 0:t.name)!==Ui(t==null?void 0:t.name),projectName:`${(s==null?void 0:s.id)??""}${a?"-pooler":""}`,host:U_(s),poolerHost:U_(s,!0),preferPooled:a,pgPassword:r,pgEncodedPassword:Ui(r),singleQuoteEscapedPassword:vg(r),passwordIsEncoded:r!==Ui(r)}),_b=(t,s)=>{const n=LZ(s);let r="",a="";return s.roleAuthMode!=="passwordless"&&(r=n.pgEncodedPassword||oh.pgEncodedPassword,a=n.pgPassword||oh.pgEncodedPassword),s.roleIsOAuth&&(a="${PGPASSWORD}"),an.render(bZ[t],{...oh,...n,pgEncodedPasswordOrPlaceholder:r,pgPasswordOrPlaceholder:a,singleQuoteEscapedPasswordOrPlaceholder:n.singleQuoteEscapedPassword||oh.pgEncodedPassword,storePasswords:s.storePasswords??!1,channelBinding:!0},fZ)},Rp="database",Sl=()=>Un(Rp);function Wu(){const[t]=Sl(),{selectOptions:s}=un();return m.useMemo(()=>{if(s.length)return s.find(n=>n.database.name===t)??s[0]},[s,t])}const RZ="endpointId",Xm=()=>Un(RZ),MZ=(t,s)=>t.appendConnectionString?[...t.key,s]:t.key;function Cl({connectionParams:t,querySystemPostgres:s}={}){var _;const{projectId:n,project:r}=F(),{data:a}=ul({branchId:t==null?void 0:t.branchId,projectId:n}),o=ln({projectId:n}),i=m.useMemo(()=>{var b;return((b=o.data)==null?void 0:b.endpoints)??[]},[o.data]),[c]=Xm(),l=i.find(b=>t!=null&&t.branchId?b.branch_id===t.branchId:c?b.id===c:b.type==="read_write");let d=(_=Wu())==null?void 0:_.database;t!=null&&t.dbName&&(d=a.list.find(b=>b.name===t.dbName));const u=r!=null&&r.store_passwords?d==null?void 0:d.owner_name:Ru,p=s?"postgres":d==null?void 0:d.name,h=U_(l,t==null?void 0:t.poolerEnabled),{data:g}=GM({projectId:n,branchId:(l==null?void 0:l.branch_id)??"",role:u??""});return m.useMemo(()=>!h||!u||!p||!g?null:z0({host:h,role:u,database:p,password:g,maskPassword:t==null?void 0:t.maskPassword}),[p,h,g,u,t==null?void 0:t.maskPassword])}function ca({queryKey:t,query:s,zodSchema:n,options:r,querySystemPostgres:a,connectionParams:o}){const i=Cl({connectionParams:o,querySystemPostgres:a}),c=m.useMemo(()=>MZ(t,i||""),[i,t]),l=((r==null?void 0:r.enabled)!=null?r.enabled:!0)&&i!==null;return bt({retry:!1,queryKey:c,queryFn:async()=>{const u=await _x(i)(s);return n?di(n).parse(u):u},...r,enabled:l})}const gT=2*Mu,fT=100,ri="neon_auth",BZ="ProjectUser",DZ=`
  SELECT
    users."projectUserId" as "id",
    users."displayName" as "name",
    users."profileImageUrl" as "avatar",
    users."createdAt" as "created_at",
    users."updatedAt" as "updated_at",
    channel."value" as "email",
    channel."isVerified" as "emailVerified",
    (
      to_jsonb(users.*) ||
      jsonb_build_object(
        'lastActiveAt', (SELECT MAX("eventStartedAt") as "lastActiveAt" FROM ${ri}."Event"
                        WHERE data->>'userId' =(users."projectUserId")::text),
        'contacts', (SELECT jsonb_agg(to_jsonb(channel.*)) FROM ${ri}."ContactChannel" as channel
                    WHERE channel."projectUserId" = users."projectUserId")
      )
    ) as raw_json
  FROM
    ${ri}."ProjectUser" as users,
    ${ri}."ContactChannel" as channel
  WHERE users."projectUserId" = channel."projectUserId"
  ORDER BY users."createdAt" DESC
  LIMIT ${fT}

`,UZ=`
  SELECT
    users."id" as "id",
    users."name" as "name",
    users."image" as "avatar",
    users."createdAt" as "created_at",
    users."updatedAt" as "updated_at",
    users."email" as "email",
    users."emailVerified" as "emailVerified",
    to_jsonb(users.*) as raw_json
  FROM
    ${ri}."user" as users
  ORDER BY users."createdAt" DESC
  LIMIT ${fT}
  `,FZ=Et({id:nt(),raw_json:Et({}).passthrough(),name:nt().nullable(),email:nt().email().nullable(),emailVerified:_i().nullable(),avatar:nt().nullable(),created_at:Ka().nullable(),updated_at:Ka().nullable()}),zZ=Et({count:tn()}),to={recentUsers:t=>["neonAuthRecentUsers",t],usersCount:t=>["neonAuthUsersCount",t]},qZ=(t,s)=>{const n=(s==null?void 0:s.auth_provider)==="better_auth"?UZ:DZ;return ca({queryKey:{key:to.recentUsers(t),appendConnectionString:!1},query:n,zodSchema:FZ,options:{enabled:!!s,staleTime:gT},connectionParams:{branchId:s==null?void 0:s.branch_id,dbName:s==null?void 0:s.db_name}})},HZ=(t,s)=>{const n=(s==null?void 0:s.auth_provider)==="better_auth"?"user":"ProjectUser";return ca({queryKey:{key:to.usersCount(t),appendConnectionString:!1},query:`SELECT COUNT(*)::integer as "count"
     FROM ${ri}."${n}"
`,zodSchema:zZ,options:{enabled:!!s,staleTime:gT},connectionParams:{branchId:s==null?void 0:s.branch_id,dbName:s==null?void 0:s.db_name}})},_T=2*Mu,VZ=100,eg="neon_auth",bT="users_sync",tg=`${eg}.${bT}`,WZ=[`schema "${eg}" already exists`,"Failed to create the schema"],GZ=t=>t.includes(`relation "${tg}" does not exist`),Dw=t=>WZ.some(s=>t.includes(s)),KZ=["id","name","email","raw_json","updated_at","created_at","deleted_at"],QZ=Et({id:nt(),raw_json:Et({}).passthrough(),name:nt().nullable(),email:nt().email().nullable(),created_at:Ka().nullable(),updated_at:Ka().nullable(),deleted_at:Ka().nullable()}),YZ=Et({count:tn()}),ea={recentUsers:t=>["getRecentUsers",t],usersCount:t=>["getAllUsersCount",t]},JZ=()=>{const{projectId:t}=F(),{branchId:s}=at(),{data:n}=Yx(t,s);return ca({queryKey:{key:ea.recentUsers(t),appendConnectionString:!1},query:`SELECT ${KZ.join(", ")}
     FROM ${tg}
     WHERE deleted_at IS NULL
     ORDER BY created_at DESC
     LIMIT ${VZ}`,zodSchema:QZ,options:{enabled:!!n,staleTime:_T},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},ZZ=()=>{const{projectId:t}=F(),{branchId:s}=at(),{data:n}=Yx(t,s);return ca({queryKey:{key:ea.usersCount(t),appendConnectionString:!1},query:`SELECT COUNT(id)::integer as "count"
     FROM ${tg}
     WHERE deleted_at IS NULL
`,zodSchema:YZ,options:{enabled:!!n,staleTime:_T},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},XZ=t=>{const s=be();return _e({mutationFn:async n=>(await G.deleteNeonAuthUser(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:ea.usersCount(t)}),s.invalidateQueries({queryKey:ea.recentUsers(t)}),s.invalidateQueries({queryKey:to.usersCount(t)}),s.invalidateQueries({queryKey:to.recentUsers(t)})}})},ta={all:t=>["identityIntegrations",t],branch:(t,s,n)=>["identityIntegrations",t,s,n],authProviderKeys:({projectId:t,authProvider:s})=>["authProviderKeys",t,s]},Ni=(t,s)=>bt({...s,queryKey:ta.all(t),enabled:!!t,queryFn:async()=>{var r;const n=await G.listNeonAuthIntegrations(t);return(r=s==null?void 0:s.onSuccess)==null||r.call(s),n.data.data}}),Yx=(t,s,n)=>{const r=Ni(t);return bt({...n,queryKey:ta.branch(t,s,r.dataUpdatedAt),enabled:r.isSuccess,queryFn:()=>{const a=r.data;return a&&a.length>0?a[0].auth_provider==="better_auth"?a.find(c=>c.branch_id===s)??null:a[0]:null}})},eX=t=>{const s=be();return _e({mutationFn:async({integration:n,deleteData:r})=>(await G.deleteNeonAuthIntegration(t,n.auth_provider,{delete_data:r})).data,onSuccess:()=>{s.invalidateQueries({queryKey:ta.all(t)}),s.removeQueries({queryKey:ea.usersCount(t),exact:!0}),s.removeQueries({queryKey:ea.recentUsers(t),exact:!0}),s.removeQueries({queryKey:to.usersCount(t),exact:!0}),s.removeQueries({queryKey:to.recentUsers(t),exact:!0})}})},xT=()=>{const t=be();return _e({mutationFn:async s=>(await G.createNeonAuthBranchIntegration(s.project_id,s.branch_id,s)).data,onSuccess:(s,n)=>{t.invalidateQueries({queryKey:ta.all(n.project_id)}),t.invalidateQueries({queryKey:ta.branch(n.project_id,n.branch_id)})}})},tX=({projectId:t,authProvider:s})=>{const n=be();return bt({retry:!1,queryKey:ta.authProviderKeys({projectId:t,authProvider:s}),queryFn:()=>n.getQueryData(ta.authProviderKeys({projectId:t,authProvider:s})),enabled:!1})},Jx=()=>{const t=be();return _e({mutationFn:async s=>(await G.createNeonAuthProviderSdkKeys(s)).data,onSuccess:(s,n)=>{t.setQueryData(ta.authProviderKeys({projectId:n.project_id,authProvider:n.auth_provider}),s)}})},sX=t=>_e({mutationFn:async()=>(await G.syncAuthKeysVercel(t,{})).data}),nX=()=>{const t=be(),{projectId:s}=F();return _e({mutationFn:async n=>(await G.transferNeonAuthProviderProject(n)).data,onSuccess:()=>{t.invalidateQueries({queryKey:ta.all(s)})}})},rX=()=>{const t=be();return _e({mutationFn:async s=>(await G.createNeonAuthNewUser(s)).data,onSuccess:(s,n)=>{t.invalidateQueries({queryKey:ea.recentUsers(n.project_id)}),t.invalidateQueries({queryKey:ea.usersCount(n.project_id)}),t.invalidateQueries({queryKey:to.usersCount(n.project_id)}),t.invalidateQueries({queryKey:to.recentUsers(n.project_id)})}})},Ei=()=>{const t=ch({lakebaseName:"databricks.lakebase.snapshots.isEnabled",neonName:"snapshot_system",defaultValue:!1}),s=ch({lakebaseName:"databricks.lakebase.snapshots.isPreviewEnabled",neonName:"snapshot_preview",defaultValue:!1}),n=ch({lakebaseName:"databricks.lakebase.snapshots.isRestoreEnabled",neonName:"snapshot_restore",defaultValue:!1}),r=ch({lakebaseName:"databricks.lakebase.snapshots.isScheduleEnabled",neonName:"snapshot_schedules",defaultValue:!1});return{isSnapshotsEnabled:t,isSnapshotPreviewEnabled:s,isSnapshotRestoreEnabled:n,isSnapshotSchedulesEnabled:r}},bb="branchId",aX=()=>Un(bb),Zx=(t,{projectId:s,branchId:n,queryString:r})=>{const a=new URLSearchParams(r);n&&(t.includes(":branchId")?a.delete(bb):a.set(bb,n));const o=a.size>0?`?${a.toString()}`:"";return`${Q(t,{projectId:s,branchId:n})}${o}`},oX="_root_3tpbz_1",iX="_trigger_3tpbz_18",cX="_selectedValue_3tpbz_30",lX="_dropdownIcon_3tpbz_41",dX="_dropdownIcon_hidden_3tpbz_47",uX="_popover_3tpbz_52",hX="_searchInput_3tpbz_64",pX="_list_3tpbz_73",mX="_section_3tpbz_81",gX="_item_3tpbz_94",fX="_label_3tpbz_122",_X="_check_3tpbz_128",Qs={root:oX,trigger:iX,selectedValue:cX,dropdownIcon:lX,dropdownIcon_hidden:dX,popover:uX,searchInput:hX,list:pX,section:mX,item:gX,label:fX,check:_X},bX=({iconName:t,sections:s,selectedId:n,isLoading:r,tooltip:a,"data-qa":o,"aria-label":i,searchAriaLabel:c,searchPlaceholder:l,openEvent:d,selectEvent:u,onSelect:p})=>{const{trackUiInteraction:h}=P(),{isCollapsed:g}=KM(),{contains:f}=iC({sensitivity:"base"});return e.jsx(te,{content:a,placement:"right",delay:100,disabled:!g,children:e.jsxs(T$,{"aria-label":i,className:Qs.root,selectedKey:n,placeholder:r?"":void 0,"data-qa":o,isDisabled:r,onOpenChange:_=>{_&&d&&h(d)},onSelectionChange:_=>{_&&u&&h(u),p==null||p(_)},children:[e.jsxs(Pu,{className:Qs.trigger,children:[e.jsx(z,{size:16,name:t}),e.jsx(A$,{className:Qs.selectedValue}),e.jsx(z,{size:16,name:"select",className:V(Qs.dropdownIcon,{[Qs.dropdownIcon_hidden]:g})})]}),e.jsx(jm,{className:Qs.popover,children:e.jsxs(cC,{filter:f,children:[e.jsx(lC,{autoFocus:!0,"aria-label":c,children:e.jsx(Rb,{placeholder:l,className:Qs.searchInput})}),!r&&e.jsx(N$,{className:Qs.list,children:s.map(_=>e.jsxs(E$,{className:Qs.section,children:[e.jsx(dC,{children:_.title}),e.jsx(Lb,{items:_.items,children:b=>e.jsx(O$,{id:b.id,textValue:b.label,className:Qs.item,href:b.href,children:({isSelected:x})=>e.jsxs(e.Fragment,{children:[e.jsx(uC,{slot:"label",className:Qs.label,children:b.label}),x&&e.jsx(z,{name:"check",size:16,className:Qs.check})]})},b.id)})]}))})]})})]})})},xX=()=>{const{branch:t,setBranch:s}=at(),{branches:n,branchesById:r}=xt(),{params:a,path:o}=wi(),i=!!a.branchId,c=m.useMemo(()=>[{title:"Branches",items:n.map(l=>({id:l.id,label:l.name,href:i?Q(o,{...a,branchId:l.id}):void 0}))}],[n,i,o,a]);return e.jsx(bX,{sections:c,selectedId:t==null?void 0:t.id,tooltip:t?`Branch: ${t.name}`:"Branch",iconName:"branch","aria-label":"Branch",searchAriaLabel:"Search branches",searchPlaceholder:"Search for a branch...",openEvent:"global_nav_branch_menu_open",selectEvent:"global_nav_branch_menu_change",onSelect:l=>{if(!l||i)return;const d=r[l];d&&s(d)}})},jT=(t,s,n)=>{if(!t||!s)return;let r="";if(n.has(Rp)){const a=new URLSearchParams;a.set(Rp,n.get(Rp)),r=`?${a.toString()}`}return`${Q(C.ProjectsItemDrizzle,{projectId:t,branchId:s})}${r}`};function Gu(t,s){return s.map(n=>({...n,analyticsEvent:void 0,onClick:r=>{var a;t(n.analyticsEvent),(a=n.onClick)==null||a.call(n,r)}}))}function jX(){const{trackUiInteraction:t}=P();return m.useMemo(()=>({label:"Account",items:Gu(t,[{title:"Projects",icon:"project",href:C.ProjectsList,analyticsEvent:"global_nav_projects_list_clicked"},{title:"Billing",icon:"billing",href:C.UserBilling,analyticsEvent:"global_nav_billing_clicked"},{title:"Integrations",icon:"integrations",href:C.UserIntegrations,analyticsEvent:"global_nav_integrations_clicked"},{title:"Settings",icon:"settings",href:C.UserSettings,analyticsEvent:"global_nav_account_settings_clicked"}])}),[t])}function vX(){const{trackUiInteraction:t}=P(),{orgId:s,isVercelOrg:n}=re();return m.useMemo(()=>s&&{label:"Organization",items:Gu(t,He([{title:"Projects",icon:"project",exact:!0,href:Q(C.OrgProjectsList,{orgId:s}),analyticsEvent:"global_nav_org_projects_list_clicked"},{title:"People",icon:"team",href:Q(C.OrgPeople,{orgId:s}),analyticsEvent:"global_nav_org_members_clicked"},{title:"Billing",icon:"billing",exact:!0,href:Q(C.OrgBilling,{orgId:s}),analyticsEvent:"global_nav_org_billing_clicked"},{title:"Integrations",icon:"integrations",href:Q(C.OrgIntegrations,{orgId:s}),analyticsEvent:"global_nav_org_integrations_clicked"},{title:"Settings",icon:"settings",exact:!0,href:Q(C.OrgSettings,{orgId:s}),analyticsEvent:"global_nav_org_settings_clicked"}])).filter(r=>r.title!=="Integrations"||!n)},[s,t,n])}function yX({projectId:t,branchId:s,showNeonAuth:n}){const{trackUiInteraction:r}=P(),{search:a}=il();return m.useMemo(()=>{if(t)return{label:"Project",prefix:void 0,items:Gu(r,He([{title:"Dashboard",icon:"overview",href:Zx(C.ProjectsItem,{projectId:t,branchId:s,queryString:a}),exact:!0,analyticsEvent:"project_nav_dashboard_clicked"},{title:"Branches",icon:"branch",href:Q(C.ProjectsItemBranches,{projectId:t}),exact:!0,analyticsEvent:"project_nav_branches_clicked"},{title:"Integrations",icon:"integrations",href:Q(C.ProjectsItemIntegrations,{projectId:t}),analyticsEvent:"project_nav_integrations_link_clicked"},n&&{title:"Auth",icon:"access",href:Q(C.ProjectsItemIdentity,{projectId:t}),analyticsEvent:"project_nav_identity_link_clicked"},{title:"Settings",icon:"settings",href:Q(C.ProjectsItemSettings,{projectId:t}),analyticsEvent:"project_nav_settings_clicked"}]))}},[t,r,s,a,n])}function wX({projectId:t,branchId:s,showNeonAuth:n}){const{trackUiInteraction:r}=P(),a=ge("disable_drizzle_studio"),{isSnapshotsEnabled:o}=Ei(),i=ge("data_api"),{search:c}=il(),l=m.useMemo(()=>new URLSearchParams(c),[c]),d=m.useMemo(()=>jT(t,s,l),[t,s,l]);return m.useMemo(()=>{if(!(!t||!s))return{label:"Branch",prefix:e.jsx(xX,{}),items:Gu(r,He([{title:"Overview",icon:"overview",href:Q(C.ProjectsItemBranchesItem,{projectId:t,branchId:l.get("branchId")??s}),analyticsEvent:"project_nav_branch_overview_clicked"},i&&{title:"Data API",icon:"endpoint",href:Q(C.ProjectsItemBranchesDataAPI,{projectId:t,branchId:s}),analyticsEvent:"project_nav_data_api_clicked"},n&&{title:"Auth",icon:"access",href:Q(C.ProjectsItemBranchesIdentity,{projectId:t,branchId:s}),analyticsEvent:"project_nav_identity_link_clicked"},{title:"Monitoring",icon:"graph",href:Q(C.ProjectsItemBranchesItemMonitoring,{projectId:t,branchId:s}),analyticsEvent:"project_nav_monitoring_clicked"},{title:"SQL Editor",icon:"editor",href:Zx(C.ProjectsItemBranchesSQLEditor,{projectId:t,branchId:s,queryString:c}),analyticsEvent:"project_nav_sql_editor_clicked"},{title:"Tables",icon:"table",href:d,disabled:a,hint:a?"The Tables page was temporarily disabled. We are working on bringing it back soon.":void 0,analyticsEvent:"project_nav_drizzle_studio_clicked"},{title:o?"Backup & Restore":"Restore",icon:"restore",href:Q(C.ProjectsItemBranchesRestore,{projectId:t,branchId:s}),analyticsEvent:"project_nav_restore_clicked"}]))}},[t,s,r,l,d,a,o,i,c,n])}function SX({openFeedback:t}){const{trackUiInteraction:s}=P();return m.useMemo(()=>({items:Gu(s,He([{title:"Feedback",icon:"feedback",analyticsEvent:"feedback_link_clicked",onClick:t}]))}),[s,t])}function CX({projectId:t,branchId:s}){const n=jX(),r=vX(),a=ge("identity"),{data:o}=Ni(t??""),i=o&&o.length>0&&o[0].auth_provider==="better_auth",c=yX({projectId:t,branchId:s,showNeonAuth:a&&!i}),l=wX({projectId:t,branchId:s,showNeonAuth:a&&!!i});return m.useMemo(()=>He([!t&&(r||n),c,l]),[t,r,n,c,l])}const kX=()=>{var f;const{params:t}=wi(),{trackUiInteraction:s}=P(),{projectId:n}=t,r=$$(),{isModalOpen:a,openModal:o,closeModal:i}=it(Je.Support),{isModalOpen:c,openModal:l,closeModal:d}=it(Je.Feedback),u=CX({projectId:n,branchId:(f=r==null?void 0:r.branch)==null?void 0:f.id}),[p,h]=Ds(_t.Sidebar,"isCollapsed",!1),g=SX({openFeedback:()=>l()});return e.jsxs(e.Fragment,{children:[c&&e.jsx(TC,{isOpen:!0,onRequestClose:()=>{s("feedback_form_dismissed"),d()},openSupport:()=>{d(),o()}}),a&&e.jsx(Ci,{isOpen:!0,onRequestClose:()=>{s("support_form_dismissed"),i()}}),e.jsx(QM,{menu:u,isCollapsed:p,onCollapseStateChange:h,footer:g})]})},nl=m.memo(({isError:t=!1,showSidebarFn:s=!0,userIsOrgBased:n=!1,...r})=>{const a=typeof s=="function"?s(n):s;let{contentWidth:o}=r;return a||(o="l"),e.jsx(YM,{...r,contentWidth:o,breadcrumbs:void 0,sidebar:!t&&a&&e.jsx(kX,{})})});nl.displayName="ConsoleLayout";const Mp=()=>e.jsx(nl,{children:e.jsx(rs,{preset:404})}),vT=()=>ge("hipaa_self_serve_console"),IX="_django_1jdvk_1",PX="_go_1jdvk_5",TX="_java_1jdvk_9",AX="_neonServerless_1jdvk_13",NX="_nextJs_1jdvk_17",EX="_nodeJs_1jdvk_21",OX="_postgres_1jdvk_25",$X="_parameters_1jdvk_29",LX="_prisma_1jdvk_33",RX="_sqlAlchemy_1jdvk_37",MX="_nestJs_1jdvk_41",BX="_dotNet_1jdvk_45",Ys={django:IX,go:PX,java:TX,neonServerless:AX,nextJs:NX,nodeJs:EX,postgres:OX,parameters:$X,prisma:LX,sqlAlchemy:RX,nestJs:MX,dotNet:BX},Uw=He([{snippedType:ue.ConnectionString,icon:Ys.postgres,title:"Postgres"},{snippedType:ue.ParametersOnly,icon:Ys.parameters,title:"Parameters only"},{snippedType:ue.Serverless,icon:Ys.neonServerless,title:"NeonDriver"},{snippedType:ue.NextJS,icon:Ys.nextJs,title:"NextJS"},{snippedType:ue.PrismaJS,icon:Ys.prisma,title:"Prisma"},{snippedType:ue.NodeJS,icon:Ys.nodeJs,title:"Node.js"},{snippedType:ue.DotNet,icon:Ys.dotNet,title:".NET"},{snippedType:ue.Django,icon:Ys.django,title:"Django"},{snippedType:ue.Java,icon:Ys.java,title:"Java"},{snippedType:ue.Go,icon:Ys.go,title:"Go"},{snippedType:ue.NestJS,icon:Ys.nestJs,title:"NestJS"},{snippedType:ue.SQLAlchemy,icon:Ys.sqlAlchemy,title:"SQLA"}]);function DX(){document.dispatchEvent(new CustomEvent("OPButtonAdded"))}function UX(t){const s=["none","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","one-time-code","organization","street-address","address-line1","address-line2","address-line3","address-level1","address-level2","address-level3","address-level4","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"];if(!t.fields){console.error("Missing 'fields' array in save request.");return}t.fields.forEach(c=>{c.autocomplete?s.find(l=>l===c.autocomplete)||console.error(`String '${c.autocomplete}' is an invalid input. Autocomplete type must be one of the following: ${s.join(", ")}.`):console.error("Fields array is missing 'autocomplete' designation.")});const r=new TextEncoder().encode(JSON.stringify(t)),a=r.length,o=[];for(let c=0;c<a;c++)o[c]=String.fromCharCode(r[c]);const i=o.join("");return btoa(i)}const FX=()=>zX().crypto.getRandomValues(new Uint32Array(1))[0].toString(36);function zX(){if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}class qX extends HTMLElement{constructor(){super(),this.internalId=FX(),this.errorMessages=[],this.ctaUrls={en:"https://1password.com/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",es:"https://1password.com/es/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",de:"https://1password.com/de/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",fr:"https://1password.com/fr/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",it:"https://1password.com/it/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ja:"https://1password.com/jp/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ko:"https://1password.com/ko/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",pt:"https://1password.com/pt/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ru:"https://1password.com/ru/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-CN":"https://1password.com/zh-cn/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-TW":"https://1password.com/zh-tw/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password"},document.addEventListener("OPButtonEvent",s=>{const n=s.detail;n.buttonId===this.internalId&&(n.error?this._setModalContent(this._localize(n.header),n.body,!0,!0):this._setModalContent(this._localize(n.header),n.body,!0))})}_loadFonts(){if(document.querySelector('style[data-description="onepassword-font-faces"]'))return;const n=`@font-face {
      font-display: swap;
      font-family: "Inter";
      font-style: normal;
      font-weight: 400 600;
      src: url(./src/fonts/Inter-roman.var.woff2) format("woff2");
    }`,r=document.createElement("style");r.dataset.description="onepassword-font-faces",r.appendChild(document.createTextNode(n)),document.head.appendChild(r)}_infoIconSvg(s){switch(s){case"dark":return'<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM8 6C8.55229 6 9 5.55228 9 5C9 4.44772 8.55229 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z" fill="#85BEFF"/>';default:return'<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM9 5C9 5.55228 8.55229 6 8 6C7.44772 6 7 5.55228 7 5C7 4.44772 7.44772 4 8 4C8.55229 4 9 4.44772 9 5Z" fill="#0364D3"/>'}}_findSupportedLocaleCode(s){if(s){const r=["de","en","es","fr","it","ja","ko","pt","ru","zh-CN","zh-TW"].find(a=>s.startsWith(a));if(r)return r}return"en"}_validateAttributes(s,n,r){if(this.hasAttribute(n)){const o=this.getAttribute(n);if(!s.find(i=>i===o)){const i=`"${o}" is an invalid input. ${n} can only be one of the following: ${s.join(", ")}.`;return this.errorMessages.push(i),console.error(i),r}return o}return r}get lang(){const s=this.getAttribute("lang");return s&&this._findSupportedLocaleCode(s)?this._findSupportedLocaleCode(s):navigator.language&&this._findSupportedLocaleCode(navigator.language)?this._findSupportedLocaleCode(navigator.language):"en"}set lang(s){this.setAttribute("lang",s)}get class(){const s=["black","white"];return this._validateAttributes(s,"class",null)}set class(s){this.setAttribute("class",s??"")}get value(){return this.getAttribute("value")}set value(s){this.setAttribute("value",s??"")}get data_onepassword_type(){const s=["login","credit-card","api-key"];return this._validateAttributes(s,"data-onepassword-type",null)}set data_onepassword_type(s){this.setAttribute("data_onepassword_type",s??"")}get modal_position(){return"top"}set modal_position(s){this.setAttribute("modal_position",s)}get visible(){return this.hasAttribute("visible")}set visible(s){s?this.setAttribute("visible",""):this.removeAttribute("visible")}get color_mode(){const s=["light","dark"];return this._validateAttributes(s,"data-theme","light")}set color_mode(s){this.setAttribute("color_mode",s)}get hide_call_to_action(){return this.hasAttribute("hide_call_to_action")}set hide_call_to_action(s){s?this.setAttribute("hide_call_to_action",""):this.removeAttribute("hide_call_to_action")}get padding(){const s=["compact","normal","none"];return this._validateAttributes(s,"padding","normal")}set padding(s){this.setAttribute("padding",s)}static get observedAttributes(){return["visible","modal_position","color_mode","hide_call_to_action","padding"]}attributeChangedCallback(s,n,r){var a,o,i,c,l,d;if(this.shadowRoot&&n!==r)switch(s){case"visible":case"hide_call_to_action":typeof r=="string"?(a=this.shadowRoot.querySelector(".wrapper"))===null||a===void 0||a.setAttribute(s,r):(o=this.shadowRoot.querySelector(".wrapper"))===null||o===void 0||o.removeAttribute("visible");break;case"modal_position":(i=this.shadowRoot.querySelector(".wrapper"))===null||i===void 0||i.setAttribute(s,r);break;case"color_mode":(c=this.shadowRoot.querySelector(".wrapper"))===null||c===void 0||c.setAttribute(s,r);case"padding":(l=this.shadowRoot.querySelector(".wrapper"))===null||l===void 0||l.setAttribute(s,r);break;case"modal_position":(d=this.shadowRoot.querySelector(".wrapper"))===null||d===void 0||d.setAttribute(s,r);break}}_localize(s){return s}_elementGenerator(s,n,r,a){const o=document.createElement(s);return o.innerHTML=n,o.setAttribute("aria-hidden",r.toString()),a&&o.setAttribute("class",a),o}_setModalContent(s,n,r,a){var o,i,c,l;const d=(o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector("#op-modal-header"),u=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector("#op-modal-body");d.innerText=s,u.innerText="";const p=[];n.forEach(g=>{if(g.url){if(g.url){const f=this._elementGenerator("a",`${g.text} `,!0);f.setAttribute("href",g.url),f.setAttribute("tabindex","3"),f.setAttribute("target","_blank"),f.setAttribute("rel","noopener noreferrer"),u.appendChild(f)}}else{const f=document.createTextNode(g.text);u.appendChild(f)}p.push(g.text)});const h=p.join(" ");r&&this.setAttribute("hide_call_to_action",""),d.appendChild(this._elementGenerator("span",h,!1,"sr-only")),a&&(((c=this.shadowRoot)===null||c===void 0?void 0:c.querySelector(".onepasswordSaveBtn")).setAttribute("title",h),this.setAttribute("visible",""),((l=this.shadowRoot)===null||l===void 0?void 0:l.querySelector("#onepassword-modal")).focus())}_toggleInfoModal(){var s,n,r,a;const o=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-modal"),i=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector("#close-icon"),c=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-info-icon"),l=(a=this.shadowRoot)===null||a===void 0?void 0:a.querySelector(".main");document.body.addEventListener("click",d=>{d.target!==this&&this.removeAttribute("visible")}),l==null||l.addEventListener("click",d=>{const u=d.target;this.hasAttribute("visible")&&!(o!=null&&o.contains(u))&&!(c!=null&&c.contains(u))&&this.removeAttribute("visible")}),i==null||i.addEventListener("click",d=>{this.removeAttribute("visible")}),i==null||i.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this.removeAttribute("visible"),c==null||c.focus())}),c==null||c.addEventListener("click",d=>{this._positionModal(),this.setAttribute("visible",""),o==null||o.focus()}),c==null||c.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this._positionModal(),this.setAttribute("visible",""),o==null||o.focus())})}_positionModal(){var s,n,r,a;const o=(n=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-info-icon"))===null||n===void 0?void 0:n.getBoundingClientRect();if(!this.visible){const i=(a=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-modal"))===null||a===void 0?void 0:a.getBoundingClientRect();if(i&&o){const c=i.y+i.height;i.y<0||c<0||o.y<140?this.setAttribute("modal_position","bottom"):this.setAttribute("modal_position","top")}}}_focusTrap(s,n,r,a){var o;const i=(o=this.shadowRoot)===null||o===void 0?void 0:o.activeElement;i===a&&n==="next"?(s.preventDefault(),r.focus()):i===r&&n==="back"&&(s.preventDefault(),a.focus())}_focusListener(s){var n,r,a;const o=(r=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector(".wrapper"))===null||r===void 0?void 0:r.hasAttribute("visible");if(s.key!=="Tab"||!o)return;const i=(a=this.shadowRoot)===null||a===void 0?void 0:a.querySelector("#onepassword-modal"),c=this.hasAttribute("hide_call_to_action"),l=i.querySelector("#op-modal-cta");let d=l;const u=i.querySelector("#close-icon");c&&(this.errorMessages.length?this.errorMessages.length&&(d=i.querySelector("a")?i.querySelector("a"):u):(l.removeAttribute("tabindex"),d=u)),s.shiftKey?this._focusTrap(s,"back",d,u):this._focusTrap(s,"next",d,u)}connectedCallback(){this._render(),this._toggleInfoModal(),this.addEventListener("keydown",this._focusListener)}disconnectedCallback(){this.removeEventListener("keydown",this._focusListener)}_render(){const s=document.createElement("div");s.innerHTML=`
      <style>

      span, h3, p {
        font-family: "-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Noto Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }
      h3 {
        font-weight: 600;
        font-size: 0.875rem;
      }
      .wrapper {
        flex-direction: column;
        justify-content: space-between;
        position: relative;
      }
      #onepassword-modal {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 16px;
        width: 299px;
        min-height: 94px;
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0px 5px 10px 1px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        opacity: 0;
        visibility: hidden;
        transition: visibility 0s linear 0.1s, opacity 0.3s ease;
        position: absolute;
        text-align: left;
        z-index: 10;
      }
      [hide_call_to_action] #onepassword-modal {
        min-height: 50px;
      }
      [hide_call_to_action] #op-modal-cta {
        display: none;
      }
      [modal_position="top"] #onepassword-modal {
        bottom: 64px;
      }
      [modal_position="bottom"] #onepassword-modal {
        top: 64px;
      }
      [visible] #onepassword-modal {
        visibility: visible;
        opacity: 1;
        transition-delay: 0s;
      }
      #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      [data-theme="dark"] #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 50%), 0px 0px 0px 3px rgb(0 119 255 / 50%);
      }
      [visible] a:focus {
        border-radius: 4px;
        box-shadow: 0px 0px 0px 2px rgb(0 119 255 / 30%), 0px 0px 0px 2px rgb(0 119 255 / 30%);
        outline: none;
      }
      #header {
        width: 100%;
        height: 18px;
        left: 0px;
        top: 0px;
        line-height: 130%;
        color: #000000;
        flex: none;
        order: 0;
        flex-grow: 0;
        margin: 0px 0px;
      }
      #close-icon {
        width: 18px;
        height: 18px;
        border-radius: 24px;
        margin: -4px -4px 0 0;
        order: 1;
      }
      #close-icon:active {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:active path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #close-icon:focus {
        border: 2px solid rgba(0, 119, 255, 0.35);
        background: transparent;
        margin-top: -5px;
      }
      #close-icon:hover {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:hover path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #message {
        font-size: 0.8125rem;
        color: #000;
        order: 1;
        width: 100%;
        align-items: flex-start;
        display: flex;
        flex-grow: 1;
        flex-direction: column;
        min-height: calc(100% - 34px);
        padding: 4px 0 0 0;
      }
      #message div:first-child {
        flex-grow: 1;
        align-items: flex-start;
        margin: 0 0 4px 0;
        width: 100%;
      }
      #message a {
        color: #0472ec;
        text-decoration-color: #0472ec;
        padding: 1px;
      }
      #message a:hover {
        color: #0a2d4d;
        text-decoration-color: #0a2d4d;
      }
      #message p {
        margin: 0;
        width: 100%;
        letter-spacing: -0.015em;
      }
      .iconButton {
        cursor: pointer;
        padding: 0;
        background: transparent;
        border: none;
      }
      .iconButton:hover {
        background: rgba(0, 119, 255, 0.15);
        border-radius: 24px;
        outline: none;
      }
      [data-theme="dark"] .iconButton:hover {
        background: rgba(0, 119, 255, 0.5);
      }
      .iconButton:focus {
        border-radius: 24px;
        background: rgba(0, 119, 255, 0.3);
        outline: none;
      }
      [data-theme="dark"] .iconButton:focus {
        background: rgba(0, 119, 255, 0.5);
      }
      [data-theme="light"] .iconButton:focus circle {
        fill: #FFFFFF;
      }
      [data-theme="dark"] #onepassword-info-icon:focus path {
        fill: #FFFFFF;
      }
      #onepassword-icon {
        width: 24px;
        min-width: 24px;
      }
      [data-theme="dark"] [disabled] #onepassword-icon path {
        fill: #bbbbbb;
      }
      #onepassword-info-icon {
        display: inline-flex;
        padding: 4px;
        margin-right: 4px;
      }
      [padding="none"] .main {
        padding: 0px 0;
      }
      [padding="compact"] .main {
        padding: 16px 0;
      }
      .main {
        padding: 24px 0;
      }
      div {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .onepasswordSaveBtn {
        display: flex;
        flex-direction: row;
        align-items: center;
        cursor: pointer;
        margin-right: 5px;
        user-select: none;
        /* 163px equivalent */
        min-width: 10.1875rem;
        /* 165px equivalent */
        max-width: 10.3125rem;
        font-size: 0.83125rem;
      }
      .onepasswordSaveBtn:focus {
        border-radius: 8px;
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      .label {
          width: 100%;
          text-align: center;
          color: #fff;
          flex: auto;
          order: 1;
          flex-grow: 0;
          padding: 3px 0px 3px 3px;
          word-break: break-word;
          align-self: center;
          line-height: 1em;
          letter-spacing: -0.1px;
          font-weight: 500;
      }
      .onepasswordSaveBtn {
        padding-bottom: 2px;
        width: auto;
        min-height: 32px;
        left: 0px;
        top: 0px;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.3);
        background: linear-gradient(141.91deg, #0572EC 10.24%, rgba(3, 100, 211, 0.42) 81.93%), #0364D3;
      }
      .onepasswordSaveBtn:hover:enabled {
        background: #0567D5;
      }
      .onepasswordSaveBtn:active:enabled {
        background: #0450A6;
      }
      .black.onepasswordSaveBtn {
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: #333333;
      }
      .black.onepasswordSaveBtn:hover:enabled {
        background: #1A1A1A;
      }
      [data-theme="dark"] .black.onepasswordSaveBtn:hover:enabled {
        background: #2d2d2d;
      }
      .black.onepasswordSaveBtn:active:enabled {
        background: #000000;
      }
      .white.onepasswordSaveBtn {
        background: #F7F7F7;
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn:hover:enabled {
        border: 1px solid rgba(0, 119, 255, 0.6);
        background: #F5FAFF;
      }
      [data-theme="dark"] .white.onepasswordSaveBtn:hover:enabled {
        background: #e7f3ff;
      }
      .white.onepasswordSaveBtn:active:enabled {
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn .label {
        color: #262626;
      }
      .white.onepasswordSaveBtn:enabled #onepassword-icon circle {
        fill: #0572EC;
      }
      .onepasswordSaveBtn:disabled {
        background: rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-sizing: border-box;
        border-radius: 8px;
        cursor: not-allowed;
      }
      [data-theme="dark"] .onepasswordSaveBtn:disabled {
        background: #aaaaaa;
      }
      .onepasswordSaveBtn:disabled .label {
        color: rgba(0, 0, 0, 0.5);
      }
      .onepasswordSaveBtn:disabled svg circle {
        fill: rgb(68 68 68 / 20%);
      }

      /* #a11y */
      .sr-only:not(:focus):not(:active) {
        clip: rect(0 0 0 0);
        clip-path: inset(100%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }


      </style>

      <div class="wrapper" modal_position=${this.modal_position} data-theme=${this.color_mode} padding=${this.padding}>
        <div id="onepassword-modal" tabindex="2" role="dialog">
        <div id="header">
          <h3 id="op-modal-header">${this._localize("What's 1Password")}<span aria-hidden="false" class="sr-only">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</span></h3>
            <button id="close-icon" class="iconButton" tabindex="4">
              <svg aria-hidden="true" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 2.83056L2.46898 0.299538C2.0696 -0.0998459 1.42207 -0.0998459 1.02269 0.299538L0.299538 1.02269C-0.0998459 1.42207 -0.0998459 2.0696 0.299538 2.46898L2.83056 5L0.299538 7.53102C-0.0998456 7.9304 -0.0998459 8.57793 0.299538 8.97731L1.02269 9.70046C1.42207 10.0998 2.0696 10.0998 2.46898 9.70046L5 7.16944L7.53102 9.70046C7.9304 10.0998 8.57793 10.0998 8.97731 9.70046L9.70046 8.97731C10.0998 8.57793 10.0998 7.9304 9.70046 7.53102L7.16944 5L9.70046 2.46898C10.0998 2.0696 10.0998 1.42207 9.70046 1.02269L8.97731 0.299538C8.57793 -0.0998459 7.9304 -0.0998459 7.53102 0.299538L5 2.83056Z" fill="black" fill-opacity="0.55"/>
              </svg>
              <span aria-hidden="false" class="sr-only">${this._localize("Close this modal")}</span>
            </button>
          </div>
          <div id="message" aria-hidden="true">
            <div><p id="op-modal-body">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</p></div>
          <div><p><a id="op-modal-cta" tabindex="3" href=${this.ctaUrls[this.lang]} target="_blank" rel="noopener noreferrer">${this._localize("Sign up for free")}</a></p></div>
          </div>
        </div>

        <div class="main">
          <button
            class="${this.class?this.class:""} onepasswordSaveBtn"
            tabindex="1"
            disabled
            data-onepassword-save-button
            data-onepassword-save-request
            value=${this.value}
            data-onepassword-type=${this.data_onepassword_type}
            id=${this.internalId}
            >
            <svg id="onepassword-icon" aria-hidden="true" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12.5" r="10"></circle>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.5C6.94409 21.5 2.84547 17.4707 2.84547 12.5C2.84547 7.52943 6.94409 3.5 12 3.5C17.0559 3.5 21.1545 7.52943 21.1545 12.5C21.1545 17.4707 17.0559 21.5 12 21.5ZM19.4906 12.5009C19.4906 8.43408 16.1371 5.13724 12.0005 5.13724C7.8639 5.13724 4.51044 8.43408 4.51044 12.5009C4.51044 16.5678 7.8639 19.8645 12.0005 19.8645C16.1371 19.8645 19.4906 16.5678 19.4906 12.5009Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M17.493 12.5369C17.493 9.51835 15.0338 7.10065 12.0372 7.10065C8.96681 7.10065 6.5076 9.51835 6.5076 12.5369C6.5076 15.4831 8.96681 17.9006 12.0372 17.9006C15.0338 17.9006 17.493 15.4831 17.493 12.5369ZM13.3321 9.04622C13.3321 8.78466 13.142 8.57262 12.9076 8.57262H11.0934C10.859 8.57262 10.6689 8.78466 10.6689 9.04622V10.8016C10.6689 10.8853 10.6988 10.9656 10.7518 11.0248L11.0171 11.3208C11.1276 11.4441 11.1276 11.644 11.0171 11.7673L10.7518 12.0633C10.6988 12.1225 10.6689 12.2028 10.6689 12.2866V15.9536C10.6689 16.2151 10.859 16.4272 11.0934 16.4272H12.9076C13.142 16.4272 13.3321 16.2151 13.3321 15.9536V14.1982C13.3321 14.1145 13.3023 14.0342 13.2492 13.975L12.9839 13.679C12.8734 13.5557 12.8734 13.3558 12.9839 13.2325L13.2492 12.9365C13.3023 12.8773 13.3321 12.7969 13.3321 12.7132V9.04622Z" fill="white"/>
            </svg>

            <span class="label">${this._localize("Save in 1Password")}</span>
          </button>

          <button id="onepassword-info-icon" class="iconButton" tabindex="1">
            <svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="8" cy="8" r="7"></circle>
              ${this._infoIconSvg(this.color_mode)}
            </svg>
            <span aria-hidden="false" class="sr-only">${this._localize("Click to learn more about 1Password")}</span>
          </button>

        </div>

      </div>
    `,this.attachShadow({mode:"open"}).appendChild(s)}}const HX="customElements"in window;HX&&customElements.define("onepassword-save-button",qX);const VX="_hidden_16oif_1",WX={hidden:VX},GX=(t,s,n)=>{const{fetchPassword:r}=gl(),{database:a,endpoint:o,role:i,poolerEnabled:c,roleAuthMode:l,storePasswords:d,roleIsOAuth:u}=t;return m.useCallback(async()=>{if(!i||!n||!a||!s||u)return;let p="";if(s.store_passwords)try{p=await r(s.id,i)??""}catch(f){Y(f)}const h=_b("_connstring",{database:a,endpoint:o,role:i,password:p,storePasswords:d,poolerEnabled:c,roleAuthMode:l,roleIsOAuth:u}),g={title:s.name,fields:[{autocomplete:"current-password",value:h},{autocomplete:"none",value:`Database: ${a.name}`},{autocomplete:"none",value:`Branch: ${n.name}`}]};return UX(g)},[n,a,o,r,c,s,i,l,u,d])},yT=t=>{var s,n,r;return(r=(n=(s=t.current)==null?void 0:s.querySelector("onepassword-save-button"))==null?void 0:n.shadowRoot)==null?void 0:r.querySelector("button[data-onepassword-save-button]")},KX=()=>{var t,s,n;(n=(s=(t=document.querySelector("onepassword-save-button"))==null?void 0:t.shadowRoot)==null?void 0:s.getElementById("onepassword-info-icon"))==null||n.remove()},QX=t=>{const[s,n]=m.useState(!0);return m.useEffect(()=>{const r=yT(t);if(!r)return;const a=new MutationObserver(()=>{n(r.getAttribute("disabled")!=null)});return a.observe(r,{attributes:!0,attributeFilter:["disabled"]}),DX(),()=>{a.disconnect()}},[t]),s},YX=({value:t})=>{const{trackUiInteraction:s}=P(),n=m.useRef(null),r=oo(),a=QX(n);m.useEffect(()=>{var i;(i=yT(n))==null||i.setAttribute("value",t)},[t]),m.useLayoutEffect(KX);const o=m.useCallback(()=>s("save_to_one_password_clicked"),[s]);return e.jsx("div",{ref:n,className:V({[WX.hidden]:a}),onClick:o,children:e.jsx("onepassword-save-button",{"data-onepassword-type":"login",value:t,"data-theme":r,class:"black",padding:"none"})})},JX=({connectionData:t,project:s,branch:n})=>{const[r,a]=m.useState(),o=GX(t,s,n);return m.useEffect(()=>{o().then(a).catch(()=>a(void 0))},[o]),r?e.jsx(YX,{value:r}):void 0},ZX=async()=>(await G.generateOAuthToken({grant_type:"urn:databricks:params:grant-type:session",scope:"!pgsql",client_id:"databricks-session"})).data.access_token,XX=()=>{const{trackUiInteraction:t}=P();return e.jsx(zC,{onCopy:()=>{t("connection_details_oauth_token_copied")},getValue:ZX,title:"Copy OAuth token"})},eee="_root_jdgrz_1",tee="_snippet_jdgrz_11",hm={root:eee,snippet:tee},wT=({className:t,branch:s,project:n,snippet:r,connectionData:a,noActions:o,imperativeActionsRef:i,onReveal:c,onCopy:l})=>{const[d,u]=m.useState(r.tabs[0]),{fetchPassword:p}=gl(),{database:h,endpoint:g,role:f,poolerEnabled:_,roleAuthMode:b,storePasswords:x,roleIsOAuth:j}=a,{tabs:v}=r;r.tabs.includes(d)||u(r.tabs[0]);const y=m.useCallback(N=>{const D=v.find(L=>L.value===N);u(D)},[v]),S=dr(async()=>{if(!f||!s||!h)return"";let N="";if(n&&x)try{N=await p(n.id,f)??""}catch(D){Y(D)}return _b(d.template,{database:h,endpoint:g,role:f,password:N,storePasswords:x,poolerEnabled:_,roleAuthMode:b,roleIsOAuth:j})}),k=b!=="passwordless"&&x&&d.hasSecrets?{getUnmaskedValue:S,onReveal:c}:void 0;return e.jsxs("div",{className:V(hm.root,t),"data-qa":"connection_snipet_block",children:[v.length>1&&e.jsx(qn,{variant:"contained",options:v,value:d.value,onChange:y}),e.jsx(rn,{className:hm.snippet,variant:v.length>1?"contained":"default",mode:d.language,"data-qa":"connection_snippet_code_block",scrollable:!0,copy:{getUnmaskedValue:S,onCopy:l},reveal:k,noActions:o,imperativeActionsRef:i,leftActionBarItems:j?e.jsx(XX,{}):void 0,actionBarItems:e.jsx(JX,{connectionData:a,project:n,branch:s}),children:_b(d.template,a)})]})},see=()=>e.jsx("div",{className:hm.root,children:e.jsx(Ms,{copy:!1,className:hm.snippet,"aria-disabled":!0,children:"Loading..."})}),nee="_root_77xyy_1",ree="_list_77xyy_7",aee="_switchButton_77xyy_16",oee="_switchButton_active_77xyy_28",iee="_icon_77xyy_33",sd={root:nee,list:ree,switchButton:aee,switchButton_active:oee,icon:iee},cee=({snippets:t,className:s,activeSnippetType:n,setActiveSnippetType:r})=>e.jsx("div",{className:V(sd.root,s),children:e.jsx("div",{className:V(sd.list),children:t.map(({snippedType:a,icon:o,title:i})=>e.jsx(fi,{checked:a===n,wide:!0,circle:({checked:c})=>e.jsxs("p",{className:V(sd.switchButton,{[sd.switchButton_active]:c}),children:[e.jsx("span",{className:V(sd.icon,o)}),i]}),onChange:()=>r(a)},a))})}),lee="_content_167dn_1",dee="_snippetsContainer_167dn_7",uee="_verticalSnippets_167dn_12",hee="_codeBlock_verticalLayout_167dn_16",pee="_footer_167dn_21",nd={content:lee,snippetsContainer:dee,verticalSnippets:uee,codeBlock_verticalLayout:hee,footer:pee},mee=({project:t,role:s,database:n,branch:r,endpoint:a})=>{const{trackUiInteraction:o}=P({mountEvent:"create_project_success_modal_shown"}),[i,c]=m.useState(!1),l=AR(1500,()=>{c(!1)},{leading:!1,trailing:!0,actionOnUnmount:"nothing"}),d=m.useRef(null),[u,p]=m.useState(Uw[0].snippedType),h=Jb(s),g={database:n,endpoint:a,role:s,poolerEnabled:!0,storePasswords:t==null?void 0:t.store_passwords,roleIsOAuth:h};return e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:nd.content,children:[e.jsx(T,{children:"Choose your preferred connection method:"}),e.jsxs("div",{className:nd.snippetsContainer,children:[e.jsx(cee,{snippets:Uw,className:nd.verticalSnippets,activeSnippetType:u,setActiveSnippetType:f=>{p(f),o("create_project_success_modal_snippet_clicked",{snippet:f})}}),g?e.jsx(wT,{className:nd.codeBlock_verticalLayout,project:t,snippet:Kx[u],branch:r,connectionData:g,noActions:!0,imperativeActionsRef:d,onCopy:()=>{o("create_project_success_modal_snippet_copied",{snippet:u})}}):e.jsx(see,{})]})]}),e.jsxs("div",{className:nd.footer,children:[e.jsxs(wx,{children:["View our"," ",e.jsx(R,{href:"https://neon.com/docs/get-started-with-neon/frameworks",openInNewTab:!0,children:"frameworks"})," ","and"," ",e.jsx(R,{href:"https://neon.com/docs/get-started-with-neon/languages",openInNewTab:!0,children:"languages"})," ","quick start guides."]}),e.jsx(E,{icon:i?"check":void 0,iconSide:"right",size:"l",onClick:async()=>{await d.current.triggerCopy(),c(!0),l.cancel(),l()},children:i?"Copied":"Copy code"})]})]})},gee=({data:t,isOpen:s,onRequestClose:n})=>{const{trackUiInteraction:r}=P(),{project:a,branch:o}=t,{database:i,role:c,endpoint:l}=qC(t);return!c||!i||!o||!l?null:e.jsx(ft,{isOpen:s,width:740,title:"Your database is live","data-qa":"create_project_success",onRequestClose:()=>{n&&(n(),r("create_project_success_modal_dismissed"))},children:e.jsx(mee,{project:a,role:c,database:i,branch:o,endpoint:l})})},ST=t=>{const{trackUiInteraction:s}=P(),n=cn(),r=Tu(i=>RM(i,t)),a=(r==null?void 0:r.connectionType)??"pooler",o=m.useCallback(i=>{n(B0.actions.updateProjectSettings({projectId:t,settings:{connectionType:i}})),s("connection_details_pooler_changed")},[n,t,s]);return{connectionType:a,setConnectionType:o}},fee="_connectionBlockHeader_14e8z_1",_ee="_select_14e8z_11",Fw={connectionBlockHeader:fee,select:_ee},Xx=({children:t,branchId:s,appearance:n,drawerZIndex:r,onClick:a,...o})=>{var S;const{project:i,projectId:c}=F(),[l,d]=m.useState(!1),u=C0({projectId:c}),p=Om({projectId:c}),{trackUiInteraction:h}=P(),g=m.useCallback(()=>{h("create_endpoint_button_clicked"),a==null||a(),d(!0)},[a,h]),_=(S=Hs({projectId:c,branchId:s??""}).data)==null?void 0:S.endpoints.some(br),b=yr(m.useMemo(()=>s?{shared:{projects:[c],branches:[s]}}:null,[s,c]));if(u.isLoading||p.isLoading||!i)return null;const x=[u.isLimitExceeded?u.message:null,p.isLimitExceeded&&_?p.message:null,b].filter(Boolean).join(`
`),j=x.length>0,v={...o,disabled:j,onClick:g,children:t};let y;return n==="link"?y=e.jsx(R,{...v,disabled:!!b||v.disabled}):y=e.jsx(E,{...v,appearance:n,disabled:!!b||v.disabled}),e.jsxs(e.Fragment,{children:[l&&s&&e.jsx(uo,{isOpen:l,onRequestClose:()=>d(!1),mode:"create",project:i,branchId:s,endpointType:_?"read_only":"read_write",drawerZIndex:r}),e.jsx(te,{content:x,disabled:!j,children:e.jsx("div",{style:{display:"inline-block"},children:y})})]})},bee="_noCompute_pociv_1",xee="_noComputeText_pociv_8",zw={noCompute:bee,noComputeText:xee},jee=({branchId:t})=>e.jsx("div",{className:zw.noCompute,children:e.jsxs("div",{className:zw.noComputeText,children:[e.jsx(Xx,{appearance:"link",branchId:t,drawerZIndex:110,children:"Add compute"}),e.jsx("span",{children:"to connect to this branch"})]})}),Mh={label:"Connection pooling",hint:{title:"Supports up to 10,000 concurrent connections",description:t=>e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Uses PgBouncer to pool connections, which is recommended for most use cases."}),e.jsxs("p",{children:["Use a direct connection for ",e.jsx(Ae,{children:"pg_dump"}),", session-dependent features, or schema migrations."]}),e.jsxs("p",{children:["The connection limit without pooling is"," ",e.jsx(Ae,{children:t??"-"}),"."]})]}),learnMore:"Learn more"}},vee="_wrapper_1o67u_1",yee="_tooltip_1o67u_7",qw={wrapper:vee,tooltip:yee},wee=({projectId:t,endpoint:s,disabled:n})=>{const{connectionType:r,setConnectionType:a}=ST(t),o=s&&RC({min:s.autoscaling_limit_min_cu,max:s.autoscaling_limit_max_cu});return e.jsxs("div",{className:qw.wrapper,children:[e.jsx(as,{isSelected:r==="pooler",onChange:i=>a(i?"pooler":"direct"),isDisabled:n,children:Mh.label}),e.jsx(Bs,{icon:"info",size:"l",tooltipAppearance:"rich",children:e.jsxs("div",{className:qw.tooltip,children:[e.jsx(Z,{level:6,children:Mh.hint.title}),e.jsx("div",{children:Mh.hint.description(o)}),e.jsx(R,{href:MC,openInNewTab:!0,children:Mh.hint.learnMore})]})})]})},CT=({branch:t,endpoint:s,role:n,database:r})=>{const{trackUiInteraction:a}=P(),{project:o,projectId:i}=F(),{checkRoleIsPasswordless:c}=gl(),[l,d]=Ds(_t.ConnectionSnippetFormat,"authMode","password"),u=_Z(l),[p,h]=Ds(_t.ConnectionSnippetFormat,"default",u[0]),g=m.useRef(n);u.map(v=>v.value).includes(p.value)||h(u[0]);const f=Jb(n);(o==null?void 0:o.store_passwords)&&n&&n!==g.current&&!f&&(c(i,n).then(v=>{d(v?"passwordless":"password")}),g.current=n);const{connectionType:b}=ST(i),x=b==="pooler",j=m.useCallback(v=>{a("code_samples_sample_type_clicked",{snippet:v.value}),h(v)},[a,h]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Fw.connectionBlockHeader,children:[e.jsx("div",{children:e.jsx(Za,{"data-qa":"connection-snippet-format-select",containerClassName:Fw.select,appearance:"secondary",options:u,value:p,onChange:v=>{v&&j(v)},noSearch:!0})}),e.jsx(wee,{projectId:i,endpoint:s,disabled:!s||p.value==="prismajs"})]}),t&&s?e.jsx(wT,{project:o,snippet:p,branch:t,connectionData:{database:r,endpoint:s,poolerEnabled:x,role:n,storePasswords:(o==null?void 0:o.store_passwords)&&!f,roleAuthMode:l,roleIsOAuth:f},onCopy:()=>{a("connection_details_connstring_copied",{snippet:p==null?void 0:p.value})},onReveal:()=>{a("connection_details_connstring_revealed",{snippet:p==null?void 0:p.value})}}):e.jsx(jee,{branchId:t==null?void 0:t.id})]})},ff={title:"Connection details for your new branch",success:(t,s)=>`The ${t} branch was created successfully${s?` and will expire on ${fe(s,ke.DateTimeWithTimezone)}`:""}`,useEndpoint:"Use the endpoint details below to connect to your branch.",footer:t=>e.jsxs("div",{children:["Manage users and passwords on the"," ",e.jsx(R,{href:Q(de.ProjectsItemRoles,{projectId:t}),children:"Roles"})," ","page. For more information, see"," ",e.jsx(R,{openInNewTab:!0,href:"https://neon.com/docs/manage/branches#connect-to-a-branch",children:"Connect to a branch"}),"."]})},See="_alert_11n0x_1",Cee="_footer_11n0x_5",Hw={alert:See,footer:Cee},kee=({data:t,onRequestClose:s,...n})=>{const{branch:r}=t,{database:a,role:o,endpoint:i}=qC(t);return!o||!a||!r||!i?null:e.jsxs(ft,{...n,onRequestClose:s,title:ff.title,"data-qa":"create_branch_success",maxWidth:770,children:[e.jsxs(De,{children:[e.jsx(X,{appearance:t.branch.expires_at?"info":"success",className:Hw.alert,children:ff.success(t.branch.name,t.branch.expires_at)}),e.jsx(CT,{branch:r,endpoint:i,role:o,database:a})]}),e.jsxs(Te,{children:[e.jsx(wx,{className:Hw.footer,children:ff.footer(r.project_id)}),e.jsx(dn,{"data-qa":"connection_details_modal_close_button"})]})]})},Iee="_buttonContainer_1besf_1",Pee={buttonContainer:Iee},Tee=({data:t,...s})=>{const{role:n}=t,{trackUiInteraction:r}=P(),{project:a}=F(),o=m.useMemo(()=>{if(!n)return"";const i=`PGUSER=${n.name}
PGPASSWORD=${n.password}`,c=new Blob([i],{type:""});return window.URL.createObjectURL(c)},[n]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(o),[o]),!n||!a?null:e.jsx(ft,{...s,"data-qa":"created_role_modal",title:"Role created!",children:e.jsxs(De,{children:[e.jsxs(T,{children:["Role ",e.jsx(Ae,{children:n.name})," was successfully created. Copy the password or download the .env file.",!a.store_passwords&&e.jsxs(e.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),e.jsx("br",{}),e.jsx("br",{}),"Password:"]}),e.jsx("br",{}),e.jsx(Ms,{copy:{getUnmaskedValue:()=>Promise.resolve(n.password??""),onCopy:()=>r("role_created_popup_copy_password_clicked")},reveal:{getUnmaskedValue:()=>Promise.resolve(n.password??"")},"data-qa":"role_password",children:"*******"}),e.jsx("br",{}),o&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Download the .env file to save the user's password."}),e.jsx("br",{}),e.jsx("div",{className:Pee.buttonContainer,children:e.jsx(E,{as:"a",target:"_blank",href:o,download:".env",size:"l",onClick:()=>r("role_created_popup_download_credentials_clicked"),children:"Download .env"})})]})]})})},ej=t=>{const s=Kb("growth_onboarding_experience"),{projectData:n,branchData:r,roleData:a,setProjectData:o,setBranchData:i,setRoleData:c}=m.useContext(SC),l=m.useCallback(()=>{if(t==="project"){o();return}t==="branch"&&i(),t==="role"&&c()},[t,o,i,c]),d=m.useMemo(()=>t==="project"&&n?s!=="control"&&s!=="connection_modal_and_get_started"?null:e.jsx(gee,{data:n,isOpen:!0,onRequestClose:l}):t==="role"&&a?e.jsx(Tee,{data:a,isOpen:!!a,onRequestClose:l}):t==="branch"&&r?e.jsx(kee,{data:r,isOpen:!!r,onRequestClose:l}):null,[t,n,a,r,s,l]);return m.useEffect(()=>l,[t,l]),d},kT=()=>{const{data:t}=kt(),s=cn(),n=D0(t==null?void 0:t.id),{orgId:r,isLoading:a}=re();m.useEffect(()=>{if(a||t===void 0)return;const o=aa(t);let i;if(r!==void 0)i={type:"org",id:r};else{if(o)return;i={type:"user"}}HC(i,n)||s(MM({lastAccount:i,userId:t.id}))},[a,r,t,n,s])},fs=(t,s={},n)=>{const r=m.memo(a=>{const{projectId:o,project:i,isLoading:c,error:l}=F(),d=ej("role");kT();const u=n==null?void 0:n({projectId:o});return!c&&(!i||l)?e.jsx(nl,{isError:!0,children:e.jsx(rs,{title:l||"Something went wrong",imgSrc:VC,actions:e.jsx(E,{as:WC,to:C.ProjectsList,size:"l",children:"Back to Project List"})})}):e.jsxs(e.Fragment,{children:[d,e.jsx(nl,{...s,secondLevelNav:u,children:e.jsx(t,{...a})})]})});return r.displayName=`withProjectConsoleLayout(${t.displayName})`,r},Bt=({path:t,to:s})=>{const{projectId:n}=F(),{defaultBranch:r}=xt();return e.jsx(wt,{path:t,exact:!0,children:r?e.jsx(ye,{to:Q(s,{projectId:n,branchId:r.id})}):null})},Aee=fs(({projectId:t})=>{const{branchId:s,isLoading:n}=at();return n?e.jsx(ve,{}):e.jsx(ye,{to:s?Q(C.ProjectsItemBranchesItem,{projectId:t,branchId:s}):Q(C.ProjectsItemBranches,{projectId:t})})}),Nee=({from:t,to:s,exact:n})=>{const r=il(),o=new URLSearchParams(r.search).get(Zp);let i=s;if(o){const c=new URL(s,"https://n");c.searchParams.set(Zp,o),i=`${c.pathname}${c.search}`}return e.jsx(ye,{from:t,to:i,exact:n})},la=(t,s={},n)=>{const r=m.memo(a=>{const{params:o}=wi(),i=_I(),c=ge("referral_codes"),{isKeycloakUser:l}=m.useContext(Fm),{data:d}=kt(),u=aa(d);kT();const{orgId:p,org:h,isLoading:g,isOrgFetching:f,isVercelOrg:_}=re(),{isFreeSubscription:b}=he(),{data:x}=Zb(),j=x&&x.length>0,v=vT();return!g&&p&&!f&&!h?e.jsx(nl,{isError:!0,children:e.jsx(rs,{title:`Org ${p} was not found`,imgSrc:VC,actions:e.jsx(E,{as:WC,to:C.Root,size:"l",children:"Back to Console"})})}):e.jsx(nl,{...s,userIsOrgBased:u,secondLevelNav:n==null?void 0:n({billingSections:i,orgId:o.orgId,isReferralCodesEnabled:c,isVercelOrg:_,isKeycloakUser:l,isFreeSubscription:b,orgHasCollaborators:j,userIsOrgBased:u,showHipaaSupportOrgSettings:v}),children:e.jsx(t,{...a})})});return r.displayName=`withConsoleLayout(${t.displayName})`,r},IT=m.memo(({children:t})=>e.jsxs(kc,{children:[t,e.jsx(Ke,{component:Mp})]}));IT.displayName="BranchPreviewSwitch";const Eee="_root_14p4c_1",Oee="_root_island_14p4c_9",$ee="_icon_14p4c_16",Lee="_codeBlock_14p4c_21",Ree="_command_14p4c_34",Mee="_codePrefix_14p4c_39",oc={root:Eee,root_island:Oee,icon:$ee,codeBlock:Lee,command:Ree,codePrefix:Mee},Bee=()=>{const{trackUiInteraction:t}=P(),{psqlConnectHost:s}=xR(),n=`psql -h ${s}`;return s?e.jsxs("div",{className:V(oc.root,{[oc.root_island]:!1}),children:[e.jsx(z,{className:oc.icon,name:"info",size:20}),"Passwordless connect with psql:",e.jsxs("div",{className:oc.codeBlock,children:[e.jsxs("span",{className:oc.command,children:[e.jsx("span",{className:oc.codePrefix,children:"$"}),n]}),e.jsx(hl,{text:n,onCopy:()=>t("psql_connect_banner_command_copied")})]})]}):(L$("Psql connect host hasn't set"),null)},_f={noPastInvoices:"There are no past invoices",viewPastInvoices:"View past invoices"},Dee="_disabledBtn_1aaln_1",Uee={disabledBtn:Dee},Dr={noInvoices:"For now just enjoy Neon! Your very first invoice will be due on",reference:"Reference",due:"Due",issued:"Issued",total:"Total",actionsLabel:"Actions for an invoice",download:"Download",requestSubject:{paid:"Request refund",issued:"Request credit note"}},Fee="_root_1dwho_1",zee="_item_1dwho_8",qee="_bill_1dwho_14",Hr={root:Fee,item:zee,bill:qee},bf=()=>e.jsxs(Dn,{className:Hr.root,children:[e.jsxs("div",{className:Hr.item,children:[e.jsx(B,{width:50,height:20}),e.jsx(B,{width:150,height:20})]}),e.jsxs("div",{className:Hr.item,children:[e.jsx(B,{width:30,height:20}),e.jsx(B,{width:150,height:20})]}),e.jsxs("div",{className:Hr.item,children:[e.jsx(B,{width:70,height:20}),e.jsx(B,{width:150,height:20})]}),e.jsxs("div",{className:Hr.item,children:[e.jsx(B,{width:40,height:20}),e.jsx(B,{width:150,height:20})]}),e.jsxs("div",{className:Hr.bill,children:[e.jsx(B,{width:50,height:20}),e.jsx(B,{width:20,height:20})]})]}),Hee=()=>e.jsx(Dn,{children:e.jsx(Zt,{children:`${Dr.noInvoices} ${mt().add(1,"month").date(1).utc().format(ke.Date)}`})}),Bh=({label:t,value:s="-"})=>e.jsxs("div",{className:Hr.item,children:[e.jsx(Zt,{children:t}),e.jsx(Zt,{appearance:"secondary",children:s})]}),Vee={paid:"success",issued:"default"},Wee=({invoice_number:t,due_date:s,status:n,pdf_url:r,issued_at:a,total:o,currency:i})=>{const c=ge("refund_request"),{trackUiInteraction:l}=P(),[d,u]=m.useState(!1),p=()=>u(!1),h=m.useMemo(()=>[{items:[{label:Dr.download,href:r,onClick(){l("billing_invoice_download_clicked")}},Number(o)&&{label:Dr.requestSubject[n],onClick(){l("billing_invoice_refund_request_clicked"),u(!0)}}].filter(f=>!!f)}],[r,o,n,l]),g=`Invoice: ${t}, Issued: ${fe(a,ke.Date)} Total: ${o} ${i}`;return e.jsxs(e.Fragment,{children:[e.jsx(CF,{isOpen:d,chargeInfo:g,onRequestClose:p,invoiceId:t,amount:Number(o),requestSubject:Dr.requestSubject[n],invoiceStatus:n}),e.jsxs(Dn,{className:Hr.root,role:"listitem",children:[e.jsx(Bh,{label:Dr.issued,value:fe(a,ke.Date)}),e.jsx(Bh,{label:Dr.due,value:s&&fe(s,ke.Date)}),e.jsx(Bh,{label:Dr.reference,value:t}),e.jsx(Bh,{label:Dr.total,value:`${o} ${i}`}),e.jsxs("div",{className:Hr.bill,children:[e.jsx(Ie,{appearance:Vee[n],children:n}),c?e.jsx(Yt,{sections:h,children:e.jsx(ms,{"aria-label":Dr.actionsLabel})}):e.jsx(R,{icon:"download",href:r,download:!0})]})]})]})},Gee="_cards_eoxag_1",Vw={cards:Gee},Kee=({invoices:t,isLoading:s=!1})=>s?e.jsxs("div",{className:Vw.cards,children:[e.jsx(bf,{}),e.jsx(bf,{}),e.jsx(bf,{})]}):t!=null&&t.length?e.jsx("div",{className:Vw.cards,role:"list",children:t.map(({invoice_id:n,...r})=>e.jsx(Wee,{...r},n))}):e.jsx(Hee,{}),Ww={drawerTitle:"Past invoices"},Qee="_drawerContent_1b3du_1",Yee={drawerContent:Qee},Jee=({isDrawerOpen:t,close:s,invoices:n,isInvoicesLoading:r})=>e.jsx(oa,{isOpen:t,"aria-label":Ww.drawerTitle,onRequestClose:s,size:"l",children:e.jsx(ia,{title:Ww.drawerTitle,children:e.jsx("div",{className:Yee.drawerContent,children:e.jsx(Kee,{invoices:n,isLoading:r})})})}),PT=()=>{const{trackUiInteraction:t}=P(),{subscriptionType:s}=he(),[n,r]=m.useState(!1),{invoices:a,isInvoicesLoading:o}=k6();return S6(s)?e.jsxs(e.Fragment,{children:[!o&&!(a!=null&&a.length)?e.jsx(te,{content:_f.noPastInvoices,children:e.jsx("div",{"data-qa":"past_invoices_button",children:e.jsx(E,{appearance:"secondary",disabled:!0,className:Uee.disabledBtn,children:_f.viewPastInvoices})})}):e.jsx(E,{loading:o,onClick:()=>{t("billing_invoices_drawer_open"),r(!0)},appearance:"secondary",disabled:!a,children:_f.viewPastInvoices}),e.jsx(Jee,{isDrawerOpen:n,close:()=>r(!1),invoices:a,isInvoicesLoading:o})]}):null};function TT(){const{isFreeSubscription:t,isFetching:s}=he();return t||s}const Zee="_fields_u6tgv_1",Xee={fields:Zee},ete=({isOpen:t,onRequestClose:s})=>{var d,u,p,h;const{trackUiInteraction:n}=P(),{data:r}=kt(),{submitIntegrationSuggestionForm:a}=Nu(),o=Ss({shouldUnregister:!0}),i=()=>{Ue(e.jsx(rt,{children:"Thank you for your request!"})),s()},c=()=>{Ue(e.jsx(ro,{children:e.jsxs(e.Fragment,{children:["Request failed. Please try again or contact us at"," ",e.jsx(R,{openInNewTab:!0,href:`mailto:${jv}`,children:jv}),"."]})}),{...Xb,toastId:"integration_suggestion_form_failed"})},l=g=>{if(r!==void 0)return a(r.email,g).then(i).catch(c)};return e.jsx(na,{title:"Suggest integration",isOpen:t,onRequestClose:()=>{n("integration_suggestion_form_dismissed"),s()},children:e.jsx(Jt,{...o,children:e.jsxs(qt,{id:"integration-request-form",onSubmit:o.handleSubmit(l),children:[e.jsxs(ra,{className:Xee.fields,children:[e.jsx(U,{error:(u=(d=o.formState.errors)==null?void 0:d.title)==null?void 0:u.message,id:"title",label:"Integration name",children:e.jsx(ie,{autoFocus:!0,...o.register("title",{required:"This field is required"})})}),e.jsx(U,{error:(h=(p=o.formState.errors)==null?void 0:p.comment)==null?void 0:h.message,id:"comment",label:"Message",children:e.jsx(yi,{...o.register("comment",{required:"This field is required"}),placeholder:"Share your specific use case. It helps us build for precisely what you need.",rows:6,"data-qa":"suggest_integration_comment_field"})})]}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{"data-qa":"suggest_new_integration_submit",onClick:()=>{n("integration_suggestion_form_submitted")},children:"Suggest integration"})]})]})})})},tte=()=>{const{trackUiInteraction:t}=P(),[s,n]=m.useState(!1),r=()=>n(!0),a=()=>n(!1);return e.jsxs(e.Fragment,{children:[e.jsx(E,{"data-qa":"suggest_new_integration",onClick:()=>{t("integrations_request_integration_popup_open"),r()},children:"Suggest an integration"}),e.jsx(ete,{isOpen:s,onRequestClose:a})]})},AT="/assets/assets/vercel-cover@2x-DxKeLbKt.webp",ste="/assets/assets/okta-cover-Ct_OfezU.webp",NT="/assets/assets/default-cover-Dx0vE_98.webp",ET="/assets/assets/default-cover@2x-D4GKlMww.webp",nte=Object.freeze(Object.defineProperty({__proto__:null,AirbyteCover:NR,CloudflareHyperdriveCover:ER,CloudflarePagesCover:OR,CloudflareWorkersCover:$R,ConfluentCover:LR,DefaultCover:NT,DefaultCover2x:ET,DenoCard:RR,DenoCover:MR,ExographCover:BR,FerretDBCover:DR,FivetranCover:UR,GithubCard:FR,GithubCover:B_,GrafbaseCover:zR,HasuraCover:qR,HerokuCard:HR,HerokuCover:VR,KoyebCover:WR,MaterializeCover:GR,NeosyncCover:KR,NetlifyCard:QR,NetlifyCover:YR,OktaCover:ste,OuterbaseCard:JR,OuterbaseCover:D_,PrismaCover:ZR,RailwayCard:XR,RailwayCover:eM,RenderCard:tM,RenderCover:sM,SequinCard:nM,SequinCover:rM,StepZenCover:aM,VercelCard:oM,VercelCover:k0,VercelCover2x:AT,WunderGraphCover:iM},Symbol.toStringTag,{value:"Module"})),rte="_root_1ygwd_1",ate="_header_1ygwd_9",Gw={root:rte,header:ate},At=({title:t,action:s,children:n,className:r})=>e.jsxs("div",{className:V(Gw.root,r),children:[t&&e.jsxs("div",{className:Gw.header,children:[e.jsx(Z,{level:4,children:t}),s]}),n]}),xf={title:"Provide feedback",description:"Please provide feedback on your experience with this integration to help us improve it.",submit:"Submit feedback"},ote="_description_1wg2j_1",ite={description:ote},ko={success:"Thanks for your feedback!",fail:e.jsxs(e.Fragment,{children:["Request failed. Please try again or contact us at"," ",e.jsx(R,{openInNewTab:!0,href:"mailto:feedback@neon.tech",appearance:"error",children:"feedback@neon.tech"}),"."]}),title:"Submit feedback",submit:"Send",messageLabel:"Message",messagePlaceholder:"Please share your feedback",formRequiredError:"This field is required"},cte=({isOpen:t,onRequestClose:s,subject:n})=>{var u;const{trackUiInteraction:r}=P(),{submitIntegrationFeedbackForm:a}=Nu(),{data:o}=kt(),i=Ss({defaultValues:{message:""},shouldUnregister:!0}),c=()=>{Ue(e.jsx(rt,{children:ko.success})),s()},l=()=>{Ue(e.jsx(ro,{children:ko.fail}),{...Xb,toastId:"integration_feedback_form_failed"})},d=p=>{if(o!==void 0)return a(p,o.email,n).then(c).catch(l)};return e.jsx(na,{title:ko.title,isOpen:t,onRequestClose:()=>{r("integration_feedback_dismissed"),s()},children:e.jsx(Jt,{...i,children:e.jsxs(qt,{onSubmit:i.handleSubmit(d),children:[e.jsx(ra,{children:e.jsx(U,{error:(u=i.formState.errors.message)==null?void 0:u.message,label:ko.messageLabel,children:e.jsx(yi,{rows:6,placeholder:ko.messagePlaceholder,...i.register("message",{required:{value:!0,message:ko.formRequiredError}})})})}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{onClick:()=>{r("integration_feedback_submitted")},children:ko.submit})]})]})})})},tj=({subject:t,className:s})=>{const{trackUiInteraction:n}=P(),[r,a]=m.useState(!1),o=()=>a(!0),i=()=>a(!1);return e.jsxs(At,{title:xf.title,className:s,children:[e.jsx(cte,{subject:t,isOpen:r,onRequestClose:i}),e.jsx("div",{className:ite.description,children:xf.description}),e.jsx(E,{appearance:"secondary",onClick:()=>{n("integration_feedback_clicked"),o()},children:xf.submit})]})},lte="_root_1cbeo_1",dte={root:lte},sj=()=>e.jsxs("div",{className:dte.root,children:[e.jsx(B,{height:20,width:250}),e.jsx(B,{height:40}),e.jsx(B,{height:280}),e.jsx(B,{height:80}),e.jsx(B,{height:20,width:150}),e.jsx(B,{height:20,width:300}),e.jsx(B,{height:36,width:190}),e.jsx(B,{height:20,width:150}),e.jsx(B,{height:40}),e.jsx(B,{height:36,width:190})]}),ute="_body_qv4yl_1",hte="_bodyWithFooter_qv4yl_5",pte="_feedback_qv4yl_9",mte="_header_qv4yl_13",Dh={body:ute,bodyWithFooter:hte,feedback:pte,header:mte},ho=({isOpen:t,onRequestClose:s,title:n,subtitle:r,beta:a,iconName:o,coverImage:i={x1:NT,x2:ET},isLoading:c=!1,hideFeedback:l=!1,"aria-label":d,size:u="m",action:p,children:h,footer:g})=>e.jsx(oa,{isOpen:t,"aria-label":d,size:u,onRequestClose:s,children:e.jsx(r3,{title:a?e.jsxs("div",{className:Dh.header,children:[n," ",e.jsx(Ie,{appearance:"experimental",size:"m",children:"Beta"})]}):n,subtitle:r,icon:o,coverImage:i,action:p,footer:g,children:e.jsx("div",{className:V(Dh.body,{[Dh.bodyWithFooter]:!!g}),children:c?e.jsx(sj,{}):e.jsxs(e.Fragment,{children:[h,!l&&e.jsx(tj,{className:Dh.feedback,subject:n})]})})})}),gte="_title_1g0wf_1",fte={title:gte},OT=({title:t})=>e.jsx("h4",{className:fte.title,children:t}),_te=t=>{const s=m.useMemo(()=>`${R$}${t}.md`,[t]),n=m.useCallback(()=>fetch(s).then(o=>{if(o.ok)return o.text()}),[s]),{isLoading:r,data:a}=rk(n);return{isLoading:r,documentationMd:a}},bte=({docId:t})=>{const{documentationMd:s,isLoading:n}=_te(t);return n?e.jsx(sj,{}):s?e.jsx(_P,{md:s}):e.jsxs(X,{appearance:"warning",children:["Could not fetch the docs. Go to"," ",e.jsx(R,{openInNewTab:!0,href:`${GC}${t}`,children:"Docs page"}),"."]})},xte=({name:t,logoImage:s,coverImage:n,docId:r,isOpen:a,onRequestClose:o,nameSuffix:i,openedAnalyticsEventName:c})=>{const{trackUiInteraction:l}=P();return e.jsx(ho,{"aria-label":`${t} ${i??""}`,title:`${t} ${i??""}`,onRequestClose:o,isOpen:a,iconName:s,coverImage:n?{x1:n,x2:n}:void 0,hideFeedback:!0,size:"l",action:e.jsx(R,{openInNewTab:!0,href:`${GC}${r}`,icon:"external_link",onClick:()=>{l(c)},children:"Open in docs"}),children:e.jsx(bte,{docId:r})})},jte=({integration:{id:t,name:s,logoImage:n,coverImage:r,docId:a}})=>{const{trackUiInteraction:o}=P(),{openDrawer:i,openedDrawerId:c,closeDrawer:l}=co();return a?e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:()=>{o("integrations_page_read_documentation_button_clicked",{additionalInfo:s}),i(t)},appearance:"secondary",children:"Read"}),e.jsx(xte,{openedAnalyticsEventName:"integration_documentation_full_docs_clicked",nameSuffix:"integration",name:s,logoImage:n,coverImage:r,docId:a,isOpen:c===t,onRequestClose:()=>{o("integrations_page_read_documentation_panel_closed",{additionalInfo:s}),l()}})]}):null},ic={addButton:"Add",manageButton:"Manage",comingSoonOrganizations:"Coming soon to organizations",upgradeButton:"Upgrade plan to add",manageNeonSubscription:"Manage Neon subscription",unavailable:"Unavailable"},$T=({integration:t,disabled:s})=>{const{orgId:n,org:r,isVercelOrg:a}=re(),{trackUiInteraction:o}=P(),{openDrawer:i}=co(),[c,l]=m.useState(!1);if(r&&a&&t.id===gr.Vercel)return e.jsx(E,{as:"a",appearance:"secondary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${n}`,children:ic.manageNeonSubscription});if(r&&t.isUnsupportedForOrgs)return e.jsx(Ie,{children:ic.comingSoonOrganizations});if(s)return t.upgradeType?e.jsxs(e.Fragment,{children:[e.jsx(E,{appearance:"secondary",size:"s",onClick:()=>l(!0),children:ic.upgradeButton}),e.jsx(lt,{type:t.upgradeType,isOpen:c,onRequestClose:()=>l(!1)})]}):e.jsx(E,{appearance:"secondary",disabled:!0,children:ic.unavailable});const{drawerButtons:d}=t;return d?t.isAdded?e.jsx(E,{appearance:"secondary","data-qa":`manage_${t.id}_integration`,onClick:()=>{o(d.manageAnalyticsId),i(t.id)},children:ic.manageButton}):e.jsx(E,{appearance:"secondary","data-qa":`add_${t.id}_integration`,onClick:()=>{o(d.addAnalyticsId),i(t.id)},children:ic.addButton}):e.jsx(jte,{integration:t})},vte="_branchName_b9vqd_1",yte={branchName:vte},LT=({name:t})=>{const s=m.useRef(null),[n,r]=m.useState();return m.useEffect(()=>{if(s.current){const{scrollWidth:a,offsetWidth:o}=s.current;r(a>o)}},[s]),e.jsx(te,{content:t,disabled:!n,placement:"top",children:e.jsx("span",{ref:s,className:yte.branchName,children:t})})},wte="_placeholder_6wk7j_1",Ste={placeholder:wte},Cte=()=>e.jsxs("div",{className:Ste.placeholder,children:[e.jsx(B,{height:60}),e.jsx(B,{height:20,width:200}),e.jsx(B,{height:48}),e.jsx(B,{height:20,width:250}),e.jsx(B,{height:280})]}),kte="_prodBranch_cncha_1",Ite={prodBranch:kte},Pte=({name:t})=>e.jsxs("div",{className:Ite.prodBranch,children:[e.jsx(LT,{name:t}),e.jsx(Ie,{size:"m",children:"default"})]}),Tte="_card_1l6a4_1",Ate={card:Tte},sn={delete:{dialogTitle:"Delete the branch?",alert:t=>e.jsxs(e.Fragment,{children:["This will permanently delete the branch ",e.jsx("code",{children:t}),". Are you sure you want proceed?"]}),confirmButton:"Delete"},deleteObsolete:{dialogTitle:"Delete all obsolete branches?",alert:"This will permanently delete all obsolete branches. Are you sure you want to proceed?",confirmButton:"Delete"},deleteShown:{dialogTitle:"Delete the branches shown in the list?",alert:"This will permanently delete all the branches shown in the list. Are you sure you want to proceed?",confirmButton:"Delete"},deletePreview:{dialogTitle:"Delete all preview branches?",alert:"This will permanently delete all preview branches. Are you sure you want to proceed?",confirmButton:"Delete"}},Nte=()=>{const{confirm:t}=Ve();return m.useCallback(s=>t({header:sn.delete.dialogTitle,appearance:"danger",confirmButtonText:sn.delete.confirmButton,text:e.jsx(X,{appearance:"error",children:sn.delete.alert(s)})}),[t])},Ete=()=>{const{confirm:t}=Ve();return m.useCallback(()=>t({header:sn.deletePreview.dialogTitle,text:e.jsx(X,{appearance:"error",children:sn.deletePreview.alert}),confirmButtonText:sn.deletePreview.confirmButton,appearance:"danger"}),[t])},Ote=()=>{const{confirm:t}=Ve();return m.useCallback(()=>t({header:sn.deleteObsolete.dialogTitle,text:e.jsx(X,{appearance:"error",children:sn.deleteObsolete.alert}),confirmButtonText:sn.deleteObsolete.confirmButton,appearance:"danger"}),[t])},$te=()=>{const{confirm:t}=Ve();return m.useCallback(()=>t({header:sn.deleteShown.dialogTitle,text:e.jsx(X,{appearance:"error",children:sn.deleteShown.alert}),confirmButtonText:sn.deleteShown.confirmButton,appearance:"danger"}),[t])},Uh="vercel-configuration",kl=()=>{const{orgId:t,isLoading:s}=re(),n=be(),{data:r,isError:a,isPending:o}=bt({queryKey:[Uh,t],queryFn:()=>G.getVercelConfiguration({org_id:t}),select:x=>x.data,retry:!1,enabled:!s}),i=m.useMemo(()=>!!(!a&&(r!=null&&r.configuration)),[r,a]),c=m.useMemo(()=>{var x;return(x=r==null?void 0:r.configuration)==null?void 0:x.configuration_id},[r]),l=m.useMemo(()=>{var x,j;return(j=(x=r==null?void 0:r.configuration)==null?void 0:x.projects)==null?void 0:j.map(v=>({id:v.id,name:v.name,url:v.url,neon_project_id:v.neon_project_id,neon_project_name:v.neon_project_name}))},[r]),{mutateAsync:d,isPending:u}=_e({mutationFn:()=>G.deleteVercelConfiguration({org_id:t}),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Uh,t]}),await n.invalidateQueries({queryKey:ui(t)})}}),[p]=bx(),{mutateAsync:h,isPending:g}=_e({mutationFn:async x=>{const j=await p({projectId:x.projectId,branchId:x.branchId,role:x.role.value},!0).unwrap();return await G.connectVercelProject(x.projectId,{configuration_id:x.configurationId,vercel_project_id:x.vercelProjectId,role_name:x.role.value,database_name:x.database.value,password:j,create_dev_branch:!0,auto_delete_obsolete_branches:!0}),x},onSuccess:async x=>{await n.invalidateQueries({queryKey:[Uh]}),await n.invalidateQueries({queryKey:ui(x.orgId)}),await n.invalidateQueries({queryKey:hs(x.projectId)})}}),{mutateAsync:f,isPending:_}=_e({mutationFn:async x=>G.unlinkProjectFromVercelIntegrations(x),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Uh,t]}),await n.invalidateQueries({queryKey:ui(t)})}}),b=m.useMemo(()=>(l==null?void 0:l.filter(x=>x.neon_project_id).map(x=>x.id))??[],[l]);return{isConfigured:i,isLoading:o||s,configurationId:c,projects:l,connectedVercelProjectIds:b,connectProjectAsync:h,isConnecting:g,removeIntegration:d,isRemoving:u,disconnectProject:f,isDisconnecting:_}},nj=t=>{const{orgId:s,isLoading:n}=re(),{isOrgAdmin:r}=Rt(),{isCollaborator:a,isLoading:o}=pl(t),i=n||o,c=s===void 0&&!a;return{isAllowedToInstall:m.useMemo(()=>!i&&(c||r),[i,c,r]),isCollaborator:a,isLoading:i}},Il=({projectId:t})=>["getProjectVercelBranches",t],RT=({projectId:t})=>{const s=bt({queryKey:Il({projectId:t}),queryFn:async()=>(await G.getProjectVercelBranches(t)).data});return m.useEffect(()=>{s.error&&Y(s.error)},[s.error]),s},MT=({projectId:t})=>["deleteProjectVercelBranches",t],Lte=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:MT({projectId:t}),mutationFn:async()=>(await G.deleteProjectVercelBranches(t)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Il({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},BT=({projectId:t})=>["triggerDeleteObsoletePreviewBranches",t],Rte=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:BT({projectId:t}),mutationFn:async()=>(await G.triggerDeleteObsoletePreviewBranches(t)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Il({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},DT=({projectId:t})=>["deleteProjectBranches",t],Mte=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:DT({projectId:t}),mutationFn:async o=>(await G.deleteProjectBranches(t,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Il({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Bte=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:["deleteProjectBranch",t],mutationFn:async({branchId:o})=>(await G.deleteProjectBranch(t,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Il({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Dte=({projectId:t})=>["getProjectVercelSettings",t],Ute=({projectId:t})=>bt({queryKey:Dte({projectId:t}),queryFn:async()=>(await G.getProjectVercelSettings(t)).data}),Fte=({projectId:t},{onError:s,...n}={})=>_e({mutationKey:["setProjectVercelSettings",t],mutationFn:async r=>(await G.setProjectVercelSettings(t,r)).data,onError:(r,...a)=>{Y(r),s==null||s(r,...a)},...n}),zte=({projectId:t})=>["getProjectVercelVars",t],qte=({projectId:t})=>bt({queryKey:zte({projectId:t}),queryFn:async()=>(await G.getProjectVercelVars(t)).data}),Hte=({projectId:t},{onSuccess:s,...n}={})=>{const r=be();return _e({mutationKey:["setProjectVercelVars",t],mutationFn:async a=>(await G.setProjectVercelVars(t,a)).data,onSuccess:(...a)=>{r.invalidateQueries({queryKey:Il({projectId:t})}),s==null||s(...a)},...n})},Bd={obsolete:"obsolete",createdDateTooltip:"Branch create date",obsoleteTooltip:e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Obsolete branches no longer have"}),e.jsx("div",{children:"related git branches."})]}),linkMore:t=>`${t} more`,branchDeleted:"The branch has been deleted."},Vte="_branch_1rdyy_1",Wte="_branchContent_1rdyy_9",Gte="_branchRow_1rdyy_16",jf={branch:Vte,branchContent:Wte,branchRow:Gte},Kte=({projectId:t,branch:s,shouldDisplayObsoleteBadge:n=!1})=>{const{trackUiInteraction:r}=P(),a=Cg({filters:{mutationKey:MT({projectId:t}),status:"pending"}}).length!==0,o=Cg({filters:{mutationKey:BT({projectId:t}),status:"pending"}}).length!==0,i=Cg({filters:{mutationKey:DT({projectId:t}),status:"pending"}}).some(p=>{var h;return(h=p.variables)==null?void 0:h.branch_ids.includes(s.id)}),c=Nte(),l=Bte({projectId:t},{onSuccess:()=>oe(Bd.branchDeleted,{containerId:ci.Drawer})}),d=m.useCallback(async()=>{if(r("vercel_integration_delete_branch_clicked"),!await c(s.name)){r("vercel_integration_delete_branch_dismissed");return}r("vercel_integration_delete_branch_confirmed"),l.mutate({branchId:s.id})},[r,c,s.name,s.id,l]),u=!s.hasGitBranch;return e.jsxs("div",{className:jf.branch,"data-qa":"vercel-preview-branch",role:"listitem","aria-label":s.name,children:[e.jsxs("div",{className:jf.branchContent,children:[e.jsx(LT,{name:s.name}),e.jsxs("div",{className:jf.branchRow,children:[e.jsx(te,{content:Bd.createdDateTooltip,children:e.jsx("span",{children:fe(s.created_at,ke.Date)})}),n&&u&&e.jsx(te,{content:Bd.obsoleteTooltip,children:e.jsx(Ie,{size:"m",children:Bd.obsolete})})]})]}),e.jsx(_r,{iconName:"trash",iconSize:20,appearance:"error",tooltip:"Delete",disabled:l.isPending||a||o&&u||i,onClick:d})]})},Qte="_linkMore_1qmxx_1",Yte={linkMore:Qte},Jte=({linkMoreCount:t})=>{const{projectId:s}=F();return e.jsxs(R,{className:Yte.linkMore,href:Q(C.ProjectsItemBranches,{projectId:s}),children:[e.jsx("div",{children:Bd.linkMore(t)}),e.jsx(z,{name:"arrow_right",size:20})]})},Zte=({projectId:t,branches:s,showObsoleteBadge:n=!1,maxShownBranches:r})=>{const a=s.slice(0,r);return e.jsxs("div",{className:Ate.card,role:"list","aria-label":"preview branches",children:[a.map(o=>e.jsx(Kte,{projectId:t,branch:o,shouldDisplayObsoleteBadge:n},o.id)),s.length>r&&e.jsx(Jte,{linkMoreCount:s.length-r})]})},Xte="_root_1g7cl_1",ese="_featured_1g7cl_10",tse="_background_1g7cl_14",sse="_card_1g7cl_23",nse="_header_1g7cl_42",rse="_description_1g7cl_48",cc={root:Xte,featured:ese,background:tse,card:sse,header:nse,description:rse},ase=({integration:t,featured:s,beta:n,disabled:r})=>t.id===gr.Outerbase&&!t.isAdded?null:e.jsxs("div",{role:"listitem","aria-label":t.name,className:V(cc.root,{[cc.featured]:s}),children:[t.cardImage&&e.jsx("div",{className:cc.background,style:{backgroundImage:`url("${t.cardImage}")`}}),e.jsxs("div",{className:cc.card,children:[e.jsxs("div",{className:cc.header,children:[e.jsx(z,{name:t.logoImage,size:32}),e.jsx(OT,{title:t.name}),n&&e.jsx(Ie,{appearance:"experimental",size:"m",children:"Beta"})]}),e.jsx(T,{className:cc.description,children:t.description}),e.jsx($T,{integration:t,disabled:r})]})]}),ose="_root_1elsh_1",ise="_cardContent_1elsh_13",cse="_logoWrapper_1elsh_20",lse="_description_1elsh_27",dse="_status_1elsh_36",use="_exportStats_1elsh_44",hse="_exportBadges_1elsh_52",pse="_buttons_1elsh_58",mse="_alert_1elsh_65",gse="_warning_1elsh_65",fse="_error_1elsh_71",bn={root:ose,cardContent:ise,logoWrapper:cse,description:lse,status:dse,exportStats:use,exportBadges:hse,buttons:pse,alert:mse,warning:gse,error:fse},_se=({integration:t,actionButton:s,status:n,integrationExportStats:r})=>{const a=li[t.categoryId],o=u=>{var p;return((p=r==null?void 0:r.find(({type:h})=>h===u))==null?void 0:p.count)??0},i=r?{metrics:o("metric_points"),logs:o("log_records")}:void 0,c=o("metric_failed"),l=o("log_failed"),d=c>0||l>0?{failedMetrics:c,failedLogs:l,failuresOnly:c+l>0&&o("metric_points")+o("log_records")===0}:void 0;return e.jsxs("div",{className:bn.root,role:"listitem","aria-label":t.name,children:[e.jsxs("div",{className:bn.cardContent,children:[e.jsx("div",{className:bn.logoWrapper,children:e.jsx(z,{name:t.logoImage,size:32})}),e.jsxs("div",{className:bn.description,children:[e.jsx(OT,{title:t.name}),e.jsx(T,{children:a})]}),n&&e.jsxs("div",{className:bn.status,children:[e.jsx(T,{children:"Status"}),e.jsx(Bn,{appearance:n.appearance,size:"s",label:n.label})]}),i&&e.jsxs("div",{className:bn.exportStats,children:[e.jsx(T,{children:"Exported (last 5m)"}),e.jsxs("div",{className:bn.exportBadges,children:[e.jsx(Bn,{size:"s",label:`${rh(i.metrics)} METRICS`}),e.jsx(Bn,{size:"s",label:`${rh(i.logs)} LOGS`})]})]}),e.jsx("div",{className:bn.buttons,children:s??e.jsx($T,{integration:t})})]}),d&&e.jsxs(X,{className:V(bn.alert,d.failuresOnly?bn.error:bn.warning),appearance:d.failuresOnly?"error":"warning",children:["Failed to export ",rh(d.failedLogs)," logs,"," ",rh(d.failedMetrics)," metrics"]})]})},bse="_section_1wv1q_1",xse="_title_1wv1q_5",jse="_cards_1wv1q_9",Ar={section:bse,title:xse,cards:jse},vse=()=>e.jsxs("div",{children:[e.jsxs("div",{className:Ar.section,children:[e.jsx(B,{className:Ar.title,height:25,width:120}),e.jsxs("div",{className:Ar.cards,children:[e.jsx(B,{height:64,width:284}),e.jsx(B,{height:64,width:284}),e.jsx(B,{height:64,width:284}),e.jsx(B,{height:64,width:284})]})]}),e.jsxs("div",{className:Ar.section,children:[e.jsx(B,{className:Ar.title,height:25,width:120}),e.jsxs("div",{className:Ar.cards,children:[e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284})]})]}),e.jsxs("div",{className:Ar.section,children:[e.jsx(B,{className:Ar.title,height:25,width:130}),e.jsxs("div",{className:Ar.cards,children:[e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284}),e.jsx(B,{height:328,width:284})]})]})]}),UT=()=>{const t=Hu(),s=Jm(),n=YW();return m.useMemo(()=>Object.entries(cM).sort(([,r],[,a])=>r.name.localeCompare(a.name)).reduce((r,[a,o])=>{var l;const i=!!((l=t.data)!=null&&l[a]),c={...o,isAdded:i,upgradeType:n[a]};return c.isAdded&&(r[Ua.Added]=[...r[Ua.Added],c]),c.isFeatured&&(r[Ua.Featured]=[...r[Ua.Featured],c]),r[c.categoryId]=[...r[c.categoryId],{...c,disabled:!!s[a]}],r},Object.fromEntries(Object.keys(li).map(r=>[r,[]]))),[s,t.data,n])},xb=t=>[`${t}-github-integration`],da=()=>{const t=be(),{orgId:s,isLoading:n}=re(),{data:r,isError:a,isPending:o}=bt({queryKey:["github-app",s],queryFn:()=>G.getGitHubInstallation({org_id:s}),retry:!1,enabled:!n}),i=m.useMemo(()=>!!(!a&&(r!=null&&r.data.installation_id)),[r,a]),c=m.useMemo(()=>r==null?void 0:r.data.repositories,[r]),l=m.useMemo(()=>r==null?void 0:r.data.installation_id,[r]),{mutateAsync:d,isPending:u}=_e({mutationFn:()=>G.deleteGitHubInstallation({org_id:s}),onSuccess:async()=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:ui(s)})}}),{mutateAsync:p,isPending:h}=_e({mutationFn:({projectId:_,repositoryId:b})=>G.createGitHubAppProject(_,{repository_id:b}),onSuccess:async(_,{projectId:b})=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:hs(b)}),await t.invalidateQueries({queryKey:ui(s)}),await t.invalidateQueries({queryKey:xb(b)})}}),{mutateAsync:g,isPending:f}=_e({mutationFn:({projectId:_})=>G.deleteProjectGitHubIntegration(_),onSuccess:async(_,{projectId:b})=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:hs(b)}),await t.invalidateQueries({queryKey:ui(s)}),await t.invalidateQueries({queryKey:xb(b)})}});return{isInstalled:i,repositories:c,isLoading:o||n,removeApp:d,isRemoving:u,installationId:l,connectRepository:p,isConnecting:h,disconnectRepository:g,isDisconnecting:f}},FT=t=>{const{data:s,isError:n,isPending:r}=bt({queryKey:xb(t),queryFn:()=>G.getGitHubAppProject(t),select:l=>l.data,retry:!1}),a=m.useMemo(()=>s&&!n?s.current_repository:"",[s,n]),o=m.useMemo(()=>s&&!n?s.current_owner:"",[s,n]),i=m.useMemo(()=>s&&!n?`${s.current_owner}/${s.current_repository}`:"",[s,n]),c=m.useMemo(()=>s&&!n&&s.current_repository_id,[s,n]);return{connectedRepositoryName:a,connectedRepositoryOwnerUsername:o,connectedRepositoryFullName:i,connectedRepositoryId:c,isLoading:r}},zT=()=>{const{projectId:t}=F();return FT(t)},sg=t=>{const{org:s,isLoading:n}=re(),{isOrgAdmin:r,isLoading:a}=Rt(),{isCollaborator:o,isLoading:i}=pl(t),c=n||i||a;return c?{canManageIntegration:!1,isLoading:c}:o?{canManageIntegration:!1,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},yse="_root_pcr2t_1",wse="_root_darkTheme_pcr2t_8",Kw={root:yse,root_darkTheme:wse},ng=({width:t,height:s,children:n})=>{const{colorScheme:r}=oo();return e.jsx("div",{className:V(Kw.root,{[Kw.root_darkTheme]:r==="dark"}),style:{width:`${t}px`,height:`${s}px`},children:n})},Sse="_root_1dic9_1",Cse="_accent_1dic9_13",kse="_ghost_1dic9_17",vf={root:Sse,accent:Cse,ghost:kse},st=({width:t="fit-content",height:s="fit-content",appearance:n="default",children:r,className:a,position:o,level:i=1})=>{const[c,l]=o;return e.jsx("div",{className:V(vf.root,a,{[vf.accent]:n==="accent",[vf.ghost]:n==="ghost"}),style:{width:typeof t=="string"?t:`${t}px`,height:typeof s=="string"?s:`${s}px`,top:`${c}px`,left:`${l}px`,zIndex:i},children:r})},Ise=t=>m.createElement("svg",{width:17,height:49,viewBox:"0 0 17 49",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M16.4513 44.8315C16.9106 44.5822 17.0808 44.0079 16.8315 43.5487L12.7693 36.0653C12.5201 35.6061 11.9457 35.4359 11.4865 35.6851C11.0273 35.9344 10.8571 36.5088 11.1064 36.968L14.7172 43.6199L8.06528 47.2307C7.60606 47.4799 7.43587 48.0543 7.68514 48.5135C7.93442 48.9727 8.50876 49.1429 8.96798 48.8936L16.4513 44.8315ZM16.8315 5.45135C17.0808 4.99213 16.9106 4.41779 16.4513 4.16851L8.96798 0.106365C8.50876 -0.142906 7.93442 0.0272866 7.68514 0.486504C7.43587 0.945721 7.60606 1.52007 8.06528 1.76934L14.7172 5.38013L11.1064 12.032C10.8571 12.4912 11.0273 13.0656 11.4865 13.3149C11.9457 13.5641 12.5201 13.3939 12.7693 12.9347L16.8315 5.45135ZM16 44C16.2688 43.0929 16.2691 43.093 16.2694 43.0931C16.2695 43.0931 16.2697 43.0932 16.2698 43.0932C16.2698 43.0932 16.2697 43.0932 16.2694 43.0931C16.2686 43.0928 16.267 43.0924 16.2645 43.0916C16.2596 43.0901 16.2511 43.0875 16.2392 43.0838C16.2154 43.0763 16.178 43.0644 16.1278 43.0479C16.0276 43.0149 15.8766 42.9633 15.6822 42.8917C15.2932 42.7486 14.7313 42.5258 14.0542 42.2119C12.6977 41.5831 10.8918 40.5942 9.09019 39.1562C5.49776 36.2889 1.94609 31.6634 1.94609 24.5L0.053911 24.5C0.0539108 32.3917 4.00224 37.5162 7.90981 40.6351C9.85818 42.1902 11.8023 43.2536 13.2583 43.9286C13.9875 44.2666 14.5974 44.5088 15.0287 44.6675C15.2445 44.7469 15.4158 44.8055 15.5352 44.8449C15.595 44.8646 15.6418 44.8795 15.6748 44.8898C15.6912 44.895 15.7043 44.899 15.7137 44.9018C15.7184 44.9033 15.7223 44.9044 15.7252 44.9053C15.7266 44.9057 15.7279 44.9061 15.7289 44.9064C15.7294 44.9066 15.73 44.9067 15.7302 44.9068C15.7307 44.907 15.7312 44.9071 16 44ZM1.94609 24.5C1.94609 17.3366 5.49776 12.7111 9.09019 9.84376C10.8918 8.40576 12.6977 7.41694 14.0542 6.78808C14.7313 6.47418 15.2932 6.25143 15.6822 6.10827C15.8766 6.03672 16.0276 5.98514 16.1278 5.95208C16.178 5.93556 16.2154 5.92367 16.2392 5.91623C16.2511 5.91251 16.2596 5.9099 16.2645 5.90839C16.267 5.90763 16.2686 5.90715 16.2694 5.90694C16.2697 5.90683 16.2698 5.90679 16.2698 5.90681C16.2697 5.90683 16.2695 5.9069 16.2694 5.90691C16.2691 5.90699 16.2688 5.9071 16 5C15.7312 4.0929 15.7307 4.09304 15.7302 4.09319C15.73 4.09327 15.7294 4.09344 15.7289 4.09359C15.7279 4.09389 15.7266 4.09426 15.7252 4.0947C15.7223 4.09557 15.7184 4.09673 15.7137 4.09816C15.7043 4.10104 15.6912 4.10504 15.6748 4.11019C15.6418 4.12049 15.595 4.1354 15.5352 4.1551C15.4158 4.1945 15.2445 4.25313 15.0287 4.33252C14.5974 4.49124 13.9875 4.73337 13.2583 5.07141C11.8023 5.74644 9.85818 6.80978 7.90981 8.36489C4.00224 11.4838 0.0539111 16.6083 0.053911 24.5L1.94609 24.5Z",fill:"currentColor"})),rj=t=>m.createElement("svg",{width:78,height:12,viewBox:"0 0 78 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.5926 0.4907L77.5509 5.44907C77.8552 5.75334 77.8552 6.24666 77.5509 6.55093L72.5926 11.5093C72.2883 11.8136 71.795 11.8136 71.4907 11.5093C71.1864 11.205 71.1864 10.7117 71.4907 10.4074L75.119 6.77913H1.00002C0.569716 6.77913 0.220886 6.4303 0.220886 6C0.220886 5.56969 0.569716 5.22086 1.00002 5.22086H75.119L71.4907 1.59256C71.1864 1.28829 71.1864 0.79497 71.4907 0.4907C71.795 0.186429 72.2883 0.186429 72.5926 0.4907Z",fill:"currentColor"})),Fh=t=>m.createElement("svg",{width:19,height:14,viewBox:"0 0 19 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M18.669 7.66899C19.0385 7.29952 19.0385 6.70048 18.669 6.33101L12.6481 0.310139C12.2786 -0.0593324 11.6796 -0.0593324 11.3101 0.310139C10.9407 0.679609 10.9407 1.27864 11.3101 1.64811L16.662 7L11.3101 12.3519C10.9407 12.7214 10.9407 13.3204 11.3101 13.6899C11.6796 14.0593 12.2786 14.0593 12.6481 13.6899L18.669 7.66899ZM1 6.05391C0.477489 6.05391 0.0539112 6.47749 0.0539112 7C0.0539112 7.52251 0.477489 7.94609 1 7.94609V6.05391ZM18 6.05391L1 6.05391V7.94609L18 7.94609V6.05391Z",fill:"currentColor"})),Pse=t=>m.createElement("svg",{width:22,height:56,viewBox:"0 0 22 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M1.5 1L15 0.999999C18.3137 0.999999 21 3.68629 21 7L21 49C21 52.3137 18.3137 55 15 55L1.5 55",stroke:"currentColor",strokeWidth:1.55826,strokeLinecap:"round"})),Tse=t=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M16.0714 29.8823C14.6651 29.8823 13.2717 29.4694 12.1751 28.6566L6.6273 24.5152C5.1565 23.4185 4.00824 21.122 4.00824 19.3028V9.70391C4.00824 7.71704 5.46614 5.60114 7.3369 4.90445L13.7749 2.49181C15.0522 2.01445 17.0648 2.01445 18.3421 2.49181L24.7801 4.90445C26.6509 5.60114 28.1088 7.71704 28.1088 9.70391V19.2899C28.1088 21.122 26.9605 23.4056 25.4897 24.5023L19.9419 28.6437C18.8711 29.4694 17.4777 29.8823 16.0714 29.8823ZM14.4587 4.31097L8.0207 6.7236C6.92404 7.13646 5.95641 8.52985 5.95641 9.71681V19.3028C5.95641 20.5285 6.82083 22.2444 7.78846 22.9669L13.3362 27.1084C14.8199 28.218 17.3229 28.218 18.8195 27.1084L24.3673 22.9669C25.3478 22.2315 26.1993 20.5285 26.1993 19.3028V9.70391C26.1993 8.52985 25.2317 7.13646 24.135 6.7107L17.697 4.29806C16.8197 3.98842 15.3231 3.98842 14.4587 4.31097Z",fill:"currentColor"}),m.createElement("path",{d:"M14.3426 18.877C14.0975 18.877 13.8524 18.7867 13.6588 18.5932L11.5816 16.516C11.2075 16.1418 11.2075 15.5226 11.5816 15.1484C11.9558 14.7743 12.5751 14.7743 12.9492 15.1484L14.3426 16.5418L19.2066 11.6778C19.5807 11.3037 20.2 11.3037 20.5742 11.6778C20.9483 12.052 20.9483 12.6713 20.5742 13.0454L15.0264 18.5932C14.8329 18.7867 14.5878 18.877 14.3426 18.877Z",fill:"currentColor"})),Ase="_flex_x26u2_1",Nse="_green_x26u2_7",Ese="_gray_x26u2_11",zh={flex:Ase,green:Nse,gray:Ese},Ose=()=>e.jsxs(ng,{width:652,height:157,children:[e.jsxs(st,{className:zh.flex,width:222,height:36,position:[61,43],children:[e.jsx(z,{name:"github",size:20}),"New Pull Request"]}),e.jsx(st,{appearance:"ghost",position:[35,284],children:e.jsx(Ie,{size:"s",children:"Github action"})}),e.jsx(st,{appearance:"ghost",position:[79,297],className:zh.gray,children:e.jsx(rj,{})}),e.jsxs(st,{className:zh.flex,width:222,height:36,appearance:"accent",position:[61,406],children:[e.jsx(z,{name:"neon_mono",size:20,className:zh.green}),"New Neon branch"]})]}),$se="_flex_x26u2_1",Lse="_green_x26u2_7",Rse="_gray_x26u2_11",qh={flex:$se,green:Lse,gray:Rse},Mse=()=>e.jsxs(ng,{width:672,height:157,children:[e.jsxs(st,{className:qh.flex,width:219,height:36,position:[61,41],appearance:"accent",children:[e.jsx(z,{name:"neon_mono",size:20,className:qh.green}),"Project"]}),e.jsx(st,{appearance:"ghost",position:[32,250],children:e.jsx(Ie,{size:"s",children:"Neon Project ID + API KEY"})}),e.jsx(st,{appearance:"ghost",position:[79,297],className:qh.gray,children:e.jsx(rj,{})}),e.jsxs(st,{className:qh.flex,width:219,height:36,position:[61,403],children:[e.jsx(z,{name:"github",size:20}),"Repository"]})]}),Bse="_flex_ys19e_1",Dse="_green_ys19e_7",Use="_hint_ys19e_11",Fse="_actionElement_ys19e_15",zse="_rotate_ys19e_24",os={flex:Bse,green:Dse,hint:Use,actionElement:Fse,rotate:zse},qT=()=>e.jsxs(ng,{width:652,height:157,children:[e.jsx(st,{position:[24,67],appearance:"ghost",className:os.hint,children:"Add Github App"}),e.jsx(st,{position:[85,42],appearance:"ghost",children:e.jsx(z,{name:"neon_mono",size:28})}),e.jsx(st,{position:[90,85],appearance:"ghost",className:V(os.rotate,os.green),children:e.jsx(Fh,{})}),e.jsx(st,{position:[81,100],appearance:"ghost",level:2,className:os.green,children:e.jsx(Tse,{})}),e.jsx(st,{position:[90,128],appearance:"ghost",className:os.green,children:e.jsx(Fh,{})}),e.jsx(st,{position:[82,155],appearance:"ghost",children:e.jsx(z,{name:"github",size:28})}),e.jsx(st,{position:[24,308],appearance:"ghost",className:os.hint,children:"Connect"}),e.jsx(st,{position:[72,233],appearance:"ghost",className:os.green,children:e.jsx(Ise,{})}),e.jsxs(st,{className:os.flex,width:162,height:36,position:[58,253],children:[e.jsx(z,{name:"neon_mono",size:20}),"Project"]}),e.jsxs(st,{className:os.flex,width:162,height:36,position:[97,253],children:[e.jsx(z,{name:"github",size:20}),"Repository"]}),e.jsx(st,{position:[24,495],appearance:"ghost",className:os.hint,children:"Add Github Actions"}),e.jsxs(st,{className:os.actionElement,width:55,height:73,position:[59,457],children:[e.jsx(z,{name:"github",size:20}),"PR"]}),e.jsx(st,{position:[88,501],appearance:"ghost",level:2,className:os.green,children:e.jsx(Fh,{})}),e.jsxs(st,{className:os.actionElement,width:55,height:73,position:[59,523],children:[e.jsx(z,{name:"github",size:20}),"Action"]}),e.jsx(st,{position:[88,567],appearance:"ghost",level:2,className:os.green,children:e.jsx(Fh,{})}),e.jsxs(st,{className:os.actionElement,width:55,height:73,position:[59,589],appearance:"accent",children:[e.jsx(z,{name:"neon_mono",size:20}),"Branch"]})]}),qse="_flex_23ek7_1",Hse="_gray_23ek7_7",Vse="_deploymentElement_23ek7_11",Wse="_dots_23ek7_16",Gse="_dot_23ek7_16",Nr={flex:qse,gray:Hse,deploymentElement:Vse,dots:Wse,dot:Gse},HT=()=>e.jsxs(ng,{width:652,height:157,children:[e.jsxs(st,{className:Nr.flex,width:216,height:36,position:[33,44],children:[e.jsx(z,{name:"github",size:20}),"Code branch"]}),e.jsxs(st,{className:Nr.flex,width:216,height:36,position:[87,44],children:[e.jsx(z,{name:"neon_mono",size:20}),"Data branch"]}),e.jsx(st,{appearance:"ghost",position:[51,259],className:Nr.gray,children:e.jsx(Pse,{})}),e.jsx(st,{appearance:"ghost",position:[74,279],className:Nr.gray,children:e.jsx(rj,{})}),e.jsxs(st,{width:190,height:106,position:[26,423],appearance:"accent",className:Nr.deploymentElement,children:[e.jsxs("div",{className:Nr.dots,children:[e.jsx("div",{className:Nr.dot}),e.jsx("div",{className:Nr.dot}),e.jsx("div",{className:Nr.dot})]}),"Preview deployment with dedicated database"]})]}),xn={connectedTitle:"Your project is connected",connectedDescription:t=>e.jsxs(e.Fragment,{children:["We created a"," ",e.jsx(R,{href:t?`${Q(C.OrgSettings,{orgId:t})}#api-keys`:`${C.UserSettings}#api-keys`,children:"Neon API key"})," ","for your project and added the following secrets and variables to your GitHub repository:"]}),actionTitle:"Setting up your GitHub Actions workflow",addActionTitle:"Add the GitHub Actions workflow to your repo",addActionDescription:e.jsxs(e.Fragment,{children:[e.jsxs("ul",{children:[e.jsxs("li",{children:["In your GitHub repository, create a ",e.jsx(Ae,{children:".yml"})," file in your",e.jsx(Ae,{children:".github/workflows"})," directory; for example:"," ",e.jsx(Ae,{children:"neon_workflow.yml"}),"."]}),e.jsxs("li",{children:["Copy the following YAML contents into your"," ",e.jsx(Ae,{children:"neon_workflow.yml"})," file."]}),e.jsx("li",{children:"Commit your changes."})]}),e.jsx("br",{}),e.jsxs("p",{children:["The GitHub Actions workflow creates a new database branch with each pull request, which you can view on the ",e.jsx("b",{children:"Branches"})," page in the Neon Console. When you close the pull request, the branch is deleted."]})]}),nextStepsTitle:"Next steps",nextStepsDescription:"For more about integrating and building workflows with GitHub Actions, please refer to the",guide:"Neon GitHub integration guide",apiKey:"NEON_API_KEY",projectId:"NEON_PROJECT_ID",code:`name: Create/Delete Branch for Pull Request

on:
  pull_request:
    types:
      - opened
      - reopened
      - synchronize
      - closed

concurrency:
  group: \${{ github.workflow }}-\${{ github.ref }}

jobs:
  setup:
    name: Setup
    outputs:
      branch: \${{ steps.branch_name.outputs.current_branch }}
    runs-on: ubuntu-latest
    steps:
      - name: Get branch name
        id: branch_name
        uses: tj-actions/branch-names@v8

  create_neon_branch:
    name: Create Neon Branch
    outputs:
      db_url: \${{ steps.create_neon_branch_encode.outputs.db_url }}
      db_url_with_pooler: \${{ steps.create_neon_branch_encode.outputs.db_url_with_pooler }}
    needs: setup
    if: |
      github.event_name == 'pull_request' && (
      github.event.action == 'synchronize'
      || github.event.action == 'opened'
      || github.event.action == 'reopened')
    runs-on: ubuntu-latest
    steps:
      - name: Get branch expiration date as an env variable (2 weeks from now)
        id: get_expiration_date
        run: echo "EXPIRES_AT=$(date -u --date '+14 days' +'%Y-%m-%dT%H:%M:%SZ')" >> "$GITHUB_ENV"
      - name: Create Neon Branch
        id: create_neon_branch
        uses: neondatabase/create-branch-action@v6
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch_name: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}
          expires_at: \${{ env.EXPIRES_AT }}

# The step above creates a new Neon branch.
# You may want to do something with the new branch, such as run migrations, run tests
# on it, or send the connection details to a hosting platform environment.
# The branch DATABASE_URL is available to you via:
# "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}".
# It's important you don't log the DATABASE_URL as output as it contains a username and
# password for your database.
# For example, you can uncomment the lines below to run a database migration command:
#      - name: Run Migrations
#        run: npm run db:migrate
#        env:
#          # to use pooled connection
#          DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}"
#          # OR to use unpooled connection
#          # DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url }}"

# Following the step above, which runs database migrations, you may want to check
# for schema changes in your database. We recommend using the following action to
# post a comment to your pull request with the schema diff. For this action to work,
# you also need to give permissions to the workflow job to be able to post comments
# and read your repository contents. Add the following permissions to the workflow job:
#
# permissions:
#   contents: read
#   pull-requests: write
#
# You can also check out https://github.com/neondatabase/schema-diff-action for more
# information on how to use the schema diff action.
# You can uncomment the lines below to enable the schema diff action.
#      - name: Post Schema Diff Comment to PR
#        uses: neondatabase/schema-diff-action@v1
#        with:
#          project_id: \${{ vars.NEON_PROJECT_ID }}
#          compare_branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
#          api_key: \${{ secrets.NEON_API_KEY }}

  delete_neon_branch:
    name: Delete Neon Branch
    needs: setup
    if: github.event_name == 'pull_request' && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - name: Delete Neon Branch
        uses: neondatabase/delete-branch-action@v3
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}`},Kse="_section_19ax6_1",Qse="_connectedDescription_19ax6_7",Yse="_repoBadge_19ax6_16",Jse="_description_19ax6_25",Zse="_codeBlock_19ax6_41",Io={section:Kse,connectedDescription:Qse,repoBadge:Yse,description:Jse,codeBlock:Zse},Xse=()=>{const{trackUiInteraction:t}=P(),{connectedRepositoryFullName:s}=zT(),{orgId:n}=re();return e.jsxs(e.Fragment,{children:[s&&e.jsx(At,{title:xn.connectedTitle,children:e.jsxs("div",{className:Io.section,children:[e.jsx(R,{className:Io.repoBadge,icon:"external_link",iconSize:"s",href:`https://github.com/${s}`,openInNewTab:!0,onClick:()=>{t("github_integration_repository_link_clicked")},children:s}),e.jsxs("div",{className:Io.connectedDescription,children:[e.jsx(T,{children:xn.connectedDescription(n)}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(R,{openInNewTab:!0,href:`https://github.com/${s}/settings/secrets/actions`,onClick:()=>{t("github_integration_github_secrets_link_clicked")},children:xn.apiKey})}),e.jsx("li",{children:e.jsx(R,{openInNewTab:!0,href:`https://github.com/${s}/settings/variables/actions`,onClick:()=>{t("github_integration_github_variables_link_clicked")},children:xn.projectId})})]})]})]})}),e.jsx(At,{title:xn.actionTitle,children:e.jsxs("div",{className:Io.section,children:[e.jsx(Ose,{}),e.jsxs("div",{className:Io.description,children:[e.jsx(Z,{level:5,children:xn.addActionTitle}),e.jsx(T,{children:xn.addActionDescription})]}),e.jsx(rn,{collapsedHeight:109,className:Io.codeBlock,copy:{onCopy:()=>{t("github_integration_workflow_action_copied")}},onExpandClick:()=>{t("github_integration_workflow_action_expand_clicked")},mode:"yaml",children:xn.code}),e.jsxs("div",{className:Io.description,children:[e.jsx(Z,{level:5,children:xn.nextStepsTitle}),e.jsxs(T,{children:[xn.nextStepsDescription," ",e.jsx(R,{href:"https://neon.com/docs/guides/neon-github-app",openInNewTab:!0,onClick:()=>{t("github_integration_docs_guide_link_clicked")},children:xn.guide}),"."]})]})]})}),e.jsx(tj,{subject:"GitHub"})]})},Er={alert:"The GitHub App is installed.",title:"Connect your Neon project to a GitHub repository",connect:"Connect",label:"Select a repository to connect to this Neon project:",success:"The GitHub repo was successfully connected",required:"This field is required.",infoTitle:"Don't see your repository?",info:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You might need to authorize access to the repository in GitHub."}),e.jsxs("ul",{children:[e.jsxs("li",{children:["In GitHub, go to Profile ","->"," Settings ","->"," Applications ","->"," ","Installed GitHub Apps."]}),e.jsxs("li",{children:["Select Neon Postgres ","->"," Configure."]}),e.jsx("li",{children:"Grant access to the repository you want to connect, then Save."})]})]}),disabledTooltip:"This repository has already been connected to a Neon project"},ene="_alert_1lhe8_1",tne="_section_1lhe8_5",sne="_fieldWithButton_1lhe8_11",nne="_info_1lhe8_16",Hh={alert:ene,section:tne,fieldWithButton:sne,info:nne},rne=()=>{var d,u;const{trackUiInteraction:t}=P(),{projectId:s}=F(),{connectRepository:n,isConnecting:r,repositories:a}=da(),o=m.useMemo(()=>(a==null?void 0:a.map(({id:p=0,name:h="",installed:g=!1})=>({value:p,label:h,disabled:g,disabledTooltip:Er.disabledTooltip})))??[],[a]),i=$e({defaultValues:{repositoryId:o.length===1?(d=o[0])==null?void 0:d.value:void 0}}),{formState:{errors:c}}=i,l=async p=>{try{const{repositoryId:h}=p;await n({projectId:s,repositoryId:h}),oe(Er.success)}catch(h){Y(h)}};return e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"success",className:Hh.alert,children:Er.alert}),e.jsx(At,{title:Er.title,children:e.jsxs("div",{className:Hh.section,children:[e.jsx(Mse,{}),e.jsx(es,{providerProps:i,onSubmit:l,children:e.jsx(U,{label:Er.label,error:(u=c.repositoryId)==null?void 0:u.message,children:e.jsxs("div",{className:Hh.fieldWithButton,children:[e.jsx(Pe,{name:"repositoryId",rules:{required:{value:!0,message:Er.required}},control:i.control,render:({field:{onChange:p,...h}})=>e.jsx(ct,{options:o,filterable:!0,disabled:r,onChange:g=>{t("github_integration_repository_selector_repository_selected"),p(g)},...h})}),e.jsx(E,{type:"submit",size:"l",loading:r,disabled:r,onClick:()=>{t("github_integration_repository_selector_repository_submitted")},children:Er.connect})]})})}),e.jsxs("div",{className:Hh.info,children:[e.jsx(Z,{level:5,children:Er.infoTitle}),e.jsx(T,{children:Er.info})]})]})})]})},Po={title:"Disconnect integration",description:t=>e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Disconnecting the integration performs the following actions for this Neon project:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Removes the ",e.jsx(Ae,{children:"NEON_PROJECT_ID"})," variable from the connected GitHub repository"]}),e.jsx("li",{children:"Removes the Neon API key created by the integration from your Neon account"}),e.jsxs("li",{children:["Removes the ",e.jsx(Ae,{children:"NEON_API_KEY"})," variable from the connected GitHub repository"]})]}),e.jsx("br",{}),e.jsxs("p",{children:["If you want to uninstall the integration from your Neon account entirely, you can do so from the ",e.jsx("b",{children:"Integrations"})," page in Neon"," ",e.jsx(R,{href:t?`${Q(C.OrgIntegrations,{orgId:t})}#github`:`${C.UserIntegrations}#github`,children:"Account settings"}),"."]})]}),disconnect:"Disconnect",success:"The integration was successfully removed",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButton:"Disconnect"},ane="_description_d31pk_1",one={description:ane},ine=({onRequestClose:t})=>{const{trackUiInteraction:s}=P(),{confirm:n}=Ve(),{projectId:r}=F(),{isDisconnecting:a,disconnectRepository:o}=da(),{orgId:i}=re(),c=()=>{t(),oe(Po.success)},l=async()=>{try{if(!await n({header:Po.confirmTitle,text:Po.confirmText,confirmButtonText:Po.confirmButton,appearance:"danger"})){s("github_integration_disconnect_dismissed");return}s("github_integration_disconnect_confirmed"),await o({projectId:r}),c()}catch(d){Y(d)}};return e.jsxs(At,{title:Po.title,children:[e.jsx(T,{className:one.description,children:Po.description(i)}),e.jsx(E,{"data-qa":"github_integration_remove",appearance:"secondary",loading:a,disabled:a,onClick:async()=>{s("github_integration_disconnect_clicked"),await l()},children:Po.disconnect})]})},yf={title:"GitHub integration",success:"GitHub App was successfully installed"},cne="_buttonWrapper_nih2t_1",lne={buttonWrapper:cne},VT=({projectId:t,size:s="s",label:n,openInNewTab:r=!1,disabled:a=!1,tooltip:o,withIcon:i=!1,"data-qa":c,onClick:l,appearance:d="primary"})=>{const{token:u}=Pm(),{colorScheme:p}=oo(),{orgId:h}=re(),g=m.useMemo(()=>{const f=new URLSearchParams;return t&&f.append("project_id",encodeURIComponent(t)),h&&f.append("org_id",encodeURIComponent(h)),f.size>0?`?${f}`:""},[h,t]);return e.jsx(qt,{action:`${Tm}/integrations/github/auth${g}`,target:r?"_blank":"_self",method:"POST",children:e.jsx(te,{content:o,disabled:!a,children:e.jsxs("div",{className:lne.buttonWrapper,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:u}),e.jsx(E,{"data-qa":c,type:"submit",size:s,onClick:l,disabled:a,icon:i?"github":void 0,iconColorScheme:d==="primary"?M$(p):p,appearance:d,children:n})]})})})},rd={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),e.jsx("br",{}),e.jsxs("ul",{children:[e.jsx("li",{children:"Installing the GitHub app and authorizing it."}),e.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),e.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),e.jsx("br",{}),e.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},dne="_section_1amah_1",wf={section:dne},une=()=>{const{trackUiInteraction:t}=P(),{isLoading:s}=re(),{projectId:n}=F(),{canManageIntegration:r,isLoading:a}=sg(n),{isCollaborator:o,isLoading:i}=pl(n);return s||a||i?e.jsxs("div",{className:wf.section,children:[e.jsx(B,{height:285}),e.jsx(B,{height:445}),e.jsx(B,{height:108})]}):e.jsxs(e.Fragment,{children:[e.jsx(At,{title:rd.previewTitle,children:e.jsxs("div",{className:wf.section,children:[e.jsx(T,{children:rd.previewDescription}),e.jsx(HT,{})]})}),e.jsx(At,{title:rd.settingTitle,children:e.jsxs("div",{className:wf.section,children:[e.jsx(T,{children:rd.settingDescription}),e.jsx(qT,{}),e.jsx(VT,{label:rd.installButton,projectId:n,disabled:!r,tooltip:o?eo.installIntegrationOnSharedProjectNotAllowed:eo.installIntegrationNotAllowed,onClick:()=>{t("github_integration_configure_clicked")},openInNewTab:!0})]})}),e.jsx(tj,{subject:"GitHub"})]})},Vh=[{label:"Actions",value:"actions","data-qa":"github_integration_actions_tab"},{label:"Disconnect",value:"disconnect","data-qa":"github_integration_disconnect_tab"}],hne=({onRequestClose:t})=>{const{trackUiInteraction:s}=P(),{connectedRepositoryId:n,isLoading:r}=zT(),[a,o]=m.useState(Vh[0].value),i=c=>{c==="actions"?s("github_integration_actions_tab_clicked"):c==="disconnect"&&s("github_integration_disconnect_tab_clicked"),o(c)};return r?e.jsx(sj,{}):n?e.jsxs(e.Fragment,{children:[e.jsx(qn,{options:Vh,value:a,onChange:i}),e.jsxs("div",{children:[a===Vh[0].value&&e.jsx(Xse,{}),a===Vh[1].value&&e.jsx(ine,{onRequestClose:t})]})]}):e.jsx(rne,{})},pne=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=P(),{openedDrawerId:r,openDrawer:a,closeDrawer:o}=co(),{isInstalled:i,isLoading:c}=da(),{projectId:l}=F(),{isCollaborator:d,isLoading:u}=pl(l),p=c||u,h=()=>{n(s?"github_integration_configured_settings_closed":"github_integration_available_settings_closed"),o()};return m.useEffect(()=>{window.location.hash==="#github_success"&&(window.history.replaceState(null,""," "),Ue(e.jsx(rt,{children:yf.success})),a(gr.GitHub))},[a]),e.jsx(ho,{"aria-label":yf.title,title:yf.title,isOpen:r===gr.GitHub,onRequestClose:h,iconName:"github",hideFeedback:!0,coverImage:{x1:B_,x2:B_},size:"l",isLoading:p,children:s||i&&!d?e.jsx(hne,{onRequestClose:h}):e.jsx(une,{})})},rg={integrationDescription:"Instant database branching with every Preview Deployment",projectConnectedWithSuccess:"Project connected with success"},Sf={title:"Next steps",description:"To see the integration in action, ",linkText:"follow these steps"},mne="_section_2fiav_1",gne="_item_2fiav_7",Qw={section:mne,item:gne},aj=()=>e.jsxs("div",{className:Qw.section,children:[e.jsx(Z,{level:5,children:Sf.title}),e.jsxs("div",{className:Qw.item,children:[e.jsx(z,{name:"rocket",size:20}),e.jsxs(T,{children:[Sf.description,e.jsx(R,{href:B$,openInNewTab:!0,children:Sf.linkText})]})]})]}),fne="_alert_rpcoa_1",_ne="_autodelete_rpcoa_5",bne="_automationAlert_rpcoa_9",Cf={alert:fne,autodelete:_ne,automationAlert:bne},An={title:"Delete",obsolete:"obsolete",deleteObsolete:"Delete obsolete branches",deleteShown:"Delete the branches shown in this list",deleteAll:"Delete all preview branches",obsoleteBranchesDeleted:"Obsolete branches have been deleted.",shownBranchesDeleted:"The branches have been deleted.",allPreviewBranchesDeleted:"All preview branches have been deleted."},xne="_deleteDropdownItem_ltch6_1",jne="_dropDownIcon_ltch6_5",vne="_deleteDropdownBadge_ltch6_9",Dd={deleteDropdownItem:xne,dropDownIcon:jne,deleteDropdownBadge:vne},yne=({ref:t,shown:s,...n})=>e.jsxs(R,{appearance:"error",ref:t,...n,children:[An.title,e.jsx(z,{name:"chevron_down",className:Dd.dropDownIcon,size:16})]}),wne=({projectId:t,shownBranches:s})=>{const{trackUiInteraction:n}=P(),r=Lte({projectId:t},{onSuccess:()=>Ue(e.jsx(rt,{children:An.allPreviewBranchesDeleted}),{containerId:ci.Drawer})}),a=Ete(),o=m.useCallback(async()=>{if(!await a()){n("vercel_integration_delete_preview_branches_dismissed");return}n("vercel_integration_delete_preview_branches_confirmed"),r.mutate()},[a,r,n]),i=Rte({projectId:t},{onSuccess:()=>Ue(e.jsx(rt,{children:An.obsoleteBranchesDeleted}),{containerId:ci.Drawer})}),c=Ote(),l=m.useCallback(async()=>{if(!await c()){n("vercel_integration_delete_obsolete_branches_dismissed");return}n("vercel_integration_delete_obsolete_branches_confirmed"),i.mutate()},[c,i,n]),d=Mte({projectId:t},{onSuccess:()=>Ue(e.jsx(rt,{children:An.shownBranchesDeleted}),{containerId:ci.Drawer})}),u=$te(),p=m.useCallback(async()=>{if(!await u()){n("vercel_integration_delete_shown_branches_dismissed");return}n("vercel_integration_delete_shown_branches_confirmed"),d.mutate({branch_ids:s.map(g=>g.id)})},[u,d,s,n]);return e.jsxs(ex,{triggerElement:yne,disabledPortal:!0,children:[e.jsxs(Ga,{onClick:()=>{n("vercel_integration_delete_obsolete_branches_clicked"),l()},"aria-label":An.deleteObsolete,className:Dd.deleteDropdownItem,children:[An.deleteObsolete,e.jsx(Ie,{size:"m",appearance:"default",className:Dd.deleteDropdownBadge,children:An.obsolete})]}),e.jsx(Ga,{iconName:"trash_shown",onClick:()=>{n("vercel_integration_delete_shown_branches_clicked"),p()},"aria-label":An.deleteShown,className:Dd.deleteDropdownItem,children:An.deleteShown}),e.jsx(Ga,{iconName:"trash_all",onClick:()=>{n("vercel_integration_delete_preview_branches_clicked"),o()},"aria-label":An.deleteAll,className:Dd.deleteDropdownItem,children:An.deleteAll})]})},Sne=()=>{const{projectId:t,project:s}=F(),n=s==null?void 0:s.store_passwords,r=RT({projectId:t}),a=m.useMemo(()=>{var g;return((g=r.data)==null?void 0:g.branches)??[]},[r.data]),o=Ute({projectId:t}),[i,c]=m.useState(void 0);m.useEffect(()=>{i===void 0&&o.data&&c(o.data.auto_delete_obsolete_branches)},[i,o.data]);const l=a.find(g=>g.default),d=a.filter(g=>!g.default),u=d.slice(0,Iv),p=Fte({projectId:t},{onMutate:g=>{c(g.auto_delete_obsolete_branches)},onSuccess:(g,f)=>{const _=f.auto_delete_obsolete_branches?Kn.autoDeleteEnabled:Kn.autoDeleteDisabled;Ue(e.jsx(rt,{children:_}),{containerId:ci.Drawer})},onError:(g,f)=>{c(!f.auto_delete_obsolete_branches)}}),h=m.useCallback(()=>{p.mutate({auto_delete_obsolete_branches:!i})},[i,p]);return r.isLoading?e.jsx(Cte,{}):e.jsxs(e.Fragment,{children:[!n&&e.jsx($m,{integrationName:"Vercel",messageType:Lm.RemovalInstruction}),l&&e.jsx(T,{children:Kn.info(Q(C.ProjectsItemBranchesItem,{projectId:t,branchId:l.id}))}),n&&e.jsxs(e.Fragment,{children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(X,{className:Cf.alert,children:Kn.alert}),e.jsx(At,{title:Kn.prodBranch,children:e.jsx(Pte,{name:l.name})})]}),!!d.length&&e.jsx(At,{title:Kn.previewBranches,action:e.jsx(wne,{shownBranches:u,projectId:t}),children:e.jsx(Zte,{projectId:t,branches:d,showObsoleteBadge:!0,maxShownBranches:Iv})}),e.jsxs(At,{title:Kn.automationWorkflows,children:[o.isError&&e.jsx(X,{className:Cf.automationAlert,appearance:"error",children:Kn.automationWorkflowsError}),e.jsx(T,{children:Kn.autoDelete}),e.jsx("div",{className:Cf.autodelete,children:e.jsx(as,{wrap:!0,isSelected:i,onChange:h,isDisabled:p.isPending||o.isError||o.isLoading,children:Kn.autoDeleteSwitch})})]})]})]})},lc={roleLabel:"Role",databaseLabel:"Database",connectedBadge:"Connected",vercelProjectLabel:"Vercel project",selectProjectPlaceholder:"Select project"},Cne="_form_1dg4g_1",kne="_neonRow_1dg4g_7",Ine="_vercelRow_1dg4g_17",Pne="_vercelProjectField_1dg4g_23",Wh={form:Cne,neonRow:kne,vercelRow:Ine,vercelProjectField:Pne},Tne=()=>{const{projectId:t}=F(),{projects:s,connectedVercelProjectIds:n,configurationId:r,isLoading:a,connectProjectAsync:o,isConnecting:i}=kl(),c=m.useMemo(()=>(s==null?void 0:s.map(j=>({value:j.id,label:j.name,disabled:n==null?void 0:n.includes(j.id),suffix:(n==null?void 0:n.includes(j.id))&&e.jsx(Ie,{appearance:"warning",children:lc.connectedBadge})})))??[],[n,s]),l=$e(),{control:d,formState:u,register:p}=l,{branches:h,isLoading:g}=Wb(t),f=m.useMemo(()=>{var j;return(j=h==null?void 0:h.find(v=>v.default))==null?void 0:j.id},[h]),_=a||g,{orgId:b}=re(),x=m.useCallback(async j=>{if(!f||!r)return;const v={...j,configurationId:r,projectId:t,branchId:f};b&&(v.orgId=b);try{await o(v),l.reset(),oe(rg.projectConnectedWithSuccess)}catch(y){Y(y)}},[r,o,f,l,t,b]);return e.jsxs(es,{providerProps:l,onSubmit:x,className:Wh.form,children:[e.jsxs("div",{className:Wh.neonRow,children:[e.jsx(U,{label:lc.databaseLabel,children:e.jsx(Pe,{name:"database",control:d,rules:{required:!0},render:({field:j})=>e.jsx(I0,{projectId:t,branchId:f,value:j.value,canCreateDatabase:!1,size:"s",disabled:!f||_||i,onChange:v=>j.onChange(v)})})}),e.jsx(U,{label:lc.roleLabel,children:e.jsx(Pe,{name:"role",control:d,rules:{required:!0},render:({field:j})=>e.jsx(P0,{projectId:t,branchId:f,value:j.value,canCreateRole:!1,size:"s",disabled:!f||_||i,onChange:v=>j.onChange(v)})})})]}),e.jsxs("div",{className:Wh.vercelRow,children:[e.jsx(U,{label:lc.vercelProjectLabel,className:Wh.vercelProjectField,children:e.jsx(Pe,{name:"vercelProjectId",control:d,render:({field:{onChange:j,...v}})=>e.jsx(ct,{options:c,placeholder:lc.selectProjectPlaceholder,size:"s","aria-label":lc.vercelProjectLabel,...p("vercelProjectId",{required:!0}),onChange:y=>{j(y)},...v})})}),e.jsx(Ce,{disabled:_||!u.isValid,loading:i,children:i?"Connecting...":"Connect"})]})]})},WT={installVercelButton:"Install from Vercel Marketplace"},Yw={title:"Key Benefits",list:["Effectively preview changes before merging them into production","Enable your team to work independently on isolated database branches","When you push changes to your repository, the integration automatically creates a Neon branch for your preview deployment"]},Ane="_section_wddls_1",Nne={section:Ane},GT=()=>e.jsxs("div",{className:Nne.section,children:[e.jsx(Z,{level:5,children:Yw.title}),e.jsx("ul",{children:Yw.list.map(t=>e.jsxs("li",{children:[e.jsx("div",{children:e.jsx(z,{name:"check_flat",size:16})}),t]},t))})]}),oj=({label:t,deniedMessage:s,size:n="l",onClick:r,withIcon:a=!1,loading:o,appearance:i="primary",className:c})=>e.jsx(e.Fragment,{children:e.jsx(te,{content:s,placement:"bottom",disabled:o||!s,children:e.jsx("span",{children:e.jsx(E,{type:"submit",size:n,icon:a?"vercel_adaptive":void 0,appearance:i,onClick:r,disabled:!!s,className:c,loading:o,children:t})})})}),Ene="_form_1pkcv_1",One={form:Ene},$ne=()=>{const{trackUiInteraction:t}=P(),{projectId:s}=F(),{orgId:n}=re(),{token:r}=Pm(),{isAllowedToInstall:a,isCollaborator:o,isLoading:i}=nj(s);let c;a||(c=o?eo.installIntegrationOnSharedProjectNotAllowed:eo.installIntegrationNotAllowed);const l=n?`?org_id=${n}`:"",d=`${Tm}/projects/${s}/integrations/vercel${l}`;return e.jsxs(e.Fragment,{children:[e.jsxs(qt,{action:d,target:"_blank",method:"POST",className:One.form,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:r}),n&&e.jsx("input",{type:"hidden",name:"org_id",value:n}),e.jsx(oj,{label:WT.installVercelButton,deniedMessage:c,loading:i,withIcon:!0,onClick:()=>{t("vercel_account_integration_install_clicked")}})]}),e.jsx(Gc,{}),e.jsx(GT,{})]})},Lne="_text_dkj31_1",Rne="_varsList_dkj31_5",Mne="_varsListItem_dkj31_11",Bne="_varsListLabel_dkj31_15",Dne="_noteOverridden_dkj31_20",Une="_buttons_dkj31_24",Fne="_fields_dkj31_29",zne="_field_dkj31_29",jn={text:Lne,varsList:Rne,varsListItem:Mne,varsListLabel:Bne,noteOverridden:Dne,buttons:Une,fields:Fne,field:zne},qne=["DATABASE_URL","PGHOST","PGDATABASE","PGUSER","PGPASSWORD"],Hne=()=>{var b;const{projectId:t,project:s}=F(),n=RT({projectId:t}),r=m.useMemo(()=>{var x,j;return(j=(x=n.data)==null?void 0:x.branches)==null?void 0:j.find(v=>v.default)},[n.data]),{data:{selectOptions:a}}=D$({projectId:t,branchId:r==null?void 0:r.id}),{data:{selectOptions:o}}=ul({projectId:t,branchId:r==null?void 0:r.id}),i=qte({projectId:t}),[c,l]=m.useState(i.data??{});m.useEffect(()=>{l(i.data??{})},[i.data]);const d=m.useMemo(()=>vv([c])!==vv([i.data??{}]),[c,i.data]),u=m.useCallback(x=>{l(j=>j.vars===void 0?j:{...j,vars:JM(j.vars,v=>v.name===x,v=>({...v,value:!v.value}))})},[]),p=Hte({projectId:t},{onSuccess:()=>{Ue(e.jsx(rt,{children:"Vercel environment variables saved. Changes will apply to future deployments."}),{containerId:ci.Drawer})},onError:x=>{const j=`We couldn't save changes: ${U$(x)}`;Ue(e.jsx(ro,{children:j}))}}),h=m.useCallback(()=>{c.vars!==void 0&&p.mutate(c)},[c,p]),g=m.useCallback(()=>{l(i.data??{})},[i.data]),{trackUiInteraction:f}=P(),_=s==null?void 0:s.store_passwords;return e.jsx(e.Fragment,{children:_?e.jsxs(e.Fragment,{children:[e.jsxs(At,{title:"Vercel environment variables",children:[e.jsx("div",{className:jn.text,children:"Select the environment variables you need in your Vercel deployments."}),i.status==="error"?e.jsx(X,{appearance:"error",children:"Could not get Vercel environment variables settings"}):i.status==="pending"?e.jsx("ul",{className:jn.varsList,children:qne.map(x=>e.jsx("li",{className:jn.varsListItem,children:e.jsx(B,{height:24,width:`${x.length}em`})},x))}):e.jsx(e.Fragment,{children:e.jsx("ul",{className:jn.varsList,children:(b=c.vars)==null?void 0:b.map(x=>e.jsx("li",{className:jn.varsListItem,children:e.jsx(Xa,{checked:x.value,labelClassName:jn.varsListLabel,onChange:()=>u(x.name),disabled:p.isPending,children:x.name})},x.name))})})]}),e.jsxs(At,{title:"Default database and role",children:[e.jsx(T,{children:"Choose the database and role for every new branch created for Vercel Preview Deployments."}),e.jsxs("div",{className:jn.fields,children:[e.jsx(U,{label:"Database",className:jn.field,children:e.jsx(Za,{options:o,"data-qa":"vercel-database-select",value:o.find(({value:x})=>x===c.database),onChange:x=>{x&&l(j=>({...j,database:x.value}))}})}),e.jsx(U,{label:"Role",className:jn.field,children:e.jsx(Za,{options:a,"data-qa":"vercel-role-select",value:a.find(({value:x})=>x===c.role),onChange:x=>{x&&l(j=>({...j,role:x.value}))}})})]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"warning",className:jn.noteOverridden,children:"Existing variables with the same names will be overridden in Vercel."}),e.jsxs("div",{className:jn.buttons,children:[e.jsx(E,{"data-qa":"vercel_env_vars_cancel",appearance:"secondary",onClick:()=>{f("vercel_integration_env_vars_cancel_edit"),g()},disabled:p.isPending,children:"Cancel"}),e.jsx(E,{"data-qa":"vercel_env_vars_cancel",appearance:"primary",onClick:()=>{f("vercel_integration_env_vars_send_update"),h()},disabled:p.isPending,children:"Save changes"})]})]})]}):e.jsx($m,{integrationName:"Vercel",messageType:Lm.RemovalInstruction})})},Gh={title:"Remove connection",text:e.jsxs(e.Fragment,{children:["Removing this connection stops the automatic setting of environment variables only. It does not remove the integration itself. To fully remove the integration, you need to do so from Vercel project"," ",e.jsx(R,{href:lM,openInNewTab:!0,children:"Settings"}),"."]}),button:"Disconnect",success:"The integration was successfully disconnected"},Vne="_text_1764z_1",Wne={text:Vne},Gne=({onRemoveSuccess:t})=>{const{trackUiInteraction:s}=P(),{projectId:n}=F(),{disconnectProject:r}=kl(),a=Hu(),{confirm:o}=Ve(),i=()=>{Ue(e.jsx(rt,{children:Gh.success})),t()},c=async()=>{if(s("vercel_integration_revoke_click"),!await o({header:"Do you want to remove the connection?",text:e.jsx(X,{appearance:"error",children:"This will remove the connection with the Neon database. Are you sure you want proceed?"}),confirmButtonText:"Remove connection",appearance:"danger"})){s("vercel_integration_revoke_cancelled");return}s("vercel_integration_revoke_confirmed");try{await r(n),i(),await a.refetch()}catch(d){Y(d)}};return e.jsxs(At,{title:Gh.title,children:[e.jsx("div",{className:Wne.text,children:Gh.text}),e.jsx(E,{"data-qa":"vercel_disconnect",appearance:"secondary",onClick:c,children:Gh.button})]})},Jw={title:"Vercel integration"},Kne="_body_ug3sz_1",Qne={body:Kne},Yne=({onRemoveSuccess:t})=>{const[s,n]=m.useState($l[0].value),r=a=>{n(a)};return e.jsxs(e.Fragment,{children:[e.jsx(qn,{options:$l,value:s,onChange:r}),s===$l[0].value&&e.jsx(Sne,{}),s===$l[1].value&&e.jsx(Hne,{}),s===$l[2].value&&e.jsx(Gne,{onRemoveSuccess:t})]})},KT=({isOpen:t,onRequestClose:s,onRemoveSuccess:n,isInstalled:r=!1,isConfigured:a=!1,projectName:o})=>{const{project:i,isLoading:c}=F(),l=i==null?void 0:i.store_passwords;return e.jsx(ho,{"aria-label":Jw.title,title:Jw.title,subtitle:o,isOpen:t,onRequestClose:s,iconName:"vercel",coverImage:{x1:k0,x2:AT},children:a?e.jsx(Yne,{onRemoveSuccess:n}):e.jsxs("div",{className:Qne.body,children:[e.jsx(Z,{level:3,size:"h4",children:rg.integrationDescription}),!c&&!l&&e.jsx($m,{integrationName:"Vercel",messageType:Lm.SelectionPromptFull}),!c&&r&&e.jsx(Tne,{}),!c&&!r&&e.jsx($ne,{}),e.jsx(Gc,{}),e.jsx(aj,{}),e.jsx(Gc,{})]})})},Jne=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=P(),{isConfigured:r}=kl(),{openedDrawerId:a,closeDrawer:o}=co();return e.jsx(KT,{isOpen:a===gr.Vercel,onRequestClose:()=>{n(s?"vercel_integration_configured_settings_close":"vercel_integration_available_settings_close"),o()},onRemoveSuccess:()=>{o()},isInstalled:r,isConfigured:s})},Zne=({isOpen:t,onRequestClose:s,onRemoveSuccess:n})=>{const{project:r}=F();return e.jsx(KT,{isOpen:t,onRequestClose:s,onRemoveSuccess:n,isConfigured:!!r,projectName:r==null?void 0:r.name})},ij=({projectId:t})=>["getOuterbaseProject",t],QT=({projectId:t})=>bt({queryKey:ij({projectId:t}),queryFn:async()=>(await G.getOuterbaseProject(t)).data}),YT=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:["deleteProjectOuterbaseIntegration",t],mutationFn:async()=>(await G.deleteProjectOuterbaseIntegration(t)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:ij({projectId:t})}),a.invalidateQueries({queryKey:hs(t)}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Xne=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:["updateOuterbaseWorkspace",t],mutationFn:async o=>(await G.updateOuterbaseWorkspace(t,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:ij({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},dc={descriptionTitle:"Integration details",description:e.jsxs(e.Fragment,{children:["Use"," ",e.jsxs(R,{openInNewTab:!0,href:"https://app.outerbase.com",children:["Outerbase"," "]}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),howToAddTitle:"How to add",howToAdd:e.jsxs(e.Fragment,{children:["Connect your existing Outerbase account or"," ",e.jsxs(R,{openInNewTab:!0,href:"https://app.outerbase.com/signup/",children:["create a new one"," "]}),"before adding the integration."]}),button:"Add Outerbase",maxBasesExceededAlert:"Unable to add integration. The Outerbase free plan is limited to 1 base. Visit Outerbase for details."},ere="_text_6f26y_1",tre="_alert_6f26y_5",Zw={text:ere,alert:tre},sre=({isMaxBasesExceeded:t})=>{const{trackUiInteraction:s}=P(),{projectId:n,project:r}=F(),a=r==null?void 0:r.store_passwords,{token:o}=Pm();return e.jsxs(e.Fragment,{children:[e.jsx(At,{title:dc.descriptionTitle,children:dc.description}),a?e.jsxs(At,{title:dc.howToAddTitle,children:[e.jsx("div",{className:Zw.text,children:dc.howToAdd}),t&&e.jsx(X,{appearance:"error",className:Zw.alert,children:dc.maxBasesExceededAlert}),e.jsxs(qt,{action:`${Tm}/projects/${n}/applications/outerbase/auth`,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:o}),e.jsx(E,{"data-qa":"outerbase_sign_in",type:"submit",onClick:()=>s("outerbase_integration_sign_in_clicked"),children:dc.button})]})]}):e.jsx($m,{integrationName:"Outerbase",messageType:Lm.SelectionPromptFull})]})},JT=()=>{const{confirm:t}=Ve();return m.useCallback(()=>t({header:"Do you want to remove the integration?",text:e.jsx(X,{appearance:"error",children:"This will remove the connection with Neon. Are you sure you want to proceed?"}),confirmButtonText:"Remove integration",appearance:"danger"}),[t])},To={manageTitle:"Manage data",manageHint:t=>e.jsxs(e.Fragment,{children:["Use ",e.jsx(R,{href:t,children:"Outerbase "}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),manageButton:"Open this project in Outerbase",removalTitle:"Remove integration",removalHint:"Removing the integration will terminate all current connections.",removalButton:"Disconnect",success:"The integration was successfully disconnected"},nre="_text_10hm2_1",rre="_button_10hm2_5",kf={text:nre,button:rre},are=({projectId:t})=>{const{trackUiInteraction:s}=P(),n=QT({projectId:t}),{current_workspace_id:r,base_id:a}=n.data??{},o="https://app.outerbase.com",i=r&&a?`${o}/${r}/${a}`:o,{closeDrawer:c}=co(),l=YT({projectId:t},{onSuccess:()=>{c(),oe(To.success)}}),d=JT(),u=m.useCallback(async()=>{if(!await d()){s("outerbase_integration_remove_dismissed");return}s("outerbase_integration_remove_confirmed"),l.mutate()},[l,d,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(At,{title:To.manageTitle,children:[e.jsx("div",{className:kf.text,children:To.manageHint(i)}),e.jsx(E,{as:"a",href:i,appearance:"primary",className:kf.button,children:To.manageButton})]}),e.jsxs(At,{title:To.removalTitle,children:[e.jsx("div",{className:kf.text,children:To.removalHint}),e.jsx(E,{"data-qa":"outerbase_integraion_remove",appearance:"secondary",onClick:()=>{s("outerbase_integration_remove_clicked"),u()},children:To.removalButton})]})]})},Bp={title:"Outerbase integration",success:"Outerbase integration was successfully added.",deprecationWarning:e.jsxs("span",{children:["Outerbase integration is deprecated and will stop working after October 15, 2025.",e.jsx("br",{}),e.jsx(R,{openInNewTab:!0,href:"https://blog.cloudflare.com/cloudflare-acquires-outerbase-database-dx",children:"Learn more"})]})},ore="_deprecationWarning_s0gir_1",ire={deprecationWarning:ore},uc={title:"Select Outerbase workspace",fieldLabel:"Outerbase workspace",saveButton:"Save",cancelButton:"Cancel and disconnect",onSave:"The selected Outerbase workspace has been set.",onCancel:"The integration has been removed."},cre="_buttons_o7uz2_1",lre={buttons:cre},dre=({workspaces:t,projectId:s})=>{const{trackUiInteraction:n}=P(),[r,a]=m.useState(null),o=m.useMemo(()=>t.map(({id:h,name:g})=>h&&g?{value:h,label:g}:null).filter(q0),[t]),i=h=>{a(h)},c=Xne({projectId:s},{onSuccess:()=>oe(uc.onSave,{containerId:ci.Drawer})}),l=m.useCallback(()=>{r!=null&&r.value&&c.mutate({workspace_id:r.value})},[r==null?void 0:r.value,c]),d=YT({projectId:s},{onSuccess:()=>oe(uc.onCancel)}),u=JT(),p=async()=>{if(a(null),!await u()){n("outerbase_integration_remove_dismissed");return}n("outerbase_integration_remove_confirmed"),d.mutate()};return e.jsxs(At,{title:uc.title,children:[e.jsx(U,{label:uc.fieldLabel,id:"workspace-select",children:e.jsx(Za,{options:o,value:r,onChange:i,disabled:c.isPending})}),e.jsxs("div",{className:lre.buttons,children:[e.jsx(E,{appearance:"secondary",onClick:p,children:uc.cancelButton}),e.jsx(E,{onClick:l,disabled:r===null||c.isPending,children:uc.saveButton})]})]})},ure="_placeholder_1bbyz_1",hre="_buttons_1bbyz_8",Xw={placeholder:ure,buttons:hre},pre=()=>e.jsxs("div",{className:Xw.placeholder,children:[e.jsx(B,{height:24,width:186}),e.jsx(B,{height:20}),e.jsx(B,{height:34}),e.jsx(B,{height:40}),e.jsx(B,{height:48,width:260,className:Xw.buttons})]}),mre=({projectId:t})=>{const s=QT({projectId:t}),{current_workspace_id:n,workspaces:r}=s.data??{};return s.isLoading?e.jsx(pre,{}):e.jsxs("div",{children:[e.jsx(X,{className:ire.deprecationWarning,appearance:"info",children:Bp.deprecationWarning}),n?e.jsx(are,{projectId:t}):e.jsx(dre,{workspaces:r||[],projectId:t})]})},gre=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=P(),{projectId:r}=F(),{openedDrawerId:a,openDrawer:o,closeDrawer:i}=co(),[c,l]=m.useState(!1),d=()=>{n(s?"outerbase_integration_configured_settings_closed":"outerbase_integration_available_settings_closed"),i()};return m.useEffect(()=>{const u=decodeURIComponent(window.location.hash);u==="#outerbase_success"&&(window.history.replaceState(null,""," "),oe(Bp.success),o(gr.Outerbase)),u.startsWith("#outerbase_error")&&u.split("?")[1]==="max_bases_exceeded"&&(window.history.replaceState(null,""," "),l(!0),o(gr.Outerbase))},[o,l]),e.jsx(ho,{"aria-label":Bp.title,title:Bp.title,isOpen:a===gr.Outerbase,onRequestClose:d,iconName:"outerbase",coverImage:{x1:D_,x2:D_},children:s?e.jsx(mre,{projectId:r}):e.jsx(sre,{isMaxBasesExceeded:c})})},fre=()=>{Object.values(nte).forEach(t=>{const s=new Image;s.src=t})},_re="_root_1aujf_1",bre="_title_1aujf_11",eS={root:_re,title:bre},ad={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),e.jsx("br",{}),e.jsxs("ul",{children:[e.jsx("li",{children:"Installing the GitHub app and authorizing it."}),e.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),e.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),e.jsx("br",{}),e.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},xre="_section_gme4m_1",jre="_description_gme4m_7",If={section:xre,description:jre},vre=()=>{const{trackUiInteraction:t}=P(),{canManageIntegration:s}=sg();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:If.section,children:[e.jsx(Z,{level:3,children:ad.previewTitle}),e.jsx(T,{children:ad.previewDescription}),e.jsx(HT,{})]}),e.jsxs("div",{className:If.section,children:[e.jsx(Z,{level:3,children:ad.settingTitle}),e.jsx(T,{className:If.description,children:ad.settingDescription}),e.jsx(qT,{})]}),e.jsx(VT,{label:ad.installButton,onClick:()=>{t("github_account_integration_install_clicked")},disabled:!s,tooltip:eo.installIntegrationNotAllowed})]})},yre=(t,s)=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=P(),o=m.useCallback((c={})=>{r(!0),a(t,c)},[t,a]),i=m.useCallback((c={})=>{r(!1),a(s,c)},[s,a]);return[n,o,i]},wre=t=>t.split("/").at(0),Sre="_root_n29va_1",Cre="_name_n29va_7",tS={root:Sre,name:Cre},ZT=({repositoryFullName:t,analyticAction:s,showAvatar:n=!1})=>{const{trackUiInteraction:r}=P();return e.jsx(R,{href:`https://github.com/${t}`,openInNewTab:!0,onClick:()=>{r(s)},children:e.jsxs("div",{className:tS.root,children:[n&&e.jsx(Ou,{size:"s",image:`https://avatars.githubusercontent.com/${wre(t)}`}),e.jsx("span",{className:tS.name,children:t})]})})},Ud={title:"Accessible repositories",openSettingsButton:"Open GitHub Settings",moreButton:t=>`+ ${t} more`,modalTitle:"All accessible GitHub repositories",dismiss:"Dismiss"},kre="_root_1chur_1",Ire="_repoList_1chur_8",XT={root:kre,repoList:Ire},Pf=4,eA=({repositories:t})=>e.jsx("div",{className:XT.repoList,children:t.map(({id:s,full_name:n})=>n&&e.jsx(ZT,{repositoryFullName:n,showAvatar:!0,analyticAction:"github_account_integration_accessible_repositories_repository_link_clicked"},s))}),Pre=({isOpen:t,onRequestClose:s,title:n,repositories:r})=>e.jsxs(ft,{isOpen:t,onRequestClose:s,title:n,width:500,children:[e.jsx(De,{children:e.jsx(eA,{repositories:r})}),e.jsx(Te,{children:e.jsx(E,{size:"s",onClick:s,children:Ud.dismiss})})]}),Tre=()=>{const{trackUiInteraction:t}=P(),{repositories:s,installationId:n}=da(),[r,a,o]=yre("github_account_integration_accessible_repositories_modal_opened","github_account_integration_accessible_repositories_modal_closed"),{canManageIntegration:i}=sg();return s!=null&&s.length?e.jsxs(e.Fragment,{children:[e.jsx(Pre,{isOpen:r,onRequestClose:o,title:Ud.modalTitle,repositories:s}),e.jsxs("div",{className:XT.root,children:[e.jsx(Z,{level:4,children:Ud.title}),e.jsx(eA,{repositories:s.slice(0,Pf)}),s.length>Pf&&e.jsx(R,{onClick:a,children:Ud.moreButton(s.length-Pf)}),e.jsx(te,{content:eo.manageIntegrationNotAllowed,disabled:i,children:e.jsx("div",{children:e.jsx(E,{as:Ge,appearance:"secondary",size:"s",href:`https://github.com/settings/installations/${n}`,openInNewTab:!0,disabled:!i,onClick:()=>{t("github_account_integration_accessible_repositories_settings_link_clicked")},children:Ud.openSettingsButton})})})]})]}):null},Are="_root_1l38s_1",Nre="_title_1l38s_11",Ere="_repository_1l38s_17",Ore="_repositoryLabel_1l38s_24",Kh={root:Are,title:Nre,repository:Ere,repositoryLabel:Ore},Nc={repository:"Repository",project:"Project",disconnectButton:"Disconnect",success:"The GitHub repository was successfully disconnected",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButtonText:"Disconnect"},$re=({onDisconnect:t,disabled:s=!1,tooltip:n})=>{const{trackUiInteraction:r}=P(),{confirm:a}=Ve(),[o,i]=m.useState(!1),c=async()=>{try{if(!await a({header:Nc.confirmTitle,text:Nc.confirmText,appearance:"danger",confirmButtonText:Nc.confirmButtonText})){r("github_account_integration_connected_project_disconnect_dismissed");return}r("github_account_integration_connected_project_disconnect_confirmed"),i(!0),await t(),oe(Nc.success)}catch(l){Y(l)}finally{i(!1)}};return e.jsx(te,{content:n,disabled:!s,children:e.jsx("span",{children:e.jsx(E,{appearance:"secondary",size:"s",disabled:o||s,onClick:async()=>{r("github_account_integration_connected_project_disconnect_clicked"),await c()},children:Nc.disconnectButton})})})},Lre=({projectId:t,projectName:s,onDisconnect:n})=>{const{connectedRepositoryFullName:r,isLoading:a}=FT(t);return a?null:e.jsxs("div",{className:Kh.root,children:[e.jsx(Z,{level:5,className:Kh.title,children:s}),e.jsxs("div",{className:Kh.repository,children:[e.jsx("div",{className:Kh.repositoryLabel,children:Nc.repository}),r&&e.jsx(ZT,{analyticAction:"github_account_integration_connected_project_repository_link_clicked",repositoryFullName:r})]}),e.jsx($re,{onDisconnect:n(t)})]})},Rre="_root_srlr5_1",Mre={root:Rre},Bre=({connectedProjectsId:t})=>{const{disconnectRepository:s}=da(),{data:n}=ws(),r=m.useMemo(()=>(n==null?void 0:n.filter(({id:o})=>t.includes(o)).map(({id:o,name:i})=>({projectId:o,projectName:i})))||[],[n,t]),a=o=>async()=>{await s({projectId:o})};return r.length?e.jsx("div",{className:Mre.root,children:r.map(({projectId:o,projectName:i})=>e.jsx(Lre,{projectName:i,projectId:o,onDisconnect:a},o))}):null},vn={title:t=>`Connect ${t?"another ":""}project`,success:"The GitHub repository was successfully connected",projectLabel:"Neon project",repositoryLabel:"GitHub repository",required:"This field is required.",connectButton:"Connect",disabledProjectTooltip:"This project is already connected",disabledRepoTooltip:"This repository is already connected",connectedBadge:"Connected"},Dre="_root_1rm1v_1",Ure="_connectForm_1rm1v_7",Fre="_connectFormButton_1rm1v_13",Tf={root:Dre,connectForm:Ure,connectFormButton:Fre},zre=({connectedProjectsId:t})=>{var g,f;const{trackUiInteraction:s}=P(),{data:n}=ws(),{repositories:r,connectRepository:a,isConnecting:o}=da(),i=m.useMemo(()=>(r==null?void 0:r.map(({id:_=0,name:b="",installed:x=!1})=>({value:_,label:b,disabled:x,disabledTooltip:vn.disabledRepoTooltip,suffix:x&&e.jsx(Ie,{appearance:"warning",children:vn.connectedBadge})})))??[],[r]),c=m.useMemo(()=>(n==null?void 0:n.map(({id:_,name:b})=>({value:_,label:b,disabled:t.includes(_),disabledTooltip:vn.disabledProjectTooltip,suffix:t.includes(_)&&e.jsx(Ie,{appearance:"warning",children:vn.connectedBadge})})))??[],[n,t]),l=$e(),{formState:{errors:d},setValue:u}=l,p=()=>{u("projectId",void 0),u("repositoryId",void 0),oe(vn.success)},h=async _=>{try{const{projectId:b,repositoryId:x}=_;if(!(b&&x))return;await a({projectId:b,repositoryId:x}),p()}catch(b){Y(b)}};return e.jsxs("div",{className:Tf.root,children:[e.jsx(Z,{level:4,children:vn.title(!!t.length)}),e.jsxs(es,{providerProps:l,onSubmit:h,formBodyClassName:Tf.connectForm,children:[e.jsx(U,{label:vn.projectLabel,error:(g=d.projectId)==null?void 0:g.message,children:e.jsx(Pe,{name:"projectId",rules:{required:{value:!0,message:vn.required}},control:l.control,render:({field:{onChange:_,...b}})=>e.jsx(ct,{options:c,filterable:!0,disabled:o,onChange:x=>{s("github_account_integration_connect_project_project_selected"),_(x)},...b})})}),e.jsx(U,{label:vn.repositoryLabel,error:(f=d.repositoryId)==null?void 0:f.message,children:e.jsx(Pe,{name:"repositoryId",rules:{required:{value:!0,message:vn.required}},control:l.control,render:({field:{onChange:_,...b}})=>e.jsx(ct,{options:i,filterable:!0,disabled:o,onChange:x=>{s("github_account_integration_connect_project_repository_selected"),_(x)},...b})})}),e.jsx("div",{className:Tf.connectFormButton,children:e.jsx(Ce,{size:"l",loading:o,onClick:()=>{s("github_account_integration_connect_project_clicked")},children:vn.connectButton})})]})]})},Ao={title:"Remove integration",description:"Removing the integration from this account will also disconnect it from all projects.",removeButton:"Remove",confirmationTitle:"Remove GitHub app?",confirmationDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"GitHub app is globally configured for each Neon account."}),e.jsx("p",{children:"When GitHub app is removed all integrated workflows across all projects will be disconnected, API keys and secrets will be removed and configured workflows will stop working."})]}),confirmButton:"Remove GitHub app",success:"The GitHub app was uninstalled"},qre="_root_1ghmn_1",Hre={root:qre},Vre=()=>{const{trackUiInteraction:t}=P(),{confirm:s}=Ve(),{removeApp:n,isRemoving:r}=da(),a=async()=>{try{if(!await s({appearance:"danger",header:Ao.confirmationTitle,text:Ao.confirmationDescription,confirmButtonText:Ao.confirmButton})){t("github_account_integration_remove_dismissed");return}t("github_account_integration_remove_confirmed"),await n(void 0),oe(Ao.success)}catch(o){Y(o)}};return e.jsxs("div",{className:Hre.root,children:[e.jsx(Z,{level:4,children:Ao.title}),e.jsx(T,{children:Ao.description}),e.jsx(E,{appearance:"danger",size:"s",loading:r,onClick:async()=>{t("github_account_integration_remove_clicked"),await a()},children:Ao.removeButton})]})},Wre=()=>{const{data:t,isLoading:s}=xP({enabled:!0}),n=Object.entries(t||{}).filter(([,a])=>a.includes("github")).map(([a])=>a),{canManageIntegration:r}=sg();return s?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[e.jsx(Bre,{connectedProjectsId:n}),e.jsx(zre,{connectedProjectsId:n}),e.jsx(Tre,{}),r&&e.jsx(Vre,{})]})},tA=({headingId:t})=>{const{isInstalled:s,isLoading:n}=da();return n?e.jsx(ve,{}):e.jsxs("div",{className:eS.root,children:[e.jsx(Z,{id:t,level:2,className:eS.title,children:"GitHub"}),s?e.jsx(Wre,{}):e.jsx(vre,{})]})},sA=(t,s,n,r)=>{m.useEffect(()=>{if(!n)return;const a=setInterval(t,s);return()=>clearInterval(a)},[n,s,...r])},Gre=({onSuccess:t})=>{const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=be(),[a,o]=m.useState(!1);return sA(async()=>{const i=hs(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),_e({mutationFn:({apiKey:i,site:c,metrics:l,logs:d})=>G.addProjectDatadogIntegration(s,{api_key:i,site:c,metrics:l,logs:d}),onMutate:()=>n("datadog_integration_connect"),onError:i=>Y(i),onSuccess:(i,c)=>{r.setQueryData(hs(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs,exportStats:void 0}})),o(!0),t()}})},Kre=({onSuccess:t})=>{const{trackUiInteraction:s}=P(),{projectId:n}=F(),r=be();return _e({mutationFn:()=>G.deleteProjectDatadogIntegration(n),onMutate:()=>s("datadog_integration_disconnect"),onError:a=>Y(a),onSuccess:()=>{r.setQueryData(hs(n),a=>a&&{...a,datadog:void 0}),t()}})},Qre=({onSuccess:t})=>{const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=be(),[a,o]=m.useState(!1);return sA(async()=>{const i=hs(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),_e({mutationFn:({metrics:i,logs:c})=>G.updateProjectDatadogIntegration(s,{metrics:i,logs:c}),onMutate:()=>n("datadog_integration_update"),onError:i=>Y(i),onSuccess:(i,c)=>{r.setQueryData(hs(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs,exportStats:void 0}})),o(!0),t()}})},Yre=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},nA=t=>({appearance:Yre(t),label:Gt.badge.label(t)}),Jre="_statusWrapper_76nrj_1",Zre="_section_76nrj_9",Xre="_footer_76nrj_15",eae="_footerGroup_76nrj_23",Qh={statusWrapper:Jre,section:Zre,footer:Xre,footerGroup:eae},tae=({projectId:t,configuration:s,onRequestClose:n,...r})=>{var _,b;const a=ln({projectId:t}),o=(_=a==null?void 0:a.data)==null?void 0:_.endpoints.some(x=>x.current_state!=="active"),i=$e({defaultValues:{site:s.site,apiKey:"",metrics:s.metrics,logs:s.logs}}),c=Kre({onSuccess:n}),l=Qre({onSuccess:n}),{confirm:d}=Ve(),u=m.useCallback(()=>{d({header:Gt.disconnectConfirmationTitle,text:Gt.disconnectConfirmationDescription,confirmButtonText:Gt.disconnectButton}).then(x=>x?c.mutate():null)},[d,c]),p=m.useCallback(x=>l.mutate(x),[l]),h=c.isPending||l.isPending,g=T0(i),f=nA(s.status);return e.jsx(ho,{footer:e.jsxs("div",{className:Qh.footer,children:[e.jsx(E,{appearance:"secondary",onClick:u,disabled:h,loading:h,children:Gt.disconnectButton}),e.jsxs("div",{className:Qh.footerGroup,children:[e.jsx(E,{appearance:"secondary",onClick:n,children:Gt.cancelButton}),e.jsx(E,{appearance:"primary",disabled:g||h,onClick:()=>i.handleSubmit(p)(),children:Gt.confirmButton})]})]}),onRequestClose:n,...r,children:e.jsxs(At,{className:Qh.section,children:[e.jsx(T,{children:Gt.form.intro}),o&&e.jsx(X,{appearance:"warning",children:Gt.inactiveComputesWarning}),e.jsxs("div",{className:Qh.statusWrapper,children:[e.jsx(U,{label:Gt.form.site.label,children:((b=A0.find(x=>x.site===s.site))==null?void 0:b.name)??"unknown"}),e.jsx(U,{label:Gt.form.apiKey.label,children:Gt.form.apiKey.configured}),e.jsx(U,{label:Gt.badge.statusLabel,children:e.jsx(Bn,{appearance:f.appearance,size:"s",label:f.label})})]}),e.jsx(N0,{form:i,onSubmit:p,projectId:t,disabled:h,apiKeyConfigured:!0})]})})},sae="_section_179oe_1",nae={section:sae},rae=({onRequestClose:t,projectId:s,...n})=>{const r=$e({defaultValues:{site:A0[0].site,apiKey:"",metrics:!0,logs:!0}}),a=Gre({onSuccess:t}),o=m.useCallback(c=>a.mutate(c),[a]),i=T0(r);return e.jsx(ho,{footer:e.jsxs(e.Fragment,{children:[e.jsx(E,{appearance:"secondary",onClick:t,children:Gt.cancelButton}),e.jsx(E,{onClick:()=>r.handleSubmit(o)(),disabled:i,loading:a.status==="pending",children:Gt.confirmButton})]}),onRequestClose:t,...n,children:e.jsxs(At,{className:nae.section,children:[e.jsx(T,{children:Gt.form.intro}),e.jsx(N0,{form:r,onSubmit:o,projectId:s})]})})},aae=({configuration:t,projectId:s})=>{const n=zx().datadog,{openedDrawerId:r,closeDrawer:a}=co(),{trackUiInteraction:o}=P(),i=m.useCallback(()=>{o(t?"datadog_integration_configured_settings_close":"datadog_integration_available_settings_close"),a()},[a,t,o]),c=r===gr.Datadog,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":Gt.label,title:Gt.title,iconName:"datadog"};return t?e.jsx(tae,{...l,projectId:s,configuration:t}):e.jsx(rae,{...l,projectId:s})},Oe={cancelButton:"Cancel",disconnectButton:"Disconnect",saveButton:"Save",continueAnywayButton:"Continue anyway",label:"OpenTelemetry Integration",title:"OpenTelemetry",disconnectConfirmationTitle:"Confirm",disconnectConfirmationDescription:"Are you sure you want to disconnect OpenTelemetry integration?",badge:{statusLabel:"Status",status:t=>e.jsxs(e.Fragment,{children:["Status: ",t]}),label:t=>{switch(t){case"disabled":return"Disabled";case"error":return"Error";case"pending":return"Pending";case"running":return"Active"}}},inactiveComputesWarning:"There are inactive computes on the project, no data for them will be visible on your OpenTelemetry backend until they are activated.",form:{intro:"Send metrics and events from your Neon project to your OpenTelemetry backend.",export:{header:"Telemetry to export",metrics:"Metrics",logs:"Postgres logs",atLeastOneRequired:"At least one export option must be selected."},connection:{header:"Connection",grpc:{label:"GRPC"},http:{label:"HTTP"},endpoint:{label:"Endpoint",placeholder:"Enter your endpoint"},configured:"Configured",authHeader:"Authentication"},telemetry:{endpointOverride:{description:"Override endpoints",metrics:"Metrics endpoint",metricsPlaceholder:"Enter your metrics endpoint",logs:"Logs endpoint",logsPlaceholder:"Enter your logs endpoint"}},resource:{header:"Resource attributes",key:"service.name",value:"Enter value (Optional)"}}},oae=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},iae=t=>({appearance:oae(t),label:Oe.badge.label(t)}),cae="_statusWrapper_1ko1o_1",lae="_section_1ko1o_9",dae="_footer_1ko1o_15",uae="_footerGroup_1ko1o_21",Yh={statusWrapper:cae,section:lae,footer:dae,footerGroup:uae};function pm(t){return{connection:{protocol:t.connection.protocol,endpoint:t.connection.endpoint,authentication:{bearer_token:t.connection.authentication.bearerToken?{token:t.connection.authentication.bearerToken}:void 0,basic:t.connection.authentication.basic?{username:t.connection.authentication.basic.username,password:t.connection.authentication.basic.password}:void 0,api_key:t.connection.authentication.apiKey?{key:t.connection.authentication.apiKey}:void 0}},telemetry:{types:[...t.telemetry.types.metrics_enabled?["metrics"]:[],...t.telemetry.types.logs_enabled?["logs"]:[]],metrics_endpoint_override:(t.telemetry.metrics_endpoint_override??"").length>0?t.telemetry.metrics_endpoint_override:void 0,logs_endpoint_override:(t.telemetry.logs_endpoint_override??"").length>0?t.telemetry.logs_endpoint_override:void 0},resource:t.resourceAttributes?{attributes:t.resourceAttributes}:{}}}const rA=(t,s,n,r)=>{m.useEffect(()=>{if(!n)return;const a=setInterval(t,s);return()=>clearInterval(a)},[n,s,...r])};function hae(t){var s,n;return"response"in t&&t.response?((s=t.response.data)==null?void 0:s.code)??((n=t.response.status)==null?void 0:n.toString()):"code"in t&&t.code?t.code:String(t)}const rl=t=>Xr(t)&&hae(t)==="OPENTELEMETRY_INTEGRATION_VALIDATION_FAILED",pae=({onSuccess:t})=>{const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=be(),[a,o]=m.useState(!1);return rA(async()=>{const i=hs(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),_e({mutationFn:({skipValidation:i,...c})=>{const{connection:l,telemetry:d,resource:u}=pm(c);return G.addProjectOpentelemetryIntegration(s,{connection:l,telemetry:d,resource:u,skip_validation:i})},onMutate:()=>n("opentelemetry_integration_connect"),onError:i=>{rl(i)||Y(i)},onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=pm(c);r.setQueryData(hs(s),p=>({...p,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending",exportStats:void 0}})),o(!0),t()}})},mae=({onSuccess:t})=>{const{trackUiInteraction:s}=P(),{projectId:n}=F(),r=be();return _e({mutationFn:()=>G.deleteProjectOpentelemetryIntegration(n),onMutate:()=>s("opentelemetry_integration_disconnect"),onError:a=>Y(a),onSuccess:()=>{r.setQueryData(hs(n),a=>a&&{...a,opentelemetry:void 0}),t()}})},gae=({onSuccess:t})=>{const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=be(),[a,o]=m.useState(!1);return rA(async()=>{const i=hs(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),_e({mutationFn:({skipValidation:i,...c})=>{const{telemetry:l,resource:d}=pm(c);return G.updateProjectOpentelemetryIntegration(s,{telemetry:l,resource:d,skip_validation:i})},onMutate:()=>n("opentelemetry_integration_update"),onError:i=>{rl(i)||Y(i)},onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=pm(c);r.setQueryData(hs(s),p=>({...p,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending",exportStats:void 0}})),o(!0),t()}})},is={header:"Authentication",bearer:{header:"Bearer",label:"Bearer Token",tokenPlaceholder:"Enter your bearer token",description:"Use a short-lived token typically issued by an identity provider. Best for secure, time-bounded access."},basic:{header:"Basic",usernameLabel:"Username",usernamePlaceholder:"Enter your username",passwordLabel:"Password",passwordPlaceholder:"Enter your password",description:"Authenticate with a username and password. Mostly used for legacy systems and internal tools."},apiKey:{header:"API Key",label:"API Key",keyPlaceholder:"Enter your API key",description:"Use a static key tied to your account or project. Simple to manage, but less secure if exposed."}},fae="_message_5tcdx_1",Af={message:fae},_ae=()=>{const{control:t,watch:s,register:n}=Ct(),r=s("connection.authentication"),a=(r==null?void 0:r.bearerToken)!==void 0,o=(r==null?void 0:r.apiKey)!==void 0,i=(r==null?void 0:r.basic)!==void 0;return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:5,children:is.header}),e.jsx(Pe,{name:"connection.authentication",control:t,render:({field:c})=>e.jsxs($u,{children:[e.jsx(mr,{active:a,onClick:()=>c.onChange({bearerToken:c.value.bearerToken||""}),children:is.bearer.header}),e.jsx(mr,{active:i,onClick:()=>{var l,d;return c.onChange({basic:{username:((l=c.value.basic)==null?void 0:l.username)||"",password:((d=c.value.basic)==null?void 0:d.password)||""}})},children:is.basic.header}),e.jsx(mr,{active:o,onClick:()=>c.onChange({apiKey:c.value.apiKey||""}),children:is.apiKey.header})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Af.message,children:is.bearer.description}),e.jsx(U,{label:is.bearer.label,children:e.jsx(ie,{...n("connection.authentication.bearerToken",{required:!0}),type:"password",placeholder:is.bearer.tokenPlaceholder})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Af.message,children:is.basic.description}),e.jsx(U,{label:is.basic.usernameLabel,children:e.jsx(ie,{...n("connection.authentication.basic.username",{required:!0}),placeholder:is.basic.usernamePlaceholder})}),e.jsx(U,{label:is.basic.passwordLabel,children:e.jsx(ie,{...n("connection.authentication.basic.password",{required:!0}),type:"password",placeholder:is.basic.passwordPlaceholder})})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Af.message,children:is.apiKey.description}),e.jsx(U,{label:is.apiKey.label,children:e.jsx(ie,{...n("connection.authentication.apiKey",{required:!0}),type:"password",placeholder:is.apiKey.keyPlaceholder})})]})]})},bae=()=>{const{control:t,register:s}=Ct();return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:5,children:Oe.form.connection.header}),e.jsx(Pe,{name:"connection.protocol",control:t,render:({field:n})=>e.jsxs($u,{children:[e.jsx(mr,{active:n.value==="grpc",onClick:()=>n.onChange("grpc"),children:Oe.form.connection.grpc.label}),e.jsx(mr,{active:n.value==="http",onClick:()=>n.onChange("http"),children:Oe.form.connection.http.label})]})}),e.jsx(U,{label:Oe.form.connection.endpoint.label,children:e.jsx(ie,{...s("connection.endpoint",{required:!0}),placeholder:Oe.form.connection.endpoint.placeholder})})]})},xae=()=>{const{setValue:t,watch:s,register:n,getValues:r}=Ct(),a=s("telemetry.metrics_endpoint_override"),o=s("telemetry.logs_endpoint_override"),[i,c]=m.useState(!!(a||o)),l=()=>{c(d=>(d&&(t("telemetry.metrics_endpoint_override",void 0),t("telemetry.logs_endpoint_override",void 0)),!d))};return e.jsxs(e.Fragment,{children:[e.jsx(as,{isSelected:i,onChange:l,children:Oe.form.telemetry.endpointOverride.description}),i&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:Oe.form.telemetry.endpointOverride.metrics,children:e.jsx(ie,{...n("telemetry.metrics_endpoint_override"),placeholder:Oe.form.telemetry.endpointOverride.metricsPlaceholder,defaultValue:r("telemetry.metrics_endpoint_override")??""})}),e.jsx(U,{label:Oe.form.telemetry.endpointOverride.logs,children:e.jsx(ie,{...n("telemetry.logs_endpoint_override"),placeholder:Oe.form.telemetry.endpointOverride.logsPlaceholder,defaultValue:r("telemetry.logs_endpoint_override")??""})})]})]})},jae="_section_d3g1d_1",vae="_divider_d3g1d_7",hc={section:jae,divider:vae},yae=()=>{const{control:t}=Ct();return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:5,children:Oe.form.resource.header}),e.jsx(Pe,{name:"resourceAttributes",control:t,render:({field:{value:s={},onChange:n,...r}})=>e.jsxs(fu,{fullWidth:!1,children:[e.jsx(U,{children:e.jsx(ie,{...r,placeholder:Oe.form.resource.key,disabled:!0})}),e.jsx(U,{children:e.jsx(ie,{...r,placeholder:Oe.form.resource.value,onChange:a=>{const o=a.target.value;n(o?{[Oe.form.resource.key]:o}:void 0)},defaultValue:(s==null?void 0:s[Oe.form.resource.key])??""})})]})})]})},wae="_checkboxLabel_ugzm3_1",Sae="_checkboxGroup_ugzm3_5",Nf={checkboxLabel:wae,checkboxGroup:Sae},Cae=()=>{const{control:t,trigger:s}=Ct();return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:5,children:Oe.form.export.header}),e.jsx(Pe,{name:"telemetry.types",control:t,rules:{validate:n=>!n.metrics_enabled&&!n.logs_enabled?Oe.form.export.atLeastOneRequired:!0},render:({fieldState:n})=>e.jsxs("div",{className:Nf.checkboxGroup,children:[e.jsx(Pe,{name:"telemetry.types.metrics_enabled",control:t,render:({field:r})=>{var a;return e.jsx(U,{error:!!((a=n.error)!=null&&a.message),children:e.jsx(Xa,{...r,value:"metrics",checked:r.value,labelClassName:Nf.checkboxLabel,onChange:o=>{r.onChange(o.target.checked),s("telemetry.types")},children:Oe.form.export.metrics})})}}),e.jsx(Pe,{name:"telemetry.types.logs_enabled",control:t,render:({field:r})=>{var a;return e.jsx(U,{error:(a=n.error)==null?void 0:a.message,children:e.jsxs(Xa,{...r,value:"logs",checked:r.value,labelClassName:Nf.checkboxLabel,onChange:o=>{r.onChange(o.target.checked),s("telemetry.types")},children:[Oe.form.export.logs," ",e.jsx(Ie,{appearance:"experimental",size:"m",margin:"left",children:"Beta"})]})})}})]})})]})},aA=({form:t,projectId:s,onSubmit:n,otelConfigured:r=!1,shouldShowValidationError:a})=>{var d,u;const i=((d=ln({projectId:s}).data)==null?void 0:d.endpoints.filter(p=>p.compute_release_version&&Number(p.compute_release_version)<8320))??[],{branchesById:c}=Bu({projectId:s}),l=t.watch("telemetry");return e.jsxs(qt,{onSubmit:t.handleSubmit(n),id:"opentelemetry-form",gaps:!0,children:[e.jsx("div",{className:hc.section,children:e.jsx(Cae,{})}),e.jsx("div",{className:hc.divider}),!r&&e.jsx("div",{className:hc.section,children:e.jsx(bae,{})}),e.jsx("div",{className:hc.section,children:e.jsx(xae,{})}),!r&&e.jsx("div",{className:hc.section,children:e.jsx(_ae,{})}),e.jsx("div",{className:hc.section,children:e.jsx(yae,{})}),i.length>0&&((u=l==null?void 0:l.types)==null?void 0:u.logs_enabled)&&e.jsx(dM,{outdatedComputes:i,branchesById:c}),a&&e.jsx(X,{appearance:"warning",title:"Authentication validation failed",children:'Please check your configuration or press "Continue anyway".'})]})},kae=({projectId:t,configuration:s,onRequestClose:n,...r})=>{var b,x;const a=ln({projectId:t}),o=(b=a==null?void 0:a.data)==null?void 0:b.endpoints.some(j=>j.current_state!=="active"),i=$e({defaultValues:{connection:{protocol:s.connection.protocol,endpoint:s.connection.endpoint,authentication:{}},telemetry:{types:{metrics_enabled:s.telemetry.types.includes("metrics"),logs_enabled:s.telemetry.types.includes("logs")},metrics_endpoint_override:s.telemetry.metrics_endpoint_override,logs_endpoint_override:s.telemetry.logs_endpoint_override},resourceAttributes:(x=s.resource)==null?void 0:x.attributes}}),{reset:c}=i,l=mae({onSuccess:n}),d=gae({onSuccess:n}),u=rl(d.error)&&!i.formState.isDirty,{confirm:p}=Ve(),h=m.useCallback(()=>{p({header:Oe.disconnectConfirmationTitle,text:Oe.disconnectConfirmationDescription,confirmButtonText:Oe.disconnectButton}).then(j=>j?l.mutate():null)},[p,l]),g=m.useCallback(j=>{try{d.mutate({...j,skipValidation:u})}catch(v){rl(v)&&c(j,{keepValues:!0})}},[d,c,u]),f=l.isPending||d.isPending,_=iae(s.status);return e.jsx(Jt,{...i,children:e.jsx(ho,{footer:e.jsxs("div",{className:Yh.footer,children:[e.jsx(E,{appearance:"secondary",onClick:h,disabled:f,loading:f,children:Oe.disconnectButton}),e.jsxs("div",{className:Yh.footerGroup,children:[e.jsx(E,{appearance:"secondary",onClick:n,children:Oe.cancelButton}),e.jsx(Ce,{appearance:"primary",disabled:f||!i.formState.isValid,formId:"opentelemetry-form",children:u?Oe.continueAnywayButton:Oe.saveButton})]})]}),onRequestClose:n,...r,children:e.jsxs(At,{className:Yh.section,children:[e.jsx(T,{children:Oe.form.intro}),o&&e.jsx(X,{appearance:"warning",children:Oe.inactiveComputesWarning}),e.jsxs("div",{className:Yh.statusWrapper,children:[e.jsx(Qc,{appearance:"secondary",content:s.connection.endpoint,maxWidth:200}),e.jsx(U,{label:Oe.form.connection.authHeader,children:Oe.form.connection.configured}),e.jsx(U,{label:Oe.badge.statusLabel,children:e.jsx(Bn,{appearance:_.appearance,size:"s",label:_.label})})]}),e.jsx(aA,{form:i,onSubmit:g,projectId:t,otelConfigured:!0,shouldShowValidationError:u})]})})})},Iae="_section_179oe_1",Pae={section:Iae},Tae=({onRequestClose:t,projectId:s,...n})=>{const r=$e({defaultValues:{connection:{protocol:"http",endpoint:"",authentication:{bearerToken:""}},telemetry:{types:{metrics_enabled:!0,logs_enabled:!0}}}}),{reset:a}=r,o=pae({onSuccess:t}),i=rl(o.error)&&!r.formState.isDirty,c=m.useCallback(async l=>{try{await o.mutateAsync({...l,skipValidation:i})}catch(d){rl(d)&&a(l,{keepValues:!0})}},[o,a,i]);return e.jsx(Jt,{...r,children:e.jsx(ho,{footer:e.jsxs(e.Fragment,{children:[e.jsx(E,{appearance:"secondary",onClick:t,children:Oe.cancelButton}),e.jsx(Ce,{appearance:"primary",disabled:!r.formState.isValid,formId:"opentelemetry-form",children:i?Oe.continueAnywayButton:Oe.saveButton})]}),onRequestClose:t,...n,children:e.jsxs(At,{className:Pae.section,children:[e.jsx(T,{children:Oe.form.intro}),e.jsx(aA,{form:r,onSubmit:c,projectId:s,shouldShowValidationError:i})]})})})},Aae=({projectId:t,configuration:s})=>{const n=zx().opentelemetry,{openedDrawerId:r,closeDrawer:a}=co(),{trackUiInteraction:o}=P(),i=m.useCallback(()=>{o(s?"opentelemetry_integration_configured_settings_close":"opentelemetry_integration_available_settings_close"),a()},[a,s,o]),c=r===gr.Opentelemetry,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":Oe.label,title:Oe.title,iconName:"opentelemetry"};return s?e.jsx(kae,{...l,projectId:t,configuration:s}):e.jsx(Tae,{...l,projectId:t})},Nae=()=>{const{trackUiInteraction:t}=P(),{orgId:s}=re(),{token:n}=Pm(),{isAllowedToInstall:r,isLoading:a}=nj(),o=s?`?org_id=${s}`:"",i=`${Tm}/integrations/vercel${o}`;return e.jsxs(e.Fragment,{children:[e.jsxs(qt,{action:i,target:"_blank",method:"post",children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:n}),e.jsx(oj,{label:WT.installVercelButton,deniedMessage:r?void 0:eo.installIntegrationNotAllowed,loading:a,withIcon:!0,onClick:()=>{t("vercel_account_integration_install_clicked")}})]}),e.jsx(Gc,{}),e.jsx(GT,{}),e.jsx(Gc,{}),e.jsx(aj,{})]})},Eae={title:"Vercel"},Oae="_root_pru2u_1",$ae="_header_pru2u_11",Lae="_title_pru2u_17",Ef={root:Oae,header:$ae,title:Lae},pc={title:"Vercel integrations",neonProjectHeader:"Neon project",vercelProjectHeader:"Vercel project",openSettingsButton:"Open settings"},Rae="_card_fn2g0_1",Mae="_column_fn2g0_10",Of={card:Rae,column:Mae},Bae=({projects:t,onSettingsOpen:s})=>{if(t.length<=3)return t.map(r=>e.jsxs("div",{className:Of.card,"data-qa":"project-card",children:[e.jsxs("div",{className:Of.column,children:[e.jsx(T,{appearance:"secondary",children:pc.neonProjectHeader}),e.jsx(R,{href:Q(aD.ProjectsItem,{projectId:r.neon_project_id}),appearance:"primary",children:r.neon_project_name})]}),e.jsxs("div",{className:Of.column,children:[e.jsx(T,{appearance:"secondary",children:pc.vercelProjectHeader}),r.url?e.jsx(R,{href:r.url,appearance:"primary",openInNewTab:!0,children:r.name}):e.jsxs(T,{children:[" ",r.name]})]}),e.jsx(E,{size:"s",appearance:"secondary",onClick:()=>s(r),children:pc.openSettingsButton})]},r.id));const n=[{id:"neon_project_name",header:pc.neonProjectHeader,enableSorting:!0,rowHeader:!0,accessorKey:"neon_project_name"},{id:"vercel_project_name",header:pc.vercelProjectHeader,enableSorting:!0,accessorKey:"name"},{id:"settings",size:62,render:r=>e.jsx(ms,{iconName:"edit","data-qa":"open-settings",onClick:()=>s(r)})}];return e.jsx(Cs,{columns:n,getRowId:r=>r.id,isLoading:!1,rows:t,"aria-label":pc.title,defaultSorting:{column:"neon_project_name",direction:"ascending"}})},Js={neonProjectLabel:"Neon project",vercelProjectLabel:"Vercel project",roleLabel:"Role",databaseLabel:"Database",selectProjectPlaceholder:"Select project",connectedBadge:"Connected",connectButton:"Connect",connectingButton:"Connecting..."},Dae="_form_1j4vy_1",Uae="_neonSection_1j4vy_6",Fae="_roleAndDatabaseRow_1j4vy_16",zae="_vercelSection_1j4vy_26",qae="_compareIcon_1j4vy_33",Hae="_vercelProjectField_1j4vy_39",Vae="_connectButton_1j4vy_43",No={form:Dae,neonSection:Uae,roleAndDatabaseRow:Fae,vercelSection:zae,compareIcon:qae,vercelProjectField:Hae,connectButton:Vae},Wae=({configurationId:t,projects:s,vercelProjects:n})=>{const r=m.useMemo(()=>n.map(S=>S.neon_project_id).filter(q0),[n]),a=m.useMemo(()=>s.map(S=>({value:S.id,label:S.name,disabled:r.includes(S.id),suffix:r.includes(S.id)&&e.jsx(Ie,{appearance:"warning",children:Js.connectedBadge})})),[r,s]),{connectedVercelProjectIds:o,connectProjectAsync:i,isLoading:c,isConnecting:l}=kl(),d=m.useMemo(()=>n.map(S=>({value:S.id,label:S.name,disabled:o.includes(S.id),suffix:o.includes(S.id)&&e.jsx(Ie,{appearance:"warning",children:Js.connectedBadge})})),[o,n]),u=$e({defaultValues:{neonProjectId:""}}),{control:p,watch:h,formState:g,register:f}=u,_=h("neonProjectId"),{branches:b,isLoading:x}=Wb(_),j=m.useMemo(()=>{var S;return(S=b==null?void 0:b.find(w=>w.default))==null?void 0:S.id},[b]),v=m.useMemo(()=>c||x,[c,x]),y=m.useCallback(async S=>{if(j)try{await i({...S,configurationId:t,projectId:S.neonProjectId,branchId:j}),u.reset(),oe(rg.projectConnectedWithSuccess)}catch(w){Y(w)}},[t,i,j,u]);return e.jsxs(es,{providerProps:u,onSubmit:y,className:No.form,children:[e.jsxs("div",{className:No.neonSection,children:[e.jsx(U,{label:Js.neonProjectLabel,children:e.jsx(Pe,{name:"neonProjectId",control:p,render:({field:{onChange:S,...w}})=>e.jsx(ct,{options:a,placeholder:Js.selectProjectPlaceholder,size:"s","aria-label":Js.neonProjectLabel,disabled:l,...f("neonProjectId",{required:!0}),onChange:k=>{S(k)},...w})})}),_&&e.jsxs("div",{className:No.roleAndDatabaseRow,children:[e.jsx(U,{label:Js.databaseLabel,children:e.jsx(Pe,{name:"database",control:p,rules:{required:!0},render:({field:S})=>e.jsx(I0,{projectId:_,branchId:j,value:S.value,canCreateDatabase:!1,size:"s","data-qa":"database-select",disabled:!j||v||l,onChange:w=>S.onChange(w)})})}),e.jsx(U,{label:Js.roleLabel,children:e.jsx(Pe,{name:"role",control:p,rules:{required:!0},render:({field:S})=>e.jsx(P0,{projectId:_,branchId:j,value:S.value,canCreateRole:!1,size:"s","data-qa":"role-select",disabled:!j||v||l,onChange:w=>S.onChange(w)})})})]})]}),e.jsxs("div",{className:No.vercelSection,children:[e.jsx("div",{className:No.compareIcon,children:e.jsx(z,{name:"compare",size:20})}),e.jsx(U,{label:Js.vercelProjectLabel,className:No.vercelProjectField,children:e.jsx(Pe,{name:"vercelProjectId",control:p,render:({field:{onChange:S,...w}})=>e.jsx(ct,{options:d,placeholder:Js.selectProjectPlaceholder,size:"s","aria-label":Js.vercelProjectLabel,disabled:l,...f("vercelProjectId",{required:!0}),onChange:k=>{S(k)},...w})})}),e.jsx("div",{className:No.connectButton,children:e.jsx(Ce,{disabled:v||!g.isValid,loading:l,children:l?Js.connectingButton:Js.connectButton})})]})]})},yn={connectedProjectsTitle:"Connected projects",connectAnotherProjectTitle:"Connect another project",removeIntegrationTitle:"Remove integration",removeIntegrationDescription:"Removing the integration from this account will also disconnect it from all projects.",removeIntegrationButton:"Remove",confirmRemoveIntegrationTitle:"Remove Vercel integration?",confirmRemoveIntegrationDescription:{common:"Vercel is globally configured for Neon account.",personal:"When the Vercel integration is removed, all Neon projects on this account connected to Vercel counterparts will be disconnected.",org:"When the Vercel integration is removed, all Neon projects on this organization connected to Vercel counterparts will be disconnected."},confirmRemoveIntegrationButton:"Remove Vercel integration",removeIntegrationSuccess:"The Vercel integration was removed"},Gae="_projectsSection_1hd1s_1",Kae="_removeIntegrationSection_1hd1s_7",Qae="_removeIntegrationHeader_1hd1s_13",Jh={projectsSection:Gae,removeIntegrationSection:Kae,removeIntegrationHeader:Qae},Yae=({configurationId:t,projects:s})=>{const{projects:n,removeIntegration:r,isRemoving:a}=kl(),{confirm:o}=Ve(),{orgId:i}=re(),{isAllowedToInstall:c,isLoading:l}=nj(),d=s&&s.length>0,u=n&&n.length>0,p=n==null?void 0:n.filter(b=>b.neon_project_id),h=p&&p.length>0,g=m.useCallback(async()=>{try{if(!await o({appearance:"danger",header:yn.confirmRemoveIntegrationTitle,text:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:yn.confirmRemoveIntegrationDescription.common}),e.jsx("p",{children:i?yn.confirmRemoveIntegrationDescription.org:yn.confirmRemoveIntegrationDescription.personal})]}),confirmButtonText:yn.confirmRemoveIntegrationButton}))return;await r(),oe(yn.removeIntegrationSuccess)}catch(b){Y(b)}},[o,i,r]),[f,_]=m.useState();return e.jsxs(e.Fragment,{children:[f&&e.jsx(Vb,{projectId:f.neon_project_id,children:e.jsx(Zne,{isOpen:!0,onRequestClose:()=>_(void 0),onRemoveSuccess:()=>{_(void 0)}})}),h&&e.jsxs("section",{className:Jh.projectsSection,children:[e.jsx(Z,{level:5,children:yn.connectedProjectsTitle}),e.jsx(Bae,{projects:p,onSettingsOpen:_})]}),d&&u&&e.jsxs("div",{className:Jh.projectsSection,children:[e.jsx(Z,{level:3,children:yn.connectAnotherProjectTitle}),e.jsx(Wae,{configurationId:t,projects:s,vercelProjects:n})]}),e.jsx(aj,{}),e.jsxs("section",{className:Jh.removeIntegrationSection,children:[e.jsxs("div",{className:Jh.removeIntegrationHeader,children:[e.jsx(Z,{level:5,children:yn.removeIntegrationTitle}),e.jsx(T,{children:yn.removeIntegrationDescription})]}),e.jsx("div",{children:e.jsx(oj,{size:"s",appearance:"danger",label:yn.removeIntegrationButton,deniedMessage:c?void 0:eo.removeIntegrationNotAllowed,onClick:g,loading:l||a})})]})]})},oA=({headingId:t})=>{const{isConfigured:s,configurationId:n,isLoading:r}=kl(),{data:a,isLoading:o}=ws();return r||o?e.jsx(ve,{}):e.jsxs("div",{className:Ef.root,children:[e.jsxs("div",{className:Ef.header,children:[e.jsx(Z,{id:t,level:2,className:Ef.title,children:Eae.title}),e.jsx(Z,{level:3,size:"h4",children:rg.integrationDescription})]}),s&&n?e.jsx(Yae,{configurationId:n,projects:a}):e.jsx(Nae,{})]})},cj=({onChange:t,projectId:s,...n})=>{const{trackUiInteraction:r}=P(),{project:a}=F(),{branch:o}=at(),i=Hs({projectId:s,branchId:(o==null?void 0:o.id)??""}),c=m.useMemo(()=>{var d;return[...((d=i.data)==null?void 0:d.endpoints)??[]].sort(tx)},[i.data]),l=m.useCallback((d,u)=>{u||r("endpoint_select_value_changed"),t(d,u)},[t,r]);return!o||!a?null:e.jsx(sx,{...n,onChange:l,endpoints:c,loading:i.isLoading})},$f={refresh:"Refresh",database:"Database",compute:"Compute"},Jae="_container_65vuw_1",Zae="_group_65vuw_7",Xae="_select_65vuw_13",od={container:Jae,group:Zae,select:Xae},eoe=()=>{const{selectOptions:t}=un(),[s,n]=Sl(),{branch:r}=at();return{databaseOption:m.useMemo(()=>t.find(o=>o.value===s&&o.database.branch_id===(r==null?void 0:r.id)),[s,t,r==null?void 0:r.id]),setDatabaseName:n}},iA=({onRefresh:t,refreshDisabled:s,children:n})=>{const{projectId:r}=F(),{databaseOption:a,setDatabaseName:o}=eoe(),[i,c]=Xm();return e.jsxs("div",{className:od.container,children:[e.jsxs("div",{className:od.group,children:[e.jsx(U,{label:$f.compute,children:e.jsx(cj,{size:"s",projectId:r,className:od.select,endpointId:i??void 0,onChange:l=>c(l==null?void 0:l.id),disabled:!i})}),e.jsx(U,{label:$f.database,children:e.jsx(Rm,{size:"s",className:od.select,value:a,canCreateDatabase:!1,onChange:l=>o(l==null?void 0:l.value),disabled:!a})})]}),e.jsxs("div",{className:od.group,children:[n,e.jsx(E,{appearance:"secondary",icon:"reset",onClick:t,disabled:s,children:$f.refresh})]})]})},cA=()=>{const{projectId:t}=F(),s=ln({projectId:t}),[n]=Xm(),r=m.useMemo(()=>{var a;return(a=s.data)==null?void 0:a.endpoints.find(o=>o.id===n)},[s.data,n]);return(r==null?void 0:r.current_state)==="active"&&(r==null?void 0:r.pending_state)===void 0},su={empty:"No active queries",ariaLabel:"Active queries",columnPID:"PID",columnQuery:"Query",columnDuration:"Duration"},toe="_container_1m7d0_1",soe="_placeholder_1m7d0_7",sS={container:toe,placeholder:soe},noe=Et({pid:tn(),duration:vx.number().transform(t=>parseFloat(t.toFixed(1))),query:nt()}),lA="useActiveQueries",jb="duration",dA="descending",uA={column:jb,direction:dA},roe=t=>{const s=new Set(["pid","duration"]),n=t.column??jb,r=(s.has(n)?n:jb).toString(),a=(t.direction??dA)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:a}},aoe=(t,s=uA)=>{const n=Wu(),{sortKey:r,sortDirection:a}=roe(s),{data:o,isPending:i,refetch:c,error:l}=ca({queryKey:{key:[lA,r,a],appendConnectionString:!0},query:`
SELECT
       pid,
       EXTRACT(EPOCH FROM (now() - pg_stat_activity.query_start)) * 1000 AS duration,
       query
  FROM pg_stat_activity
 WHERE state = 'active'
   AND pid <> pg_backend_pid()
   AND datid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
   ORDER BY ${r} ${a}
   LIMIT 100;`,zodSchema:noe,options:{enabled:t&&!!(n!=null&&n.database.name)}});return{queries:o,isPending:i,refetch:c,error:l}},ooe=()=>{const t=be(),s=Cl();return _e({mutationFn:async n=>{if(!s)throw new Error("Missing connection data");return _x(s)(`SELECT pg_terminate_backend(${n})`)},onSuccess:()=>t.invalidateQueries({queryKey:[lA]})})},ioe={title:"Cancel query"},coe=()=>{const{isPending:t,mutate:s,error:n}=ooe(),{trackUiInteraction:r}=P();return m.useEffect(()=>{n&&Y(n)},[n]),m.useCallback(a=>[{label:ioe.title,onClick:()=>{r("monitoring_page_active_queries_cancel_query_clicked",{cancelled_after_ms:a.duration}),s(a.pid)},disabled:t,icon:"cross_small"}],[t,r,s])},loe=[{accessorKey:"pid",header:su.columnPID,rowHeader:!0,enableSorting:!0,size:80,render:t=>t.pid},{accessorKey:"duration",header:su.columnDuration,enableSorting:!0,size:120,render:t=>Vp({total_duration_ms:t.duration})},{accessorKey:"query",header:su.columnQuery,render:t=>e.jsx("code",{children:t.query})}],doe=()=>{const t=cA(),s=coe(),[n,r]=m.useState(uA),{queries:a,isPending:o,refetch:i,error:c}=aoe(t,n);m.useEffect(()=>{c&&Y(c)},[c]);const{trackUiInteraction:l}=P(),d=m.useCallback(h=>{!h.column||!h.direction||(l("monitoring_page_active_queries_order_changed",{column:h.column,direction:h.direction}),r(h))},[l]),u=m.useCallback(()=>{l("monitoring_page_active_queries_refresh_clicked"),i()},[l,i]),p=!t||!(a!=null&&a.length);return e.jsxs("div",{className:sS.container,children:[e.jsx(iA,{onRefresh:u,refreshDisabled:o}),p?e.jsx("div",{className:sS.placeholder,children:e.jsx(Fu,{title:su.empty})}):e.jsx(Cs,{columns:loe,rows:a,sorting:n,onSortingChange:d,"aria-label":su.ariaLabel,isLoading:o,rowActions:s})]})},uoe=()=>{const{project:t}=F();return t?e.jsx(doe,{}):e.jsx(ve,{})},hA="range",hoe=t=>{switch(t.type){case"period":return`p:${t.period}`;case"custom":return`c:${t.fromDate.valueOf()}-${t.toDate.valueOf()}`}},nS=t=>{const s=new Date(Number(t));if(!Number.isNaN(s.valueOf()))return s},pA=t=>{if(!t)return;if(t.startsWith("p:")){const[o]=t.slice(2).split("+");return o in F$?{type:"period",period:o,fromDate:new Date}:void 0}if(!t.startsWith("c:"))return;const[s,n]=t.slice(2).split("-"),r=nS(s),a=nS(n);if(!(!r||!a))return{type:"custom",fromDate:r,toDate:a}},poe=()=>{const[t,s]=Un(hA),n=m.useCallback(r=>s(hoe(r)),[s]);return[pA(t),n]},nu={restartCompute:"Restart compute",cacheHitRestartAlert:"Displaying this metric requires a one-time compute restart.",monitoringRestartAlert:"Restart your compute to enable additional metrics. A compute restart drops current database connections.",customTimeRangeAlert:(t,s)=>e.jsxs(e.Fragment,{children:["Showing metrics for custom period"," ",e.jsx(Ae,{children:fe(t,ke.Full)})," to"," ",e.jsx(Ae,{children:fe(s,ke.Full)})]}),customTimeRangeAlertResetButton:"Reset"},mA=({endpoint:t,children:s,className:n})=>{const{trackUiInteraction:r}=P(),a=m.useCallback(async()=>{try{await G.restartProjectEndpoint(t.project_id,t.id)}catch(c){Y(c)}},[t]),o=t.pending_state==="active",i=yr(m.useMemo(()=>({exclusive:{endpoints:[t.id]},shared:{projects:[t.project_id],branches:[t.branch_id]}}),[t.branch_id,t.id,t.project_id]));return e.jsx(X,{className:n,action:e.jsx(lo,{lockedMessage:i,children:e.jsx(R,{disabled:o||!!i,onClick:()=>{r("monitoring_page_restart_compute_clicked"),a()},children:nu.restartCompute})}),children:s})},moe=5213,goe=5227,gA=(t,s)=>Number(t)<s,foe="_alert_1w83a_1",_oe={alert:foe},Lf=[0,.2,.4,.6,.8,1],rS=["lfc_hit_rate"],boe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:rS}),d=Lf[Lf.length-1],u=m.useMemo(()=>i?Sr(i,rS,{metric:"lfc_hit_rate",scale:d},!0):[],[i,d]),p=gA(s.compute_release_version,goe);return e.jsx(pn,{title:"Local file cache hit rate",loading:c,isError:l,children:p?e.jsx(mA,{endpoint:s,className:_oe.alert,children:nu.cacheHitRestartAlert}):e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:u,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"lfc_hit_rate",allowDecimals:!0,tickFormatter:z$,axisLine:!1,ticks:Lf,domain:["dataMin","dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"lfc_hit_rate",name:Ze.lfc_hit_rate,stroke:"var(--glow-color-dataviz-blue-2)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}lfc_hit_rate`,name:Ze.lfc_hit_rate,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Um,{children:"Percentage"})})]})})})},lj=t=>t.map(s=>s??0),xoe=t=>{const s=t.reduce((o,i)=>Math.max(o,...lj(i.values)),0),n=pu(Math.ceil(s/Qp)||1),r=Math.ceil(Number(n.amount)),a=H$(`${r}${n.units}`);return Array.from({length:Qp+1},(o,i)=>i*a)},dj=(t,s=1)=>{const n=t.reduce((a,o)=>Math.max(a,...lj(o.values)),0),r=[];for(const a of q$)if(r.push(a),a*s>=n)break;return[0,...r.map(a=>a*s)]},Ku=t=>{const s=t.reduce((r,a)=>Math.max(r,...lj(a.values)),0),n=Math.ceil(s/Qp)||1;return Array.from({length:Qp+1},(r,a)=>a*n)},Zh=["connection_counts_active","connection_counts_idle","connection_counts_total","connection_counts_max"],joe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set([...Zh,Be.EndpointInactive])),{data:l,isFetching:d,isError:u}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:Zh}),p=m.useMemo(()=>l?Ku(l.data):[0],[l]),h=p[p.length-1],g=m.useMemo(()=>l?Sr(l,Zh,{metric:"connection_counts_total",scale:h},!0):[],[l,h]);return e.jsx(pn,{title:"Connections count",loading:d,isError:u,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"connection_counts_total",allowDecimals:!0,tickFormatter:f=>`${f}`,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],hide:!i.has(Be.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_idle",name:Ze.connection_counts_idle,hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_active",name:Ze.connection_counts_active,hide:!i.has("connection_counts_active"),stroke:"var(--glow-color-dataviz-blue-2)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_total",name:Ze.connection_counts_total,hide:!i.has("connection_counts_total"),stroke:"var(--glow-color-dataviz-blue-2)"}),e.jsx(pt,{type:"step",dot:!1,dataKey:"connection_counts_max",name:Ze.connection_counts_max,hide:!i.has("connection_counts_max"),stroke:"var(--glow-color-dataviz-orange-2)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}connection_counts_idle`,name:Ze.connection_counts_idle,legendType:"none",hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}connection_counts_active`,name:Ze.connection_counts_active,legendType:"none",hide:!i.has("connection_counts_active"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}connection_counts_total`,name:Ze.connection_counts_total,legendType:"none",hide:!i.has("connection_counts_total"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}connection_counts_max`,name:Ze.connection_counts_max,legendType:"none",hide:!i.has("connection_counts_max"),stroke:"var(--glow-color-dataviz-orange-2)",strokeDasharray:"3 3"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:f=>e.jsx(_l,{payload:f.payload,legendOrder:Zh,onLegendToggle:_=>{c(b=>{const x=new Set(b);return b.has(_)?x.delete(_):x.add(_),x})}})})]})})})},aS=["cpu_consumed_cores","cpu_provisioned_cores"],Rf={cpu_consumed_cores:"Used",cpu_provisioned_cores:"Allocated"},voe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:aS}),d=m.useMemo(()=>i?dj(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,aS,{metric:"cpu_provisioned_cores",scale:u},!0):[],[i,u]);return e.jsx(pn,{title:"CPU",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[e.jsx(kr,{dataKey:"cpu_provisioned_cores",allowDecimals:!0,tickFormatter:Tp,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(ys,{type:"step",dot:!1,dataKey:"cpu_provisioned_cores",name:Rf.cpu_provisioned_cores,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"cpu_consumed_cores",name:Rf.cpu_consumed_cores,stroke:"var(--glow-color-dataviz-blue-2)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}cpu_consumed_cores`,name:Rf.cpu_consumed_cores,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:h=>e.jsx(_l,{prefix:"Compute Units",payload:h.payload})})]})})})},Xh=["database_size","databases_total_size"],yoe=["var(--glow-color-dataviz-blue-2)","var(--glow-color-dataviz-green)","var(--glow-color-dataviz-orange)","var(--glow-color-dataviz-orange-2)","var(--glow-color-dataviz-red)","var(--glow-color-dataviz-red-2)","var(--glow-color-dataviz-green-2)","var(--glow-color-dataviz-purple-2)","var(--glow-color-dataviz-purple)","var(--glow-color-dataviz-olive)"],woe="var(--glow-color-dataviz-blue)";function Soe(t){return yoe[t]??"var(--glow-color-icon-default)"}const Coe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set(Xh)),{data:l,isFetching:d,isError:u}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:Xh}),p=m.useMemo(()=>l?xoe(l.data):[0],[l]),h=p[p.length-1],g=pu(h).units,{chartData:f,metrics:_}=m.useMemo(()=>{if(!l)return{chartData:[],metrics:[]};const b=ek(l,"database_size","datname");return c(new Set([...b,...Xh,Be.EndpointInactive])),{metrics:b,chartData:Sr(l,Xh,{metric:"databases_total_size",scale:h},!1,"datname")}},[l,h]);return e.jsx(pn,{title:"Database size",loading:d,isError:u,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:f,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"databases_total_size",allowDecimals:!0,tickFormatter:b=>pu(b,g).amount,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),e.jsxs(e.Fragment,{children:[e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],hide:!i.has(Be.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),_.map((b,x)=>e.jsx(pt,{type:"monotone",dot:!1,dataKey:b,unit:"bytes",name:b,hide:!i.has(b),stroke:Soe(x)},b))]}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"databases_total_size",name:Ze.databases_total_size,hide:!i.has("databases_total_size"),stroke:woe}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:b=>e.jsx(_l,{payload:b.payload,prefix:KC(g),onLegendToggle:x=>{c(j=>{const v=new Set(j);return j.has(x)?v.delete(x):v.add(x),v})}})})]})})})},oS=["deadlocks"],koe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:oS}),d=m.useMemo(()=>i?Ku(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,oS,{metric:"deadlocks",scale:u}):[],[i,u]);return e.jsx(pn,{title:"Deadlocks",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[e.jsx(kr,{dataKey:"deadlocks",allowDecimals:!0,tickFormatter:h=>`${h}`,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(V$,{type:"monotone",dataKey:"deadlocks",name:Ze.deadlocks,fill:"var(--glow-color-dataviz-blue-2)",minPointSize:.5}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Um,{children:"Count"})})]})})})},iS=["ram_provisioned_bytes","ram_consumed_bytes","ram_cached_bytes"],ep={ram_consumed_bytes:"Used",ram_provisioned_bytes:"Allocated",ram_cached_bytes:"Cached"},Ioe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:iS}),d=m.useMemo(()=>i?dj(i.data,QC):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,iS,{metric:"ram_provisioned_bytes",scale:u},!0):[],[i,u]);return e.jsx(pn,{title:"RAM",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[e.jsx(kr,{tickFormatter:h=>Fr(h,0),axisLine:!1,ticks:d}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(ys,{type:"step",dot:!1,dataKey:"ram_provisioned_bytes",name:ep.ram_provisioned_bytes,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),e.jsx(ys,{type:"monotone",dot:!1,dataKey:"ram_consumed_bytes",name:ep.ram_consumed_bytes,stroke:"var(--glow-color-dataviz-blue-2)",fill:"var(--glow-color-dataviz-blue-2)",stackId:"ram-usage",fillOpacity:.25}),e.jsx(ys,{type:"monotone",dot:!1,dataKey:"ram_cached_bytes",name:ep.ram_cached_bytes,stroke:"var(--glow-color-dataviz-green-2)",fill:"var(--glow-color-dataviz-green-2)",stackId:"ram-usage",fillOpacity:.25}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}ram_consumed_bytes`,name:ep.ram_consumed_bytes,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:h=>e.jsx(_l,{prefix:"Gigabytes",payload:h.payload})})]})})})},cS=["replication_delay_bytes"],Poe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:cS},{skip:br(s)}),d=m.useMemo(()=>i?Ku(i.data):[0],[i]),u=d[d.length-1],p=pu(u).units,h=m.useMemo(()=>i?Sr(i,cS,{metric:"replication_delay_bytes",scale:u}):[],[i,u]);return e.jsx(pn,{title:"Replication delay bytes",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:h,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"replication_delay_bytes",allowDecimals:!0,tickFormatter:g=>pu(g,p).amount,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"replication_delay_bytes",name:Ze.replication_delay_bytes,stroke:"var(--glow-color-dataviz-orange-2)"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Um,{children:KC(p)})})]})})})},lS=["replication_delay_seconds"],Toe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:lS},{skip:br(s)}),d=m.useMemo(()=>i?Ku(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,lS,{metric:"replication_delay_seconds",scale:u}):[],[i,u]);return e.jsx(pn,{title:"Replication delay seconds",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"replication_delay_seconds",allowDecimals:!0,tickFormatter:h=>km(h).highestValue.toString(),axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"replication_delay_seconds",name:Ze.replication_delay_seconds,stroke:"var(--glow-color-dataviz-orange-2)"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Um,{children:"Seconds"})})]})})})},tp=["rows_inserted","rows_updated","rows_deleted"],Aoe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set([...tp,Be.EndpointInactive])),{data:l,isFetching:d,isError:u}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:tp}),p=m.useMemo(()=>l?Ku(l.data):[0],[l]),h=p[p.length-1],g=m.useMemo(()=>l?Sr(l,tp,{metric:"rows_inserted",scale:h},!0):[],[l,h]);return e.jsx(pn,{title:"Rows",loading:d,isError:u,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:20},children:[e.jsx(kr,{dataKey:"rows_inserted",allowDecimals:!0,tickFormatter:W$,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],hide:!i.has(Be.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_deleted",name:Ze.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_updated",name:Ze.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--glow-color-dataviz-blue-2)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_inserted",name:Ze.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--glow-color-dataviz-green)"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}rows_deleted`,name:Ze.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}rows_updated`,name:Ze.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Be.EndpointInactiveMetricLine}rows_inserted`,name:Ze.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:f=>e.jsx(_l,{prefix:"Count",payload:f.payload,legendOrder:tp,onLegendToggle:_=>{c(b=>{const x=new Set(b);return b.has(_)?x.delete(_):x.add(_),x})}})})]})})})},Noe=["var(--glow-color-dataviz-green)","var(--glow-color-dataviz-blue-2)","var(--glow-color-dataviz-purple-2)"];function Eoe(t){return t.sort((s,n)=>{let r=parseInt(s.slice(0,-1),10),a=parseInt(n.slice(0,-1),10);return s.endsWith("h")&&(r*=60),n.endsWith("h")&&(a*=60),r-a}),t}const dS=["working_set_size","lfc_max_size"],Ooe=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=Vn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:dS}),[d,u]=m.useState(()=>new Set),p=m.useMemo(()=>i?dj(i.data,QC):[0],[i]),h=p[p.length-1],{chartData:g,metrics:f}=m.useMemo(()=>i?{metrics:Eoe(ek(i,"working_set_size","duration")),chartData:Sr(i,dS,{metric:"lfc_max_size",scale:h},!1,"duration")}:{chartData:[],metrics:[]},[i,h]);return e.jsx(pn,{title:"Working set size",loading:c,isError:l,children:e.jsx(jr,{fallback:e.jsx(ve,{}),children:e.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:30},children:[e.jsx(kr,{tickFormatter:_=>Fr(_,0),axisLine:!1,ticks:p}),e.jsx(ys,{type:"monotone",connectNulls:!1,dataKey:Be.EndpointInactive,name:Ze[Be.EndpointInactive],stroke:"none",hide:d.has(Be.EndpointInactive),fill:"url(#dash-pattern)"}),f.map((_,b)=>e.jsx(pt,{type:"monotone",dot:!1,dataKey:_,name:_,unit:"bytes",stroke:Noe[b],hide:d.has(_)},_)),e.jsx(pt,{type:"monotone",dot:!1,dataKey:"lfc_max_size",name:"Local file cache size",stroke:"var(--glow-color-dataviz-orange-2)",hide:d.has("lfc_max_size")}),e.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:_=>e.jsx(_l,{prefix:"Duration",payload:_.payload,onLegendToggle:b=>{u(x=>{const j=new Set(x);return j.has(b)?j.delete(b):j.add(b),j})}})})]})})})},$oe="_container_10300_1",Loe="_settings_10300_10",Roe="_label_10300_16",mc={container:$oe,settings:Loe,label:Roe},Moe=({endpoint:t,project:s})=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=P();return e.jsx(pn,{title:"Compute settings",children:e.jsxs("div",{className:mc.container,children:[e.jsx(uo,{isOpen:n,mode:"edit",project:s,endpoint:t,onRequestClose:()=>r(!1)}),e.jsxs("div",{className:mc.settings,children:[Wp(t)&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:"Min",labelClassName:mc.label,children:e.jsx(T,{children:Mn(t.autoscaling_limit_min_cu)})}),e.jsx(U,{label:"Max",labelClassName:mc.label,children:e.jsx(T,{children:Mn(t.autoscaling_limit_max_cu)})})]}),!Wp(t)&&e.jsx(U,{label:"Size",labelClassName:mc.label,children:e.jsx(T,{children:Mn(t.autoscaling_limit_max_cu)})}),e.jsx(U,{label:"Autosuspend delay",labelClassName:mc.label,children:e.jsx(T,{children:Vx(t.suspend_timeout_seconds)})})]}),e.jsx(E,{appearance:"secondary",onClick:()=>{r(!0),a("monitoring_page_edit_endpoint_clicked")},children:"Edit endpoint"})]})})},Boe="_charts_wgcns_1",Doe="_chartsRow_wgcns_7",Uoe="_withAutoscaling_wgcns_13",Eo={charts:Boe,chartsRow:Doe,withAutoscaling:Uoe},Foe="_widget_sspse_1",zoe="_container_sspse_6",qoe="_features_sspse_14",Hoe="_icon_sspse_30",sp={widget:Foe,container:zoe,features:qoe,icon:Hoe},Voe=[{title:"14 days of metrics retention",iconName:"graph_gradient"},{title:"Up to 10 vCPU and 40 GB of memory",iconName:"written_data_gradient"},{title:"Autoscale to match demand",iconName:"compute_size_autoscale_gradient"},{title:"Scale to zero during periods of inactivity",iconName:"autosuspend_gradient"}],Woe=()=>{const{trackUiInteraction:t}=P(),{billingUrl:s,isLoading:n}=so();return e.jsx(pn,{className:sp.widget,height:"100%",children:e.jsxs("div",{className:sp.container,children:[e.jsx(Z,{level:6,children:"Paid plan features:"}),e.jsx("ul",{className:sp.features,children:Voe.map(({title:r,iconName:a})=>e.jsxs("li",{children:[e.jsx("div",{className:sp.icon,children:a&&e.jsx(z,{name:a,size:16})}),e.jsx(T,{appearance:"primary",children:r})]},r))}),e.jsx(E,{as:Ge,href:s,disabled:n,appearance:"secondary",onClick:()=>{t("monitoring_page_paid_features_widget_upgrade_clicked")},children:"Upgrade to a paid plan"})]})})},Goe=({project:t,...s})=>{const{isFreeSubscription:n}=he(),{isOwnProject:r}=F(),{endpoint:a}=s,{range:o,resetRange:i}=YC(),c=gA(a.compute_release_version,moe),l=r&&n;return e.jsxs("div",{className:Eo.charts,children:[o.type==="custom"&&e.jsx(X,{action:e.jsx(R,{noWrap:!0,onClick:()=>i(),children:nu.customTimeRangeAlertResetButton}),children:nu.customTimeRangeAlert(o.fromDate,o.toDate)}),c&&e.jsx(mA,{endpoint:a,children:nu.monitoringRestartAlert}),e.jsxs("div",{className:V(Eo.chartsRow,Eo.withAutoscaling),children:[l?e.jsx(Woe,{}):e.jsx(Moe,{endpoint:a,project:t}),e.jsx(Ioe,{projectId:t.id,...s}),e.jsx(voe,{projectId:t.id,...s})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Eo.chartsRow,children:[e.jsx(joe,{projectId:t.id,...s}),e.jsx(Coe,{projectId:t.id,...s})]}),br(a)&&e.jsxs("div",{className:Eo.chartsRow,children:[e.jsx(koe,{projectId:t.id,...s}),e.jsx(Aoe,{projectId:t.id,...s})]}),e.jsxs("div",{className:Eo.chartsRow,children:[e.jsx(boe,{projectId:t.id,...s}),e.jsx(Ooe,{projectId:t.id,...s})]}),!br(a)&&e.jsxs("div",{className:Eo.chartsRow,children:[e.jsx(Poe,{projectId:t.id,...s}),e.jsx(Toe,{projectId:t.id,...s})]})]})]})},uS={datadogStatusAlert:t=>{switch(t){case"disabled":return"Datadog export is disabled.";case"error":return"Datadog export is in error state.";case"pending":return"Datadog export is pending.";case"running":return"Datadog export status OK."}},manageIntegrationButton:"Manage integration"},Koe="_root_5kbca_1",Qoe="_controls_5kbca_7",Yoe="_selectors_5kbca_14",Joe="_dropdown_5kbca_19",Zoe="_timeSelectorContainer_5kbca_23",id={root:Koe,controls:Qoe,selectors:Yoe,dropdown:Joe,timeSelectorContainer:Zoe},Xoe=(t,s)=>{switch(t.type){case"period":return s.type!==t.type?!1:t.fromDate.valueOf()===s.fromDate.valueOf()&&t.period===s.period;case"custom":return s.type!==t.type?!1:t.fromDate.valueOf()===s.fromDate.valueOf()&&t.toDate.valueOf()===s.toDate.valueOf()}},eie=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"info";case"running":return"success"}},tie=()=>{var j;const{trackUiInteraction:t}=P(),{project:s,projectId:n}=F(),{selectOptions:r,isLoading:a}=xt(),{branch:o}=at(),i=o==null?void 0:o.id,{range:c}=YC(),[l,d]=poe();m.useEffect(()=>{(!l||!Xoe(l,c))&&d(c)},[c,l,d]);const u=Hs({projectId:n,branchId:i??""}),p=m.useMemo(()=>{var v;return((v=u.data)==null?void 0:v.endpoints)??[]},[u.data]),[h,g]=Xm(),f=m.useMemo(()=>p.find(v=>v.id===h),[p,h]),_=m.useMemo(()=>r.find(v=>v.value===i),[r,i]),b=Jm(),x=Hu();return!s||a||!_?e.jsx(ve,{}):e.jsxs("div",{className:id.root,children:[(j=x.data)!=null&&j.datadog&&!b.datadog?e.jsx(X,{appearance:eie(x.data.datadog.status),action:e.jsx(R,{href:`${Q(C.ProjectsItemIntegrations,{projectId:s.id})}#datadog`,children:uS.manageIntegrationButton}),children:uS.datadogStatusAlert(x.data.datadog.status)}):null,e.jsxs("div",{className:id.controls,children:[e.jsx("div",{className:id.selectors,children:e.jsx(U,{label:"Compute",className:id.dropdown,children:e.jsx(sx,{size:"s",endpoints:p,endpointId:h??void 0,onChange:v=>{v&&(g(v.id),t("monitoring_page_endpoint_changed"))}})})}),e.jsx("div",{className:id.timeSelectorContainer,children:e.jsx(G$,{analyticsAction:"monitoring_page_time_period_changed"})}),e.jsx(P2,{})]}),f&&e.jsx(Goe,{project:s,endpoint:f})]})},fA=(t,s)=>(t==null?void 0:t.pages.reduce((n,r)=>[...n,...s(r)],[]))??[],_A=t=>Kc(t.action.split("_").join(" ")),sie="_root_1oayq_1",nie={root:sie},rie=t=>{switch(t){case"read_write":return"Primary";case"read_only":return"Replica";default:return""}},aie=({endpoint:t,onEdit:s})=>e.jsx(e.Fragment,{children:t?e.jsx(R,{onClick:()=>s(t),children:e.jsxs("div",{className:nie.root,children:[t.id,e.jsx(Ie,{children:rie(t.type)})]})}):""}),oie=()=>{var d;const{projectId:t,project:s}=F(),n=Em({projectId:t}),{branch:r}=at(),a=m.useMemo(()=>fA(n.data,p=>p.operations).filter(p=>r&&p.branch_id===r.id),[n.data,r]),o=ln({projectId:t}),[i,c]=m.useState(null),l=m.useMemo(()=>He([{key:"operation",label:"Operation",renderValue:_A},{key:"endpoint",label:"Compute",renderValue:u=>{var p;return u.endpoint_id?e.jsx(aie,{endpoint:(p=o.data)==null?void 0:p.endpoints.find(h=>h.id===u.endpoint_id),onEdit:h=>c(h)}):""}},{key:"status",label:"Operation status",renderValue:u=>e.jsx(H0,{status:u.status})},{key:"id",label:"Duration",renderValue:u=>["finished","failed"].includes(u.status)&&e.jsx(T,{children:Vp(u)})},{key:"created_at",label:"Date",renderValue:u=>e.jsx(T,{appearance:"secondary",children:fe(u.created_at)})}]),[o.data]);return s?e.jsxs(e.Fragment,{children:[i!==null&&e.jsx(uo,{isOpen:!0,onRequestClose:()=>c(null),mode:"edit",project:s,endpoint:i}),e.jsx(xr,{isLoading:n.isLoading,error:(d=n.error)==null?void 0:d.message,cols:l,data:a})]}):e.jsx(xr,{isLoading:!0,cols:l})},iie="_root_1n2t9_1",cie="_desc_1n2t9_7",hS={root:iie,desc:cie},lie=()=>{const{trackUiInteraction:t}=P();return e.jsxs("div",{className:hS.root,children:[e.jsxs("p",{className:hS.desc,children:["An operation is an action performed by the Neon Control Plane on an object or resource, such as starting a compute or creating a branch. Monitor here for the health and progress of your Neon project operations."," ",e.jsx(R,{openInNewTab:!0,"aria-label":"System Operations",href:"https://neon.com/docs/manage/operations",icon:"external_link",onClick:()=>{t("project_settings_ip_allow_learn_more_clicked")},children:"Learn more"})]}),e.jsx(oie,{})]})},Xo={ariaLabel:"Past Queries",emptyText:"No past queries",columnQuery:"Query",columnAverageTime:"Average time",columnTotalTime:"Total time",columnRole:"Role",columnCalls:"Calls"},die="_container_1m7d0_1",uie="_placeholder_1m7d0_7",pS={container:die,placeholder:uie},hie=Et({userid:tn(),role_name:nt(),query:nt(),calls:vx.number(),total_min:tn(),avg_ms:tn()}),vb="total_min",bA="descending",xA={column:vb,direction:bA},pie=t=>{const s=new Set(["total_min","calls","avg_ms"]),n=t.column??vb,r=(s.has(n)?n:vb).toString(),a=(t.direction??bA)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:a}},mie=(t,s=xA)=>{const n=Wu(),{sortKey:r,sortDirection:a}=pie(s),{data:o,isPending:i,error:c,refetch:l}=ca({queryKey:{key:["usePastQueries",r,a,(n==null?void 0:n.database.name)??""],appendConnectionString:!0},query:`
      SELECT
        s.userid,
        r.rolname AS role_name,
        s.query,
        s.calls,
        (s.total_exec_time / 1000 / 60) AS total_min,
        s.mean_exec_time AS avg_ms
      FROM pg_stat_statements s
      JOIN pg_roles r ON s.userid = r.oid
      WHERE s.dbid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
        AND r.rolname != 'cloud_admin'
      ORDER BY ${r} ${a}
      LIMIT 100
    ;`,zodSchema:hie,options:{enabled:!!(n!=null&&n.database.name)},querySystemPostgres:!0});return{queries:m.useMemo(()=>(o||[]).map(u=>({...u,key:`${u.userid}_${u.query}`})),[o]),isPending:i,error:c,refetch:l}};function mS(t,s){return parseFloat(t.toFixed(s))}const gie=[{accessorKey:"role_name",header:Xo.columnRole,rowHeader:!0,size:85,render:t=>t.role_name},{accessorKey:"calls",header:Xo.columnCalls,size:50,enableSorting:!0,render:t=>t.calls},{accessorKey:"avg_ms",header:Xo.columnAverageTime,size:140,enableSorting:!0,render:t=>Vp({total_duration_ms:mS(t.avg_ms,1)})},{accessorKey:"total_min",header:Xo.columnTotalTime,size:140,enableSorting:!0,render:t=>Vp({total_duration_ms:mS(t.total_min*60*1e3,1)})},{accessorKey:"query",header:Xo.columnQuery,render:t=>e.jsx("code",{children:t.query})}],fie=()=>{const[t,s]=m.useState(xA),n=cA(),{queries:r,isPending:a,error:o,refetch:i}=mie(!0,t);m.useEffect(()=>{o&&Y(o)},[o]);const{trackUiInteraction:c}=P(),l=m.useCallback(u=>{!u.column||!u.direction||(c("monitoring_page_query_history_order_changed",{column:u.column,direction:u.direction}),s(u))},[c]),d=m.useCallback(()=>{c("monitoring_page_query_history_refresh_clicked"),i()},[c,i]);return e.jsxs("div",{className:pS.container,children:[e.jsx(iA,{onRefresh:d,refreshDisabled:a}),!n&&e.jsx(ve,{}),n&&!a&&r.length===0&&e.jsx("div",{className:pS.placeholder,children:e.jsx(Fu,{title:Xo.emptyText})}),n&&(a||r.length>0)&&e.jsx(Cs,{columns:gie,rows:r,isLoading:a,"aria-label":Xo.ariaLabel,sorting:t,onSortingChange:l})]})},_ie=()=>{const{project:t}=F();return t?e.jsx(fie,{}):e.jsx(ve,{})},bie="_sections_t5h2o_1",xie={sections:bie},jA=()=>{const{isSelfServedAccount:t}=he(),s=m.useRef(null),n=_I(),{orgId:r}=re(),a=r!==void 0,[o,i]=Ds(_t.BillingGetStarted,a?`show_org_${r}`:"show",!1),c=()=>{i(!1)};return m.useEffect(()=>{switch(window.location.hash){case ah.SuccessUpgrade:oe("Plan was changed successfully"),i(!0);break;case ah.SuccessDowngrade:i(!1),oe("Plan was changed successfully");break;case ah.SuccessEdit:oe("Payment method was upgraded successfully");break;case ah.Error:break;default:return}window.history.replaceState(null,""," ")},[i]),m.useEffect(()=>{s.current&&o&&s.current.scrollIntoView()},[o]),e.jsxs(e.Fragment,{children:[e.jsx(Z3,{}),e.jsxs("div",{className:xie.sections,children:[t&&o&&e.jsx(D6,{ref:s,hide:c}),n.map(({id:l,name:d,titleOverride:u,Component:p})=>e.jsx(p,{id:l,title:u??d},l))]})]})},jie="https://api64.ipify.org/",vA=z_.createApi({reducerPath:"ips",baseQuery:z_.fetchBaseQuery({baseUrl:jie}),endpoints:t=>({fetchIp:t.query({query:()=>({url:"/",params:{format:"json"}})})})});var Or={},wn={},ba={},gS;function yb(){if(gS)return ba;gS=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.isInSubnet=t,ba.isCorrect=s,ba.numberToPaddedHex=n,ba.stringToPaddedHex=r,ba.testBit=a;function t(o){return this.subnetMask<o.subnetMask?!1:this.mask(o.subnetMask)===o.mask()}function s(o){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===o&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function n(o){return o.toString(16).padStart(2,"0")}function r(o){return n(parseInt(o,10))}function a(o,i){const{length:c}=o;if(i>c)return!1;const l=c-i;return o.substring(l,l+1)==="1"}return ba}var Sn={},fS;function yA(){return fS||(fS=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.RE_SUBNET_STRING=Sn.RE_ADDRESS=Sn.GROUPS=Sn.BITS=void 0,Sn.BITS=32,Sn.GROUPS=4,Sn.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,Sn.RE_SUBNET_STRING=/\/\d{1,2}$/),Sn}var cd={},_S;function uj(){if(_S)return cd;_S=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.AddressError=void 0;class t extends Error{constructor(n,r){super(n),this.name="AddressError",this.parseMessage=r}}return cd.AddressError=t,cd}var bS;function wA(){if(bS)return wn;bS=1;var t=wn&&wn.__createBinding||(Object.create?function(c,l,d,u){u===void 0&&(u=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,u,p)}:function(c,l,d,u){u===void 0&&(u=d),c[u]=l[d]}),s=wn&&wn.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=wn&&wn.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&t(l,c,d);return s(l,c),l};Object.defineProperty(wn,"__esModule",{value:!0}),wn.Address4=void 0;const r=n(yb()),a=n(yA()),o=uj();class i{constructor(l){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=r.isCorrect(a.BITS),this.isInSubnet=r.isInSubnet,this.address=l;const d=a.RE_SUBNET_STRING.exec(l);if(d){if(this.parsedSubnet=d[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new o.AddressError("Invalid subnet mask.");l=l.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=l,this.parsedAddress=this.parse(l)}static isValid(l){try{return new i(l),!0}catch{return!1}}parse(l){const d=l.split(".");if(!l.match(a.RE_ADDRESS))throw new o.AddressError("Invalid IPv4 address.");return d}correctForm(){return this.parsedAddress.map(l=>parseInt(l,10)).join(".")}static fromHex(l){const d=l.replace(/:/g,"").padStart(8,"0"),u=[];let p;for(p=0;p<8;p+=2){const h=d.slice(p,p+2);u.push(parseInt(h,16))}return new i(u.join("."))}static fromInteger(l){return i.fromHex(l.toString(16))}static fromArpa(l){const u=l.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new i(u)}toHex(){return this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join(":")}toArray(){return this.parsedAddress.map(l=>parseInt(l,10))}toGroup6(){const l=[];let d;for(d=0;d<a.GROUPS;d+=2)l.push(`${r.stringToPaddedHex(this.parsedAddress[d])}${r.stringToPaddedHex(this.parsedAddress[d+1])}`);return l.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(a.BITS-this.subnetMask)}`)}startAddress(){return i.fromBigInt(this._startAddress())}startAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._startAddress()+l)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(a.BITS-this.subnetMask)}`)}endAddress(){return i.fromBigInt(this._endAddress())}endAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._endAddress()-l)}static fromBigInt(l){return i.fromHex(l.toString(16))}mask(l){return l===void 0&&(l=this.subnetMask),this.getBitsBase2(0,l)}getBitsBase2(l,d){return this.binaryZeroPad().slice(l,d)}reverseForm(l){l||(l={});const d=this.correctForm().split(".").reverse().join(".");return l.omitSuffix?d:`${d}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new i("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(a.BITS,"0")}groupForV6(){const l=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${l.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${l.slice(2,4).join(".")}</span>`)}}return wn.Address4=i,wn}var Cn={},yt={},xS;function SA(){return xS||(xS=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.RE_URL_WITH_PORT=yt.RE_URL=yt.RE_ZONE_STRING=yt.RE_SUBNET_STRING=yt.RE_BAD_ADDRESS=yt.RE_BAD_CHARACTERS=yt.TYPES=yt.SCOPES=yt.GROUPS=yt.BITS=void 0,yt.BITS=128,yt.GROUPS=8,yt.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},yt.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},yt.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,yt.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,yt.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,yt.RE_ZONE_STRING=/%.*$/,yt.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/,yt.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/),yt}var Oo={},jS;function CA(){if(jS)return Oo;jS=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.spanAllZeroes=t,Oo.spanAll=s,Oo.spanLeadingZeroes=r,Oo.simpleGroup=a;function t(o){return o.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(o,i=0){return o.split("").map((l,d)=>`<span class="digit value-${l} position-${d+i}">${t(l)}</span>`).join("")}function n(o){return o.replace(/^(0+)/,'<span class="zero">$1</span>')}function r(o){return o.split(":").map(c=>n(c)).join(":")}function a(o,i=0){return o.split(":").map((l,d)=>/group-v4/.test(l)?l:`<span class="hover-group group-${d+i}">${n(l)}</span>`)}return Oo}var cs={},vS;function vie(){if(vS)return cs;vS=1;var t=cs&&cs.__createBinding||(Object.create?function(l,d,u,p){p===void 0&&(p=u);var h=Object.getOwnPropertyDescriptor(d,u);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,p,h)}:function(l,d,u,p){p===void 0&&(p=u),l[p]=d[u]}),s=cs&&cs.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),n=cs&&cs.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&t(d,l,u);return s(d,l),d};Object.defineProperty(cs,"__esModule",{value:!0}),cs.ADDRESS_BOUNDARY=void 0,cs.groupPossibilities=a,cs.padGroup=o,cs.simpleRegularExpression=i,cs.possibleElisions=c;const r=n(SA());function a(l){return`(${l.join("|")})`}function o(l){return l.length<4?`0{0,${4-l.length}}${l}`:l}cs.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function i(l){const d=[];l.forEach((p,h)=>{parseInt(p,16)===0&&d.push(h)});const u=d.map(p=>l.map((h,g)=>{if(g===p){const f=g===0||g===r.GROUPS-1?":":"";return a([o(h),f])}return o(h)}).join(":"));return u.push(l.map(o).join(":")),a(u)}function c(l,d,u){const p=d?"":":",h=u?"":":",g=[];!d&&!u&&g.push("::"),d&&u&&g.push(""),(u&&!d||!u&&d)&&g.push(":"),g.push(`${p}(:0{1,4}){1,${l-1}}`),g.push(`(0{1,4}:){1,${l-1}}${h}`),g.push(`(0{1,4}:){${l-1}}0{1,4}`);for(let f=1;f<l-1;f++)for(let _=1;_<l-f;_++)g.push(`(0{1,4}:){${_}}:(0{1,4}:){${l-_-f-1}}0{1,4}`);return a(g)}return cs}var yS;function yie(){if(yS)return Cn;yS=1;var t=Cn&&Cn.__createBinding||(Object.create?function(j,v,y,S){S===void 0&&(S=y);var w=Object.getOwnPropertyDescriptor(v,y);(!w||("get"in w?!v.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return v[y]}}),Object.defineProperty(j,S,w)}:function(j,v,y,S){S===void 0&&(S=y),j[S]=v[y]}),s=Cn&&Cn.__setModuleDefault||(Object.create?function(j,v){Object.defineProperty(j,"default",{enumerable:!0,value:v})}:function(j,v){j.default=v}),n=Cn&&Cn.__importStar||function(j){if(j&&j.__esModule)return j;var v={};if(j!=null)for(var y in j)y!=="default"&&Object.prototype.hasOwnProperty.call(j,y)&&t(v,j,y);return s(v,j),v};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Address6=void 0;const r=n(yb()),a=n(yA()),o=n(SA()),i=n(CA()),c=wA(),l=vie(),d=uj(),u=yb();function p(j){if(!j)throw new Error("Assertion failed.")}function h(j){const v=/(\d+)(\d{3})/;for(;v.test(j);)j=j.replace(v,"$1,$2");return j}function g(j){return j=j.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),j=j.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),j}function f(j,v){const y=[],S=[];let w;for(w=0;w<j.length;w++)w<v[0]?y.push(j[w]):w>v[1]&&S.push(j[w]);return y.concat(["compact"]).concat(S)}function _(j){return parseInt(j,16).toString(16).padStart(4,"0")}function b(j){return j&255}class x{constructor(v,y){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=r.isInSubnet,this.isCorrect=r.isCorrect(o.BITS),y===void 0?this.groups=o.GROUPS:this.groups=y,this.address=v;const S=o.RE_SUBNET_STRING.exec(v);if(S){if(this.parsedSubnet=S[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>o.BITS)throw new d.AddressError("Invalid subnet mask.");v=v.replace(o.RE_SUBNET_STRING,"")}else if(/\//.test(v))throw new d.AddressError("Invalid subnet mask.");const w=o.RE_ZONE_STRING.exec(v);w&&(this.zone=w[0],v=v.replace(o.RE_ZONE_STRING,"")),this.addressMinusSuffix=v,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(v){try{return new x(v),!0}catch{return!1}}static fromBigInt(v){const y=v.toString(16).padStart(32,"0"),S=[];let w;for(w=0;w<o.GROUPS;w++)S.push(y.slice(w*4,(w+1)*4));return new x(S.join(":"))}static fromURL(v){let y,S=null,w;if(v.indexOf("[")!==-1&&v.indexOf("]:")!==-1){if(w=o.RE_URL_WITH_PORT.exec(v),w===null)return{error:"failed to parse address with port",address:null,port:null};y=w[1],S=w[2]}else if(v.indexOf("/")!==-1){if(v=v.replace(/^[a-z0-9]+:\/\//,""),w=o.RE_URL.exec(v),w===null)return{error:"failed to parse address from URL",address:null,port:null};y=w[1]}else y=v;return S?(S=parseInt(S,10),(S<0||S>65536)&&(S=null)):S=null,{address:new x(y),port:S}}static fromAddress4(v){const y=new c.Address4(v),S=o.BITS-(a.BITS-y.subnetMask);return new x(`::ffff:${y.correctForm()}/${S}`)}static fromArpa(v){let y=v.replace(/(\.ip6\.arpa)?\.$/,"");const S=7;if(y.length!==63)throw new d.AddressError("Invalid 'ip6.arpa' form.");const w=y.split(".").reverse();for(let k=S;k>0;k--){const N=k*4;w.splice(N,0,":")}return y=w.join(""),new x(y)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(v=this.subnetMask){return this.getBitsBase2(0,v)}possibleSubnets(v=128){const y=o.BITS-this.subnetMask,S=Math.abs(v-o.BITS),w=y-S;return w<0?"0":h((BigInt("2")**BigInt(w)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(o.BITS-this.subnetMask)}`)}startAddress(){return x.fromBigInt(this._startAddress())}startAddressExclusive(){const v=BigInt("1");return x.fromBigInt(this._startAddress()+v)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(o.BITS-this.subnetMask)}`)}endAddress(){return x.fromBigInt(this._endAddress())}endAddressExclusive(){const v=BigInt("1");return x.fromBigInt(this._endAddress()-v)}getScope(){let v=o.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&v!=="Link local"&&(v="Global"),v||"Unknown"}getType(){for(const v of Object.keys(o.TYPES))if(this.isInSubnet(new x(v)))return o.TYPES[v];return"Global unicast"}getBits(v,y){return BigInt(`0b${this.getBitsBase2(v,y)}`)}getBitsBase2(v,y){return this.binaryZeroPad().slice(v,y)}getBitsBase16(v,y){const S=y-v;if(S%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(v,y).toString(16).padStart(S/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,o.BITS)}reverseForm(v){v||(v={});const y=Math.floor(this.subnetMask/4),S=this.canonicalForm().replace(/:/g,"").split("").slice(0,y).reverse().join(".");return y>0?v.omitSuffix?S:`${S}.ip6.arpa.`:v.omitSuffix?"":"ip6.arpa."}correctForm(){let v,y=[],S=0;const w=[];for(v=0;v<this.parsedAddress.length;v++){const D=parseInt(this.parsedAddress[v],16);D===0&&S++,D!==0&&S>0&&(S>1&&w.push([v-S,v-1]),S=0)}S>1&&w.push([this.parsedAddress.length-S,this.parsedAddress.length-1]);const k=w.map(D=>D[1]-D[0]+1);if(w.length>0){const D=k.indexOf(Math.max(...k));y=f(this.parsedAddress,w[D])}else y=this.parsedAddress;for(v=0;v<y.length;v++)y[v]!=="compact"&&(y[v]=parseInt(y[v],16).toString(16));let N=y.join(":");return N=N.replace(/^compact$/,"::"),N=N.replace(/(^compact)|(compact$)/,":"),N=N.replace(/compact/,""),N}binaryZeroPad(){return this.bigInt().toString(2).padStart(o.BITS,"0")}parse4in6(v){const y=v.split(":"),w=y.slice(-1)[0].match(a.RE_ADDRESS);if(w){this.parsedAddress4=w[0],this.address4=new c.Address4(this.parsedAddress4);for(let k=0;k<this.address4.groups;k++)if(/^0[0-9]+/.test(this.address4.parsedAddress[k]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",v.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(g).join(".")));this.v4=!0,y[y.length-1]=this.address4.toGroup6(),v=y.join(":")}return v}parse(v){v=this.parse4in6(v);const y=v.match(o.RE_BAD_CHARACTERS);if(y)throw new d.AddressError(`Bad character${y.length>1?"s":""} detected in address: ${y.join("")}`,v.replace(o.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const S=v.match(o.RE_BAD_ADDRESS);if(S)throw new d.AddressError(`Address failed regex: ${S.join("")}`,v.replace(o.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let w=[];const k=v.split("::");if(k.length===2){let N=k[0].split(":"),D=k[1].split(":");N.length===1&&N[0]===""&&(N=[]),D.length===1&&D[0]===""&&(D=[]);const L=this.groups-(N.length+D.length);if(!L)throw new d.AddressError("Error parsing groups");this.elidedGroups=L,this.elisionBegin=N.length,this.elisionEnd=N.length+this.elidedGroups,w=w.concat(N);for(let H=0;H<L;H++)w.push("0");w=w.concat(D)}else if(k.length===1)w=v.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if(w=w.map(N=>parseInt(N,16).toString(16)),w.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return w}canonicalForm(){return this.parsedAddress.map(_).join(":")}decimal(){return this.parsedAddress.map(v=>parseInt(v,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(_).join("")}`)}to4(){const v=this.binaryZeroPad().split("");return c.Address4.fromHex(BigInt(`0b${v.slice(96,128).join("")}`).toString(16))}to4in6(){const v=this.to4(),S=new x(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let w="";return/:$/.test(S)||(w=":"),S+w+v.address}inspectTeredo(){const v=this.getBitsBase16(0,32),S=(this.getBits(80,96)^BigInt("0xffff")).toString(),w=c.Address4.fromHex(this.getBitsBase16(32,64)),k=this.getBits(96,128),N=c.Address4.fromHex((k^BigInt("0xffffffff")).toString(16)),D=this.getBitsBase2(64,80),L=(0,u.testBit)(D,15),H=(0,u.testBit)(D,14),W=(0,u.testBit)(D,8),$=(0,u.testBit)(D,9),M=BigInt(`0b${D.slice(2,6)+D.slice(8,16)}`).toString(10);return{prefix:`${v.slice(0,4)}:${v.slice(4,8)}`,server4:w.address,client4:N.address,flags:D,coneNat:L,microsoft:{reserved:H,universalLocal:$,groupIndividual:W,nonce:M},udpPort:S}}inspect6to4(){const v=this.getBitsBase16(0,16),y=c.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:v.slice(0,4),gateway:y.address}}to6to4(){if(!this.is4())return null;const v=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new x(v)}toByteArray(){const v=this.bigInt().toString(16),S=`${"0".repeat(v.length%2)}${v}`,w=[];for(let k=0,N=S.length;k<N;k+=2)w.push(parseInt(S.substring(k,k+2),16));return w}toUnsignedByteArray(){return this.toByteArray().map(b)}static fromByteArray(v){return this.fromUnsignedByteArray(v.map(b))}static fromUnsignedByteArray(v){const y=BigInt("256");let S=BigInt("0"),w=BigInt("1");for(let k=v.length-1;k>=0;k--)S+=w*BigInt(v[k].toString(10)),w*=y;return x.fromBigInt(S)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new x("2001::/32"))}is6to4(){return this.isInSubnet(new x("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(v){return v===void 0?v="":v=`:${v}`,`http://[${this.correctForm()}]${v}/`}link(v){v||(v={}),v.className===void 0&&(v.className=""),v.prefix===void 0&&(v.prefix="/#address="),v.v4===void 0&&(v.v4=!1);let y=this.correctForm;v.v4&&(y=this.to4in6);const S=y.call(this);return v.className?`<a href="${v.prefix}${S}" class="${v.className}">${S}</a>`:`<a href="${v.prefix}${S}">${S}</a>`}group(){if(this.elidedGroups===0)return i.simpleGroup(this.address).join(":");p(typeof this.elidedGroups=="number"),p(typeof this.elisionBegin=="number");const v=[],[y,S]=this.address.split("::");y.length?v.push(...i.simpleGroup(y)):v.push("");const w=["hover-group"];for(let k=this.elisionBegin;k<this.elisionBegin+this.elidedGroups;k++)w.push(`group-${k}`);return v.push(`<span class="${w.join(" ")}"></span>`),S.length?v.push(...i.simpleGroup(S,this.elisionEnd)):v.push(""),this.is4()&&(p(this.address4 instanceof c.Address4),v.pop(),v.push(this.address4.groupForV6())),v.join(":")}regularExpressionString(v=!1){let y=[];const S=new x(this.correctForm());if(S.elidedGroups===0)y.push((0,l.simpleRegularExpression)(S.parsedAddress));else if(S.elidedGroups===o.GROUPS)y.push((0,l.possibleElisions)(o.GROUPS));else{const w=S.address.split("::");w[0].length&&y.push((0,l.simpleRegularExpression)(w[0].split(":"))),p(typeof S.elidedGroups=="number"),y.push((0,l.possibleElisions)(S.elidedGroups,w[0].length!==0,w[1].length!==0)),w[1].length&&y.push((0,l.simpleRegularExpression)(w[1].split(":"))),y=[y.join(":")]}return v||(y=["(?=^|",l.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...y,")(?=[^\\w\\:]|",l.ADDRESS_BOUNDARY,"|$)"]),y.join("")}regularExpression(v=!1){return new RegExp(this.regularExpressionString(v),"i")}}return Cn.Address6=x,Cn}var wS;function wie(){return wS||(wS=1,function(t){var s=Or&&Or.__createBinding||(Object.create?function(l,d,u,p){p===void 0&&(p=u);var h=Object.getOwnPropertyDescriptor(d,u);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,p,h)}:function(l,d,u,p){p===void 0&&(p=u),l[p]=d[u]}),n=Or&&Or.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),r=Or&&Or.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&s(d,l,u);return n(d,l),d};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var a=wA();Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return a.Address4}});var o=yie();Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return o.Address6}});var i=uj();Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return i.AddressError}});const c=r(CA());t.v6={helpers:c}}(Or)),Or}var mm=wie();const Sie=t=>{try{return{address:new mm.Address4(t),version:4}}catch{return}},Cie=t=>{try{return{address:new mm.Address6(t),version:6}}catch{return}},al=t=>{const s=Sie(t)??Cie(t);if(!s)throw new Error(`failed to parse IP address: ${t}`);const{address:n,version:r}=s;return{version:r,toNumber(){return n.bigInt()},compare(a){if(r!==a.version)throw new Error("Can not compare IP addresses with different version");return n.bigInt()<a.toNumber()?-1:n.bigInt()>a.toNumber()?1:0},isInSubnet(a){return n.isInSubnet(a)}}},kie=(t,s)=>{if(!s.includes("/"))return!1;if(t.version===4){const r=new mm.Address4(s);return t.isInSubnet(r)}const n=new mm.Address6(s);return t.isInSubnet(n)},Iie=(t,s)=>{if(!s.includes("-"))return!1;const[n,r]=s.split("-"),a=al(n.trim()),o=al(r.trim());return(a.compare(t)===0||a.compare(t)===-1)&&(o.compare(t)===0||o.compare(t)===1)},Pie=(t,s)=>{const n=al(s);return t.compare(n)===0},Tie=(t,s)=>{try{const n=al(t);return kie(n,s)||Iie(n,s)||Pie(n,s)}catch{return!1}},Aie="_container_1j9cd_1",Nie={container:Aie},Eie=(t,s)=>s!=null&&s.protected_branches_only?t==null?void 0:t.protected:!0,hj=({onClose:t})=>{var v;const{projectId:s,project:n,isLoading:r}=F(),{trackUiInteraction:a}=P(),{branch:o}=at(),[i,c]=m.useState(!1),[l,d]=m.useState(),[u,p]=m.useState(!1),h=Vs(),g=(v=n==null?void 0:n.settings)==null?void 0:v.allowed_ips,[f]=vA.useLazyFetchIpQuery(),[_,b]=Ds(_t.HideIPAllowModal,s,!1),x=m.useCallback(()=>{c(!1),t==null||t()},[t]);m.useEffect(()=>{const y=(g==null?void 0:g.ips)??[];_?t==null||t():y.length>0&&Eie(o,g)?f(void 0,!0).unwrap().then(({ip:S})=>{const w=y.some(k=>Tie(S,k));return d(S),c(!w),w?t==null?void 0:t():a("ip_allow_modal_shown")}):o&&g&&(t==null||t())},[o,f,g,t,a,_]);const j=m.useCallback(()=>{if(l){const y=(g==null?void 0:g.ips)??[];return h({projectId:s,data:{settings:{allowed_ips:{...g,ips:[...y,l]}}}}).catch(S=>Sm(S)).finally(()=>x())}},[l,g,h,s,x]);return r||_?null:e.jsx(e.Fragment,{children:e.jsxs(ft,{isOpen:i,width:600,title:`Access Denied for ${l}`,onRequestClose:()=>{a("ip_allow_modal_dismissed"),x()},children:[e.jsx(De,{children:e.jsxs("div",{className:Nie.container,children:[e.jsxs("p",{children:["You are trying to access Neon from IP address"," ",e.jsx(Ae,{children:l}),", which is not on the project allow list."]}),e.jsx(Xa,{checked:u,onChange:y=>{p(y.target.checked)},children:"Don't show this message again for any IP address"})]})}),e.jsxs(Te,{children:[e.jsx(E,{appearance:"secondary",onClick:()=>{a(u?"ip_allow_modal_no_show":"ip_allow_modal_dismissed"),b(u),x()},children:u?"Close":"Cancel"}),e.jsx(E,{appearance:"primary",disabled:u,onClick:()=>{a("ip_allow_modal_confirmed"),j()},children:"Add"})]})]})})},ld={title:"Archived branch",body:"This branch is archived. Accessing it on the Tables page will unarchive it, which may take a moment, and queries may be slower at first.",learnMore:"Learn more about branch archiving",declineButton:"Cancel",confirmButton:"Proceed"},Oie=({onDecline:t,onConfirm:s})=>e.jsxs(ft,{isOpen:!0,title:ld.title,onRequestClose:t,children:[e.jsx(De,{gaps:!0,children:e.jsxs("p",{children:[ld.body," ",e.jsx(R,{href:nx,icon:"external_link",openInNewTab:!0,children:ld.learnMore})]})}),e.jsxs(Te,{children:[e.jsx(dn,{appearance:"secondary",children:ld.declineButton}),e.jsx(E,{onClick:s,children:ld.confirmButton})]})]}),$ie=m.lazy(async()=>({default:(await nn(()=>import("./DrizzleStudio-D3Pd6C75.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))).DrizzleStudio})),_Ie=Et({database:nt().optional().catch(void 0),schema:nt().optional().catch(void 0),table:nt().optional().catch(void 0)}),Mf=()=>e.jsx(ve,{}),Lie=()=>{const[t,s]=m.useState(!1),[n,r]=m.useState(!1),{branch:a}=at(),o=et();return t?a?a.current_state==="archived"&&!n&&Du(a)?e.jsxs(e.Fragment,{children:[e.jsx(Oie,{onDecline:()=>o.replace(Q(C.ProjectsItemBranchesItem,{projectId:a.project_id,branchId:a.id})),onConfirm:()=>r(!0)}),e.jsx(Mf,{})]}):e.jsx(m.Suspense,{fallback:e.jsx(Mf,{}),children:e.jsx($ie,{})}):e.jsx(Mf,{}):e.jsx(hj,{onClose:()=>s(!0)})},Rie="_root_1u3cy_1",Mie={root:Rie},Bie=()=>{const{orgId:t,isVercelOrg:s,isLoading:n}=re();return n?e.jsx(ve,{}):t?e.jsxs("div",{className:Mie.root,children:[e.jsx(tA,{headingId:"github"}),!s&&e.jsx(oA,{headingId:"vercel"})]}):null},gm=t=>{const s=t.split(/[ ,;\n]/).map(n=>n.trim()).filter(Boolean);return s.some(n=>!K$.test(n))?null:uM(s)},kA=t=>{const{data:s,isLoading:n}=ws(),r=m.useMemo(()=>(s==null?void 0:s.map(a=>({value:a.id,label:a.name})))??[],[s]);return Q$({...t,options:r}),n?null:e.jsx(Za,{...t,loading:n,options:r})},gc={title:t=>`Invite collaborators to ${t} project`,projectLabel:"Select project to invite collaborators to:",emailLabel:"Add emails",emailPlaceholder:"One or many comma separated emails",submitButton:"Invite collaborators",invitationSuccess:(t,s)=>`Collaborator ${t} received access to project ${s}`},Die=({orgName:t,onRequestClose:s})=>{var c;const n=Y$(),r=$e({mode:"onSubmit",defaultValues:{invitation_emails:""}}),[a,o]=m.useState(),i=async l=>{const d=gm(l.invitation_emails),u=a==null?void 0:a.value;if(u){const p=await Promise.allSettled(d.map(h=>n({projectId:u,email:h})));for(const h of p)h.status==="rejected"?Y(h.reason):Ue(e.jsx(rt,{children:gc.invitationSuccess(h.value.granted_to_email,a.label)}))}s==null||s()};return e.jsx(e.Fragment,{children:e.jsxs(ps,{modalProps:{title:gc.title(t),isOpen:!0,onRequestClose:s,width:550},providerProps:r,onSubmit:i,children:[e.jsxs(De,{gaps:!0,children:[e.jsx(U,{label:gc.projectLabel,children:e.jsx(kA,{value:a,onChange:l=>{l&&o(l)}})}),e.jsx(U,{label:gc.emailLabel,error:(c=r.formState.errors.invitation_emails)==null?void 0:c.message,children:e.jsx(ie,{autoFocus:!0,placeholder:gc.emailPlaceholder,...r.register("invitation_emails",{required:{value:!0,message:"This field is required"},validate:l=>gm(l)!==null||"Please enter a valid email address"})})})]}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{children:gc.submitButton})]})]})})},Uie=({...t})=>{const{org:s}=re(),{isOrgAdmin:n}=Rt(),r=it(Je.InviteOrgCollaborators),{data:a,isLoading:o}=ws();if(s===void 0||o)return null;const i=!(a&&a.length>0&&n);return e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(Die,{orgName:s.name,onRequestClose:r.closeModal}),e.jsx(E,{size:"s",onClick:()=>r.openModal(),...t,disabled:i,children:"Invite collaborators"})]})},Jn={convertLabel:"Convert to member",convertModalHeader:"Convert collaborator to member",convertModalBody:(t,s)=>e.jsxs("span",{children:["Are you sure you want to convert"," ",e.jsx("strong",{children:t.user_email})," to member in ",s,"? They will get access to all projects."]}),convertModalConfirm:"Convert to member",convertSuccess:(t,s)=>e.jsxs(e.Fragment,{children:["Successfully converted ",e.jsx("strong",{children:t.user_email})," to member in ",s]}),removeLabel:"Remove from project",removeCollaboratorModalHeader:"Remove from project",removeCollaboratorModalBody:t=>e.jsxs("span",{children:["Are you sure you want to remove ",e.jsx("strong",{children:t.user_email})," ","from ",t.project_name,"?"," ",e.jsx("strong",{children:t.user_email})," will lose their access to this project."]}),removeCollaboratorModalConfirm:"Remove",removeCollaboratorSuccess:t=>e.jsxs(e.Fragment,{children:["Successfully removed ",e.jsx("strong",{children:t.user_email})," from"," ",t.project_name]})},Fie=({collaborator:t})=>{const{trackUiInteraction:s}=P(),{confirm:n}=Ve(),{org:r,isVercelOrg:a}=re(),o=(r==null?void 0:r.name)??"",{isOrgAdmin:i}=Rt(),c=J$(),l=Z$(),d=m.useCallback(()=>{n({header:Jn.convertModalHeader,text:Jn.convertModalBody(t,o),confirmButtonText:Jn.convertModalConfirm}).then(h=>{if(!h){s("org_guest_convert_to_member_dismissed");return}s("org_guest_convert_to_member_confirmed"),l({invitations:[{email:t.user_email,role:"member"}]}).then(()=>{Ue(e.jsx(rt,{children:Jn.convertSuccess(t,o)}))}).catch(Y)})},[t,o,l,n,s]),u=m.useCallback(()=>{n({appearance:"danger",header:Jn.removeCollaboratorModalHeader,text:Jn.removeCollaboratorModalBody(t),confirmButtonText:Jn.removeCollaboratorModalConfirm}).then(h=>{if(!h){s("org_guest_remove_from_project_dismissed");return}s("org_guest_remove_from_project_confirmed"),c({projectId:t.project_id,permissionId:t.permission_id}).then(()=>{Ue(e.jsx(rt,{children:Jn.removeCollaboratorSuccess(t)}))}).catch(Y)})},[t,c,n,s]),p=m.useMemo(()=>[{items:He([!a&&{label:Jn.convertLabel,onClick(){s("org_guest_convert_to_member_clicked"),d()}},{label:Jn.removeLabel,onClick(){s("org_guest_remove_from_project_clicked"),u()}}])}],[d,u,s,a]);return e.jsx(Yt,{sections:p,children:e.jsx(ms,{isDisabled:!i,"aria-label":`Actions for collaborator ${t.user_email}`})})},ru={title:"Collaborators",headerText:"Share projects with external collaborators. Collaborator access is limited to the projects you invite them to.",emailColumnLabel:"Email address",projectColumnLabel:"Project shared"},zie=[{id:"email",header:ru.emailColumnLabel,enableSorting:!0,accessorKey:"user_email",rowHeader:!0,render:t=>e.jsx(Qc,{content:t.user_email,maxWidth:300})},{id:"project_name",header:ru.projectColumnLabel,enableSorting:!0,accessorFn:t=>t.project_name??t.project_id},{id:"action",size:30,render:t=>e.jsx(Fie,{collaborator:t})}],qie=()=>{const{data:t,isLoading:s}=Zb();return e.jsx(Le,{id:"collaborators",children:e.jsxs(Ne,{children:[e.jsx(Se,{actions:e.jsx(Uie,{}),children:ru.title}),e.jsx("p",{children:ru.headerText}),e.jsx(Cs,{"aria-label":ru.title,columns:zie,rows:t,isLoading:s,defaultSorting:{column:"project_name",direction:"ascending"},getRowId:n=>n.permission_id})]})})},ss={changeRoleModalHeader:"Change role",changeRoleModalBody:(t,s,n)=>e.jsxs("span",{children:["Are you sure you want to change ",e.jsx("strong",{children:n.email}),"'s role in ",t," from ",Ba[n.role]," to"," ",Ba[s],"?"]}),changeRoleModalConfirm:"Change",changeRoleSuccess:(t,s,n)=>`Successfully changed ${n.email}'s role in ${t} from ${Ba[n.role]} to ${Ba[s]}`,removeMemberButton:"Remove from organization",removeMemberModalHeader:"Remove member",removeMemberModalBody:(t,s)=>e.jsxs("span",{children:["Are you sure you want to remove ",e.jsx("strong",{children:s.email})," from"," ",e.jsx("strong",{children:t}),"? This will revoke their access to projects."]}),removeMemberModalConfirm:"Remove",removeMemberSuccess:(t,s)=>`Successfully removed ${s.email} from ${t}`,leaveOrg:"Leave organization",leaveOrgModalHeader:"Leave organization",leaveOrgModalBody:t=>e.jsxs("span",{children:["Are you sure? If you leave now, you'll lose access to all projects in"," ",e.jsx("b",{children:t}),"."]}),leaveOrgModalConfirm:"Leave",leaveOrgSuccess:t=>`Successfully left ${t}`,leaveOrgOnlyAdminErrorBE:"can't remove the only admin member of the organization",leaveOrgOnlyAdminError:"Before leaving the organization you need to assign a different admin to it"},Hie={admin:!0,member:!0},Vie=({member:t})=>{const{trackUiInteraction:s}=P(),{confirm:n}=Ve(),{org:r}=re(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=Rt(),i=X$(),c=JC(),l=m.useCallback(p=>{t.role!==p&&n({header:ss.changeRoleModalHeader,text:ss.changeRoleModalBody(a,p,t),confirmButtonText:ss.changeRoleModalConfirm}).then(h=>{if(!h){s("org_member_change_role_dismissed");return}s("org_member_change_role_confirmed"),i({memberId:t.id,data:{role:p}}).then(()=>{oe(ss.changeRoleSuccess(a,p,t))}).catch(Y)})},[t,a,i,n,s]),d=m.useCallback(()=>{n({appearance:"danger",header:ss.removeMemberModalHeader,text:ss.removeMemberModalBody(a,t),confirmButtonText:ss.removeMemberModalConfirm}).then(p=>{if(!p){s("org_member_remove_from_org_dismissed");return}s("org_member_remove_from_org_confirmed"),c({memberId:t.id}).then(()=>{oe(ss.removeMemberSuccess(a,t))}).catch(Y)})},[t,a,c,n,s]),u=m.useMemo(()=>[{items:Object.keys(Hie).map(p=>({icon:p===t.role?"check":void 0,label:Ba[p],onClick(){s("org_member_change_role_clicked",{from_role:t.role,to_role:p}),l(p)}}))},{items:[{label:ss.removeMemberButton,onClick(){s("org_member_remove_from_org_clicked"),d()}}]}],[t,l,d,s]);return e.jsx(Yt,{sections:u,children:e.jsx(ms,{isDisabled:!o,"aria-label":`Actions for member ${t.email}`})})},Wie=({member:t,memberCount:s})=>{const{trackUiInteraction:n}=P(),r=et(),{confirm:a}=Ve(),{org:o}=re(),i=(o==null?void 0:o.name)??"",c=JC(),l=t.id,d=m.useCallback(()=>{a({appearance:"danger",header:ss.leaveOrgModalHeader,text:ss.leaveOrgModalBody(i),confirmButtonText:ss.leaveOrgModalConfirm}).then(p=>{if(!p){n("org_member_leave_org_dismissed");return}n("org_member_leave_org_confirmed"),c({memberId:l,isCurrentUser:!0}).then(()=>{r.push(Q(C.ProjectsList)),oe(ss.leaveOrgSuccess(i))}).catch(h=>{var g;(g=h==null?void 0:h.message)!=null&&g.includes(ss.leaveOrgOnlyAdminErrorBE)?Ye(ss.leaveOrgOnlyAdminError):Y(h)})})},[i,l,c,a,n,r]),u=m.useMemo(()=>[{items:[{label:ss.leaveOrg,onClick(){n("org_member_leave_org_clicked"),d()}}]}],[d,n]);return e.jsx(Yt,{sections:u,children:e.jsx(ms,{isDisabled:s===1,"aria-label":`Actions for member ${t.email}`})})},Gie=({member:t,memberCount:s})=>{const{data:n}=kt();return t.user_id===(n==null?void 0:n.id)?e.jsx(Wie,{member:t,memberCount:s}):e.jsx(Vie,{member:t})},ei={title:"Members",headerText:"Invite new members, assign roles, or remove from the organization.",upgradeHeaderText:"You're the first person in this organization. Upgrade to start inviting your team.",emailColumnLabel:"Email",roleColumnLabel:"Role",vercelOrgInfo:"To manage organization members, use the Neon Postgres integration in Vercel."},Kie=[{id:"email",header:ei.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:t=>e.jsx(Qc,{appearance:"tertiary",content:t.email,maxWidth:300})},{id:"role",header:ei.roleColumnLabel,enableSorting:!0,accessorFn:t=>Ba[t.role]},{id:"action",size:30,render:(t,s)=>e.jsx(Gie,{member:t,memberCount:s.table.getRowCount()})}];function Qie(t,s){return s?t.slice(0,2):t}const Yie=()=>{const{isVercelOrg:t}=re(),{data:s,isLoading:n}=eL(),{allowInvites:r,isLoading:a}=Cx();return a?null:e.jsx(Le,{id:"members",children:e.jsxs(Ne,{children:[e.jsx(Se,{actions:!t&&e.jsx(Yp,{size:"l"}),children:ei.title}),e.jsx(T,{children:r?ei.headerText:ei.upgradeHeaderText}),t&&e.jsx(X,{children:ei.vercelOrgInfo}),e.jsx(Cs,{columns:Qie(Kie,t),rows:s??[],isLoading:n,getRowId:o=>o.id,defaultSorting:{column:"role",direction:"ascending"},"aria-label":ei.title})]})})},Zn={resendButton:"Resend invite",resendModalHeader:"Resend invitation",resendModalBody:t=>`Are you sure you want to resend invitation to ${t}?`,resendModalSuccess:t=>`Successfully resent the invitation to ${t}`,cancelButton:"Cancel invite",cancelModalHeader:"Cancel invite",cancelModalBody:(t,s)=>e.jsxs("span",{children:["Are you sure you want to cancel invite for ",e.jsx("strong",{children:t})," to"," ",e.jsx("strong",{children:s}),"?"]}),cancelModalConfirm:"Cancel invite",cancelModalCancel:"Keep invite",cancelModalSuccess:t=>`Successfully cancelled invitation to ${t}`},Jie=({invitation:t})=>{const{trackUiInteraction:s}=P(),{confirm:n}=Ve(),{org:r}=re(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=Rt(),i=tL(),c=sL(),l=m.useCallback(()=>{n({header:Zn.resendModalHeader,text:Zn.resendModalBody(t.email)}).then(p=>{if(!p){s("org_invitation_resend_dismissed");return}s("org_invitation_resend_confirmed"),c({invitationId:t.id}).then(()=>{Ue(e.jsx(rt,{children:Zn.resendModalSuccess(t.email)}))}).catch(Y)})},[c,s,n,t.email,t.id]),d=m.useCallback(()=>{n({appearance:"danger",header:Zn.cancelModalHeader,text:Zn.cancelModalBody(t.email,a),confirmButtonText:Zn.cancelModalConfirm,declineButtonText:Zn.cancelModalCancel}).then(p=>{if(!p){s("org_invitation_cancel_dismissed");return}s("org_invitation_cancel_confirmed"),i({invitationId:t.id}).then(()=>{Ue(e.jsx(rt,{children:Zn.cancelModalSuccess(t.email)}))}).catch(Y)})},[i,s,n,t.id,t.email,a]),u=m.useMemo(()=>[{items:[{label:Zn.resendButton,onClick(){s("org_invitation_resend_clicked"),l()}},{label:Zn.cancelButton,onClick(){s("org_invitation_cancel_clicked"),d()}}]}],[l,d,s]);return e.jsx(Yt,{sections:u,children:e.jsx(ms,{isDisabled:!o,"aria-label":`Actions with invitation to ${t.email}`})})},Ra={title:"Pending invites",noInvitesHeader:"There are no pending invites at the moment.",upgradeNoInvitesHeader:"You're the only member of this organization. Upgrade your plan to invite external collaborators to join this organization.",existingInvitesHeader:"Here you can find your pending invites.",emailColumnLabel:"Email",invitedOnLabel:"Invited on",invitedAsLabel:"Invited as"},Zie=[{id:"email",header:Ra.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:t=>e.jsx(Qc,{content:t.email,maxWidth:300})},{id:"invited_as",header:Ra.invitedAsLabel,enableSorting:!0,accessorKey:"role",render:({role:t})=>e.jsx(T,{appearance:"secondary",children:Ba[t]})},{id:"invited_at",header:Ra.invitedOnLabel,enableSorting:!0,accessorKey:"invited_at",render:({invited_at:t})=>e.jsx(T,{appearance:"secondary",children:fe(t,ke.Date)})},{id:"action",size:30,render:t=>e.jsx(Jie,{invitation:t})}],Xie=()=>{const{data:t,isLoading:s}=nL(),n=t&&t.length>0,{allowInvites:r,isLoading:a}=Cx();return a||t===void 0?null:e.jsx(Le,{id:"pending",children:e.jsxs(Ne,{children:[e.jsx(Se,{actions:n&&e.jsx(Yp,{size:"l"}),children:Ra.title}),s||n?e.jsxs(e.Fragment,{children:[Ra.existingInvitesHeader,e.jsx(Cs,{"aria-label":Ra.title,columns:Zie,rows:t,isLoading:s,defaultSorting:{column:"email",direction:"ascending"},getRowId:o=>o.id})]}):e.jsxs(e.Fragment,{children:[r?Ra.noInvitesHeader:Ra.upgradeNoInvitesHeader,e.jsx(Yp,{size:"l"})]})]})})},ece=()=>{const{isVercelOrg:t}=re(),{isFreeSubscription:s}=he(),{data:n}=Zb(),r=n&&n.length>0,a=!s&&r;return e.jsxs(e.Fragment,{children:[e.jsx(Yie,{}),!t&&e.jsx(Xie,{}),a&&e.jsx(qie,{})]})},vi=rL({baseQuery:AC,reducerPath:"api_keys",tagTypes:["ApiKeys","OrgApiKeys"],endpoints:t=>({getApiKeys:t.query({providesTags:["ApiKeys"],query:()=>G.listApiKeys()}),getOrgApiKeys:t.query({providesTags:["OrgApiKeys"],query:s=>G.listOrgApiKeys(s)}),createApiKey:t.mutation({invalidatesTags:["ApiKeys"],query:s=>G.createApiKey(s)}),createOrgApiKey:t.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,data:n})=>G.createOrgApiKey(s,n)}),revokeApiKey:t.mutation({invalidatesTags:["ApiKeys"],query:s=>G.revokeApiKey(s)}),revokeOrgApiKey:t.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,id:n})=>G.revokeOrgApiKey(s,n)})})});function tce(){const{orgId:t}=re(),s=vi.useGetApiKeysQuery(t!==void 0?yv:void 0),n=vi.useGetOrgApiKeysQuery(t!==void 0?t:yv);return t!==void 0?n:s}function sce(){const[t]=vi.useCreateApiKeyMutation(),[s]=vi.useCreateOrgApiKeyMutation(),{orgId:n}=re();return n!==void 0?r=>s({orgId:n,data:r}).unwrap():r=>t(r).unwrap()}function nce(){const[t]=vi.useRevokeApiKeyMutation(),[s]=vi.useRevokeOrgApiKeyMutation(),{orgId:n}=re();return n!==void 0?r=>s({orgId:n,id:r}).unwrap():r=>t(r).unwrap()}const Bf={title:"Automatic, instant branches of your database with every PR",description:"The GitHub integration automatically creates an API key and sets it as a repository secret.",button:"Connect to GitHub"},rce="_root_1e86f_1",ace="_icon_1e86f_11",oce="_content_1e86f_15",ice="_description_1e86f_22",np={root:rce,icon:ace,content:oce,description:ice},cce=({orgId:t})=>{const{trackUiInteraction:s}=P(),n=et(),{isInstalled:r,isLoading:a}=da(),[o,i]=Ds(_t.ApiKeysGithubCard,"isDismissed",!1);return a?null:!o&&!r&&e.jsxs("div",{className:np.root,children:[e.jsxs("div",{className:np.content,children:[e.jsx("div",{className:np.icon,children:e.jsx(z,{name:"github",size:28})}),e.jsxs("div",{className:np.description,children:[e.jsx(Z,{level:5,children:Bf.title}),e.jsx(T,{appearance:"secondary",size:"s",children:Bf.description})]}),e.jsx(_r,{iconName:"close",iconSize:12,tooltip:"Dismiss",onClick:()=>{s(t?"org_api_keys_github_card_dismissed":"user_api_keys_github_card_dismissed"),i(!0)}})]}),e.jsx(E,{appearance:"secondary",size:"s",onClick:()=>{s(t?"org_api_keys_github_card_connect_clicked":"user_api_keys_github_card_connect_clicked"),n.push(t?`${Q(C.OrgIntegrations,{orgId:t})}#github`:`${C.UserIntegrations}#github`)},children:Bf.button})]})},kn={nameHeader:"Key name",projectHeader:"Project",createdHeader:"Created",lastUsedHeader:"Last used",revokeMenuItem:"Revoke key",revokeConfirmationTitle:"Revoke API key",revokeConfirmationButton:"Revoke",revokeConfirmationText1:"Are you sure you want revoke this API key?",revokeConfirmationText2:"Once revoked, any requests using this key will be denied. This action cannot be undone.",revokeSuccess:t=>`API key ${t} was successfully deleted`,revokeDisabled:"Additional permissions are required to revoke an API key."},lce="_list_1bmz1_1",dce="_table_1bmz1_7",uce="_column_1bmz1_15",hce="_createdByCell_1bmz1_22",pce="_revokeAlert_1bmz1_28",Ur={list:lce,table:dce,column:uce,createdByCell:hce,revokeAlert:pce},mce=({apiKey:t,isOrgContext:s,isOrgAdmin:n,projectNamesById:r})=>{const{trackUiInteraction:a}=P(),{confirm:o}=Ve(),i=nce(),c=m.useCallback(async()=>{if(!await o({appearance:"danger",header:kn.revokeConfirmationTitle,text:e.jsx(X,{appearance:"warning",children:e.jsxs("div",{className:Ur.revokeAlert,children:[e.jsx(T,{appearance:"secondary",bold:!0,children:kn.revokeConfirmationText1}),e.jsx(T,{appearance:"secondary",children:kn.revokeConfirmationText2})]})}),confirmButtonText:kn.revokeConfirmationButton})){a(s?"org_api_keys_revoke_dismissed":"user_api_keys_revoke_dismissed");return}a(s?"org_api_keys_revoke_confirmed":"user_api_keys_revoke_confirmed");try{await i(t.id),oe(kn.revokeSuccess(t.name))}catch(p){Y(p)}},[o,t,i,a,s]),l=m.useMemo(()=>[{items:[{label:kn.revokeMenuItem,onClick(){a(s?"org_api_keys_revoke_clicked":"user_api_keys_revoke_clicked"),c()}}]}],[c,a,s]),d=t.project_id!==void 0;return e.jsxs("div",{className:Ur.table,children:[e.jsxs("div",{className:Ur.column,style:{width:d?"27%":"45%"},children:[e.jsx(T,{appearance:"secondary",children:kn.nameHeader}),e.jsx(Qc,{content:t.name,maxWidth:"85%"})]}),d&&e.jsxs("div",{className:Ur.column,style:{width:"20%"},children:[e.jsx(T,{appearance:"secondary",children:kn.projectHeader}),e.jsx(Qc,{content:r==null?void 0:r[t.project_id],maxWidth:"85%"})]}),e.jsxs("div",{className:Ur.column,style:{width:d?"23%":"25%"},children:[e.jsx(T,{appearance:"secondary",children:kn.createdHeader}),e.jsx(te,{content:`By ${t.created_by.name} on ${fe(t.created_at)}`,children:e.jsxs("div",{className:Ur.createdByCell,children:[e.jsx(Ou,{size:"s",name:t.created_by.name,image:t.created_by.image}),e.jsx("div",{children:fe(t.created_at,ke.Date)})]})})]}),e.jsxs("div",{className:Ur.column,style:{width:d?"23%":"25%"},children:[e.jsx(T,{appearance:"secondary",children:kn.lastUsedHeader}),e.jsx("div",{children:t.last_used_at?e.jsx(te,{content:fe(t.last_used_at),children:e.jsx("div",{children:fe(t.last_used_at,ke.Date)})}):"never"})]}),e.jsx("div",{className:Ur.column,children:e.jsx(Yt,{sections:l,children:e.jsx(te,{content:kn.revokeDisabled,disabled:!s||n,children:e.jsx("div",{children:e.jsx(ms,{"aria-label":`Actions for api key ${t.name}`,isDisabled:s&&!n})})})})})]})},Df=({apiKeys:t,isLoading:s,isOrgContext:n,isOrgAdmin:r,projectNamesById:a,...o})=>s||t===void 0?e.jsx(e.Fragment,{children:Fa(3).map(i=>e.jsx(B,{width:"100%",height:44},i))}):e.jsx("div",{className:Ur.list,...o,children:t.map(i=>e.jsx(mce,{apiKey:i,isOrgContext:n,isOrgAdmin:r,projectNamesById:a},i.id))}),xa={modalTitle:"Create new API key",keyScopeLabel:"Key scope",orgScopeLabel:"Org-wide",projectScopeLabel:"Project-scoped",projectLabel:"Project",keyNameLabel:"Key name",submitButton:"Create",projectScopeDisabledMessage:"Your organization has no projects"},gce="_radios_13x2k_1",fce={radios:gce},SS=64,_ce=({onSuccess:t,onRequestClose:s,isOrgContext:n,orgHasProjects:r})=>{var u;const a=sce(),o=$e({defaultValues:{key_scope:n?"org":"user",name:""}}),{field:i}=qb({name:"key_scope",control:o.control}),[c,l]=m.useState(),d=async p=>{try{const h=await a({key_name:p.name,project_id:i.value==="project"?c==null?void 0:c.value:void 0});t(h.key)}catch(h){Y(h)}};return e.jsxs(ps,{modalProps:{isOpen:!0,title:xa.modalTitle,onRequestClose:s},providerProps:o,onSubmit:d,children:[e.jsxs(De,{gaps:!0,children:[n&&e.jsx(U,{label:xa.keyScopeLabel,children:e.jsxs("div",{className:fce.radios,children:[e.jsx(fi,{...i,value:"org",checked:i.value==="org",children:xa.orgScopeLabel}),e.jsx(te,{content:xa.projectScopeDisabledMessage,disabled:r,children:e.jsx("div",{children:e.jsx(fi,{...i,value:"project",checked:i.value==="project",disabled:!r,children:xa.projectScopeLabel})})})]})}),i.value==="project"&&e.jsx(U,{label:xa.projectLabel,children:e.jsx(kA,{value:c,onChange:p=>{p&&l(p)}})}),e.jsx(U,{label:xa.keyNameLabel,error:(u=o.formState.errors.name)==null?void 0:u.message,children:e.jsx(ie,{autoFocus:!0,...o.register("name",{required:{value:!0,message:"This field is required"},maxLength:{value:SS,message:`Name should be less than ${SS} characters`},trimWhitespace:!0}),"data-qa":"api_key_form_field_name"})})]}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{"data-qa":"api_key_form_submit",children:xa.submitButton})]})]})},rp={modalTitle:"API key successfully created",alert:"Copy your new API token and store it securely. You will not be able to view or copy it again.",keyLabel:"API token",closeButton:"Copy and close"},bce=({apiKeyToken:t,onRequestClose:s})=>e.jsxs(ft,{isOpen:!0,title:rp.modalTitle,onRequestClose:s,children:[e.jsxs(De,{gaps:!0,children:[e.jsx(X,{appearance:"warning",children:rp.alert}),e.jsx(U,{label:rp.keyLabel,children:e.jsx(Ms,{preserveSpaceUnderButtons:!0,hideOverflow:!0,"data-qa":"api_key_created_value",children:t})})]}),e.jsx(Te,{children:e.jsx(dn,{onClick:()=>aL(t),children:rp.closeButton})})]}),ja={title:t=>t?"API keys":"Personal API keys",personalDescription:e.jsxs(e.Fragment,{children:["These are your personal API keys. As a reminder, never share your keys with unauthorized users or expose it in client-side code. Learn about"," ",e.jsx(R,{href:"https://neon.com/docs/manage/api-keys",openInNewTab:!0,children:"API key scopes"}),"."]}),orgDescription:(t,s)=>`${s?`As an admin of ${t}, you control your organization's API keys. `:""}These global keys provide admin-level access to all organization resources, including projects, members, and billing information.`,createButton:"Create new API key",createDisabledTooltip:"Additional permissions are required to create an API key.",orgListHeader:"Org-wide",projectScopedListHeader:"Project-scoped",personalKeysLinkLabel:"Click here to view your account specific API keys ->"},xce="_apiKeyListHeader_1lv05_1",CS={apiKeyListHeader:xce},IA=()=>{const{trackUiInteraction:t}=P(),{org:s,isLoading:n}=re(),{data:r,isFetching:a,isError:o}=tce(),i=s!==void 0,{isOrgAdmin:c}=Rt(),{data:l}=kt(),d=aa(l),u=it(Je.CreateApiKey),p=it(Je.CreateApiKeySuccess,{syncWithUrl:!1}),[h,g]=m.useState(),{data:f}=ws(),_=m.useMemo(()=>Object.fromEntries((f==null?void 0:f.map(v=>[v.id,v.name]))??[]),[f]);if(n)return e.jsx(ve,{});if(o)return null;const[b,x]=OU(r,v=>"project_id"in v&&v.project_id!==void 0),j={isLoading:a,isOrgContext:i,isOrgAdmin:c};return e.jsxs(e.Fragment,{children:[u.isModalOpen&&e.jsx(_ce,{isOrgContext:i,orgHasProjects:(f==null?void 0:f.length)!==0,onSuccess:v=>{t(i?"org_api_keys_create_submitted":"user_api_keys_create_submitted"),g(v),u.closeModal(),p.openModal()},onRequestClose:()=>{t(i?"org_api_keys_create_dismissed":"user_api_keys_create_dismissed"),u.closeModal()}}),p.isModalOpen&&h!==void 0&&e.jsx(bce,{apiKeyToken:h,onRequestClose:()=>{p.closeModal()}}),e.jsx(Le,{id:"api-keys",children:e.jsxs(Ne,{children:[e.jsx(Se,{actions:e.jsx(te,{content:ja.createDisabledTooltip,disabled:!i||c,children:e.jsx("div",{children:e.jsx(E,{appearance:"primary",onClick:()=>{u.openModal(),t(i?"org_api_keys_create_clicked":"user_api_keys_create_clicked")},size:"s",disabled:i&&!c,"data-qa":"api_key_create_button",children:ja.createButton})})}),children:ja.title(i)}),e.jsx(T,{appearance:"secondary",children:s===void 0?ja.personalDescription:ja.orgDescription(s.name,c)}),i?e.jsxs(e.Fragment,{children:[x.length>0&&e.jsxs("div",{children:[e.jsx(Se,{level:6,className:CS.apiKeyListHeader,children:ja.orgListHeader}),e.jsx(Df,{apiKeys:x,...j,"data-qa":"api_key_list_org_scope"})]}),b.length>0&&e.jsxs("div",{children:[e.jsx(Se,{level:6,className:CS.apiKeyListHeader,children:ja.projectScopedListHeader}),e.jsx(Df,{apiKeys:b,...j,projectNamesById:_,"data-qa":"api_key_list_project_scope"})]})]}):e.jsx(Df,{apiKeys:r,...j,"data-qa":"api_key_list"}),(i||!d)&&e.jsx(cce,{orgId:s==null?void 0:s.id}),i&&e.jsx(R,{href:`${C.UserSettings}#api-keys`,children:ja.personalKeysLinkLabel})]})})]})},jce=async t=>(await G.getOrgDeletionChecklist(t)).data,vce=t=>{const{data:s,isLoading:n}=bt({queryKey:["org_deletion_checklist",t],queryFn:()=>jce(t),select:r=>r.conditions.map(a=>({name:a.name,satisfied:a.expected===a.actual,expected:a.expected,actual:a.actual}))});return{isLoading:n,conditions:s}},dd={title:"Delete organization",confirmationButtonText:"Delete organization",disclaimer:(t,s)=>e.jsxs(T,{children:["This action ",e.jsx("strong",{children:"cannot"})," be undone. It will permanently delete"," ",e.jsx("strong",{children:s}),". You might want to"," ",e.jsx(R,{href:Q(C.OrgBilling,{orgId:t}),children:"download"})," ","your invoices before performing this action."]}),orgNameLabel:t=>e.jsxs(T,{children:["Type ",e.jsx("strong",{children:t})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},yce=({orgId:t,orgName:s,onSuccess:n,onRequestClose:r})=>{var c;const a=$e(),o=oL(),i=async l=>{try{await o(t),oe(`Organization ${s} successfully deleted`),n==null||n(l)}catch(d){Y(d)}};return e.jsxs(ps,{providerProps:a,onSubmit:i,modalProps:{title:dd.title,isOpen:!0,onRequestClose:r,width:600},children:[e.jsxs(De,{gaps:!0,children:[e.jsx(X,{appearance:"warning",children:dd.disclaimer(t,s)}),e.jsx(U,{label:dd.orgNameLabel(s),error:(c=a.formState.errors.orgName)==null?void 0:c.message,children:e.jsx(ie,{...a.register("orgName",{validate:l=>l===s||dd.validationText})})})]}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{appearance:"danger","data-qa":"org_delete_confirmation_submit_button",children:dd.confirmationButtonText})]})]})},wce={project_count:(t,s,n)=>e.jsxs(e.Fragment,{children:["Delete its"," ",s.satisfied?"projects":e.jsx(R,{href:Q(C.OrgProjectsList,{orgId:t}),onClick:n,children:"projects"})]})},Yo={title:"Delete organization",description:"Before deleting this organization you need to:",disabledMessage:"You need additional permissions to delete an organization.",deleteButtonText:"Delete organization",conditionText:(t,s,n)=>wce[s.name](t,s,n),managedBy:{azure:"This organization is managed by Azure and can be deleted only from Azure portal.",vercel:"To manage your Neon subscription, go to the Neon Postgres integration in Vercel.",default:"This organization is managed externally and cannot be deleted from Console."}},Sce="_conditions_15m67_1",Cce="_condition_15m67_1",kce="_submitWrapper_15m67_15",Uf={conditions:Sce,condition:Cce,submitWrapper:kce},Ice={project_count:"org_settings_delete_project_count_link_clicked"},Pce=({message:t})=>e.jsx(Le,{children:e.jsxs(Ne,{children:[e.jsx(Se,{children:Yo.title}),e.jsx(X,{children:t})]})}),Tce=({orgId:t,orgName:s,managedBy:n})=>{const r=it(Je.DeleteOrg),{isOrgAdmin:a}=Rt(),o=$e(),i=()=>{r.openModal()},{trackUiInteraction:c}=P(),l=et(),{isLoading:d,conditions:u}=vce(t);if(n!=="console"){const h=Yo.managedBy[n];return e.jsx(Pce,{message:h})}if(d||!u)return null;const p=u.every(h=>h.satisfied);return e.jsxs(Le,{id:"delete",children:[r.isModalOpen&&e.jsx(yce,{orgId:t,orgName:s,onSuccess:()=>{c("org_settings_delete_modal_confirmed"),r.closeModal(),l.push(C.ProjectsList)},onRequestClose:()=>{c("org_settings_delete_modal_dismissed"),r.closeModal()}}),e.jsxs(Ne,{children:[e.jsx(Se,{children:Yo.title}),e.jsxs(es,{gaps:!0,providerProps:o,onSubmit:i,children:[e.jsx(T,{appearance:"secondary",children:Yo.description}),e.jsx("div",{className:Uf.conditions,children:u.map(h=>e.jsxs("div",{className:Uf.condition,children:[e.jsx(z,{name:h.satisfied?"success":"done",size:20}),e.jsx(T,{children:Yo.conditionText(t,h,()=>c(Ice[h.name]))})]},h.name))}),e.jsx(ks,{children:e.jsx(te,{content:Yo.disabledMessage,disabled:a,children:e.jsx("div",{className:Uf.submitWrapper,children:e.jsx(Ce,{appearance:"danger",disabled:!p||!a,onClick:()=>{c("org_settings_delete_submitted")},"data-qa":"org_delete_form_submit_button",children:Yo.deleteButtonText})})})})]})]})]})},Ace="_channel_40sxr_1",Nce="_joined_40sxr_5",kS={channel:Ace,joined:Nce},va={title:"Early access",subtitle:t=>e.jsxs(e.Fragment,{children:["Join the early access program to preview upcoming features for"," ",e.jsx("b",{children:t}),"'s projects. You can opt out anytime."]}),benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:t=>e.jsxs("div",{className:kS.joined,children:[e.jsxs(T,{children:["Thank you for being an early access member! ",e.jsx("b",{children:t}),"'s projects have exclusive access to upcoming features."]}),e.jsxs(T,{children:["Get support and share feedback in our"," ",e.jsx(R,{href:hu,openInNewTab:!0,children:"Discord community"}),"."]}),e.jsx(T,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:e.jsxs(e.Fragment,{children:["Share feedback directly with our team. Join our"," ",e.jsx(R,{href:hu,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",e.jsx("b",{className:kS.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the Early Access Program!",submitJoin:"Join early access",disabled:"Additional permissions are required to change the early access setting."},Ece="_submitWrapper_1a7lt_1",Oce={submitWrapper:Ece},$ce=({orgId:t,orgName:s})=>{const n=be(),r=cn(),a=ki("beta_program"),{isOrgAdmin:o}=Rt(),{trackUiInteraction:i}=P(),c=$e(),l=m.useCallback(async()=>{try{i("org_settings_early_access_joined"),await G.joinOrgEarlyAccess(t),oe(va.successJoin),r(uu.util.invalidateTags(["OrgLimits"])),await n.invalidateQueries({queryKey:iL(t)})}catch(d){Y(d)}},[i,t,r,n]);return e.jsx(Le,{id:"early-access",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:va.title}),e.jsx(es,{providerProps:c,onSubmit:l,gaps:!0,children:a?e.jsx("div",{children:va.alreadyIn(s)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{level:5,children:va.subtitle(s)}),e.jsx("ul",{children:va.benefits.map(d=>e.jsx("li",{children:d},d))})]}),e.jsx("div",{children:e.jsx(T,{children:va.joinDiscord})}),e.jsx(ks,{children:e.jsx(te,{content:va.disabled,disabled:o,children:e.jsx("div",{className:Oce.submitWrapper,children:e.jsx(Ce,{disabled:!o,children:va.submitJoin})})})})]})})]})})},$o={title:"General information",infoId:"For billing purposes you can use the organization ID below.",nameLabel:"Organization name",idLabel:"Organization ID",submitText:"Save",updateSuccess:"Successfully updated organization settings",nameDisabledMessage:"You need additional permissions to rename an organization."},IS=64,Lce=({orgId:t,orgName:s})=>{var i;const n=cL(),{isOrgAdmin:r}=Rt(),a=$e({defaultValues:{name:s}}),o=m.useCallback(async c=>{try{await n({orgId:t,data:c}),oe($o.updateSuccess)}catch(l){Y(l)}},[t,n]);return e.jsx(Le,{id:"general",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:$o.title}),e.jsxs(es,{gaps:!0,providerProps:a,onSubmit:o,children:[e.jsx(T,{appearance:"secondary",children:$o.infoId}),e.jsxs(fu,{children:[e.jsx(U,{label:$o.nameLabel,error:(i=a.formState.errors.name)==null?void 0:i.message,children:e.jsx(te,{content:$o.nameDisabledMessage,disabled:r,children:e.jsx("div",{children:e.jsx(ie,{...a.register("name",{required:{message:"This field is required",value:!0},disabled:!r,maxLength:{value:IS,message:`Name should be less than ${IS} characters`},trimWhitespace:!0})})})})}),e.jsx(U,{label:$o.idLabel,children:e.jsx(Ms,{children:t})})]}),e.jsx(ks,{children:e.jsx(Ce,{disabled:!r,"data-qa":"org_name_form_submit_button",children:$o.submitText})})]})]})})},Lt={label:"HIPAA support",description:"Neon takes the security and privacy of your health-related information seriously. Enabling HIPAA support for your organization will allow HIPAA compliance to be enabled on individual projects. More details about how we support HIPAA compliance can be found in our",documentationLink:"HIPAA Compliance guide",documentationUrl:"https://neon.com/docs/security/hipaa",statusEnabled:"HIPAA SUPPORT ENABLED",statusDisabled:"HIPAA SUPPORT DISABLED",enableButton:"Enable",notAllowedLabel:t=>e.jsxs("span",{children:["Your current plan does not support HIPAA compliance."," ",e.jsx(R,{onClick:t,children:"Change my plan."})]}),confirmHeader:"Enable HIPAA Support",confirmText:"To enable HIPAA support for your organization, you must review and accept Neon’s Business Associate Agreement (BAA). The BAA explains how we handle Protected Health Information (PHI) and your responsibilities under HIPAA.",confirmButton:"Enable",confirmWarning:"HIPAA support is currently available at no additional cost. Once billing is finalized, HIPAA support will add a 15% surcharge to your monthly invoice. We’ll notify you in advance before this change takes effect.",confirmCheckbox:"I understand that HIPAA support cannot be disabled once enabled",confirmCheckboxLabel:e.jsxs(e.Fragment,{children:["I have read and agree to the terms of Neon's"," ",e.jsx(R,{href:"https://www.databricks.com/legal/neon-baa",icon:"external_link",openInNewTab:!0,children:"Business Associate Agreement (BAA)"})]}),projectSelectionTitle:"Enable HIPAA Compliance on Projects",projectSelectionDescription:"HIPAA support is active for your organization. Select the projects you want to make HIPAA compliant. You can also enable HIPAA later from each project's settings page.",projectSelectionHeader:"Project",projectSelectionWarning:"Once HIPAA compliance is enabled on a project, it cannot be disabled. Enabling HIPAA will also restart all computes, temporarily interrupting database connections.",projectSelectionCancel:"Cancel",projectSelectionEnable:"Enable",hipaaEnabledProjectsSuccess:"HIPAA compliance has been enabled for the selected projects.",hipaaEnabledOrgSuccess:"HIPAA support has been enabled for your organization",disableHipaaSupportText:"To disable HIPAA compliance for your organization, contact support."},Rce="_cardActions_10znd_1",Mce="_warningAlert_10znd_7",PS={cardActions:Rce,warningAlert:Mce},Bce="_projectSelectionHeader_vka3i_1",Dce="_projectSelectionHeaderContent_vka3i_7",Uce="_projectSelectionBody_vka3i_13",Fce="_projectSelectionRow_vka3i_18",zce="_projectSelectionRowContent_vka3i_23",qce="_warningAlert_vka3i_29",fc={projectSelectionHeader:Bce,projectSelectionHeaderContent:Dce,projectSelectionBody:Uce,projectSelectionRow:Fce,projectSelectionRowContent:zce,warningAlert:qce},Hce=({isOpen:t,onClose:s,projects:n})=>{const r=Vs(),[a,o]=m.useState([]),[i,c]=m.useState(!1),l=m.useCallback(h=>{o(g=>g.includes(h)?g.filter(f=>f!==h):[...g,h])},[]),d=m.useCallback(()=>{n&&o(n.map(h=>h.id))},[n]),u=m.useCallback(()=>{o([])},[]),p=m.useCallback(async()=>{if(a.length!==0){c(!0);try{await Promise.all(a.map(h=>r({projectId:h,data:{settings:{hipaa:!0}}}))),c(!1),o([]),oe(Lt.hipaaEnabledProjectsSuccess),s()}catch(h){Y(h),c(!1)}}},[a,r,s]);return e.jsxs(ft,{isOpen:t,onRequestClose:s,title:Lt.projectSelectionTitle,maxWidth:721,children:[e.jsxs(De,{children:[e.jsx(T,{children:Lt.projectSelectionDescription}),e.jsx("div",{className:fc.projectSelectionHeader,children:e.jsxs("div",{className:fc.projectSelectionHeaderContent,children:[e.jsx(Gp,{checked:n&&a.length===n.length,onChange:h=>{h?d():u()}}),e.jsx("span",{children:Lt.projectSelectionHeader})]})}),e.jsx("div",{className:fc.projectSelectionBody,children:n==null?void 0:n.map(h=>e.jsx("div",{className:fc.projectSelectionRow,children:e.jsxs("div",{className:fc.projectSelectionRowContent,children:[e.jsx(Gp,{checked:a.includes(h.id),onChange:()=>l(h.id)}),e.jsx("span",{children:h.name})]})},h.id))}),e.jsx(X,{appearance:"warning",className:fc.warningAlert,children:e.jsx(T,{children:Lt.projectSelectionWarning})})]}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(E,{appearance:"primary",onClick:p,disabled:a.length===0||i,loading:i,children:Lt.projectSelectionEnable})]})]})},Vce=()=>{const t=cn(),{confirm:s}=Ve(),{trackUiInteraction:n}=P(),r=ki("allow_hipaa_projects"),{org:a,isLoading:o}=re(),{isOrgAdmin:i}=Rt(),{subscriptionType:c}=he(),[l,d]=m.useState(!1),{isModalOpen:u,openModal:p,closeModal:h}=it(Je.ProjectSelection),g=rx(c),{data:f,isLoading:_}=ws();m.useEffect(()=>{c&&n("org_settings_hipaa_support_shown",{subscription_type:c,hipaa_enabled:r||!1})},[c,r,n]);const b=m.useCallback(async()=>{if(!a)return;if(!await s({header:Lt.confirmHeader,confirmButtonText:Lt.confirmButton,text:e.jsx(T,{children:Lt.confirmText}),checkboxes:{confirmation:{label:Lt.confirmCheckboxLabel}},footer:e.jsx(X,{appearance:"warning",className:PS.warningAlert,children:e.jsx(T,{children:Lt.confirmWarning})}),maxWidth:721})){n("org_settings_hipaa_support_cancelled");return}try{await G.enableOrganizationFeature(a.id,{feature:"allow_hipaa_projects"}),oe(Lt.hipaaEnabledOrgSuccess),t(uu.util.invalidateTags(["OrgLimits"])),n("org_settings_hipaa_enabled"),f&&f.length>0&&p()}catch(y){Y(y)}},[s,a,n,p,t,f]),x=m.useCallback(()=>{n("org_settings_hipaa_upgrade_cta_clicked"),d(!0)},[n]),j=m.useCallback(()=>{d(!1)},[]);return o||!a?null:e.jsxs(e.Fragment,{children:[e.jsx(Le,{id:"hipaa-support",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:e.jsx(T,{weight:"semibold",children:Lt.label})}),e.jsxs(T,{appearance:"secondary",children:[Lt.description," ",e.jsx(R,{href:Lt.documentationUrl,openInNewTab:!0,icon:"external_link",children:Lt.documentationLink})]}),e.jsx("div",{children:e.jsx(Bn,{label:r?Lt.statusEnabled:Lt.statusDisabled,appearance:r?"success":"default"})}),!r&&e.jsxs("div",{className:PS.cardActions,children:[e.jsx(E,{onClick:b,disabled:!i||!g,children:Lt.enableButton}),!g&&Lt.notAllowedLabel(x)]}),r&&e.jsx(T,{children:Lt.disableHipaaSupportText})]})}),e.jsx(lt,{type:Xe.Default,isOpen:l,onRequestClose:j}),e.jsx(Hce,{isOpen:u&&!_,onClose:h,projects:f})]})},Wce="_upgradeLink_17ao1_1",Gce={upgradeLink:Wce},pj=({type:t})=>{const[s,n]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.IpAllowRules,isOpen:s,onRequestClose:()=>n(!1)}),e.jsxs("div",{children:[e.jsx(R,{className:Gce.upgradeLink,onClick:()=>n(!0),children:"Upgrade your plan"})," ","to limit database access",t==="ip"?" to trusted IP addresses.":t==="vpc"?" using VPC.":"."]})]})},Kce="_vpcListSection_lhenx_1",Qce="_codeSpan_lhenx_8",Ff={vpcListSection:Kce,codeSpan:Qce},Yce="_vpcActiveOnField_1ltry_1",Jce={vpcActiveOnField:Yce},Zce=({vpc:t})=>{const{data:s,isLoading:n}=ZC({vpcEndpointId:t.vpc_endpoint_id,regionId:t.region_id});if(n)return e.jsx(B,{animate:!0,width:70,height:10});if(!s)return null;const r=s.num_restricted_projects>0,a=e.jsxs("span",{className:r?Jce.vpcActiveOnField:"",children:[s.num_restricted_projects," ",Rn("Project",s.num_restricted_projects)]});return r?e.jsx(te,{appearance:"rich",content:e.jsxs("div",{children:[s.example_restricted_projects.map((o,i)=>e.jsxs("span",{children:[e.jsx(R,{href:Q(C.ProjectsItem,{projectId:o}),children:o}),i<s.example_restricted_projects.length-1&&", "]},o)),s.num_restricted_projects>s.example_restricted_projects.length&&e.jsxs("span",{children:[" and ",s.num_restricted_projects-s.example_restricted_projects.length," ","more"]})]}),children:a}):a},Xce=[{header:"Region",render:({region_id:t})=>t,enableSorting:!1,accessorKey:"region_id",rowHeader:!0},{header:"VPC Endpoint ID",render:({vpc_endpoint_id:t})=>t,enableSorting:!1,accessorKey:"vpc_endpoint_id"},{header:"Active On",render:t=>e.jsx(Zce,{vpc:t}),enableSorting:!1},{header:"Tag/Label",render:({label:t})=>t?e.jsx(Ie,{children:t}):"-",enableSorting:!1,accessorKey:"label"}];function ele(t,s){const n=[];for(const r of t)s.has(r)||n.push(r);return n}const tle=()=>{const{data:t,isLoading:s}=lL(),{data:n}=ws();if(!t&&!s)return null;const r=Array.from(t??[]).sort((c,l)=>c.region_id.localeCompare(l.region_id)||c.vpc_endpoint_id.localeCompare(l.vpc_endpoint_id)),a=new Set(n==null?void 0:n.map(c=>c.region_id)),o=new Set(r==null?void 0:r.map(c=>c.region_id)),i=ele(a,o).sort();return e.jsxs(e.Fragment,{children:[r.length>0&&e.jsx("div",{className:Ff.vpcListSection,children:e.jsx(Cs,{isLoading:s,columns:Xce,rows:r,"aria-label":"Organization VPC endpoints",pageSize:5})}),i.length>0&&e.jsx("div",{className:Ff.vpcListSection,children:e.jsxs("span",{children:["No available VPC endpoints on"," ",i.map((c,l)=>e.jsxs(m.Fragment,{children:[e.jsx(Ae,{className:Ff.codeSpan,children:c}),l<i.length-1&&", "]},c))]})})]})},TS=()=>e.jsxs(Ge,{href:mu,children:["using our CLI ",e.jsx(z,{size:14,name:"external_link"})]}),sle=({isAdmin:t})=>t?e.jsxs(T,{size:"s",children:["Manage VPC endpoints ",e.jsx(TS,{})]}):e.jsxs(T,{size:"s",children:["The organization admin can manage VPC endpoints ",e.jsx(TS,{})]}),Ma={title:"Private Networking",includedInPlansBadge:"Higher-tier plans only",description:"Route traffic from your app to Neon through a protected AWS internal network.",prerequisites:{title:"Prerequisites",sameRegion:"The client application must be deployed in the same AWS region as the Neon database.",dedicatedVPCEndpoint:"A dedicated VPC endpoint to connect the Virtual Private Cloud (VPC) where the client application is deployed.",dedicatedVPCEndpointDocsLink:"View setup instructions",adminPrivileges:"Setting up Private Networking on Neon requires admin privileges"}},nle="_header_mhpba_1",rle="_prerequisites_mhpba_7",ale="_icon_mhpba_19",mj={header:nle,prerequisites:rle,icon:ale},zf=({children:t})=>e.jsxs("li",{children:[e.jsx(z,{size:16,name:"check_flat",className:mj.icon}),t]}),ole=()=>{const{isOrgAdmin:t}=Rt();return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:3,size:"h4",children:Ma.prerequisites.title}),e.jsxs("ul",{className:mj.prerequisites,children:[e.jsx(zf,{children:Ma.prerequisites.sameRegion}),e.jsxs(zf,{children:[Ma.prerequisites.dedicatedVPCEndpoint," ",t&&e.jsx(R,{href:mu,openInNewTab:!0,children:Ma.prerequisites.dedicatedVPCEndpointDocsLink})]}),t?null:e.jsx(zf,{children:Ma.prerequisites.adminPrivileges})]})]})},ile=()=>{const{isOrgAdmin:t,isLoading:s}=Rt(),{max_vpc_endpoints_per_region:n}=Fb(),r=n>0;return s?e.jsx(ve,{}):e.jsx(Le,{id:"private-networking",children:e.jsxs(Ne,{children:[e.jsxs(Se,{className:mj.header,children:[Ma.title,!r&&e.jsx(Ie,{appearance:"neon",children:Ma.includedInPlansBadge})]}),e.jsx(T,{as:"p",appearance:"secondary",children:Ma.description}),r?e.jsx(tle,{}):e.jsx(ole,{}),e.jsx(ks,{children:r?e.jsx(sle,{isAdmin:t}):e.jsx(pj,{type:"default"})})]})})},ap={title:"Transfer projects",description:"Select projects to transfer",confirmationButtonText:"Next",limitReached:t=>`You have at least ${t} projects, please use the Neon API or contact our support team for help.`},AS=200,cle=({projects:t,onRequestClose:s,onSuccess:n})=>{const r=$e({defaultValues:{projectIds:[]}}),a=r.watch("projectIds"),o=a.length===(t==null?void 0:t.length),i=m.useCallback(({projectIds:u})=>{n(u)},[n]),c=m.useMemo(()=>[{key:"id",label:e.jsx(Xa,{checked:o,onChange:u=>{u.target.checked?r.setValue("projectIds",t.map(p=>p.id)):r.setValue("projectIds",[])},children:"Select all"}),renderValue:({id:u,name:p})=>e.jsx("div",{children:e.jsx(Xa,{value:u,...r.register("projectIds"),children:p})})}],[r,o,t]),l=t.length>=AS,d=a.length===0||l;return e.jsxs(ps,{providerProps:r,onSubmit:i,modalProps:{isOpen:!0,title:ap.title,onRequestClose:s},children:[e.jsx(De,{gaps:!0,children:l?e.jsx(X,{appearance:"error",children:ap.limitReached(AS)}):e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"secondary",children:ap.description}),e.jsx(xr,{cols:c,data:t,maxHeight:350})]})}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{"data-qa":"projects_transfer_confirmation_submit_button",disabled:d,children:ap.confirmationButtonText})]})]})},ai={title:"Transfer projects",description:"You can only transfer projects to another organization you are a member of. Transfers are instant, with no downtime.",disabledMessageProjectCount:"The organization has no projects",disabledMessagePermissions:"You need additional permissions to transfer projects from this organization",disabledMessageNoDestinationOrgs:"Projects cannot be transferred because you are not a member of any other organizations",disabledMessageVercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",transferButtonText:"Transfer projects"},lle="_buttonWrapper_nih2t_1",dle={buttonWrapper:lle},ule=(t,s,n,r)=>{if(r)return ai.disabledMessageVercelOrg;if(t===0)return ai.disabledMessageProjectCount;if(!s)return ai.disabledMessagePermissions;if(n===0)return ai.disabledMessageNoDestinationOrgs},hle=()=>{const{trackUiInteraction:t}=P(),s=et(),n=it(Je.TransferProjectsSelectProjects),r=it(Je.TransferProjectsSelectOrg,{syncWithUrl:!1}),{isVercelOrg:a}=re(),{isOrgAdmin:o}=Rt(),{data:i,isLoading:c}=ws(),l=(i==null?void 0:i.length)??0,{data:d}=Fn(),u=((d==null?void 0:d.length)??1)-1,p=ule(l,o,u,a),h=p===void 0,[g,f]=m.useState([]);return e.jsxs(Le,{id:"transfer",children:[!c&&i&&n.isModalOpen&&e.jsx(cle,{projects:i,onRequestClose:()=>{n.closeModal(),t("transfer_projects_modal_dismissed")},onSuccess:_=>{const b=i.filter(({id:x})=>_.includes(x));f(b),n.closeModal(),r.openModal()}}),r.isModalOpen&&e.jsx(yP,{projects:g,onRequestClose:()=>{r.closeModal(),t("transfer_projects_modal_dismissed")},onSuccess:_=>{r.closeModal(),t("transfer_projects_modal_confirmed"),s.push(Q(C.OrgProjectsList,{orgId:_}))}}),e.jsxs(Ne,{children:[e.jsx(Se,{children:ai.title}),e.jsx(T,{appearance:"secondary",children:ai.description}),e.jsx(ks,{children:e.jsx(te,{content:p,disabled:h,children:e.jsx("div",{className:dle.buttonWrapper,children:e.jsx(E,{disabled:!h,onClick:()=>{t("org_settings_transfer_submitted"),n.openModal()},"data-qa":"org_settings_transfer_form_submit_button",children:ai.transferButtonText})})})})]})]})},ple=()=>{const{orgId:t,org:s,isVercelOrg:n,isLoading:r}=re(),a=vT();return r||!t||!s?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[e.jsx(Lce,{orgId:s.id,orgName:s.name}),e.jsx(IA,{}),e.jsx($ce,{orgId:s.id,orgName:s.name}),a&&e.jsx(Vce,{}),e.jsx(ile,{}),!n&&e.jsx(hle,{}),e.jsx(Tce,{orgId:t,orgName:s.name,managedBy:s.managed_by})]})},mle="_drawer_1r7s6_1",gle={drawer:mle},PA=t=>m.useCallback(s=>{const n=new Date;return!!(t&&ZM(s.startOf("day").toDate(),n)===void 0&&XM(s.endOf("day").toDate(),t,n)===void 0)},[t]),op={lsnPlaceholder:"e.g., 0/1E89C00",timestampPlaceholder:"MM/DD/YYYY hh:mm:ss.ms",timestampSelectLabel:"Timestamp",lsnSelectLabel:"LSN"},fle="_root_1li1q_1",_le="_timestampField_1li1q_8",ble="_lsnField_1li1q_13",xle="_switchButton_1li1q_18",ud={root:fle,timestampField:_le,lsnField:ble,switchButton:xle},gj=({value:t,className:s,onChange:n,allowToSwitch:r=!0})=>{const{project:a}=F(),{trackUiInteraction:o}=P(),i=t.mode===Qe.Timestamp&&t.timestamp&&a&&e2(t.timestamp,a,new Date),c=t.mode===Qe.LSN&&t.lsn&&t2(t.lsn),l=PA(a),d=m.useCallback(u=>{const p=typeof u=="string"?XC(Da(u),Da(ke.Full),!0):u;n({sourceBranch:t.sourceBranch,mode:Qe.Timestamp,timestamp:p.toDate()})},[n,t.sourceBranch]);return e.jsxs("div",{className:V(ud.root,s),children:[t.mode===Qe.Timestamp&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:op.timestampSelectLabel,className:ud.timestampField,error:i instanceof s2?i.message:void 0,description:e.jsx(wv,{}),children:e.jsx(e0,{dateFormat:Da(ke.Date),timeFormat:Da(ke.TimeFull),initialValue:t.timestamp??void 0,placeholder:op.timestampPlaceholder,isValidDate:l,onChange:d})}),r&&e.jsx(R,{"data-qa":"toggle_PITR",className:ud.switchButton,onClick:()=>{o("branch_restore_pit_lsn_clicked"),n({sourceBranch:t.sourceBranch,mode:Qe.LSN,lsn:null})},children:"LSN"})]}),t.mode===Qe.LSN&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:op.lsnSelectLabel,className:ud.lsnField,error:c?c.message:void 0,description:e.jsx(wv,{}),descriptionNotVisible:!0,children:e.jsx(ie,{value:t.lsn??void 0,onChange:u=>n({sourceBranch:t.sourceBranch,mode:Qe.LSN,lsn:u.target.value}),placeholder:op.lsnPlaceholder})}),r&&e.jsx(R,{"data-qa":"toggle_PITR",className:ud.switchButton,onClick:()=>{o("branch_restore_pit_timestamp_clicked"),n({sourceBranch:t.sourceBranch,mode:Qe.Timestamp,timestamp:null})},children:"Timestamp"})]})]})},jle="_container_12fg1_1",vle="_restoreFromContainer_12fg1_9",yle="_restoreToContainer_12fg1_10",wle="_dropdown_12fg1_19",Sle="_actions_12fg1_23",Lo={container:jle,restoreFromContainer:vle,restoreToContainer:yle,dropdown:wle,actions:Sle},On={unarchiveWarning:({name:t})=>e.jsxs(e.Fragment,{children:["This action will unarchive ",e.jsx(Ae,{children:t})," and the restoration source branch, if applicable."]}),restoreFromMessage:(t,s,n)=>e.jsxs(e.Fragment,{children:[e.jsx(gu,{branch:t})," will be restored"," ",s?e.jsx(e.Fragment,{children:"to its past state"}):e.jsxs(e.Fragment,{children:["from ",e.jsx(gu,{branch:n.sourceBranch})]})]}),restoreToTimestamp:(t,s,n)=>e.jsxs(e.Fragment,{children:[t," ",s?"at":"to the state of"," ",e.jsx("code",{children:fe(n,ke.BranchDateTimeFormat)})]}),restoreToLsn:(t,s,n)=>e.jsxs(e.Fragment,{children:[t," ",s?"at":"to the state of"," ",e.jsx("code",{children:n})]}),restoreToHead:t=>e.jsxs(e.Fragment,{children:[t," at its current state"]}),restoreDatabasesMessage:t=>e.jsxs(e.Fragment,{children:["Databases to be restored: ",t]}),restoreRenamedMessage:t=>e.jsxs(e.Fragment,{children:["This branch will be kept and renamed to ",e.jsx("code",{children:t})]}),resetPasswordsForSameBranch:t=>{switch(t.mode){case Qe.Timestamp:return e.jsxs(e.Fragment,{children:["Any Postgres role deleted between now and"," ",e.jsx("code",{children:fe(t.timestamp,ke.BranchDateTimeFormat)})," ","will get their passwords reset"]});case Qe.LSN:return e.jsxs(e.Fragment,{children:["Any Postgres role deleted between now and"," ",e.jsx("code",{children:t.lsn})," will get their passwords reset"]});case Qe.Head:return null}},restoreUndoMessage:t=>e.jsxs(e.Fragment,{children:["You can undo the restore as long as ",e.jsx("code",{children:t})," is retained"]}),storageBillMessage:t=>e.jsxs(e.Fragment,{children:["Keeping ",e.jsx("code",{children:t})," will affect your storage bill"]}),resetTTL:(t,s)=>e.jsxs(e.Fragment,{children:["Expiration time on ",e.jsx(Ae,{children:t})," will be reset to"," ",dL(s)," from restoration time."]})},Cle="_header_cioj6_1",kle="_list_cioj6_11",Ile="_message_cioj6_18",Ple="_icon_cioj6_35",Dp={header:Cle,list:kle,message:Ile,icon:Ple},Tle=({branch:t,restoreTo:s})=>{const n=t.id===s.sourceBranch.id,r=On.restoreFromMessage(t,n,s);switch(s.mode){case Qe.Timestamp:return e.jsx(e.Fragment,{children:On.restoreToTimestamp(r,n,s.timestamp)});case Qe.LSN:return e.jsx(e.Fragment,{children:On.restoreToLsn(r,n,s.lsn)});case Qe.Head:return e.jsx(e.Fragment,{children:On.restoreToHead(r)})}},Ro=({children:t,iconName:s})=>e.jsxs("li",{children:[e.jsx(z,{name:s,size:16,className:Dp.icon}),e.jsx("div",{children:t})]}),TA=({restoreTo:t})=>{var o,i;const{list:s}=un(),{branch:n}=Ti();if(!n)return;const r=n.id===t.sourceBranch.id,a=`${n.name}_old_{${n2}}`;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Dp.header,children:[e.jsx(z,{name:"restore",size:40}),n.current_state==="archived"&&e.jsx(X,{appearance:"warning",children:On.unarchiveWarning(n)}),e.jsx("div",{className:Dp.message,children:e.jsx(Tle,{branch:n,restoreTo:t})})]}),e.jsxs("ul",{className:Dp.list,children:[s.length>1?e.jsx(Ro,{iconName:"check_flat",children:On.restoreDatabasesMessage(s.map((c,l)=>e.jsxs(e.Fragment,{children:[l===0?null:", ",e.jsx("code",{children:c.name},c.id)]})))}):null,(o=t.sourceBranch)!=null&&o.protected&&r?e.jsx(Ro,{iconName:"check_flat",children:On.resetPasswordsForSameBranch(t)}):null,e.jsx(Ro,{iconName:"check_flat",children:On.restoreRenamedMessage(a)}),n.expires_at&&e.jsx(Ro,{iconName:"check_flat",children:On.resetTTL(a,n.ttl_interval_seconds??0)}),e.jsx(Ro,{iconName:"check_flat",children:On.restoreUndoMessage(a)}),e.jsx(Ro,{iconName:"billing",children:On.storageBillMessage(a)}),(i=t.sourceBranch)!=null&&i.protected&&!r?e.jsxs(Ro,{iconName:"check_flat",children:["No Postgres role passwords from"," ",e.jsx(gu,{branch:t.sourceBranch})," will be used on"," ",e.jsx(gu,{branch:n})]}):null]})]})},Ale="_container_1aj9l_1",Nle={container:Ale},Ele=({restoreTo:t,onRequestClose:s,...n})=>{const{restore:r,isRestoring:a}=Ti(),{trackUiInteraction:o}=P();return e.jsx(oa,{...n,"aria-label":"Branch Restore",size:"m",onRequestClose:s,children:e.jsx(ia,{title:"Branch Restore",footer:e.jsxs(e.Fragment,{children:[e.jsx(E,{appearance:"secondary",size:"l",onClick:()=>{o("branch_restore_restore_cancelled"),s==null||s()},children:"Cancel"}),e.jsx(E,{disabled:a,appearance:"primary",size:"l",onClick:()=>{o("branch_restore_restore_confirmed"),r()},children:"Restore"})]}),children:e.jsx("div",{className:Nle.container,children:e.jsx(TA,{restoreTo:t})})})})},Ole=({currentBranch:t,compareSource:s,onChange:n,changeableCurrentBranch:r,allowRestore:a=!1,...o})=>{var w;const{data:{selectOptions:i}}=ul({projectId:o.project.id,branchId:(t==null?void 0:t.id)??""}),{trackUiInteraction:c}=P(),[l,d]=m.useState(!1),[u,p]=m.useState(o.compareTo),[h,g]=m.useState(null),[f,_]=m.useState(t),[b,x]=m.useState((s==null?void 0:s.branch)??t),{selectOptions:j}=xt(),v=m.useMemo(()=>(s==null?void 0:s.mode)===Vd.Head?j.filter(({value:k})=>b.id!==k):j,[b,j,s==null?void 0:s.mode]),y=m.useMemo(()=>j.filter(({value:k})=>f.id!==k),[f,j]),S=m.useMemo(()=>{if(h&&!zu(u,o.project,new Date))return{projectId:o.project.id,currentBranch:f,database:h.database,compareSource:{...V0(u),branch:b}}},[o.project,b,u,h,f]);return e.jsxs(e.Fragment,{children:[e.jsx(t0,{projectId:o.project.id,branchId:(w=u.sourceBranch)==null?void 0:w.id,children:e.jsx(Ele,{isOpen:l,restoreTo:u,onRequestClose:()=>d(!1)})}),e.jsxs("div",{className:Lo.container,children:[e.jsxs("div",{className:Lo.restoreToContainer,children:[e.jsx(U,{label:Ll.baseBranchLabel,className:Lo.dropdown,description:Ll.baseBranchDesc,children:e.jsx(Kp,{disabled:!r,options:v,value:v.find(k=>{var N;return((N=k.branch)==null?void 0:N.id)===f.id}),onChange:k=>{k&&k.branch&&(c("schema_diff_form_branch_changed"),_(k.branch))}})}),e.jsx(U,{label:Ll.databaseSelectLabel,className:Lo.dropdown,children:e.jsx(E0,{projectId:o.project.id,value:h,options:i,disabled:i.length<=1,onChange:(k,N)=>{N||c("schema_diff_form_database_changed"),g(k)},canCreateDatabase:!1})})]}),e.jsxs("div",{className:Lo.restoreFromContainer,children:[f.id!==b.id&&e.jsx(U,{label:Ll.compareBranchLabel,className:Lo.dropdown,description:(s==null?void 0:s.mode)===Vd.Head?Ll.compareBranchDesc:"",children:e.jsx(Kp,{options:y,value:y.find(k=>{var N;return((N=k.branch)==null?void 0:N.id)===b.id}),onChange:k=>{k&&k.branch&&(c("schema_diff_form_branch_changed"),x(k.branch))}})}),(s==null?void 0:s.mode)!==Vd.Head&&e.jsx(gj,{value:u,allowToSwitch:!1,onChange:k=>{c("schema_diff_form_pit_changed"),p(k)}})]}),e.jsxs("div",{className:Lo.actions,children:[e.jsx(E,{disabled:!S,appearance:"primary",onClick:()=>{c("schema_diff_form_compare_button_clicked"),n(S)},children:"Compare"}),a&&e.jsx(E,{disabled:!S,appearance:"secondary",icon:"arrow_right",iconSide:"right",onClick:()=>{d(!0)},children:"Restore"})]})]})]})},fj=({currentBranch:t,changeableCurrentBranch:s,...n})=>{const{trackUiInteraction:r}=P(),{list:a}=un(),{project:o}=F(),[i,c]=m.useState(t),[l,d]=m.useState(a[0]),[u,p]=m.useState();return m.useEffect(()=>{n.isOpen&&r("schema_diff_drawer_opened")},[n.isOpen,r]),m.useEffect(()=>{n.compareTo.sourceBranch&&!zu(n.compareTo,o,new Date)&&p({...V0(n.compareTo),branch:n.compareTo.sourceBranch})},[n.compareTo,o]),!l&&a.length>0&&d(a[0]),!o||!i||!n.isOpen?null:e.jsx(oa,{...n,"aria-label":"Schema Diff",className:gle.drawer,children:e.jsxs(ia,{title:"Schema Diff",children:[e.jsx(Ole,{...n,changeableCurrentBranch:s,project:o,currentBranch:i,compareSource:u,onChange:h=>{h&&(c(h.currentBranch),d(h.database),p(h.compareSource))}}),u&&l&&e.jsx(e.Fragment,{children:e.jsx(W0,{projectId:o.id,currentBranch:i,database:l,compareSource:u})})]})})},$le=t=>{const[s,n]=m.useState(!1),{project:r}=F(),{trackUiInteraction:a}=P(),o=!t.currentBranch||!r||zu(t.compareTo,r,new Date);return e.jsxs(e.Fragment,{children:[!o&&e.jsx(fj,{isOpen:s,onRequestClose:()=>{a("schema_diff_drawer_dismissed"),n(!1)},allowRestore:!0,...t}),e.jsx(E,{appearance:"secondary",disabled:!!o,icon:"schema",onClick:()=>{a("schema_diff_button_clicked"),n(!0)},children:"Schema Diff"})]})},wb={title:"Branch Expiration",button:"Confirm",cancel:"Cancel"},Lle="_root_144m9_1",Rle="_footer_144m9_8",NS={root:Lle,footer:Rle},Mle=({branch:t,onSuccess:s,onFail:n,closeModal:r})=>{const a=be(),o=Ss({defaultValues:{ttlEnabled:!!t.expires_at,expiresAt:t.expires_at?new Date(t.expires_at):mt().add(1,"day").toDate()},mode:"onChange",shouldUnregister:!0}),i=l=>{var d;return G.updateProjectBranch(t.project_id,t.id,{branch:{expires_at:l.ttlEnabled?(d=l.expiresAt)==null?void 0:d.toISOString():null}}).then(({data:u})=>{a.invalidateQueries({queryKey:s0(t.project_id,t.id)}),a.invalidateQueries({queryKey:ml({projectId:t.project_id})}),s==null||s(u.branch),r()}).catch(u=>{n==null||n(u),Y(u)})},c="branch_update_ttl_form";return e.jsx(Jt,{...o,children:e.jsx(qt,{id:c,onSubmit:async l=>{l.preventDefault(),await o.handleSubmit(i)()},children:e.jsxs("div",{className:NS.root,children:[e.jsx(uL,{trackUiInteractionEvent:"branch_list_ttl_updated"}),e.jsxs("footer",{className:NS.footer,children:[e.jsx(E,{form:c,disabled:Object.keys(o.formState.errors).length>0,type:"submit",children:wb.button}),e.jsx(E,{appearance:"secondary",onClick:()=>{r()},children:wb.cancel})]})]})})})},AA=({isOpen:t,onClose:s,branch:n})=>e.jsx(ft,{title:wb.title,isOpen:t,onRequestClose:s,children:e.jsx(Mle,{branch:n,closeModal:s})}),Ble=({branch:t,onSuccess:s,onFail:n,children:r})=>{const a=be(),o=Ss({defaultValues:{name:t.name},shouldUnregister:!0}),i=l=>G.updateProjectBranch(t.project_id,t.id,{branch:{name:l.name}}).then(({data:d})=>{a.invalidateQueries({queryKey:s0(t.project_id,t.id)}),a.invalidateQueries({queryKey:ml({projectId:t.project_id})}),s&&s(d.branch)}).catch(d=>{n&&n(d)});return e.jsx(Jt,{...o,children:e.jsx(qt,{id:"branch_rename_form",onSubmit:o.handleSubmit(i),children:r})})},Dle=({branch:t,isOpen:s,onSuccess:n,onClose:r})=>{const{formatMessage:a}=hn();return e.jsx(ft,{title:a({id:"7X0Q9c",defaultMessage:[{type:0,value:"Rename the branch"}]}),isOpen:s,onRequestClose:r,children:e.jsxs(Ble,{branch:t,onSuccess:o=>{n==null||n(o)},onFail:Y,children:[e.jsx(De,{children:e.jsx(hM,{})}),e.jsxs(Te,{children:[e.jsx(dn,{appearance:"secondary"}),e.jsx(Ce,{disablePristine:!0,children:"Save"})]})]})})},Ule=({branchName:t})=>e.jsx(gt,{id:"aOclzX",defaultMessage:[{type:0,value:"This will permanently delete the branch "},{type:8,value:"code",children:[{type:1,value:"branchName"}]},{type:0,value:". Are you sure you want proceed?"}],values:{code:s=>e.jsx("code",{children:s}),branchName:t}}),Fle=()=>{const{formatMessage:t}=hn(),{confirm:s}=Ve(),n=fr(async(r,a)=>{if(await s({header:t({id:"ubQGRo",defaultMessage:[{type:0,value:"Delete the branch?"}]}),appearance:"danger",confirmButtonText:t({id:"igFv8K",defaultMessage:[{type:0,value:"Delete"}]}),text:e.jsx(X,{appearance:"error",children:e.jsx(Ule,{branchName:r.name})})}))try{await G.deleteProjectBranch(r.project_id,r.id),a==null||a()}catch(i){Y(i)}});return m.useCallback((r,a)=>{const o=r.default||r.protected;let i="";return r.default?i=t({id:"vUtXcT",defaultMessage:[{type:0,value:"You can't delete the default branch. To delete this branch, set another branch as the default."}]}):r.protected&&(i=t({id:"Nm0+mG",defaultMessage:[{type:0,value:"You can't delete protected branches. To delete this branch, change its status to unprotected."}]})),{label:t({id:"Gy61eh",defaultMessage:[{type:0,value:"Delete"}]}),disabled:o,tooltip:i,icon:"trash",onClick:()=>n(r,a)}},[t,n])},Sb={menuItemLabel:"Reset from parent",tooltipContent:t=>t.default?"You can't reset the default branch. Set another branch as default, then try again.":t.protected?"You can't reset protected branches. Unprotect this branch first, then try again.":t.parent_id?null:"You can't reset a root branch. It has no parent."},zle=()=>{const t=n0(),{trackUiInteraction:s}=P();return m.useCallback((n,r)=>{const a=Sb.tooltipContent(n),o=a!==null;return{label:Sb.menuItemLabel,disabled:o,icon:"branch_reset",tooltip:a??void 0,onClick:()=>{s("branch_reset_to_parent_reset_clicked"),t(n,r)}}},[t,s])},qle=t=>{const{formatMessage:s}=hn();return m.useCallback(n=>{if(n.parent_id)return{label:s({id:"RC/oaP",defaultMessage:[{type:0,value:"Compare to parent"}]}),icon:"schema",onClick:()=>{t(n)}}},[t,s])},Hle="_mainSection_1q27m_1",Vle="_secondarySection_1q27m_9",ES={mainSection:Hle,secondarySection:Vle},Wle=()=>{const{formatMessage:t}=hn(),{confirm:s}=Ve(),n=fr(async(r,a)=>{if(await s({header:t({id:"p+6ezX",defaultMessage:[{type:0,value:"Set as default"}]}),text:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ES.mainSection,children:e.jsx(gt,{id:"9mxrEx",defaultMessage:[{type:8,value:"code",children:[{type:1,value:"branchName"}]},{type:0,value:" will be set as your default branch."}],values:{branchName:r.name,code:i=>e.jsx("code",{children:i})}})}),e.jsx("div",{className:ES.secondarySection,children:e.jsx(gt,{id:"We/vpg",defaultMessage:[{type:0,value:"The compute endpoint associated with the default branch remains accessible if you exceed project limits, ensuring uninterrupted access to data on the default branch."}]})})]}),confirmButtonText:t({id:"wi/Wno",defaultMessage:[{type:0,value:"Set as default"}]}),hint:e.jsxs("span",{children:["See"," ",e.jsx(R,{href:"https://neon.com/docs/manage/branches",openInNewTab:!0,children:"Default branch"})," ","for more information."]})}))try{const{data:i}=await G.setDefaultProjectBranch(r.project_id,r.id);a==null||a(i.branch)}catch(i){Y(i)}});return m.useCallback((r,a)=>{const o=r.default||!!r.expires_at;let i="";return r.default?i=t({id:"TosaI9",defaultMessage:[{type:0,value:"You can't make this branch default. It's already a default branch."}]}):r.expires_at&&(i=t({id:"IKmrmd",defaultMessage:[{type:0,value:"Branches with an expiration date cannot be set as default"}]})),{label:t({id:"a83I3L",defaultMessage:[{type:0,value:"Set as default"}]}),disabled:o,tooltip:i,icon:"check_hex",onClick:()=>n(r,a)}},[n,t])},Gle="_mainSection_1tehd_1",Kle="_listHeading_1tehd_17",Qle="_list_1tehd_17",Yle="_listItem_1tehd_29",Jle="_icon_1tehd_35",ti={mainSection:Gle,listHeading:Kle,list:Qle,listItem:Yle,icon:Jle},hd=({children:t})=>e.jsxs("li",{className:ti.listItem,children:[e.jsx(z,{name:"check_flat",size:16,className:ti.icon}),e.jsx("span",{children:t})]}),NA=({branch:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:ti.mainSection,children:[e.jsx(z,{"aria-label":"Protected branch",role:"img",name:"protect",size:40}),e.jsxs("span",{children:[e.jsx("code",{children:t.name})," will be set as"," ",t.protected?"an unprotected":"a protected"," branch."]})]}),!t.protected&&e.jsxs(e.Fragment,{children:[t.current_state==="archived"&&e.jsx(X,{appearance:"info",children:e.jsx(gt,{id:"eG4TIB",defaultMessage:[{type:0,value:"This branch is archived. Setting it to protected will unarchive it."}]})}),e.jsxs("section",{children:[e.jsx(Z,{level:6,className:ti.listHeading,children:"Protected branches:"}),e.jsxs("ul",{className:ti.list,children:[e.jsx(hd,{children:"Can't be deleted"}),e.jsx(hd,{children:"Can't be archived"}),e.jsx(hd,{children:"Can't be reset"})]})]}),e.jsxs("section",{children:[e.jsx(Z,{level:6,className:ti.listHeading,children:"Also:"}),e.jsxs("ul",{className:ti.list,children:[e.jsx(hd,{children:"Projects with a protected branch can't be deleted"}),e.jsx(hd,{children:"Computes for protected branches can't be deleted"})]})]}),e.jsxs("section",{children:["You can also restrict your IP Allow list to protected branches only. See"," ",e.jsx(R,{openInNewTab:!0,"aria-label":"IP Allow configuration",href:"https://neon.com/docs/manage/projects#configure-ip-allow",icon:"external_link",children:"IP Allow"})]})]})]}),Zle=()=>{const{formatMessage:t}=hn(),s=O0(),{confirm:n}=Ve(),{trackUiInteraction:r}=P(),a=fr(async(o,i)=>{if(r(o.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await n({header:o.protected?t({id:"dq2cu/",defaultMessage:[{type:0,value:"Set as unprotected"}]}):t({id:"8Ve7cf",defaultMessage:[{type:0,value:"Set as protected"}]}),text:e.jsx(NA,{branch:o}),confirmButtonText:o.protected?t({id:"bIGBsR",defaultMessage:[{type:0,value:"Set as unprotected"}]}):t({id:"dlXiH9",defaultMessage:[{type:0,value:"Set as protected"}]}),hint:e.jsxs("span",{children:["See"," ",e.jsx(R,{href:Am,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){r(o.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}r(o.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:l}}=await G.updateProjectBranch(o.project_id,o.id,{branch:{protected:!o.protected}});oe(l.protected?e.jsx(gt,{id:"N5IUPN",defaultMessage:[{type:8,value:"code",children:[{type:1,value:"branchName"}]},{type:0,value:" is now set as a protected branch."}],values:{code:d=>e.jsx("code",{children:d}),branchName:l.name}}):e.jsx(gt,{id:"paqVzP",defaultMessage:[{type:8,value:"code",children:[{type:1,value:"branchName"}]},{type:0,value:" is now set as an unprotected branch."}],values:{code:d=>e.jsx("code",{children:d}),branchName:l.name}})),i(l)}catch(l){Y(l)}});return m.useCallback((o,i)=>{const{enabled:c,reason:l}=s(o);return{label:o.protected?t({id:"5j2JW0",defaultMessage:[{type:0,value:"Set as unprotected"}]}):t({id:"9gwEIu",defaultMessage:[{type:0,value:"Set as protected"}]}),disabled:!c,tooltip:l,icon:"protect",onClick:()=>a(o,i)}},[t,s,a])},EA=m.createContext(null),_j=({children:t,refreshBranches:s,onDeleteBranch:n})=>{const{trackUiInteraction:r}=P(),[a,o]=m.useState(null),{branchesById:i}=xt(),c=m.useCallback(h=>{o({type:"rename-modal",branch:h})},[]),l=m.useCallback(h=>{o({type:"ttl-modal",branch:h})},[]),d=m.useCallback(h=>{o({type:"create-child-branch",branch:h})},[]),u=m.useCallback(h=>{r("schema_diff_link_clicked"),o({type:"schema-diff-drawer",branch:h})},[r]),p=m.useMemo(()=>({renameBranch:c,adjustBranchTTL:l,refreshBranches:s,onDeleteBranch:n,schemaDiff:u,createChildBranch:d}),[c,l,s,n,u,d]);return e.jsxs(EA.Provider,{value:p,children:[(a==null?void 0:a.type)==="ttl-modal"&&e.jsx(AA,{branch:a.branch,isOpen:!0,onClose:()=>o(null)}),(a==null?void 0:a.type)==="rename-modal"&&e.jsx(Dle,{branch:a.branch,isOpen:!0,onClose:()=>o(null),onSuccess:()=>{s(),o(null)}}),(a==null?void 0:a.type)==="schema-diff-drawer"&&e.jsx(fj,{currentBranch:a.branch.parent_id?i[a.branch.parent_id]??null:null,compareTo:{sourceBranch:a.branch,mode:Qe.Head},onRequestClose:()=>(r("schema_diff_drawer_dismissed"),o(null)),isOpen:!0,changeableCurrentBranch:!0}),(a==null?void 0:a.type)==="create-child-branch"&&e.jsx($0,{initialParentId:a.branch.id,isOpen:!0,onCancel:()=>o(null),onSuccess:()=>{s(),o(null)}}),t]})},OA=({omitCreateChildBranch:t,omitToggleProtectedBranch:s}={})=>{const{formatMessage:n}=hn(),r=m.useContext(EA),a=ge("ttl_branches")||!1,{branches:o}=xt();if(r==null)throw new Error("useBranchActions must be used within a BranchActionsProvider");const{renameBranch:i,refreshBranches:c,onDeleteBranch:l,createChildBranch:d,adjustBranchTTL:u}=r,p=zle(),h=Fle(),g=qle(r.schemaDiff),f=Wle(),_=Zle();return m.useCallback(b=>{const x=!!b.expires_at,j=b.protected,v=b.default,y=hL(b,o).length>0;return He([!t&&{label:n({id:"PPTt3+",defaultMessage:[{type:0,value:"Create child branch"}]}),onClick:()=>d(b),icon:"branch",disabled:x,tooltip:x?n({id:"baS/+A",defaultMessage:[{type:0,value:"Branches with an expiration date cannot have child branches"}]}):void 0},a&&{label:n(x?{id:"tX7kDz",defaultMessage:[{type:0,value:"Update expiration"}]}:{id:"kFrnoT",defaultMessage:[{type:0,value:"Set expiration"}]}),disabled:j||v||y,tooltip:y?n({id:"2Jdord",defaultMessage:[{type:0,value:"Branches with children cannot have an expiration date"}]}):j||v?n({id:"yLQs0w",defaultMessage:[{type:0,value:"Default and Protected branches cannot have an expiration date."}]}):void 0,onClick:()=>{u(b)},icon:"autosuspend"},p(b,c),g(b),!s&&_(b,c),f(b,c),{label:n({id:"plO3dW",defaultMessage:[{type:0,value:"Rename"}]}),onClick:()=>i(b),icon:"edit"},h(b,()=>{c(),l==null||l()})])},[n,i,c,p,h,_,f,l,g,t,s,d,u,a,o])},Xle="_tooltip_1lmrz_1",ede="_label_1lmrz_5",OS={tooltip:Xle,label:ede},ag=({endpoint:t})=>e.jsx(te,{placement:"bottom-start",content:e.jsx("div",{className:OS.tooltip,children:Wp(t)?e.jsxs(e.Fragment,{children:["Autoscaling is on.",e.jsx("br",{}),"Min: ",Mn(t.autoscaling_limit_min_cu),e.jsx("br",{}),"Max: ",Mn(t.autoscaling_limit_max_cu)]}):Mn(t.autoscaling_limit_max_cu)}),children:e.jsx("span",{className:OS.label,children:Wp(t)?e.jsxs(e.Fragment,{children:[Tp(t.autoscaling_limit_min_cu)," ↔"," ",Tp(t.autoscaling_limit_max_cu)," CU"]}):e.jsxs(e.Fragment,{children:[Tp(t.autoscaling_limit_max_cu)," CU"]})})}),tde="_root_14x9h_1",sde={root:tde},$A=({branchId:t,endpoints:s})=>{const{project:n}=F(),[r,a]=m.useState(!1),o=m.useMemo(()=>s.find(i=>i.branch_id===t&&br(i)),[s,t]);return o?e.jsxs(e.Fragment,{children:[r&&n&&e.jsx(uo,{isOpen:!0,mode:"edit",project:n,endpoint:o,onRequestClose:()=>a(!1)}),e.jsx(R,{onClick:()=>{a(!0)},children:e.jsxs("div",{className:sde.root,children:[e.jsx(ag,{endpoint:o}),e.jsx(ax,{endpoint:o})]})})]}):e.jsx(e.Fragment,{children:"-"})},nde="_icon_1yii0_1",rde="_tooltipContent_1yii0_6",ade="_tooltipLink_1yii0_13",qf={icon:nde,tooltipContent:rde,tooltipLink:ade},ode=({branch:t,className:s})=>{const n=t==null?void 0:t.name.includes("anom");if(!t||!n)return null;const r=e.jsxs("div",{className:qf.tooltipContent,children:[e.jsx(T,{size:"m",children:"Anonymized Branch"}),e.jsx(T,{size:"s",children:"This branch has been anonymized. All or part of its data has been replaced with synthetic data."}),e.jsx(R,{openInNewTab:!0,href:pL,className:qf.tooltipLink,children:"Learn more"})]});return e.jsx(te,{appearance:"rich",placement:"bottom",content:r,maxWidth:310,children:e.jsx(z,{"aria-label":"Branch with anonymization",role:"img",className:V(s,qf.icon),name:"mask",size:16})})},LA=({branch:t,className:s})=>!t||t.init_source!=="schema-only"&&t.init_source!=="parent-schema"?null:e.jsx(Ie,{className:s,children:"schema-only"}),ide="_icon_1yii0_1",cde="_tooltipContent_1yii0_6",lde="_tooltipLink_1yii0_13",Hf={icon:ide,tooltipContent:cde,tooltipLink:lde},dde=({branch:t,className:s})=>{if(!t||!t.expires_at)return null;const n=e.jsxs("div",{className:Hf.tooltipContent,children:[e.jsxs(T,{size:"m",children:["Will automatically delete on ",fe(t.expires_at)]}),e.jsx(T,{size:"s",children:"This branch cannot be protected, set as default, or have child branches. Expiration resets when resetting from parent."}),e.jsx(R,{openInNewTab:!0,href:r0,className:Hf.tooltipLink,children:"Learn more"})]});return e.jsx(te,{appearance:"rich",placement:"bottom",content:n,maxWidth:310,children:e.jsx(z,{"aria-label":"Branch with expiration date",role:"img",className:V(s,Hf.icon),name:"autosuspend",size:16})})},Vf={title:t=>e.jsxs(e.Fragment,{children:["Archived on"," ",fe(t,ke.BranchDateTimeFormat)," due to inactivity"]}),description:"This branch was archived to minimize storage costs. You can unarchive it by connecting to the branch or querying it.",learnMore:"Learn more"},ude="_icon_zexke_1",hde="_tooltip_zexke_5",$S={icon:ude,tooltip:hde},pde=({branch:t,className:s})=>t.current_state!=="archived"?null:e.jsx(te,{appearance:"rich",content:e.jsxs("div",{className:$S.tooltip,children:[e.jsx(Z,{level:6,children:Vf.title(t.state_changed_at)}),e.jsx("p",{children:Vf.description}),e.jsx(R,{href:nx,openInNewTab:!0,children:Vf.learnMore})]}),children:e.jsx(z,{"data-qa":"archived-branch-icon","aria-label":"Archived branch",role:"img",className:V(s,$S.icon),name:"backup",size:16})}),mde="_name_6ws82_1",gde="_name_action_6ws82_6",fde="_wrapper_6ws82_11",nr={name:mde,name_action:gde,wrapper:fde,default:"_default_6ws82_17"},RA=({branch:t,searchWords:s})=>e.jsxs("div",{className:nr.wrapper,children:[e.jsx(F0,{title:t.name,className:V(nr.name,nr.name_action),searchWords:s,textToHighlight:t.name}),e.jsx(a0,{className:nr.default,branch:t}),e.jsx(LA,{className:nr.primaryButton,branch:t}),e.jsx(ode,{className:nr.default,branch:t}),e.jsx(o0,{className:nr.default,branch:t}),e.jsx(pde,{className:nr.default,branch:t}),e.jsx(dde,{className:nr.default,branch:t})]}),_de=({branch:t,branchesById:s})=>{const n=t.restored_from?void 0:t.parent_id,r=n?s[n]:void 0,{branch:a,isLoading:o}=mL(t.project_id,r?void 0:n);if(o)return null;const i=r||a;return e.jsx("div",{title:n?i==null?void 0:i.name:void 0,className:nr.name,children:n?i==null?void 0:i.name:"-"})},bde="_createdBy_arhci_1",xde="_hasAnnotations_arhci_6",jde="_border_arhci_11",vde="_source_arhci_15",yde="_sourceEmail_arhci_22",Mo={createdBy:bde,hasAnnotations:xde,border:jde,source:vde,sourceEmail:yde},wde=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()):!1,au=({createdBy:t,iconOnly:s=!1,ref:n})=>{if(t==="vercel"||t==="github"){const r=t==="vercel"?"Vercel":"GitHub";return e.jsxs("span",{className:V(Mo.createdBy,Mo.hasAnnotations),ref:n,"data-qa":"created-by-trigger",children:[e.jsx(z,{name:t,size:16}),s?null:e.jsx("span",{className:V(Mo.source,Mo.border),title:r,children:r})]})}return e.jsx("span",{ref:n,className:Mo.createdBy,"data-qa":"created-by-trigger",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Ou,{image:t.image,name:t.name,size:"s"}),s?null:e.jsx("span",{className:wde(t.name)?Mo.sourceEmail:Mo.source,title:t.name,children:t.name})]}):"-"})},Sde="_popupContent_exuf0_1",Cde={popupContent:Sde},MA=({content:t,children:s})=>e.jsx(te,{appearance:"rich",maxWidth:350,placement:"bottom",content:e.jsx("div",{className:Cde.popupContent,children:t}),children:s}),kde="_flex_nq8rf_1",Ide="_nowrap_nq8rf_9",Fd={flex:kde,nowrap:Ide},og=({username:t,displayName:s,href:n,nowrap:r})=>{const a=e.jsxs(e.Fragment,{children:[e.jsx(Ou,{name:s??t,size:"s"}),s??t]});return n?e.jsx(R,{openInNewTab:!0,href:n,className:V(Fd.flex,{[Fd.nowrap]:r}),children:a}):e.jsx(T,{className:V(Fd.flex,{[Fd.nowrap]:r}),children:a})},Pl=({href:t,iconName:s,linkText:n})=>e.jsx(e.Fragment,{children:e.jsxs(T,{className:Fd.flex,children:[e.jsx(z,{name:s,size:16}),e.jsx(R,{openInNewTab:!0,href:t,children:n})]})}),Pde=({annotation:t})=>{const{value:s}=t,n=s["github-pr-number"],r=s["github-pr-title"],a=s["github-commit-repo"];if(!a||!n||!r)return null;const o=`https://github.com/${a}/pull/${n}`;return e.jsx(Pl,{href:o,linkText:r,iconName:"github_pr"})},Tde=({annotation:t})=>{const{value:s}=t,n=s["github-commit-repo"];if(!n)return null;const r=`https://github.com/${n}`;return e.jsx(Pl,{href:r,linkText:n,iconName:"github_mono"})},Ade=({annotation:t,iconOnly:s})=>e.jsx(MA,{content:e.jsxs(e.Fragment,{children:[e.jsx(og,{username:t.value["github-commit-author-login"]}),e.jsx(Pde,{annotation:t}),e.jsx(Tde,{annotation:t})]}),children:e.jsx(au,{iconOnly:s,createdBy:"github"})}),Nde={github:"github_mono",bitbucket:"bitbucket",gitlab:"gitlab"},Ede=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],a=s["vercel-commit-repo"],o=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${a}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${a}/branch/${r}`;case"gitlab":return`https://gitlab.com/${a}/-/tree/${r}`;default:return null}},[n,a,r]);return!o||!r||!a?null:e.jsx(Pl,{href:o,iconName:"branch",linkText:s["vercel-commit-ref"]})},Ode=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],a=s["vercel-change-request-id"],o=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}/pull/${a}`;case"bitbucket":return`https://bitbucket.org/${r}/pull-requests/${a}`;case"gitlab":return`https://gitlab.com/${r}/-/merge_requests/${a}`;default:return null}},[n,r,a]);return!o||!r?null:e.jsx(Pl,{href:o,iconName:"github_pr",linkText:"Pull Request"})},$de=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],a=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}`;case"bitbucket":return`https://bitbucket.org/${r}`;case"gitlab":return`https://gitlab.com/${r}`;default:return null}},[n,r]);return!a||!r?null:e.jsx(Pl,{href:a,iconName:Nde[n]??"github",linkText:r})},Lde=({annotation:t})=>{const s=t.value["vercel-deployment-link"];if(!s)return null;const n=s.startsWith("https://")?s:`https://${s}`;return e.jsx(Pl,{href:n,linkText:"Vercel Preview",iconName:"vercel"})},Rde=({annotation:t,iconOnly:s})=>{const n=t.value["vercel-change-request-id"];return e.jsx(MA,{content:e.jsxs(e.Fragment,{children:[e.jsx(og,{username:t.value["vercel-commit-author-login"],displayName:t.value["vercel-commit-author-name"]}),e.jsx(Lde,{annotation:t}),n?e.jsx(Ode,{annotation:t}):e.jsx(Ede,{annotation:t}),e.jsx($de,{annotation:t})]}),children:e.jsx(au,{iconOnly:s,createdBy:"vercel"})})},fm=({branch:t,annotation:s,iconOnly:n})=>{if(t.creation_source==="vercel")return e.jsx(e.Fragment,{children:s?e.jsx(Rde,{annotation:s,iconOnly:n}):e.jsx(au,{iconOnly:n,createdBy:"vercel"})});if(s&&gL(t,s))return e.jsx(Ade,{annotation:s,iconOnly:n});const a=t.created_by;return n?e.jsx(te,{content:a==null?void 0:a.name,children:e.jsx(au,{iconOnly:!0,createdBy:a})}):e.jsx(au,{createdBy:a})},Mde=({endpoints:t,annotations:s={},branchesById:n,searchValue:r})=>{const a=ge("growth_hide_active_hours"),o=ge("branches_list_server_side_sorting"),i=m.useMemo(()=>o?{}:{enableSorting:!0,sortingFn:"protectedBranchesFirst"},[o]);return m.useMemo(()=>[{id:"branch_name",header:"Branch",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,rowHeader:!0,sortingFn:"protectedBranchesFirst",render:c=>e.jsx(RA,{branch:c,searchWords:r?[r]:[]})},{header:"Parent",id:"parent_branch_name",size:125,maxSize:150,...i,accessorFn:c=>{var l;return c.parent_id&&!c.restored_from?(l=n[c.parent_id])==null?void 0:l.name:void 0},render:c=>e.jsx(_de,{branch:c,branchesById:n})},a?{id:"compute_hours",header:"Compute hours",...i,accessorFn:c=>c.compute_time_seconds,render:c=>Ja(c.compute_time_seconds)}:{id:"active_time",header:"Active time",...i,accessorFn:c=>c.active_time_seconds,render:c=>Ja(c.active_time_seconds)},{id:"primary_compute",header:"Primary compute",render:c=>e.jsx($A,{branchId:c.id,endpoints:t??[]})},{id:"data_size",header:"Data size",minSize:120,...i,accessorFn:c=>c.logical_size,render:c=>{const l=c.logical_size;return l?cl(l):null}},{id:"created_by",header:"Created by",size:125,maxSize:225,...i,accessorFn:c=>{var l;return((l=c.created_by)==null?void 0:l.name)??c.creation_source},render:c=>e.jsx(fm,{branch:c,annotation:s[c.id]})},Array.isArray(t)&&t.length===0?{id:"last_active",header:"Last active",render:()=>e.jsx(on,{})}:{header:"Last active",id:"last_active",minSize:190,...i,sortUndefined:i.enableSorting?"last":void 0,accessorFn:c=>_L(t==null?void 0:t.filter(l=>l.branch_id===c.id)),render:c=>fL(t==null?void 0:t.filter(l=>l.branch_id===c.id))}],[a,r,n,s,t,i])},Bde=({branchesLoading:t,branches:s,searchValue:n})=>m.useMemo(()=>t||!n?s:s.filter(r=>r.name.toLowerCase().indexOf(n)!==-1),[n,s,t]),Dde=({pagination:t,branchesCount:s,onPaginationChange:n})=>{const{trackUiInteraction:r}=P(),[a,o]=m.useState([]),i=ge("branches_list_server_side_pagination"),c=m.useCallback(d=>{if(r("branch_list_page_changed",{...d}),!!i)if(d.direction==="next"&&(t!=null&&t.next))o(u=>[...u,t.next]),n==null||n({limit:d.pageSize,cursor:t.next});else if(d.direction==="previous"&&a.length>1){const u=a[a.length-2];o(p=>p.slice(0,-1)),n==null||n({limit:d.pageSize,cursor:u})}else d.direction==="first"&&(o([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n,t,a]),l=m.useCallback(d=>{r("branch_list_page_size_changed",{...d}),i&&(o([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n]);return m.useMemo(()=>({rowCount:s,manualPagination:i,onPageChange:c,onPageSizeChange:l}),[i,s,c,l])},Ude=(t,s)=>t==null&&s==null?0:t==null?1:s==null||t<s?-1:t>s?1:0,Fde=t=>(s,n,r)=>{const a=s.original,o=n.original;return a.protected&&!o.protected?t==="ascending"?-1:1:!a.protected&&o.protected?t==="ascending"?1:-1:a.default&&!o.default?t==="ascending"?-1:1:!a.default&&o.default?t==="ascending"?1:-1:Ude(s.getValue(r),n.getValue(r))},zde=t=>{const s=Fde(t);return{protectedBranchesFirst:(n,r,a)=>s(n,r,a)}},LS={branch_name:"name"},qde=({onSortingChange:t})=>{const{trackUiInteraction:s}=P(),[n,r]=m.useState({column:"branch_name",direction:"ascending"}),a=ge("branches_list_server_side_sorting"),o=m.useCallback(i=>{a&&i.column&&LS[i.column]&&t({sort_by:LS[i.column],sort_order:i.direction==="ascending"?"asc":"desc"}),r(i),s("branch_list_sorting_changed",{...i})},[t,a,s]);return m.useMemo(()=>a?{sorting:n,manualSorting:!0,onSortingChange:o}:{defaultSorting:{column:"branch_name",direction:"ascending"},sortingFns:zde,onSortingChange:o},[a,o,n])},BA=({projectId:t,endpoints:s,branches:n,branchesById:r,annotations:a={},branchesLoading:o,onSortingChange:i,searchValue:c,...l})=>{const{trackUiInteraction:d}=P(),u=qde({onSortingChange:i}),p=Dde(l),h=OA(),g=Bde({branches:n,branchesLoading:o,searchValue:c}),f=Mde({endpoints:s,branchesById:r,annotations:a,searchValue:c});return e.jsx(Cs,{columns:f,rows:g,"aria-label":"Branches",isLoading:o,rowHref:_=>Q(C.ProjectsItemBranchesItem,{branchId:_.id,projectId:t}),onRowClick:()=>d("branch_list_row_clicked"),rowActions:h,...u,...p})},bj=({children:t,parentBranch:s,...n})=>{const{projectId:r,isOwnProject:a}=F(),o=pM(),{trackUiInteraction:i}=P(),{isModalOpen:c,openModal:l,closeModal:d}=it(Je.CreateBranch),u=he(),p=a&&(u.isFreeSubscription||u.subscriptionType==="launch"),[h,g]=m.useState(!1),f=t||(p?"Create branch":"New Branch"),_=yr(m.useMemo(()=>s?{shared:{projects:[r],branches:[s.id],actions:[`create_branch@${s.id}`]}}:{shared:{projects:[r]}},[s,r]));if(o.isLoading)return null;const b=bL(o);if(p&&o.isLimitExceeded)return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.BranchesLimitReached,isOpen:h,onRequestClose:()=>{g(!1)}}),e.jsx(E,{...n,"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),i("create_branch_button_limited_clicked"),g(!0)},children:f})]});const x=!!(s!=null&&s.expires_at),j=!x&&!o.message,v=x?"Branches with an expiration date cannot have child branches":o.message;return e.jsxs(e.Fragment,{children:[e.jsx($0,{initialParentId:x||s==null?void 0:s.id,isOpen:c,onSuccess:()=>d(),onCancel:()=>d()}),e.jsx(te,{content:v,disabled:j,children:e.jsx("div",{style:{display:"inline-block"},children:o.isLimitExceeded?e.jsxs(E,{disabled:!0,"data-qa":"create_branch_button",...n,children:[f,b?` ${b}`:""]}):e.jsx(e.Fragment,{children:e.jsx(lo,{lockedMessage:_,children:e.jsxs(E,{"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),l()},...n,disabled:!!_||n.disabled||x,size:"s",children:[f,b?` ${b}`:""]})})})})},`tooltip-${s==null?void 0:s.id}`)]})},RS={title:"Branches",subtitle:t=>e.jsxs("div",{className:t,children:["Instantly"," ",e.jsx(R,{href:"https://neon.com/docs/introduction/branching",openInNewTab:!0,icon:"external_link",iconSize:"s",children:"branch your data"}),"for development, testing, and various other purposes to improve developer productivity and optimize continuous integration and delivery (CI/CD) pipelines."]})},Hde="_filters_pgz1d_1",Vde="_search_pgz1d_8",Wde="_createBranchButton_pgz1d_13",Gde="_subtitle_pgz1d_19",ip={filters:Hde,search:Vde,createBranchButton:Wde,subtitle:Gde},DA=m.memo(()=>{var b;const{projectId:t}=F(),s=ge("branches_list_server_side_pagination"),n=ln({projectId:t}),r=m.useMemo(()=>{var x;return((x=n.data)==null?void 0:x.endpoints)??[]},[(b=n.data)==null?void 0:b.endpoints]),[a,o]=m.useState({sort_by:"name",sort_order:"asc",limit:s?F_:void 0}),{branches:i,annotations:c,branchesCount:l,pagination:d,branchesById:u,isLoading:p,error:h,refetch:g}=Bu({projectId:t,...a}),[f,_]=m.useState("");return m.useEffect(()=>{o(x=>({...x,limit:s?F_:void 0}))},[s]),h?e.jsx(rs,{title:h.message}):e.jsxs(e.Fragment,{children:[e.jsx(bl,{title:RS.title,subtitle:RS.subtitle(ip.subtitle),breadcrumbs:void 0}),e.jsxs("div",{className:ip.filters,children:[e.jsx(fx,{className:ip.search,onChange:_,size:"s"}),e.jsx("div",{className:ip.createBranchButton,children:e.jsx(bj,{})})]}),e.jsx(_j,{refreshBranches:g,children:e.jsx(BA,{endpoints:r,projectId:t,branches:i,branchesById:u,branchesLoading:p,searchValue:f,onSortingChange:x=>{o(j=>({...j,...x,cursor:void 0}))},annotations:c,branchesCount:l,pagination:d,onPaginationChange:x=>{o(j=>({...j,...x}))}})})]})});DA.displayName="ProjectBranches";const Kde="_branchImportToast_3pfyu_1",MS={branchImportToast:Kde},Qde={protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again."},Yde=({endpoint:t,branch:s,onConnectClicked:n,onEditClicked:r})=>{const{trackUiInteraction:a}=P(),o=UC(),i=FC({projectId:t.project_id}),c=m.useCallback(async()=>{const d=await o(t);if(a("endpoint_actions_menu_endpoint_delete_popup_shown"),!d){a("endpoint_delete_popup_cancel_button_clicked");return}a("endpoint_delete_popup_confirm_button_clicked"),i.mutate({endpointId:t.id})},[o,t,a,i]),l=s==null?void 0:s.protected;return e.jsx(e.Fragment,{children:e.jsxs(ex,{onOpen:()=>{a("branch_view_endpoints_endpoint_actions_menu_clicked")},children:[e.jsx(Ga,{as:"button",iconName:"connect","data-qa":"endpoint_actions_connect_button",onClick:n,children:"Connect"}),e.jsx(Ga,{as:"button",onClick:r,iconName:"edit",children:"Edit"}),e.jsx(te,{content:l?Qde.protectedBranchWarning:"",children:e.jsx("div",{children:e.jsx(Ga,{as:"button",onClick:c,disabled:l,iconName:"trash",children:"Delete"})})})]})})},Jde="_hostCol_1db48_1",Zde="_cuColumn_1db48_8",BS={hostCol:Jde,cuColumn:Zde},Xde=({project:t,endpoints:s,branch:n,onConnectEndpoint:r,isLoading:a})=>{const[o,i]=m.useState(null),{trackUiInteraction:c}=P(),l=m.useCallback(h=>{c("branch_view_endpoints_edit_endpoint_drawer_opened"),i(h)},[c]),d=m.useCallback(()=>{c("branch_view_endpoints_edit_endpoint_drawer_closed"),i(null)},[c]),u=m.useMemo(()=>[{label:"Id",key:"id",renderValue:h=>e.jsxs("div",{className:BS.hostCol,children:[e.jsx("b",{children:h.id}),e.jsx(E,{appearance:"secondary",onClick:()=>{r==null||r(h)},children:"Connect"})]})},{label:"Type",key:"type",renderValue:h=>xL(h.type)},{label:"Status",key:"state",renderValue:h=>e.jsx(ax,{endpoint:h})},{label:"Compute size",key:"size",renderValue:h=>e.jsx("div",{className:BS.cuColumn,children:e.jsx(ag,{endpoint:h})})},{label:"Autosuspend delay",key:"suspend_timeout_seconds",renderValue:h=>h.suspend_timeout_seconds===-1?e.jsx("span",{title:"Never suspend",children:"-"}):Vx(h.suspend_timeout_seconds)},{label:"Last active",key:"last_active",renderValue:h=>h.last_active&&h.last_active!==i0?fe(h.last_active):"never"},G0(h=>e.jsx(Yde,{branch:n,endpoint:h,onEditClicked:()=>l(h),onConnectClicked:()=>r==null?void 0:r(h)}))],[n,r,l]),p=m.useMemo(()=>s.concat().sort(tx),[s]);return a?e.jsx(xr,{data:[],isLoading:!0,cols:u}):!t||!n?null:e.jsxs(e.Fragment,{children:[o!==null&&e.jsx(uo,{isOpen:!0,onRequestClose:d,mode:"edit",project:t,endpoint:o}),e.jsx(xr,{data:p,cols:u,"data-qa":"branch_view_endpoints",onRowClick:l,dataPlaceholderProps:{title:"This branch has no compute endpoints",size:"m",subtitle:"Create new compute endpoint to connect to the branch from your application.",actions:e.jsx(Xx,{branchId:n.id,onClick:()=>{c("branch_view_endpoints_create_endpoint_drawer_opened")},children:"Add new compute endpoint"})}})]})},UA=({branch:t,onSuccess:s,children:n})=>{const r=O0(),{confirm:a}=Ve(),{trackUiInteraction:o}=P(),{enabled:i,reason:c}=m.useMemo(()=>r(t),[r,t]),l=m.useCallback(async()=>{if(o(t.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await a({header:`Set as ${t.protected?"unprotected":"protected"}`,text:e.jsx(NA,{branch:t}),confirmButtonText:`Set as ${t.protected?"unprotected":"protected"}`,hint:e.jsxs("span",{children:["See"," ",e.jsx(R,{href:Am,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){o(t.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}o(t.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:u}}=await G.updateProjectBranch(t.project_id,t.id,{branch:{protected:!t.protected}});Ue(e.jsxs(rt,{children:[e.jsx("code",{children:t.name})," is now set as"," ",t.protected?"an unprotected":"a protected"," branch."]})),s&&s(u)}catch(u){Y(u)}},[o,t,a,s]);return e.jsx(e.Fragment,{children:e.jsx(te,{content:c,children:e.jsx("div",{children:n({onClick:l,disabled:!i})})})})},eue="_header_ql9m7_1",tue="_headerBlock_ql9m7_7",sue="_titleContainer_ql9m7_17",nue="_title_ql9m7_17",rue="_branchInfo_ql9m7_37",aue="_branchNameWrapper_ql9m7_43",oue="_branchNameWrapper_link_ql9m7_50",iue="_branchName_ql9m7_43",cue="_actions_ql9m7_66",In={header:eue,headerBlock:tue,titleContainer:sue,title:nue,branchInfo:rue,branchNameWrapper:aue,branchNameWrapper_link:oue,branchName:iue,actions:cue},Tl=({title:t,subtitle:s,showBranchBadges:n,actions:r,noBreadcrumbs:a,className:o})=>{const{branch:i,isLoading:c}=at(),l=e.jsxs(e.Fragment,{children:[e.jsx(a0,{branch:i}),e.jsx(LA,{branch:i}),e.jsx(o0,{branch:i})]});return e.jsxs("header",{className:In.header,children:[!a&&e.jsx(UJ,{}),e.jsxs("div",{className:V(In.headerBlock,o),children:[e.jsxs("div",{className:In.titleContainer,children:[e.jsx("div",{className:In.title,children:e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:1,size:"h2",children:t}),i?e.jsxs("div",{className:In.branchInfo,children:[e.jsxs(Ge,{href:Q(C.ProjectsItemBranchesItem,{projectId:i.project_id,branchId:i.id}),className:V(In.branchNameWrapper,In.branchNameWrapper_link),children:[e.jsx(z,{name:"branch",size:12}),e.jsx("h2",{className:In.branchName,title:i.name,children:i.name||"&nbsp;"})]}),n&&l]}):c?e.jsx(B,{width:64,height:20}):e.jsxs("div",{className:In.branchNameWrapper,children:[e.jsx(z,{name:"branch",size:12}),e.jsx("h2",{className:In.branchName,children:"-"})]})]})}),e.jsx("div",{className:In.actions,children:r})]}),s&&e.jsx(T,{appearance:"secondary",children:s})]})]})},lue=({branch:t})=>{const s=OA({omitCreateChildBranch:!0,omitToggleProtectedBranch:!0});return e.jsx(Yt,{placement:"bottom right",sections:[{items:s(t)}],children:e.jsx(E,{appearance:"secondary",icon:"chevron_down",iconSide:"right",children:"More"})})},due="_header_16dbf_1",uue={header:due},hue=({branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r})=>e.jsx(Tl,{title:"Branch overview",showBranchBadges:!0,className:uue.header,actions:e.jsxs(e.Fragment,{children:[e.jsx(bj,{parentBranch:t,children:"Create child branch"}),jL(t,s)&&t.current_state!=="archived"&&e.jsx(UA,{branch:t,onSuccess:n,children:a=>e.jsx(E,{icon:"protect",appearance:"secondary",...a,children:t.protected?"Unprotect":"Protect"})}),e.jsx(_j,{refreshBranches:n,onDeleteBranch:r,children:e.jsx(lue,{branch:t})})]})}),pue="_header_1tjj5_1",mue="_title_1tjj5_9",DS={header:pue,title:mue},gue=()=>e.jsxs("div",{className:DS.header,children:[e.jsxs("div",{className:DS.title,children:[e.jsx(B,{width:100,height:32}),e.jsx(B,{width:60,height:20})]}),e.jsx(B,{width:64,height:24})]}),xj=()=>{var a;const t=et(),s=m.useCallback(o=>{const i=Q(C.ProjectsItemBranchesItem,{projectId:o.project_id,branchId:o.id});t.push(i,{snapshotRestore:!0})},[t]),n=m.useCallback(()=>{t.replace(t.location.pathname,{})},[t]);return{isRestoredBranch:!!((a=t.location.state)!=null&&a.snapshotRestore),redirectToRestoredBranch:s,dismissRestoreInfoPanel:n}},cp=({converter:t=Ob,showLimits:s,limit:n=-1,value:r})=>e.jsx(e.Fragment,{children:typeof r=="number"?e.jsxs(e.Fragment,{children:[t(r),s&&Xt(n)&&e.jsxs(e.Fragment,{children:[" / ",t(n)]})]}):"-"}),fue="_group_gtufw_1",_ue="_item_gtufw_14",bue="_header_gtufw_33",xue="_info_gtufw_38",jue="_body_gtufw_43",zd={group:fue,item:_ue,header:bue,info:xue,body:jue},ou=({className:t,...s})=>e.jsx("div",{className:V(zd.group,t),...s}),Kt=({className:t,label:s,info:n,children:r,...a})=>{const{labelProps:o,fieldProps:i}=c0({label:s,labelElementType:"span"});return e.jsxs("div",{className:V(zd.item,t),...a,children:[e.jsxs("span",{className:zd.header,...o,children:[s,n&&e.jsx(te,{content:n,maxWidth:300,children:e.jsx(z,{name:"info",size:12,className:zd.info})})]}),e.jsx("div",{className:zd.body,...i,children:r})]})},vue="_btn_1ie78_1",yue={btn:vue},Cb=({branchId:t,isDeleted:s=!1,label:n=""})=>e.jsxs(Kt,{label:n,children:[e.jsx(te,{content:t,placement:"top",children:e.jsx(T,{children:t})}),e.jsx(hl,{className:yue.btn,text:t}),s?e.jsx(Ie,{children:"deleted"}):null]}),wue=({annotation:t})=>{const s=(t==null?void 0:t.value)??{},n=s["github-commit-author-login"],r=s["github-pr-number"],a=s["github-pr-title"],o=s["github-commit-repo"];return m.useMemo(()=>({repoName:o,authorLogin:n,repoLink:o?`https://github.com/${o}`:void 0,authorLink:n?`https://github.com/${n}`:void 0,pullRequestLink:o&&r?`https://github.com/${o}/pull/${r}`:void 0,pullRequestTitle:a}),[o,r,n,a])},Wf={authorLabel:"User",repoLabel:"Repository",pullRequestLabel:"Pull request"},Sue="_nowrap_2zava_1",iu={nowrap:Sue},Cue=({annotation:t})=>{const{trackUiInteraction:s}=P(),{authorLogin:n,authorLink:r,repoLink:a,repoName:o,pullRequestTitle:i,pullRequestLink:c}=wue({annotation:t});return e.jsxs(ou,{children:[e.jsx(z,{name:"github",size:32}),e.jsx(Kt,{label:Wf.authorLabel,children:e.jsx(og,{nowrap:!0,username:n,href:r})}),a&&e.jsx(Kt,{label:Wf.repoLabel,children:e.jsx(R,{openInNewTab:!0,href:a,icon:"external_link",className:iu.nowrap,onClick:()=>{s("branch_view_github_repo_link_clicked")},children:o})}),c&&e.jsx(Kt,{label:Wf.pullRequestLabel,children:e.jsx(R,{openInNewTab:!0,href:c,icon:"external_link",className:iu.nowrap,onClick:()=>{s("branch_view_github_pull_request_link_clicked")},children:i})})]})},kue=({annotation:t})=>{const s=(t==null?void 0:t.value)??{},n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],a=s["vercel-commit-repo"],o=s["vercel-commit-sha"],i=s["vercel-change-request-id"],c=s["vercel-deployment-link"],l=s["vercel-commit-author-login"],d=s["vercel-commit-author-name"],u=m.useMemo(()=>{if(!(!a||!r))switch(n){case"github":return`https://github.com/${a}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${a}/branch/${r}`;case"gitlab":return`https://gitlab.com/${a}/-/tree/${r}`;default:return}},[n,a,r]),[p,h]=m.useMemo(()=>{if(!i||!a)return[void 0,void 0];switch(n){case"github":return[`${a}#${i}`,`https://github.com/${a}/pull/${i}`];case"bitbucket":return[`${a}#${i}`,`https://bitbucket.org/${a}/pull-requests/${i}`];case"gitlab":return[`${a}#${i}`,`https://gitlab.com/${a}/-/merge_requests/${i}`];default:return[void 0,void 0]}},[n,a,i]);return m.useMemo(()=>({gitBranchLink:u,gitBranchName:r,gitProvider:n,gitCommitSha:o?o.substring(0,7):void 0,authorLogin:l,authorName:d,changeRequestId:p,changeRequestLink:h,vercelPreviewLink:c?c.startsWith("https://")?c:`https://${c}`:void 0}),[o,u,r,l,d,n,c,p,h])},Bo={authorLabel:"Commit author",previewLabel:"Preview deployment",previewLink:"Open preview deployment",previewUnavailable:"Unavailable",pullRequestLabel:"Pull request",gitBranchLabel:"Git branch",gitCommitShaLabel:"Git commit"},Iue=({annotation:t})=>{const{trackUiInteraction:s}=P(),{vercelPreviewLink:n,changeRequestId:r,changeRequestLink:a,gitBranchLink:o,gitBranchName:i,gitCommitSha:c,authorLogin:l,authorName:d}=kue({annotation:t});return e.jsxs(ou,{children:[e.jsx(z,{name:"vercel",size:32}),e.jsx(Kt,{label:Bo.authorLabel,children:e.jsx(og,{nowrap:!0,username:l,displayName:d})}),e.jsx(Kt,{label:Bo.previewLabel,children:n?e.jsx(R,{openInNewTab:!0,href:n,icon:"external_link",className:iu.nowrap,onClick:()=>{s("branch_view_vercel_preview_link_clicked")},children:Bo.previewLink}):e.jsx(e.Fragment,{children:Bo.previewUnavailable})}),a?e.jsx(Kt,{label:Bo.pullRequestLabel,children:e.jsx(R,{openInNewTab:!0,href:a,icon:"external_link",className:iu.nowrap,onClick:()=>{s("branch_view_vercel_pull_request_link_clicked")},children:r})}):o&&e.jsx(Kt,{label:Bo.gitBranchLabel,children:e.jsx(R,{openInNewTab:!0,href:o,icon:"external_link",className:iu.nowrap,onClick:()=>{s("branch_view_vercel_branch_link_clicked")},children:i})}),c&&e.jsxs(Kt,{label:Bo.gitCommitShaLabel,children:[e.jsx(T,{children:c}),e.jsx(hl,{text:c,onCopy:()=>{s("branch_view_vercel_commit_sha_copied")}})]})]})},Pue=({branch:t,annotation:s})=>{const n=t.creation_source;return n==="vercel"?e.jsx(Iue,{annotation:s}):n==="github"?e.jsx(Cue,{annotation:s}):null},Tue=({appearance:t,hint:s,text:n})=>{const r=e.jsx(Ie,{appearance:{warning:"warning",alert:"error"}[t],children:n});return s?e.jsx(te,{content:s,children:r}):r},Aue=.8;function US(t){const s=t.match(/^(.+)\s+(.+)$/);return s?{value:s[1],units:s[2]}:{value:t,units:void 0}}function Nue(t,s){const n=US(t),r=US(s);return n.units===r.units?`${n.value} / ${s}`:`${t} / ${s}`}function lp(t,s,n,r=!1){const a=n==="warning"?Aue:1;if(t&&Xt(s)&&t>=a*s)return{type:n,value:t,limit:s,isOverallLimit:r}}const FA=({converter:t=String,showLimits:s,limit:n=-1,overallLimit:r=-1,value:a,overallValue:o,hideInlineLimit:i,getMessage:c,getNearOverallLimitMessage:l,getOverallLimitReachedMessage:d})=>{if(typeof a!="number")return e.jsx(e.Fragment,{children:"-"});let u=e.jsx(e.Fragment,{children:t(a)});if(typeof r=="number"&&Xt(r)&&(i||(u=e.jsx(e.Fragment,{children:Nue(t(a),t(r))})),c)){const h=c({value:a,overallValue:o,overallLimit:r,converter:t});u=e.jsx(te,{content:h,children:e.jsx("span",{children:u})})}let p;if(s){const h=lp(o,r,"alert",!0)??lp(a,n,"alert")??lp(o,r,"warning",!0)??lp(a,n,"warning");if(h){const g=h.isOverallLimit?h.type==="alert"?d:l:void 0;p=e.jsx(Tue,{appearance:h.type,hint:g==null?void 0:g({converter:t,overallValue:h.value,overallLimit:h.limit}),text:h.type==="alert"?"LIMIT REACHED":"NEAR LIMIT"})}}return e.jsxs(e.Fragment,{children:[u,p&&e.jsxs(e.Fragment,{children:[" ",p]})]})},Eue=({hideInlineLimit:t,...s})=>e.jsx(FA,{...s,converter:Ja,hideInlineLimit:t,getMessage:({value:n,overallLimit:r,converter:a})=>`This branch used ${a(n)}${r?` (${l0(n/r,!0)}) of ${a(r)} total allowance for project compute limit.`:""}`,getNearOverallLimitMessage:({overallValue:n,overallLimit:r,converter:a})=>`You've used ${a(n)} of your ${a(r)} project compute limit. Upgrade for more compute.`,getOverallLimitReachedMessage:({overallLimit:n,converter:r})=>`You've reached your ${r(n)} project compute limit. Upgrade to get more compute.`}),FS=t=>e.jsx(FA,{...t,converter:cl,getMessage:({converter:s,value:n,overallLimit:r})=>`This branch used ${s(n)} (${l0(n/r,!0)}) of ${s(r)} total allowance for storage.`,getNearOverallLimitMessage:({converter:s,overallValue:n,overallLimit:r})=>`You've used ${s(n)} of your ${s(r)} account storage limit. Upgrade for more storage.`,getOverallLimitReachedMessage:({converter:s,overallLimit:n})=>`You've reached your ${s(n)} limit. Upgrade for more storage.`}),jj=({onSuccess:t,branch:s,children:n})=>{const r=Sb.tooltipContent(s),a=r!==null,{trackUiInteraction:o}=P(),i=n0(),c=m.useCallback(()=>{a||(o("branch_reset_to_parent_reset_clicked"),i(s,t))},[a,o,i,s,t]);return e.jsx(te,{content:r,children:e.jsx("div",{children:n({onClick:c,disabled:a})})})},Oue="_root_7fma8_1",$ue="_helpText_7fma8_25",_m={root:Oue,helpText:$ue},Lue=({branch:t,onResetToParentBranch:s})=>e.jsxs("div",{className:_m.root,children:[e.jsx(z,{name:"branch_reset",size:20}),e.jsxs(T,{className:_m.helpText,children:["Update to latest data and schema",e.jsxs(T,{size:"s",children:["Last update:"," ",t.last_reset_at?fe(t.last_reset_at,ke.BranchDateTimeFormat):"Never"," "]})]}),e.jsx(jj,{branch:t,onSuccess:s,children:n=>e.jsx(E,{appearance:"secondary",...n,children:"Reset from parent"})})]}),Rue=({branch:t,children:s})=>{const{trackUiInteraction:n}=P(),[r,a]=m.useState(!1),{branchesById:o}=xt(),i=t.parent_id?o[t.parent_id]:void 0,c={sourceBranch:t,mode:Qe.Head};return e.jsxs(e.Fragment,{children:[i&&c&&e.jsx(fj,{changeableCurrentBranch:!0,currentBranch:i,isOpen:r,compareTo:c,onRequestClose:()=>{n("schema_diff_drawer_dismissed"),a(!1)}}),s({disabled:!i,onClick:()=>{n("schema_diff_link_clicked"),a(!0)}})]})},Mue=({branch:t})=>e.jsxs("div",{className:_m.root,children:[e.jsx(z,{name:"schema",size:20}),e.jsx(T,{className:_m.helpText,children:"See the schema differences between this branch and its parent"}),e.jsx(Rue,{branch:t,children:s=>e.jsx(E,{...s,appearance:"secondary",children:"Schema diff"})})]}),Gf={title:t=>e.jsxs(e.Fragment,{children:["This branch will be"," ",e.jsxs(R,{noWrap:!0,openInNewTab:!0,href:r0,children:["automatically deleted ",e.jsx(z,{name:"external_link",size:16})]})," ","on ",fe(t,ke.DateTimeWithTimezone)]}),hint:"Auto-deletion helps you stay within plan limits and manage costs",button:"Edit Expiration"},Bue="_alert_1g234_1",Due="_icon_1g234_12",Uue="_content_1g234_17",Fue="_message_1g234_22",zue="_title_1g234_29",que="_hint_1g234_39",_c={alert:Bue,icon:Due,content:Uue,message:Fue,title:zue,hint:que},zS=({branch:t})=>{const[s,n]=m.useState(!1);return t.expires_at?e.jsxs("div",{className:_c.alert,children:[e.jsxs("div",{className:_c.content,children:[e.jsx("div",{className:_c.icon,children:e.jsx(z,{name:"autosuspend",size:24})}),e.jsxs("div",{className:_c.message,children:[e.jsx("p",{className:_c.title,children:Gf.title(t.expires_at)}),e.jsx("p",{className:_c.hint,children:Gf.hint})]})]}),e.jsx(AA,{branch:t,isOpen:s,onClose:()=>n(!1)}),e.jsx(E,{appearance:"secondary",size:"s",onClick:()=>n(!0),children:Gf.button})]}):null},ht={idLabel:"ID",createdOnLabel:"Created on",createdByLabel:"Created by",computeHoursLabel:"Compute hours",computeHoursInfo:"Compute hours = CU size * active hours",currentPeriodActiveTime:t=>`Active hours since ${fe(t,ke.ShortDate)}`,dataSizeLabel:"Data size",parentBranchLabel:"Parent branch",branchingPointLabel:"Branching point",lastDataResetLabel:"Last data reset",compareToParentLabel:"Compare to parent",archived:{title:"Archive status",description:t=>e.jsxs(e.Fragment,{children:["Automatically archived in cost-efficient storage on"," ",fe(t,ke.BranchDateTimeFormat)," due to inactivity."]}),learnMore:"Learn more"},unarchiveCard:{title:"Automatic unarchive",description:"Querying will unarchive the branch automatically.",descriptionSlow:"Querying will unarchive the branch automatically. Expect slower queries during the process."},billingCard:{title:"Reduce costs",description:"Cost-efficient archive storage lowers your monthly bill."},disableArchivingCard:{title:"Disable archiving",description:"Enable branch protection to prevent this branch from being archived.",button:"Protect"},warmupAlert:{title:"Warming up",description:"This branch is queryable but is still being unarchived. Expect slow query times."}},Hue="_info_j53g1_1",Vue="_datetime_j53g1_15",Wue="_dataSize_j53g1_19",Gue="_archivedInfo_j53g1_24",Kue="_infoLayout_j53g1_31",Que="_icon_j53g1_39",Yue="_header_j53g1_43",Jue="_card_j53g1_51",$t={info:Hue,datetime:Vue,dataSize:Wue,archivedInfo:Gue,infoLayout:Kue,icon:Que,header:Yue,card:Jue},Zue="_root_39mm7_1",Xue="_parentName_39mm7_9",Kf={root:Zue,parentName:Xue},Qf=({branch:t})=>{const{branchesById:s}=xt();if(!t.parent_id)return null;const n=s[t.parent_id];return e.jsxs(Kt,{label:ht.parentBranchLabel,className:Kf.root,children:[n?e.jsx(R,{noWrap:!0,className:Kf.parentName,href:Q(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}),children:e.jsx("span",{title:n.name,children:n.name})}):e.jsx("span",{className:Kf.parentName,children:t.parent_id}),t.parent_lsn&&e.jsxs(e.Fragment,{children:["LSN ",e.jsx(hl,{text:t.parent_lsn})]})]})},ehe="_row_15kkf_1",the="_buttonContainer_15kkf_5",Yf={row:ehe,buttonContainer:the},zA=({role:t,branch:s,children:n,onPasswordChanged:r})=>{const{projectId:a,project:o}=F(),{trackUiInteraction:i}=P(),{mutateAsync:c,isPending:l}=r2(),[d,u]=m.useState(),[p,h]=m.useState(!1),[g,f]=m.useState(""),[_,b]=m.useState(!1),x=s.id,j=m.useCallback(async()=>{try{const{data:y}=await c({projectId:a,branchId:x,role:t.name});u(y),b(!0),h(!1),r&&r(y.role),f(y.role.password||"")}catch(y){const S=Nt(y);Y(S)}},[t,r,a,x,c]);m.useEffect(()=>{_||u(void 0)},[_]);const v=m.useMemo(()=>{const y=`PGUSER=${t.name}
PGPASSWORD=${g}`,S=new Blob([y],{type:""});return window.URL.createObjectURL(S)},[t,g]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(v),[v]),o?e.jsxs(e.Fragment,{children:[p&&e.jsxs(ft,{isOpen:!0,onRequestClose:()=>h(!1),width:468,"data-qa":"reset_role_password_confirmation",title:"Reset password",children:[e.jsxs(De,{children:[e.jsxs("div",{className:Yf.row,children:["You are about to reset the password for the role"," ",e.jsx(Ae,{children:t.name})," on the branch"," ",e.jsx(Ae,{children:s.name}),"."]}),e.jsx("div",{className:Yf.row,children:"After reset, the current password will no longer be valid or accessible."})]}),e.jsxs(Te,{children:[e.jsx(E,{appearance:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(mM,{succeed:!!d,loading:l,label:["Reset","Loading","Done"],onClick:j})]})]}),_&&g&&e.jsx(ft,{isOpen:!0,onRequestClose:()=>{b(!1)},title:"Reset password","data-qa":"reset_role_password_success",children:e.jsxs(De,{children:[e.jsxs(T,{children:["Password for the role ",e.jsx(Ae,{children:t.name})," in the branch ",e.jsx(Ae,{children:s.name})," was reset successfully. Copy the password or download the .env file.",!o.store_passwords&&e.jsxs(e.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),e.jsx("br",{}),e.jsx("br",{}),"Password:"]}),e.jsx("br",{}),e.jsx(Ms,{reveal:{getUnmaskedValue:()=>Promise.resolve(g)},copy:{getUnmaskedValue:()=>Promise.resolve(g),onCopy:()=>i("role_created_popup_copy_password_clicked")},children:"*******"}),e.jsx("br",{}),v&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Download the .env file to save the user's password."}),e.jsx("br",{}),e.jsx("div",{className:Yf.buttonContainer,children:e.jsx(E,{as:"a",size:"l",target:"_blank",href:v,download:".env",onClick:()=>i("reset_password_download_credentials_clicked"),children:"Download .env"})})]})]})}),n(()=>{i("connection_details_password_reset_clicked"),h(!0)})]}):null},qS="__ADD_ENDPOINT__",she=({selectedEndpointId:t,disabled:s,setSelectedEndpoint:n})=>{var v;const r=et(),{trackUiInteraction:a}=P(),[o,i]=m.useState(!1),{branch:c}=at(),{project:l,projectId:d}=F(),{billingUrl:u}=so(),p=Ub(l),h=Om({projectId:d}),g=!h.isLoading&&h.isLimitExceeded,f=C0({projectId:d}),_=!f.isLoading&&f.isLimitExceeded,x=(v=Hs({projectId:d,branchId:(c==null?void 0:c.id)??""}).data)==null?void 0:v.endpoints.some(br),j=m.useMemo(()=>{if((_||g&&x)&&p){const y=d0("read_only");return{key:qS,label:`Upgrade to add ${y}s...`,onClick:()=>{r.push(u),a("endpoint_select_upgrade_to_pro_clicked")}}}return{key:qS,label:"Add compute...",onClick:()=>{a("endpoint_select_new_endpoint_clicked"),i(!0)}}},[x,r,_,p,g,a,u]);return e.jsxs(e.Fragment,{children:[e.jsx(cj,{projectId:d,"data-qa":"connection_fields_compute_select",disabled:s,extraOption:j,endpointId:t,onChange:y=>n(y??void 0)}),c&&l?e.jsx(uo,{isOpen:o,onRequestClose:()=>i(!1),mode:"create",project:l,branchId:c.id,endpointType:x?"read_only":"read_write"}):null]})},HS={unarchiveAlert:"This branch is archived. Connecting to the branch will unarchive it.",unarchiveAlertSlow:"This branch is archived. Connecting to the branch will unarchive it. Query times may be slow during this process."},nhe="_root_m52h7_1",rhe="_section_m52h7_7",ahe="_col_m52h7_11",ohe="_roleLabel_m52h7_22",ya={root:nhe,section:rhe,col:ahe,roleLabel:ohe},ihe=({fixedBranch:t,fixedEndpoint:s,onRoleChange:n})=>{const{projectId:r,isLoading:a,project:o}=F(),{branch:i,setBranch:c}=at(),{selectOptionsById:l,branchesById:d}=xt(),[u,p]=m.useState(null),h=m.useCallback($=>{p($),n==null||n($==null?void 0:$.role)},[n]),[g,f]=m.useState(),_=Hs({projectId:r,branchId:(i==null?void 0:i.id)??""}),b=m.useMemo(()=>{var $;return s??(($=_.data)==null?void 0:$.endpoints.find(M=>M.id===g))},[s,_.data,g]),[x,j]=aX();m.useEffect(()=>{const $=x?d[x]:void 0;$&&$!==i&&c($)},[x,d,i,c]);const{list:v,selectOptions:y,isLoading:S}=un(),[w,k]=Sl();m.useEffect(()=>{t&&j(t.id)},[t,j]);const{setPassword:N,clearPasswords:D}=gl(),L=m.useCallback($=>{N(r,$),h({value:$.name,label:$.name,role:$})},[r,N,h]),H=m.useCallback($=>{N(r,$)},[N,r]);m.useEffect(()=>()=>{D(r)},[D,r]);const W=yr(m.useMemo(()=>b?{exclusive:{endpoints:[b.id]},shared:{projects:[b.project_id],branches:[b.branch_id]}}:null,[b]));return a||!o?null:e.jsxs("div",{className:ya.root,children:[(i==null?void 0:i.current_state)==="archived"&&e.jsx(X,{appearance:"info",children:Du(i)?HS.unarchiveAlertSlow:HS.unarchiveAlert}),e.jsxs("div",{className:ya.section,children:[e.jsx(U,{id:"branch",className:ya.col,label:"Branch",children:e.jsx(L0,{includeNoneOption:!0,"data-qa":"connection_fields_branch_select",disabled:!!t,value:i?l[i.id]:void 0,onChange:$=>($==null?void 0:$.branch)&&j($.value),canCreateBranch:!0,onCreateBranch:$=>j($.id)})}),e.jsx(U,{id:"compute",className:ya.col,label:"Compute",children:e.jsx(she,{selectedEndpointId:b==null?void 0:b.id,disabled:!!s,setSelectedEndpoint:$=>f($==null?void 0:$.id)})})]}),e.jsxs("div",{className:ya.section,children:[e.jsx(U,{id:"database",className:ya.col,label:"Database",children:!S&&e.jsx(Rm,{"data-qa":"connection_fields_database_select",value:w?y.find($=>$.value===w):void 0,onChange:$=>$&&k($.value)})}),e.jsx(U,{id:"role",className:ya.col,label:e.jsxs("div",{className:ya.roleLabel,children:[e.jsx("span",{children:"Role"}),e.jsx("span",{children:i&&u?e.jsx(zA,{role:u.role,branch:i,onPasswordChanged:H,children:$=>e.jsx(lo,{lockedMessage:W,children:e.jsx(R,{onClick:$,disabled:!!W,children:"Reset password"})})}):e.jsx("button",{disabled:!0,type:"button",children:"Reset password"})})]}),children:e.jsx(gM,{"data-qa":"connection_fields_role_select",onAddUser:L,onChange:h,value:u})})]}),e.jsx("div",{children:e.jsx(CT,{branch:i,endpoint:b,role:u==null?void 0:u.role,database:w?v.find($=>$.name===w):void 0})})]})},Jf={passwordSaved:e.jsxs(e.Fragment,{children:["Your password is saved in a secure storage vault."," ",e.jsx(R,{icon:"external_link",href:"https://neon.com/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]}),passwordNotAccessible:t=>e.jsxs(e.Fragment,{children:["The password is not accessible after closing this modal. You can reset the password on the"," ",e.jsx(R,{href:t,openInNewTab:!0,children:"Roles"})," ","page."," ",e.jsx(R,{icon:"external_link",href:"https://neon.com/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]}),oauthRole:e.jsxs(e.Fragment,{children:["Need help connecting?"," ",e.jsx(R,{icon:"external_link",href:"https://docs.databricks.com/aws/en/oltp/authentication",openInNewTab:!0,children:"See more connection instructions and examples"})]})},che="_footer_1pc98_1",lhe={footer:che},dhe=({project:{id:t,store_passwords:s},role:n})=>{const r=Q(de.ProjectsItemRoles,{projectId:t}),a=Jb(n);return e.jsx(wx,{className:lhe.footer,children:e.jsx("div",{children:a?Jf.oauthRole:s?Jf.passwordSaved:Jf.passwordNotAccessible(r)})})},ig=({branch:t,endpoint:s,project:n,isOpen:r,...a})=>{const o=(t==null?void 0:t.name)??(s==null?void 0:s.branch_id),{trackUiInteraction:i}=P();m.useEffect(()=>{r&&i("connection_details_modal_shown")},[r,i]);const[c,l]=m.useState();return e.jsxs(ft,{isOpen:r,width:750,"data-qa":"connection_details_modal",title:o?`Connection details for ${o}`:"Connect to your database",...a,children:[e.jsx(De,{children:e.jsx(ihe,{fixedBranch:t,fixedEndpoint:s,onRoleChange:l})}),e.jsx(Te,{children:e.jsx(dhe,{project:n,role:c})})]})},uhe=(t,s)=>`${t}_from_snapshot_${pr(s)}`,hhe=t=>{const s=be();return _e({mutationFn:({snapshotId:n,snapshotRestoredBranchName:r})=>G.restoreSnapshot({projectId:t.project_id,snapshotId:n,name:r},{target_branch_id:t.id}),onSuccess:()=>s.invalidateQueries({queryKey:ml({projectId:t.project_id})})})},phe=t=>{const s=be();return _e({mutationFn:({snapshotId:n,oldBranchName:r})=>G.restoreSnapshot({projectId:t.project_id,snapshotId:n},{name:r,target_branch_id:t.id,finalize_restore:!0}),onSuccess:()=>s.invalidateQueries({queryKey:ml({projectId:t.project_id})})})},mhe=t=>{const s=be();return _e({mutationFn:({branchId:n})=>G.finalizeRestoreBranch(t,n),onSuccess:()=>s.invalidateQueries({queryKey:ml({projectId:t})})})},$r={restoredBranchHint:"The data on this branch was restored.",notUpToDateHint:"The data on this branch may not be up to date.",connectToNewBranchTitle:"Connect to the new branch to preview restored data",connectToNewBranchDescription:"Connect to the branch from your application or client to verify the restored data",getConnectionDetails:"Get connection details",migrateConnectionsAndSettings:"Migrate connections and settings",migrateConnectionsAndSettingsToNewBranchTitle:"Migrate connections and settings to the new branch",migrateConnectionsAndSettingsToNewBranchDescription:"Move your database URLs and settings from the old branch to the new branch instead of resetting connections in your app",restoredSnapshotToNewBranch:"Restored the snapshot to this new branch"},ghe="_wrapper_1wseb_1",fhe="_group_1wseb_5",_he="_row_1wseb_17",bhe="_rowIcon_1wseb_42",xhe="_greenIcon_1wseb_46",jhe="_rowContent_1wseb_50",vhe="_rowActions_1wseb_54",yhe="_closeButton_1wseb_59",za={wrapper:ghe,group:fhe,row:_he,rowIcon:bhe,greenIcon:xhe,rowContent:jhe,rowActions:vhe,closeButton:yhe},whe=({children:t,className:s})=>e.jsx("div",{className:s,children:t}),pd=({className:t,icon:s,iconSize:n=16,iconClassName:r,content:a,actions:o,...i})=>e.jsxs("div",{className:V(za.row,t),...i,children:[s&&e.jsx(z,{name:s,size:n,className:V(za.rowIcon,r)}),e.jsx("div",{className:za.rowContent,children:a}),o&&e.jsx("div",{className:za.rowActions,children:o})]}),She=({project:t,branch:s})=>{const{mutateAsync:n}=mhe(s.project_id),{dismissRestoreInfoPanel:r}=xj(),a=async()=>{try{await n({branchId:s.id}),oe("Connections and settings migrated successfully")}catch(p){Y(p)}},[o,i]=m.useState(!1),[c,l]=m.useState(),d=m.useCallback(()=>{i(!1)},[]),u=m.useCallback(p=>{l(p??void 0),i(!0)},[]);return e.jsxs("div",{className:za.wrapper,children:[e.jsxs(whe,{className:za.group,children:[s.restore_status==="finalized"&&e.jsxs(e.Fragment,{children:[e.jsx(pd,{content:$r.restoredBranchHint}),e.jsx(pd,{icon:"arrow_in_circle_right",content:$r.notUpToDateHint})]}),s.restore_status==="restored"&&e.jsxs(e.Fragment,{children:[e.jsx(ig,{isOpen:o,onRequestClose:d,branch:s,endpoint:c,project:t}),e.jsx(pd,{icon:"done",iconClassName:za.greenIcon,content:$r.restoredSnapshotToNewBranch}),e.jsx(pd,{icon:"arrow_in_circle_right",content:e.jsxs("div",{children:[e.jsx(Z,{level:6,children:$r.connectToNewBranchTitle}),e.jsx(T,{size:"s",appearance:"tertiary",children:$r.connectToNewBranchDescription})]}),actions:e.jsx("div",{children:e.jsx(E,{appearance:"secondary",size:"s",onClick:()=>u(null),children:$r.getConnectionDetails})})}),e.jsx(pd,{icon:"arrow_in_circle_right",content:e.jsxs("div",{children:[e.jsx(Z,{level:6,children:$r.migrateConnectionsAndSettingsToNewBranchTitle}),e.jsx(T,{size:"s",appearance:"tertiary",children:$r.migrateConnectionsAndSettingsToNewBranchDescription})]}),actions:e.jsx("div",{children:e.jsx(E,{appearance:"secondary",size:"s",onClick:a,children:$r.migrateConnectionsAndSettings})})})]})]}),s.restore_status!=="restored"&&e.jsx(_r,{iconName:"close",iconSize:12,tooltip:"Close snapshot restore info",className:za.closeButton,onClick:r})]})},Che=["vercel","github"],khe=({project:t,branch:s,annotation:n,onResetToParentBranch:r,onSetBranchProtection:a})=>{const o=ge("growth_hide_active_hours"),{isFreeSubscription:i,isPaidSubscription:c,isPricingV3Account:l}=he(),{limits:d}=It(),{isLoading:u,usage:p}=a2(),{isRestoredBranch:h}=xj(),g=m.useMemo(()=>u||!t||!s||!d?null:o2({project:t,branch:s,projectLimits:d,isPricingV3Account:l,accountLevelUsage:p}),[u,s,t,d,l,p]),f=Che.includes(s.creation_source)&&n,_=!f,b=h||s.restore_status==="restored";return e.jsx("div",{className:$t.info,children:s.current_state==="archived"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$t.archivedInfo,children:[e.jsxs("div",{className:$t.infoLayout,children:[e.jsx(Z,{level:5,size:"h6",children:ht.archived.title}),e.jsx("p",{children:ht.archived.description(s.state_changed_at)}),e.jsx(R,{href:nx,openInNewTab:!0,children:ht.archived.learnMore})]}),e.jsxs("div",{className:V($t.card,$t.infoLayout),children:[e.jsxs("div",{className:$t.header,children:[e.jsx(z,{className:$t.icon,name:"branch_fast",size:16}),e.jsx(Z,{level:6,children:ht.unarchiveCard.title})]}),e.jsx("p",{children:Du(s)?ht.unarchiveCard.descriptionSlow:ht.unarchiveCard.description})]}),c&&e.jsxs("div",{className:V($t.card,$t.infoLayout),children:[e.jsxs("div",{className:$t.header,children:[e.jsx(z,{className:$t.icon,name:"piggy",size:16}),e.jsx(Z,{level:6,children:ht.billingCard.title})]}),e.jsx("p",{children:ht.billingCard.description})]}),!s.protected&&e.jsxs("div",{className:V($t.card,$t.infoLayout),children:[e.jsxs("div",{className:$t.header,children:[e.jsx(z,{className:$t.icon,name:"no_access",size:16}),e.jsx(Z,{level:6,children:ht.disableArchivingCard.title})]}),e.jsx("p",{children:ht.disableArchivingCard.description}),e.jsx(UA,{branch:s,onSuccess:a,children:x=>e.jsx(E,{icon:"protect",appearance:"secondary",...x,children:ht.disableArchivingCard.button})})]})]}),e.jsxs(ou,{children:[e.jsx(Cb,{label:ht.idLabel,branchId:s.id}),e.jsx(Qf,{branch:s}),e.jsx(Kt,{label:ht.createdOnLabel,className:$t.datetime,children:fe(s.created_at,ke.BranchDateTimeFormat)}),e.jsx(Kt,{label:ht.dataSizeLabel,className:$t.dataSize,children:g?e.jsx(e.Fragment,{children:i?e.jsx(FS,{...g.current_data_size}):e.jsx(cp,{...g.current_data_size,converter:cl})}):"-"}),e.jsx(Kt,{label:ht.createdByLabel,children:e.jsx(fm,{branch:s,annotation:n})})]}),s.expires_at&&e.jsx(zS,{branch:s})]}):e.jsxs(e.Fragment,{children:[u0(s)&&e.jsx(X,{appearance:"info",title:ht.warmupAlert.title,children:ht.warmupAlert.description}),b&&e.jsx(She,{project:t,branch:s}),e.jsxs(ou,{children:[e.jsx(Cb,{label:ht.idLabel,branchId:s.id}),f&&e.jsx(Qf,{branch:s}),e.jsx(Kt,{label:ht.createdOnLabel,className:$t.datetime,children:fe(s.created_at,ke.BranchDateTimeFormat)}),e.jsx(Kt,{label:ht.computeHoursLabel,className:$t.computeHours,info:ht.computeHoursInfo,children:g?e.jsx(e.Fragment,{children:i?e.jsx(Eue,{hideInlineLimit:!0,...g.compute_time}):e.jsx(cp,{...g.compute_time,converter:Ja})}):"-"}),!o&&e.jsx(Kt,{label:ht.currentPeriodActiveTime(t.consumption_period_start),children:g?e.jsx(cp,{...g.active_time}):"-"}),e.jsx(Kt,{label:ht.dataSizeLabel,className:$t.dataSize,children:g?e.jsx(e.Fragment,{children:i?e.jsx(FS,{...g.current_data_size}):e.jsx(cp,{...g.current_data_size,converter:lr})}):"-"}),_&&e.jsx(Kt,{label:ht.createdByLabel,children:e.jsx(fm,{branch:s,annotation:n})})]}),f?e.jsx(Pue,{branch:s,annotation:n}):s.parent_id&&!s.restored_from&&e.jsxs(ou,{children:[e.jsx(Qf,{branch:s}),e.jsx(Mue,{branch:s}),e.jsx(Lue,{branch:s,onResetToParentBranch:r})]}),s.expires_at&&e.jsx(zS,{branch:s})]})})},Ihe=()=>e.jsx("div",{className:$t.info}),Phe="_root_1yn7r_1",The="_header_1yn7r_11",Ahe="_title_1yn7r_16",Nhe="_description_1yn7r_23",Ehe="_children_1yn7r_28",md={root:Phe,header:The,title:Ahe,description:Nhe,children:Ehe},sa=({title:t,action:s,description:n,children:r,className:a,...o})=>{const i=t||s||n;return e.jsxs("section",{className:V(md.root,a),...o,children:[i&&e.jsxs("div",{className:md.header,children:[e.jsxs("div",{className:md.title,children:[e.jsx(Z,{level:2,children:t}),s]}),n&&e.jsx("div",{className:md.description,children:n})]}),e.jsx("div",{className:md.children,children:r})]})},Ohe="_card_1mjma_1",$he="_cardText_1mjma_14",VS={card:Ohe,cardText:$he},cg=({icon:t,text:s,action:n})=>e.jsxs("div",{className:VS.card,children:[e.jsxs("div",{className:VS.cardText,children:[t&&e.jsx(z,{name:t,size:24}),e.jsx("div",{children:s})]}),n]}),Lhe="_searchField_1cdno_1",Rhe={searchField:Lhe},Mhe=({branch:t})=>{var x;const{projectId:s}=F(),n=ln({projectId:s}),r=m.useMemo(()=>{var j;return((j=n.data)==null?void 0:j.endpoints)??[]},[(x=n.data)==null?void 0:x.endpoints]),[a,o]=m.useState(""),i=ge("branches_list_server_side_pagination"),c=ge("branches_list_server_side_sorting"),[l,d]=m.useState({sort_by:"name",sort_order:"asc",limit:i?F_:void 0}),{branches:u,annotations:p,branchesById:h,isLoading:g,error:f,refetch:_}=Bu({projectId:s,...l}),b=m.useMemo(()=>u.filter(j=>j.parent_id===t.id),[u,t]);return f?e.jsx(rs,{title:f.message||String(f)}):b.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fx,{onChange:o,placeholder:"Filter branches by name",className:Rhe.searchField,size:"s"}),e.jsx(_j,{refreshBranches:_,children:e.jsx(BA,{endpoints:r,projectId:s,branches:b,branchesById:h,branchesLoading:g,searchValue:a,onSortingChange:j=>{c&&d(v=>({...v,...j,cursor:void 0}))},annotations:p,branchesCount:b.length,onPaginationChange:j=>{i&&d(v=>({...v,...j}))}})})]}):e.jsx(cg,{icon:"branch_gradient",text:e.jsxs("span",{children:[e.jsx(gu,{branch:t,noIcon:!0})," does not have any child branches."]}),action:e.jsx(bj,{parentBranch:t,children:"Create child branch"})})},Bhe="_group_80ygf_1",Dhe="_item_80ygf_18",Uhe="_header_80ygf_26",Fhe="_body_80ygf_33",Up={group:Bhe,item:Dhe,header:Uhe,body:Fhe},ol=({className:t,...s})=>e.jsx("div",{className:V(Up.group,t),...s,role:"row"}),zt=({className:t,label:s,"aria-label":n,bodyClassName:r,children:a,...o})=>{const{fieldProps:i,labelProps:c}=c0({"aria-label":n,label:s,labelElementType:"span"});return e.jsxs("div",{className:V(Up.item,t),...o,role:"cell",children:[s&&e.jsx("span",{className:Up.header,...c,children:s}),e.jsx("div",{className:V(Up.body,r),...i,children:a})]})},zhe="_wrapper_115ga_1",qhe={wrapper:zhe},Hhe=({projectId:t,branchId:s,setShowUpgradeModal:n})=>{var u;const{trackUiInteraction:r}=P(),a=Om({projectId:t}),o=Hs({projectId:t,branchId:s});if(a.isLoading)return null;const i=!((u=o.data)!=null&&u.endpoints.some(br)),c=i?"Add a compute to connect to the branch from an application or client.":"Read Replicas: Scale your application by offloading your read workload to a read-only instance of your database.",l=i?"Add a compute":"Add Read Replica",d=!i&&a.limit===0;return e.jsx(cg,{icon:"compute_time_gradient",text:c,action:d?e.jsx(E,{onClick:()=>{r("branch_page_compute_upgrade_plan_clicked"),n(!0)},appearance:"secondary","data-qa":"upgrade_plan_button",children:"Upgrade to paid plan"}):e.jsx(Xx,{appearance:i?"primary":"secondary",branchId:s,children:l})})},Vhe="_endpointGroup_1tdme_1",Whe="_leftSection_1tdme_8",Ghe="_rightSection_1tdme_13",Khe="_timestampColumn_1tdme_19",Qhe="_actions_1tdme_23",Yhe="_actionsButton_1tdme_27",Jhe="_endpointStatus_1tdme_33",Zhe="_typeRow_1tdme_39",Xhe="_idRow_1tdme_45",epe="_editableName_1tdme_54",Xn={endpointGroup:Vhe,leftSection:Whe,rightSection:Ghe,timestampColumn:Khe,actions:Qhe,actionsButton:Yhe,endpointStatus:Jhe,typeRow:Zhe,idRow:Xhe,editableName:epe},tpe=t=>{const s=t.name||d0(t.type),[n,r]=m.useState(s),a=Mb({projectId:t.project_id},{onSettled(i,c){if(c){r(s);return}i!=null&&i.endpoint.name&&r(i==null?void 0:i.endpoint.name)}}),o=m.useCallback(i=>{r(i),a.mutateAsync({endpointId:t.id,request:{endpoint:{name:i}}})},[t.id,a]);return m.useEffect(()=>{t.name!=null&&r(t.name)},[t.name]),{edit:o,displayName:n,isLoading:a.isPending}},spe=t=>{const s=vL({projectId:t.project_id},{onSuccess:()=>{oe("Compute endpoint restarted successfully")}});return{restartEndpoint:m.useCallback(async()=>{await s.mutateAsync({endpointId:t.id})},[s,t.id]),isRestarting:s.isPending}};function WS(t){if(t!==void 0&&t!==i0)return fe(t)}function npe(t){let s="unknown",n="",r="";const{name:a}=t;switch(t.current_state){case"active":s="ACTIVE",r="Started",n=WS(t.started_at)??"";break;case"idle":s="SUSPENDED",r="Suspended",n=WS(t.suspended_at)??"";break;case"init":s="STARTING";break}return{status:s,timestamp:n,timestampLabel:r,name:a}}const rpe=({endpoint:t,...s})=>{const{trackUiInteraction:n}=P(),{status:r,timestamp:a,timestampLabel:o}=npe(t),i=lT(t),{displayName:c,edit:l,isLoading:d}=tpe(t),{restartEndpoint:u,isRestarting:p}=spe(t),h=`${Q(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:t.project_id,branchId:t.branch_id})}?endpointId=${encodeURIComponent(t.id)}`;return e.jsxs(ol,{className:V(Xn.endpointGroup),children:[e.jsxs(zt,{"aria-label":"Type",bodyClassName:Xn.endpointStatus,className:Xn.leftSection,children:[e.jsxs("div",{className:Xn.typeRow,children:[e.jsx(Z,{level:3,size:"h5","data-qa":"endpoint_item_compute_type",children:e.jsx(lI,{value:c,isLoading:d,onSave:l,className:Xn.editableName})}),e.jsx(ax,{endpoint:t,label:r}),t.type==="read_only"&&e.jsx(te,{content:"This compute only accepts read requests",children:e.jsx(Ie,{children:"RO"})})]}),e.jsxs("div",{className:Xn.idRow,children:[e.jsx("code",{title:t.id,children:t.id})," ",e.jsx(hl,{text:t.id})]})]}),e.jsxs("div",{className:Xn.rightSection,children:[a&&e.jsx(zt,{label:o,className:Xn.timestampColumn,children:a}),e.jsx(zt,{label:"Size",children:e.jsx(ag,{endpoint:t})}),e.jsxs(zt,{"aria-label":"Actions",bodyClassName:Xn.actions,children:[e.jsx(E,{appearance:"secondary","data-qa":"endpoint_item_edit_button",onClick:()=>{n("branch_page_compute_edit_clicked"),s.onEditEndpoint(t)},children:"Edit"}),e.jsx(E,{appearance:"primary","data-qa":"endpoint_item_connect_button",size:"s",onClick:()=>{n("branch_page_compute_connect_clicked"),s.onConnectEndpoint(t)},children:"Connect"}),e.jsx(Yt,{sections:[{items:[{label:"Monitor activity",icon:"graph",href:h,onClick:()=>{n("branch_page_compute_monitor_clicked")},"data-qa":"endpoint_item_monitor_menu_item"},{label:p?"Restarting...":"Restart compute",icon:"reset",onClick:()=>{n("branch_page_compute_restart_clicked"),u()},disabled:r!=="ACTIVE"||p,"data-qa":"endpoint_item_restart_menu_item"},{label:"Delete",icon:"trash",onClick:()=>{n("branch_page_compute_edit_clicked"),i()},"data-qa":"endpoint_item_delete_menu_item"}]}],children:e.jsx(ms,{iconName:"actions",className:Xn.actionsButton,"data-qa":"endpoint_item_actions_button"})})]})]})]})},ape=({project:t,branch:s})=>{const{trackUiInteraction:n}=P(),r=Om({projectId:t.id}),[a,o]=m.useState(!1),[i,c]=m.useState(!1),[l,d]=m.useState(),u=Hs({projectId:t.id,branchId:s.id}),p=m.useCallback(()=>{c(!1)},[]),h=m.useCallback(j=>{d(j??void 0),c(!0)},[]),[g,f]=m.useState(null),_=m.useCallback(j=>{n("branch_view_endpoints_edit_endpoint_drawer_opened"),f(j)},[n]),b=m.useCallback(()=>{f(null)},[]),x=m.useMemo(()=>{var j;return((j=u.data)==null?void 0:j.endpoints.concat().sort(tx))??[]},[u.data]);return u.status==="pending"||r.isLoading?Fa(3,j=>e.jsx(ol,{children:e.jsx(zt,{"aria-label":"Loading"})},j)):!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsx(ig,{isOpen:i,onRequestClose:p,branch:s,endpoint:l,project:t}),e.jsx(lt,{type:Xe.EndpointLimitReached,isOpen:a,onRequestClose:()=>{o(!1)}}),g!==null&&e.jsx(uo,{isOpen:!0,onRequestClose:b,mode:"edit",project:t,endpoint:g}),e.jsxs("div",{className:qhe.wrapper,children:[e.jsx("div",{role:"table","aria-label":"Computes",children:x.map(j=>e.jsx(rpe,{endpoint:j,onEditEndpoint:_,onConnectEndpoint:h},j.id))}),e.jsx(Hhe,{projectId:t.id,branchId:s.id,setShowUpgradeModal:o})]})]})},ope=({children:t,branch:s,...n})=>{const{trackUiInteraction:r}=P(),[a,o]=m.useState(!1),i=m.useCallback(()=>o(!1),[]),c=m.useCallback(()=>{r("create_database_button_clicked"),o(!0)},[r]),{data:l}=Hs({projectId:s.project_id,branchId:s.id}),d=m.useMemo(()=>{var p;return(p=Au((l==null?void 0:l.endpoints)??[]))==null?void 0:p.id},[l]),u=yr(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[s.project_id],branches:[s.id]}}:null,[s.id,s.project_id,d]));return e.jsxs(e.Fragment,{children:[e.jsx(fM,{projectId:s.project_id,branchId:s.id,isOpen:a,onRequestClose:i,formProps:{onSuccess:i}}),e.jsx(lo,{lockedMessage:u,children:e.jsx(E,{...n,onClick:c,"data-qa":"database_create_button",disabled:!!u||n.disabled,children:t||"New Database"})})]})},ipe="_buttonContainer_13dcw_1",qA={buttonContainer:ipe},cpe="_group_1t3xx_1",lpe="_overflow_1t3xx_10",dpe="_actions_1t3xx_20",qa={group:cpe,overflow:lpe,actions:dpe},upe=({database:t})=>{const{trackUiInteraction:s}=P(),{deleteDatabase:n}=un(),{projectId:r}=F(),{branch:a}=at(),{data:o}=Hs({projectId:r,branchId:(a==null?void 0:a.id)??""}),i=m.useMemo(()=>{var u;return(u=Au((o==null?void 0:o.endpoints)??[]))==null?void 0:u.id},[o]),c=m.useMemo(()=>{const u=new URLSearchParams;return u.set("database",t.name),u.toString()},[t]),l=yr(m.useMemo(()=>a&&i?{exclusive:{endpoints:i?[i]:void 0},shared:{projects:[a.project_id],branches:[a.id]}}:null,[a,i])),d=m.useMemo(()=>[{items:[{label:"Delete database",onClick(){s("branch_page_databases_delete_database_clicked"),n(t)},disabled:!!l},{label:"Query",onClick(){s("branch_page_databases_query_database_clicked")},href:Zx(C.ProjectsItemBranchesSQLEditor,{projectId:r,branchId:a==null?void 0:a.id,queryString:c})}]}],[n,t,s,r,a,c,l]);return a?e.jsx(Yt,{sections:d,placement:"right top",children:e.jsx(ms,{"aria-label":"Database actions",isDisabled:!!l})}):null},hpe=({database:t})=>{const{trackUiInteraction:s}=P(),{projectId:n}=F(),{branch:r}=at(),a=m.useMemo(()=>{const i=new URLSearchParams;return i.set("database",t.name),i},[t]),o=m.useMemo(()=>jT(n,r.id,a),[n,r,a]);return!o||!r?null:e.jsx(E,{as:yL,appearance:"primary",size:"s",to:o,onClick:()=>s("branch_page_databases_edit_data_clicked"),children:"Edit data"})},ppe=({databases:t})=>e.jsx("div",{"aria-label":"Databases list",children:t.map(s=>e.jsxs(ol,{"aria-label":"Databases list item",className:qa.group,children:[e.jsx(zt,{"aria-label":"Name",className:qa.overflow,children:e.jsx("span",{children:s.name})}),e.jsx(zt,{label:"Owner",className:qa.overflow,children:e.jsx("span",{children:s.owner_name})}),e.jsx(zt,{label:"Created",children:fe(s.created_at)}),e.jsx(zt,{label:"Last updated",children:fe(s.updated_at)}),e.jsxs(zt,{"aria-label":"Actions",bodyClassName:qa.actions,children:[e.jsx(hpe,{database:s}),e.jsx(upe,{database:s})]})]},s.id))}),mpe=({branch:t,databases:s,roles:n,onResetToParentBranch:r})=>{const a=s.length>0,o=n.length===0,i=!t.default&&!a,c=e.jsx(te,{content:"Adding a database requires a role to assign as the database owner. Add a role first.",disabled:!o,children:e.jsx("div",{children:e.jsx(ope,{appearance:"secondary",disabled:o,branch:t,children:"Add database"})})});return e.jsx(sa,{title:"Databases",description:e.jsxs("span",{children:["Manage the Postgres databases on this branch. For more information, see"," ",e.jsx(R,{href:"https://neon.com/docs/manage/databases",openInNewTab:!0,children:"Manage databases."})]}),action:a&&c,children:a?e.jsx(ppe,{databases:s}):e.jsx(cg,{icon:"database_gradient",text:e.jsxs("span",{children:[e.jsx("code",{children:t.name})," does not have any databases."]}),action:e.jsxs("div",{className:qA.buttonContainer,children:[i&&e.jsx(jj,{branch:t,onSuccess:r,children:l=>e.jsx(E,{appearance:"secondary",size:"s",...l,children:"Reset from parent"})}),c]})})})},gpe=()=>e.jsxs(e.Fragment,{children:[e.jsx(sa,{title:"Roles",children:Fa(2,t=>e.jsx(ol,{children:Fa(5,s=>e.jsx(zt,{"aria-label":"Roles loading",children:e.jsx(B,{height:12,width:80})},s))},t))}),e.jsx(sa,{title:"Databases",children:Fa(2,t=>e.jsx(ol,{children:Fa(5,s=>e.jsx(zt,{"aria-label":"Databases loading",children:e.jsx(B,{height:12,width:80})},s))},t))})]}),GS={unarchiveAlert:"Creating a role on an archived branch will unarchive it.",unarchiveAlertSlow:"Creating a role on an archived branch will unarchive it. Connection times may be slow during this process."},fpe="_root_fjb5m_1",_pe={root:fpe},bpe=()=>{const{register:t,formState:{errors:s}}=Ct(),{branch:n}=at(),{selectOptionsById:r}=xt();return e.jsxs("div",{className:_pe.root,children:[(n==null?void 0:n.current_state)==="archived"&&e.jsx(X,{appearance:"info",children:Du(n)?GS.unarchiveAlertSlow:GS.unarchiveAlert}),e.jsx(U,{id:"branch_field",label:"Branch",inline:!0,children:e.jsx(L0,{value:n?r[n.id]:void 0,disabled:!0})}),e.jsx(U,{id:"name_field",error:!!s.name,label:"Name",inline:!0,children:e.jsx(ie,{...t("name",{required:!0})})})]})},xpe=({initialRole:t,onSuccess:s,onError:n,children:r})=>{const{projectId:a}=F(),{branch:o}=at(),{fetch:i}=Pi(),{onRoleCreate:c}=IC(),l=Ss({shouldUnregister:!0,mode:"onChange",defaultValues:{name:(t==null?void 0:t.name)||""}}),d=u=>G.createProjectBranchRole(a,(o==null?void 0:o.id)??"",{role:{name:u.name}}).then(({data:p})=>{c(p),s&&s(p.role),i()},p=>{Y(p),n&&n(p)});return e.jsx(Jt,{...l,children:e.jsx(qt,{onSubmit:l.handleSubmit(d),children:r})})},jpe=({initialRole:t,onError:s,onSuccess:n,...r})=>e.jsx(ft,{title:"Role creation",width:500,"data-qa":"create_role_modal",...r,children:e.jsxs(xpe,{initialRole:t,onSuccess:a=>{n&&n(a),r.onRequestClose&&r.onRequestClose()},onError:s,children:[e.jsx(De,{children:e.jsx(bpe,{})}),e.jsx(Te,{children:e.jsx(Ce,{children:"Create"})})]})}),vpe=({branch:t,children:s,...n})=>{const{trackUiInteraction:r}=P(),[a,o]=m.useState(!1),i=m.useCallback(()=>o(!1),[]),c=m.useCallback(()=>{r("create_user_button_clicked"),o(!0)},[r]),{data:l}=Hs({projectId:t.project_id,branchId:t.id}),d=m.useMemo(()=>{var p;return(p=Au((l==null?void 0:l.endpoints)??[]))==null?void 0:p.id},[l]),u=yr(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[t.project_id],branches:[t.id]}}:null,[t.id,t.project_id,d]));return e.jsxs(e.Fragment,{children:[e.jsx(jpe,{isOpen:a,onRequestClose:i}),e.jsx(lo,{lockedMessage:u,children:e.jsx(E,{...n,onClick:c,disabled:!!u||n.disabled,"data-qa":"create_role_button",children:s||"New Role"})})]})},ype=({branch:t,handleResetPassword:s,handleDeleteRole:n})=>{const{trackUiInteraction:r}=P(),{data:a}=Hs({projectId:t.project_id,branchId:t.id}),o=m.useMemo(()=>{var l;return(l=Au((a==null?void 0:a.endpoints)??[]))==null?void 0:l.id},[a]),i=yr(m.useMemo(()=>o?{exclusive:{endpoints:o?[o]:void 0},shared:{projects:[t.project_id],branches:[t.id]}}:null,[t.id,t.project_id,o])),c=m.useMemo(()=>[{items:[{label:"Reset password",onClick(){r("branch_page_roles_reset_password_clicked"),s()},disabled:!!i},{label:"Delete role",onClick(){r("branch_page_roles_delete_role_clicked"),n()},disabled:!!i}]}],[s,n,r,i]);return e.jsx(Yt,{sections:c,placement:"right top",children:e.jsx(lo,{lockedMessage:i,children:e.jsx(ms,{"aria-label":"Role actions",isDisabled:!!i})})})},HA=({branch:t,role:s})=>{const{deleteRole:n}=Pi(),r=m.useCallback(()=>n(s),[n,s]);return s.name===Ru?null:e.jsx(zA,{branch:t,role:s,children:a=>e.jsx(ype,{branch:t,handleResetPassword:a,handleDeleteRole:r})})},VA=({strings:t})=>e.jsx(te,{content:t.join(", "),children:e.jsxs("span",{children:[t[0]??"-",t.length>1&&` +${t.length-1}`]})}),wpe=({branch:t,roles:s,roleDatabaseNames:n})=>s.map(r=>e.jsxs(ol,{className:qa.group,"data-qa":"role_list_item",children:[e.jsx(zt,{"aria-label":"Name",className:qa.overflow,children:e.jsx("span",{children:r.name})}),e.jsx(zt,{label:"Owns",className:qa.overflow,children:e.jsx(VA,{strings:n[r.name]})}),e.jsx(zt,{label:"Created",children:fe(r.created_at)}),e.jsx(zt,{label:"Last updated",children:fe(r.updated_at)}),e.jsx(zt,{"aria-label":"Actions",bodyClassName:qa.actions,children:e.jsx(HA,{role:r,branch:t})})]},r.name)),Spe="_actions_142i3_1",Cpe={actions:Spe},kpe=({branch:t,roles:s,roleDatabaseNames:n})=>{const r=m.useMemo(()=>[{key:"name",label:"Name"},{key:"name",label:"Owns",renderValue:a=>e.jsx(VA,{strings:n[a.name]})},{key:"name",label:"Created",renderValue:a=>fe(a.created_at)},{key:"name",label:"Last updated",renderValue:a=>fe(a.updated_at)},{key:"actions",label:"",renderValue:a=>!a.protected&&t&&e.jsx("div",{className:Cpe.actions,children:e.jsx(HA,{branch:t,role:a})}),tdAttrs:{width:"50px"}}],[t,n]);return e.jsx(xr,{cols:r,data:s,keyField:"name",keyPrefix:t==null?void 0:t.id})},Ipe=({branch:t,roles:s,databases:n,onResetToParentBranch:r})=>{const a=m.useMemo(()=>s.reduce((d,u)=>({...d,[u.name]:n.filter(p=>p.owner_name===u.name).map(p=>p.name)}),{}),[n,s]),o=m.useMemo(()=>s.length>3?e.jsx(kpe,{branch:t,roles:s,roleDatabaseNames:a}):e.jsx(wpe,{branch:t,roles:s,roleDatabaseNames:a}),[t,a,s]),i=s.length>0,c=!t.default&&!i,l=e.jsx(vpe,{appearance:"secondary",branch:t,children:"Add role"});return e.jsx(sa,{title:"Roles",description:e.jsxs("span",{children:["Manage the Postgres roles on this branch. For more information, see"," ",e.jsx(R,{href:"https://neon.com/docs/manage/roles",openInNewTab:!0,children:"Manage roles."})]}),action:i&&l,"data-qa":"roles_section",children:i?o:e.jsx(cg,{icon:"roles_gradient",text:e.jsxs("span",{children:[e.jsx("code",{children:t.name})," does not have any roles."]}),action:e.jsxs("div",{className:qA.buttonContainer,children:[c&&e.jsx(jj,{branch:t,onSuccess:r,children:d=>e.jsx(E,{appearance:"secondary",size:"s",...d,children:"Reset from parent"})}),l]})})})},Ppe=({onResetToParentBranch:t})=>{const{list:s,isLoading:n}=Pi(),{list:r,isLoading:a}=un(),{branch:o}=at();return o?n||a?e.jsx(gpe,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ipe,{branch:o,roles:s,databases:r,onResetToParentBranch:t}),e.jsx(mpe,{branch:o,databases:r,roles:s,onResetToParentBranch:t})]}):e.jsx(rs,{})},gd={computes:{label:"Computes",value:"computes",to:C.ProjectsItemBranchesComputes,event:"branch_page_compute_tab_clicked"},"roles-and-databases":{label:"Roles & Databases",value:"roles-and-databases",to:C.ProjectsItemBranchesRolesAndDatabases,event:"branch_page_roles_and_databases_tab_clicked"},"child-branches":{label:"Child branches",value:"child-branches",to:C.ProjectsItemBranchesChildBranches,event:"branch_page_child_branches_tab_clicked"},catalogs:{label:"Catalogs",value:"catalogs",to:C.ProjectsItemBranchesCatalogs,event:"branch_page_catalogs_tab_clicked"},"synced-tables":{label:"Synced Tables",value:"synced-tables",to:C.ProjectsItemBranchesSyncedTables,event:"branch_page_synced_tables_tab_clicked"}},Tpe=t=>{const s=et(),{trackUiInteraction:n}=P(),{branchId:r,projectId:a,tab:o="computes"}=dl(),i=He([gd.computes,gd["roles-and-databases"],gd["child-branches"],!1,!1]),c=m.useCallback(l=>{const d=gd[l];n(d.event),s.push(Q(d.to,{projectId:a,branchId:r}))},[s,a,r,n]);return e.jsxs(e.Fragment,{children:[e.jsx(qn,{options:i,value:o,onChange:c}),i.some(l=>l.value===o)?e.jsxs(e.Fragment,{children:[o==="computes"&&e.jsx(ape,{...t}),o==="roles-and-databases"&&e.jsx(Ppe,{onResetToParentBranch:t.onResetToParentBranch}),o==="child-branches"&&e.jsx(Mhe,{branch:t.branch}),o==="catalogs"&&!1,o==="synced-tables"&&!1]}):e.jsx(ye,{to:Q(gd.computes.to,{projectId:a,branchId:r})})]})},Ape=({branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r,onResetToParentBranch:a})=>{const{project:o}=F(),{limits:i,isLoading:c}=It(),{fetch:l}=Pi(),d=m.useRef(!1),u=h0(t),{data:p}=Em({projectId:o==null?void 0:o.id}),h=m.useMemo(()=>{if(!p||u)return null;for(const g of p.pages)for(const f of g.operations)if(f.branch_id===t.id&&f.action==="import_data")return f.failures_count>0?f:null;return null},[t.id,u,p]);return m.useEffect(()=>{!u&&d.current&&l(),d.current=u},[u,l]),c||!i?e.jsx(on,{}):!o||!t?e.jsx(wL,{}):e.jsxs(e.Fragment,{children:[e.jsx(hue,{branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r}),h?e.jsx(ro,{className:MS.branchImportToast,children:"Database import failed"}):u?e.jsx(p0,{className:MS.branchImportToast,children:"Database import in progress"}):null,e.jsx(khe,{project:o,branch:t,annotation:s,onResetToParentBranch:a,onSetBranchProtection:n}),e.jsx(Tpe,{project:o,branch:t,onResetToParentBranch:a})]})},Npe=()=>e.jsxs(e.Fragment,{children:[e.jsx(gue,{}),e.jsx(Ihe,{}),e.jsx(bl,{title:"Computes"}),e.jsx(Xde,{endpoints:[],isLoading:!0})]}),Epe=(t,s)=>{var a;const{branchesById:n,annotations:r}=xt();return n[t]&&s===((a=n[t])==null?void 0:a.project_id)?{branch:n[t],annotation:r[t]}:{branch:void 0,annotation:void 0}},Ope=()=>{const{branchId:t,projectId:s}=dl(),{isLoading:n}=F(),{branch:r,annotation:a}=Epe(t,s),{fetch:o}=xt(),i=et(),c=ej("branch"),[l,d]=m0(),u=n||l.isLoading,p=m.useCallback(()=>{G.getProjectBranch(s,t).then(({data:h})=>{h.branch.project_id===s?d({isLoading:!1,data:h.branch}):d({isLoading:!1,error:"Branch doesn't belong to the project"})}).catch(h=>{const g=SL(h);d({isLoading:!1,error:g})})},[s,t,d]);return m.useEffect(()=>{d({data:r,isLoading:!r}),p()},[r,d,p]),u?e.jsx(Npe,{}):l.error||!l.data?e.jsx(rs,{title:l.error}):e.jsxs(e.Fragment,{children:[c,e.jsx(Ape,{branch:l.data,annotation:a,refreshBranches:()=>{o(),p()},onDeleteBranch:()=>{o(),i.push(Q(C.ProjectsItemBranches,{projectId:s}))},onResetToParentBranch:p})]})},$pe={dividerText:"Or restore from a snapshot"},Lpe="_root_114b3_1",Rpe="_divider_114b3_7",KS={root:Lpe,divider:Rpe},Mpe=(t,s)=>`${t}_old_${pr(s)}`,Bpe=t=>{const s=be();return _e({mutationFn:({timestamp:n,branchPreservedName:r})=>G.restoreProjectBranch(t.project_id,t.id,{source_branch_id:t.id,source_timestamp:n,preserve_under_name:r}),onSuccess:()=>s.invalidateQueries({queryKey:ml({projectId:t.project_id})})})};var hr=(t=>(t.Hours="hours",t.Days="days",t.Weeks="weeks",t.Months="months",t))(hr||{}),vs=(t=>(t.PITR="pitr",t.Snapshot="snapshot",t))(vs||{});const Vr={title:({timestamp:t,type:s,isRestoreMode:n})=>{switch(s){case vs.PITR:return`${n?"Restore":"Preview"} branch from ${pr(t,ke.DateTimeWithTimezone)}`;case vs.Snapshot:return`${n?"Restore":"Preview"} snapshot_${pr(t,ke.DateTimeWithTimezone)}`}},drizzle:"Browse data",schemaDiff:"Compare schemas",timeTravel:"Query data",restore:"Restore",cancel:"Cancel",preview:"Preview data",descriptionTitle:({branchName:t,type:s})=>{switch(s){case vs.PITR:return e.jsxs(e.Fragment,{children:["You're about to restore ",e.jsx(Ae,{children:t})," to an earlier point in time — here's what will happen:"]});case vs.Snapshot:return"You're about to restore a snapshot — here's what will happen:"}},description:({currentBranchName:t,ttlInterval:s,timestamp:n,type:r,newBranchName:a})=>{switch(r){case vs.PITR:return[e.jsxs(e.Fragment,{children:[e.jsx(Ae,{children:t})," will be restored to how it was on ",e.jsx("b",{children:pr(n,ke.DateTimeWithTimezone)}),"."]}),e.jsxs(e.Fragment,{children:["Your current branch will be kept as a backup and renamed to ",e.jsx(Ae,{children:a})]}),e.jsxs(e.Fragment,{children:["You can undo this restore as long as you keep ",e.jsx(Ae,{children:a})]}),e.jsxs(e.Fragment,{children:["The expiration time on ",e.jsx(Ae,{children:t})," will be extended to ",e.jsx("strong",{children:M_(s)})]})];case vs.Snapshot:return["The restore operation occurs instantly",e.jsxs(e.Fragment,{children:["Your ",e.jsx(Ae,{children:t})," branch will remain unchanged"]}),e.jsxs(e.Fragment,{children:[e.jsx(Ae,{children:a})," will be created as a new branch"]}),e.jsxs(e.Fragment,{children:["The expiration time on ",e.jsx(Ae,{children:t})," will be extended to ",e.jsx("strong",{children:M_(s)})]})]}}},Dpe="_viewSelect_q2xi7_1",Upe="_description_q2xi7_5",Fpe="_descriptionList_q2xi7_15",zpe="_descriptionItem_q2xi7_24",qpe="_descriptionIcon_q2xi7_29",fd={viewSelect:Dpe,description:Upe,descriptionList:Fpe,descriptionItem:zpe,descriptionIcon:qpe};nn(()=>import("./load-bundle-hveeEyj3.js"),[]);const vj=t=>["auth_jwks",t],yj=t=>bt({queryKey:vj(t),queryFn:async()=>(await G.getProjectJwks(t)).data}),Hpe=t=>{const s=be();return _e({mutationFn:async n=>(await G.addProjectJwks(t,{provider_name:n.providerName,jwks_url:n.jwksUrl,jwt_audience:n.expectedAudience?n.expectedAudience:void 0})).data,onSuccess:()=>{s.invalidateQueries({queryKey:vj(t)})}})},Vpe=t=>{const s=be();return _e({mutationFn:async n=>(await G.deleteProjectJwks(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:vj(t)})}})},Wpe={title:"Tables"},Gpe="_container_1mjkm_1",Kpe={container:Gpe},Qpe=()=>e.jsx("div",{className:Kpe.container,children:e.jsx(Tl,{title:Wpe.title,noBreadcrumbs:!0})}),Ype="_root_zdsh0_1",Jpe="_root_darkTheme_zdsh0_119",QS={root:Ype,root_darkTheme:Jpe},Zpe=(t,s)=>{switch(t){case Ic.builtins.TIMESTAMPTZ:case Ic.builtins.TIMESTAMP:case Ic.builtins.DATE:case Ic.builtins.INTERVAL:return n=>n;default:return Ic.getTypeParser(t,s)}},Xpe=(t,{isUnexpected:s,id:n,additionalData:r})=>{const a={drizzle_error_id:n,additional_data:r};s?gi(new Error(`Unexpected error in drizzle studio: ${t.message}`,{cause:t}),{extra:a}):gi(new Error("Handled error in drizzle studio",{cause:t}),{level:"info",extra:a})};function bc(t,s){return`${s}-${t}`}const eme=({children:t,className:s,branchId:n,databases:r,excludeSchemas:a,excludeTables:o,readOnly:i,selectedDatabase:c,selectedSchema:l,selectedTable:d,header:u=e.jsx(Qpe,{}),onDatabaseSelected:p,setupClient:h})=>{const g=m.useRef(null),f=m.useRef(!1),_=m.useRef({}),[b,x]=m.useState(null),[j,v]=m.useState(!1),{trackUiInteraction:y}=P(),{colorScheme:S}=oo(),w=m.useMemo(()=>r.map(({name:L})=>({id:bc(L,n),name:L})),[n,r]);m.useEffect(()=>()=>{f.current=!0},[]);const k=m.useCallback(L=>{y(`${CL}${L}`)},[y]),N=dr(async(L,H,W,$=[])=>{var ce,ee;if(!b&&g.current&&x(g.current.packageVersion),f.current)return{rows:[]};(ce=_.current)[ee=bc(L,n)]??(ce[ee]=await h(L));const M=_.current[bc(L,n)];if(!M)return{rows:[]};const se=3;for(let K=1;K<=se;K+=1)try{return await M(W,$,{arrayMode:H,fullResults:!0,types:{...Ic,getTypeParser:Zpe}})}catch(ae){const le=String(ae).toLowerCase();if(K>=se||!le.includes("failed to fetch"))throw ae;await new Promise(ze=>setTimeout(ze,1e3))}return{rows:[]}}),D=dr(async(L,H,W)=>{var M,se;if(!b&&g.current&&x(g.current.packageVersion),f.current)return[];(M=_.current)[se=bc(L,n)]??(M[se]=await h(L));const $=_.current[bc(L,n)];return $?await $.transaction(ce=>H.map(({sql:ee,params:K})=>ce(ee,K)),{fetchOptions:{signal:W}}):[]});return m.useEffect(()=>{b&&(console.log("Tables version",b),kL("drizzle_studio.version",b))},[b]),m.useEffect(()=>{customElements.whenDefined("drizzle-studio").then(()=>{v(!0)})},[]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.queryFn=N,g.current.transactionFn=D,g.current.onEvent=k,g.current.onError=Xpe)},[j,k,N,D]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.databases=w)},[j,w]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.selectedSchema=l??null)},[j,l]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.selectedTable=d??null)},[j,d]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.excludeSchemas=a??[])},[j,a]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.excludeTables=o??[])},[j,o]),m.useLayoutEffect(()=>{j&&g.current&&p&&(g.current.onDatabaseSelected=p)},[j,p]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.readOnly=i??!1)},[j,i]),m.useLayoutEffect(()=>{j&&g.current&&(g.current.selectedDatabase=c?bc(c,n):null)},[j,n,c]),j?e.jsxs("drizzle-studio",{ref:g,className:V(s,QS.root,{[QS.root_darkTheme]:S==="dark"}),children:[e.jsx("div",{slot:"page-title",children:u}),t]}):e.jsx(ve,{})},tme=({branchId:t,databases:s,setupClient:n})=>{const{projectId:r}=F(),{data:a,status:o}=yj(r),[i,c]=m.useState(),l=m.useMemo(()=>o!=="error"&&(a==null?void 0:a.jwks.length)===0?[]:["auth"],[o,a==null?void 0:a.jwks.length]);return e.jsx(eme,{databases:s,selectedDatabase:i,excludeSchemas:l,readOnly:!0,onDatabaseSelected:c,setupClient:n,branchId:t})},sme="_content_9xqb_1",nme={content:sme},WA=({content:t})=>e.jsx(oI,{appearance:"blue",size:"s",description:e.jsxs("div",{className:nme.content,children:[e.jsx(z,{name:"info",size:16}),e.jsx(T,{children:t})]})}),rme={bannerDescription:({timestamp:t,type:s})=>{switch(s){case vs.PITR:return`You're viewing data as it existed on ${t}`;case vs.Snapshot:return`Displaying data in snapshot_${t}`}}},ame="_root_o0avu_1",ome="_drizzle_o0avu_7",YS={root:ame,drizzle:ome},ime=({timestamp:t,databases:s,branchId:n,type:r})=>{const{project:a}=F(),[o]=bx(),i=`${n}.${a==null?void 0:a.proxy_host}`,c=m.useCallback(async l=>{if(a)try{const d=s.find(({name:h})=>h===l);if(!d)return;const u=a.store_passwords?d.owner_name:Ru,p=await o({branchId:n,projectId:a.id,role:u},!0).unwrap();return _x(z0({host:i,database:l,password:p,role:u,options:`neon_timestamp:${t}`}))}catch(d){Y(d);return}},[s,t,o,a,i,n]);return e.jsxs("div",{className:YS.root,children:[e.jsx(WA,{content:rme.bannerDescription({timestamp:t,type:r})}),e.jsx("div",{className:YS.drizzle,children:e.jsx(tme,{setupClient:c,branchId:n,databases:s})})]})},cme={noDatabases:"You do not have any databases"},lme="_alert_1cfm8_1",dme={alert:lme},ume="_root_1awyq_1",hme="_bar_1awyq_7",pme="_databaseSelect_1awyq_14",mme="_schemaDiff_1awyq_19",dp={root:ume,bar:hme,databaseSelect:pme,schemaDiff:mme},gme=({timestamp:t,branch:s,databaseOptions:n})=>{const[r,a]=m.useState(n[0].database),o=i=>{var l;const c=(l=n.find(({value:d})=>d===i))==null?void 0:l.database;c&&a(c)};return e.jsxs("div",{className:dp.root,children:[e.jsx("div",{className:dp.bar,children:e.jsx("div",{className:dp.databaseSelect,children:e.jsx(ct,{options:n,value:r.name,onChange:o,disabled:n.length===1,size:"s"})})}),e.jsx("div",{className:dp.schemaDiff,children:e.jsx(W0,{projectId:s.project_id,currentBranch:s,database:r,compareSource:{branch:s,mode:Vd.Timestamp,timestamp:t}})})]})},fme=()=>{const{list:t}=un();return e.jsx(e.Fragment,{children:t.length>1&&e.jsx(X,{appearance:"warning",children:Pc.manyDbWarning})})},_me="_root_m5ybw_1",bme="_controlPanel_m5ybw_7",xme="_actions_m5ybw_11",jme="_description_m5ybw_17",vme="_panel_m5ybw_22",yme="_topBar_m5ybw_32",xc={root:_me,controlPanel:bme,actions:xme,description:jme,panel:vme,topBar:yme},Zf={restoreModalTitle:"Restore branch",cancel:"Cancel",restoreModalAction:"Restore"},wme=({restoreTo:t,onClose:s})=>{const{restore:n,isRestoring:r}=Ti(),{trackUiInteraction:a}=P();return e.jsxs(ft,{isOpen:!0,onRequestClose:()=>{a("branch_restore_restore_cancelled"),s()},title:Zf.restoreModalTitle,children:[e.jsx(De,{gaps:!0,children:e.jsx(TA,{restoreTo:t})}),e.jsxs(Te,{children:[e.jsxs(g0,{children:["For more, see"," ",e.jsx(R,{href:"https://neon.com/docs/guides/branch-restore",onClick:()=>a("branch_reset_docs_link_clicked"),openInNewTab:!0,children:"Branch restore"})]}),e.jsx(E,{appearance:"secondary",onClick:()=>{a("branch_restore_restore_cancelled"),s()},children:Zf.cancel}),e.jsx(E,{disabled:r,appearance:"primary",onClick:()=>{a("branch_restore_restore_confirmed"),n()},children:Zf.restoreModalAction})]})]})},Sme="_root_4lb3g_1",Cme="_expanded_4lb3g_9",kme="_expandButton_4lb3g_22",Xf={root:Sme,expanded:Cme,expandButton:kme},Ime="_root_lj1bc_1",Pme="_body_lj1bc_9",Tme="_alert_lj1bc_18",Ame="_scrollable_lj1bc_22",Nme="_list_lj1bc_28",Eme="_descriptives_lj1bc_41",Ome="_queryError_lj1bc_94",$me="_fixButton_lj1bc_100",Pn={root:Ime,body:Pme,alert:Tme,scrollable:Ame,list:Nme,descriptives:Eme,queryError:Ome,fixButton:$me},Lme=({result:t,queryCount:s,isQueryRunning:n,queryRunError:r})=>{var b;const{currentIndex:a,onCurrentIndexChange:o}=K0(),i=ge("query_error_ai_fix"),{trackUiInteraction:c}=P();m.useEffect(()=>o(0),[t.response,o]);const[l,d]=m.useState({}),[u,p]=m.useState(t.querySeq);t.querySeq!==u&&(d({}),p(t.querySeq));const h=x=>{d({...l,[a]:x})},g=m.useMemo(()=>{const x=(t.response??[]).map((j,v)=>({value:v,label:j.query,disabled:!1}));for(let j=x.length;j<s;j+=1)x.push({value:j,label:`${j+1}: …`,disabled:!0});return x},[t,s]);let f;s>0&&t.response!==void 0&&(f=t.response[a]);let _=e.jsx("div",{className:Pn.alert,children:e.jsx(X,{appearance:"error",children:"Something went wrong"})});if(f===void 0){if(!n)return null;_=e.jsx("div",{className:V(Pn.root),children:e.jsx(Q0,{})})}else if(f.error)_=e.jsx("div",{className:Pn.alert,children:e.jsx(X,{appearance:"error",children:e.jsxs("div",{className:Pn.queryError,children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:f.error}}),i&&r&&(r.isFixPending?e.jsx(E,{className:Pn.fixButton,icon:"pgvector",iconSide:"right",appearance:"secondary",size:"s",onClick:()=>{r.fixErrorCancel(),c("playground_fix_error_cancel_clicked")},children:"Cancel"}):e.jsx(E,{className:Pn.fixButton,icon:"pgvector",iconSide:"right",disabled:r.isFixDisabled,appearance:"secondary",size:"s",onClick:()=>{r.fixError(),c("playground_fix_error_clicked")},children:"Fix with AI"}))]})})});else if((b=f.explain_data)!=null&&b.length){const x=f.explain_data.map(j=>j["QUERY PLAN"]).join(`
`);_=e.jsx(i2,{query:f.fullSQL??f.query,plan:x})}else if(f.descriptiveHTML)_=e.jsx("div",{className:Pn.descriptives,dangerouslySetInnerHTML:{__html:f.descriptiveHTML}});else if(f.data){const x=l[a]??0;_=e.jsxs(e.Fragment,{children:[e.jsx(Y0,{offset:x,onChangeOffset:h,data:f.data}),e.jsx(c2,{result:f})]})}return e.jsxs("div",{className:Pn.root,children:[s>1&&e.jsx("div",{className:Pn.scrollable,children:e.jsx(qn,{className:Pn.list,options:g,value:a,onChange:o})}),e.jsx("div",{className:Pn.body,children:_})]})},GA=({className:t,result:s,isQueryRunning:n,queryRunError:r})=>{var h;const[a,o]=m.useState(!1),[i,c]=m.useState(!1),l=m.useRef(null),d=m.useRef(void 0);if(!s)return null;if(a&&!i&&setTimeout(()=>{c(a)},0),i&&!a){const g=l.current,f=()=>{g.removeEventListener("transitionend",f),c(a)};g.addEventListener("transitionend",f)}const u=d.current,p=u&&`${u.top}px 0px 0px ${u.left}px`;return e.jsxs("div",{"data-qa":"query_result",className:V(Xf.root,t,i&&Xf.expanded),ref:l,style:a!==i?{inset:p}:{},children:[e.jsx(Lme,{isQueryRunning:n,queryCount:(n?s.queryCount:(h=s.response)==null?void 0:h.length)??0,result:s,queryRunError:r}),e.jsx("button",{type:"button",className:Xf.expandButton,title:i?"Return results to pane":"Expand results to window",onClick:()=>{if(!i){const g=l.current;d.current=g.getBoundingClientRect()}o(!i)},children:e.jsx(z,{name:i?"contract":"expand",size:19})})]})},Do={title:"Time travel assist",subtitle:"Optionally, verify the selected point in time before restoring.",databaseSelectLabel:"Database",queryButtonLabel:t=>`Query at ${{[Qe.Timestamp]:"timestamp",[Qe.LSN]:"LSN",[Qe.Head]:"HEAD"}[t]}`,queryCancelButtonLabel:"Cancel",queryPlaceholder:`/*
 * Check first!
 * Run read-only queries at the selected timestamp to preview data exactly as it existed at that moment.
 * Confirm you've chosen the right point in time before you restore
 */`,queryResultDescription:(t,s)=>{var n;return`Query result from ${t} on branch ${(n=s.sourceBranch)==null?void 0:n.name} as of ${(()=>{switch(s.mode){case Qe.Timestamp:return fe(s.timestamp,ke.Full);case Qe.LSN:return s.lsn;default:return"Head"}})()}`}},Rme="_root_15v1u_1",Mme="_header_15v1u_8",Bme="_title_15v1u_14",Dme="_subtitle_15v1u_19",Ume="_queryEditor_15v1u_28",Fme="_queryControls_15v1u_33",zme="_databaseFormField_15v1u_43",qme="_pickedPointDescription_15v1u_48",Hme="_queryResult_15v1u_65",Vme="_queryResultDescription_15v1u_70",er={root:Rme,header:Mme,title:Bme,subtitle:Dme,queryEditor:Ume,queryControls:Fme,databaseFormField:zme,pickedPointDescription:qme,queryResult:Hme,queryResultDescription:Vme},Wme=()=>{var y;const{restoreTo:t,branch:s,queryResult:n,resultOffset:r,runQuery:a,totalRows:o,cancelQuery:i,changeResultOffset:c,queriedContext:l}=Ti(),{project:d,projectId:u}=F(),[p,h]=Ds(_t.RestoreBranchSQL,u,Do.queryPlaceholder),{data:g}=ul({branchId:(s==null?void 0:s.id)??"",projectId:(d==null?void 0:d.id)??""}),[f,_]=m.useState(null),{trackUiInteraction:b}=P(),x=m.useCallback(()=>{if(f){b("branch_restore_query_at_timestamp_clicked");const S=d!=null&&d.store_passwords?f.database.owner_name:Ru;a({database:f.value,query:p,role:S})}},[f,d==null?void 0:d.store_passwords,p,a,b]),j=new Date,v=!!(p.trim().length===0||!s||zu(t,d,j));return d?e.jsxs("section",{className:er.root,children:[e.jsx("header",{className:er.header,children:e.jsxs("div",{children:[e.jsx(Z,{level:4,size:"h3",className:er.title,children:Do.title}),e.jsx("span",{className:er.subtitle,children:Do.subtitle})]})}),e.jsxs("div",{className:er.pickedPointDescription,children:[e.jsxs("div",{children:["Branch: ",e.jsx("code",{children:((y=t.sourceBranch)==null?void 0:y.name)||"--"})]}),e.jsxs("div",{children:[t.mode===Qe.Head&&e.jsx(e.Fragment,{children:"HEAD"}),t.mode===Qe.Timestamp&&e.jsxs(e.Fragment,{children:["Timestamp:"," ",e.jsx("code",{children:t.timestamp?fe(t.timestamp,ke.Full):"--"})]}),t.mode===Qe.LSN&&e.jsxs(e.Fragment,{children:["LSN: ",e.jsx("code",{children:t.lsn||"--"})]})]})]}),e.jsx("div",{className:er.queryEditor,role:"textbox",tabIndex:0,onKeyDown:S=>{S.key==="Enter"&&(S.ctrlKey||S.metaKey)&&x()},children:e.jsx(xx,{width:"100%",height:"100%",name:"query_editor",mode:`pgsql${(d==null?void 0:d.pg_version)??15}`,value:p,onChange:h,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),e.jsxs("div",{className:er.queryControls,children:[e.jsx(U,{label:Do.databaseSelectLabel,className:er.databaseFormField,children:e.jsx(E0,{projectId:(d==null?void 0:d.id)??"",branchId:(s==null?void 0:s.id)??"",value:f,placeholder:"--",options:g.selectOptions,disabled:g.selectOptions.length<=1,onChange:_,canCreateDatabase:!1,size:"s"})}),n.isLoading?e.jsx(E,{appearance:"danger",onClick:i,children:Do.queryCancelButtonLabel}):e.jsx(E,{appearance:"secondary",onClick:x,icon:"play",disabled:v,children:Do.queryButtonLabel(t.mode)})]}),l&&e.jsx("div",{className:er.queryResultDescription,children:Do.queryResultDescription(l.database,l.pointInTime)}),e.jsxs(J0,{children:[e.jsx(GA,{className:er.queryResult,isQueryRunning:n.isLoading,result:n.data}),e.jsx(l2,{limit:d2,total:o,offset:r,onChangeOffset:c})]})]}):e.jsx(ve,{})},JS={sourceBranchLabel:"Restore from",switchHeadToggle:"Restore from the latest data (head)"},Gme="_root_l7f6r_1",Kme="_branchSelectField_l7f6r_7",Qme="_pitPicker_l7f6r_11",e_={root:Gme,branchSelectField:Kme,pitPicker:Qme},Yme=({source:t,setSource:s})=>{const{branch:n,restoreTo:r,changeRestoreTo:a}=Ti(),{trackUiInteraction:o}=P();m.useEffect(()=>{n&&t&&n.id===t.id&&s(null)},[n,t,s]),m.useEffect(()=>{a({...r,sourceBranch:t})},[t,r,a]);const{selectOptions:i}=xt(),c=m.useMemo(()=>i.filter(({value:u})=>n&&n.id!==u),[n,i]),l=m.useMemo(()=>i.find(({value:u})=>{var p;return u===((p=r.sourceBranch)==null?void 0:p.id)})??null,[r.sourceBranch,i]),d=m.useCallback(()=>{o("branch_restore_head_toggled"),a({...r,...r.mode===Qe.Head?{mode:Qe.Timestamp,timestamp:null}:{mode:Qe.Head}})},[a,r,o]);return e.jsxs("div",{className:e_.root,children:[e.jsx(U,{label:JS.sourceBranchLabel,className:e_.branchSelectField,children:e.jsx(Kp,{options:c,value:l,includeNoneOption:!0,"data-qa":"source_branch_select",onChange:u=>{const p=(u==null?void 0:u.branch)??null;p&&s(p)}})}),e.jsx(as,{isSelected:r.mode===Qe.Head,onChange:d,children:JS.switchHeadToggle}),r.mode!==Qe.Head&&e.jsx(gj,{className:e_.pitPicker,value:r,onChange:a})]})},Jme=()=>{const{branch:t,restoreTo:s,changeRestoreTo:n}=Ti();return m.useEffect(()=>{s.mode===Qe.Head?n({mode:Qe.Timestamp,sourceBranch:t,timestamp:null}):n({...s,sourceBranch:t})},[t,s,n]),e.jsx("div",{children:e.jsx(gj,{value:s,onChange:n})})},Zme=()=>{var w;const{selectOptions:t}=xt(),{branch:s,restoreTo:n}=Ti(),{project:r,isOwnProject:a,isLoading:o}=F(),{trackUiInteraction:i}=P(),c=new Date,[l,d]=m.useState(!1),u=!s||!!zu(n,r,c),p=m.useRef(null);m.useEffect(()=>{var k;(k=p==null?void 0:p.current)==null||k.focus()},[]);const{isFreeSubscription:h}=he(),g=a&&h,[f,_]=m.useState("fromHistory"),b=m.useCallback(k=>{_(k),i(k==="fromHistory"?"branch_restore_tab_from_history_clicked":"branch_restore_tab_from_another_branch_clicked")},[i]),x=m.useMemo(()=>[{label:"From history",value:"fromHistory"},{label:"From another branch",value:"anotherBranch",disabled:t.length<2}],[t]),[j,v]=m.useState(null),{billingUrl:y,isLoading:S}=so();return e.jsxs("div",{className:xc.root,children:[l&&s&&r&&e.jsx(t0,{projectId:r==null?void 0:r.id,branchId:(w=n.sourceBranch)==null?void 0:w.id,children:e.jsx(wme,{restoreTo:n,onClose:()=>d(!1)})}),e.jsxs("div",{className:xc.panel,children:[e.jsx("div",{className:xc.topBar,children:e.jsx("div",{className:xc.description,children:o?e.jsx(B,{}):e.jsxs(e.Fragment,{children:[Pc.description(Lu((r==null?void 0:r.history_retention_seconds)??0))," ",g?e.jsxs(e.Fragment,{children:[e.jsx(R,{href:y,disabled:S,onClick:()=>i("branch_restore_update_to_pro_clicked"),children:Pc.descriptionUpgradeLink})," ",Pc.descriptionUpgradeAfter]}):e.jsx(R,{openInNewTab:!0,href:`${Q(C.ProjectsItemSettings,{projectId:(r==null?void 0:r.id)??""})}#storage`,children:Pc.descriptionLink})]})})}),e.jsxs("div",{children:[e.jsx(qn,{options:x,value:f,onChange:b}),e.jsxs("div",{className:xc.controlPanel,children:[f==="fromHistory"&&e.jsx(Jme,{}),f==="anotherBranch"&&e.jsx(Yme,{source:j,setSource:v}),e.jsxs("div",{className:xc.actions,children:[e.jsx(E,{disabled:!!u,appearance:"primary",onClick:()=>{d(!0),i("branch_restore_restore_clicked")},children:Pc.restoreButtonLabel}),e.jsx($le,{currentBranch:s,compareTo:n})]})]})]})]}),e.jsx(fme,{}),e.jsx(Wme,{})]})},Xme=()=>{const t=et(),s=m.useCallback(n=>{t.push(Q(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}))},[t]);return e.jsx(u2,{onRestoreSuccess:s,children:e.jsx(Zme,{})})},ege=t=>({fields:t.fields.map(s=>s.name),rows:t.rows.map(s=>s.map(n=>String(n))),truncated:!1}),tge=t=>{const{project:s}=F(),[n]=bx(),[r]=Z0.useLazyRunQuery(),[a,o]=m.useState(0),[i,c]=m.useState(),[l,d]=m.useState(),[u,p]=m.useState(!1),h=()=>d(void 0),g=m.useRef(()=>{}),f=g.current,_=m.useCallback(async({database:b,query:x,timestamp:j})=>{if(!s)return;d(void 0),p(!0);const v=s.store_passwords?b.owner_name:Ru;try{const y=await n({branchId:t,projectId:s.id,role:v},!0).unwrap(),S=`${t}.${s.proxy_host}`,w=r({database:b.name,password:y,host:S,query:x,role:v,pointInTime:{mode:Vd.Timestamp,timestamp:j}});g.current=w.abort;const k=await w.unwrap();c(ege(k)),o(0)}catch(y){y.name!=="AbortError"&&(d(h2(y.message)),c(void 0),o(0))}finally{p(!1)}},[t,s,n,r]);return{queryResult:i,isQueryRunning:u,runQuery:_,cancelQuery:f,error:l,clearError:h,offset:a,changeOffset:o}},up={queryPlaceholder:`/*
 * Run read-only queries to preview data as it existed at the selected time.
 * Make sure you've got the right restore point.
 */`,run:"Run query at timestamp",cancel:"Cancel",banner:t=>`You are viewing data as it existed on ${t}`},sge="_root_wjm4k_1",nge="_queryEditor_wjm4k_7",rge="_actions_wjm4k_14",age="_queryResult_wjm4k_21",oge="_alert_wjm4k_27",_d={root:sge,queryEditor:nge,actions:rge,queryResult:age,alert:oge},ige=({timestamp:t,branchId:s,databaseOptions:n})=>{const{project:r}=F(),{queryResult:a,isQueryRunning:o,runQuery:i,cancelQuery:c,error:l,clearError:d,offset:u,changeOffset:p}=tge(s),[h,g]=m.useState(n[0].database),f=y=>{var w;const S=(w=n.find(({value:k})=>k===y))==null?void 0:w.database;S&&(d(),g(S))},[_,b]=m.useState(up.queryPlaceholder),x=_.trim().length===0,j=m.useCallback(()=>i({database:h,query:_,timestamp:t}),[i,_,h,t]),v=m.useCallback(y=>{y.key==="Enter"&&(y.ctrlKey||y.metaKey)&&j()},[j]);return e.jsxs("div",{className:_d.root,children:[e.jsx("div",{className:_d.queryEditor,role:"textbox",tabIndex:0,onKeyDown:v,children:e.jsx(xx,{width:"100%",height:"100%",focus:!0,name:"query_editor",mode:`pgsql${(r==null?void 0:r.pg_version)??15}`,value:_,onChange:b,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),e.jsxs("div",{className:_d.actions,children:[e.jsx(ct,{options:n,value:h.name,onChange:f,disabled:n.length===1,size:"s"}),o?e.jsx(E,{appearance:"danger",onClick:c,children:up.cancel}):e.jsx(E,{appearance:"secondary",onClick:j,icon:"play_circle",disabled:x,children:up.run})]}),a&&!o&&e.jsx(WA,{content:up.banner(t)}),l&&e.jsx("div",{className:_d.alert,children:e.jsx(X,{appearance:"error",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l}})})}),e.jsxs("div",{className:_d.queryResult,children:[o&&e.jsx(Q0,{}),a&&e.jsx(Y0,{data:a,offset:u,onChangeOffset:p})]})]})},cge=({timestamp:t,view:s,type:n,branch:r})=>{const{isLoading:a,selectOptions:o,list:i}=un();if(a)return e.jsx(ve,{});if(!i.length)return e.jsx("div",{className:dme.alert,children:e.jsx(X,{children:cme.noDatabases})});switch(s){case"drizzle":return e.jsx(ime,{timestamp:t,databases:i,type:n,branchId:r.id});case"schema_diff":return e.jsx(gme,{timestamp:t,databaseOptions:o,branch:r});case"time_travel":return e.jsx(ige,{timestamp:t,databaseOptions:o,branchId:r.id});default:return null}},lge=[{value:"drizzle",label:Vr.drizzle},{value:"time_travel",label:Vr.timeTravel},{value:"schema_diff",label:Vr.schemaDiff}];var KA=(t=>(t.Restore="restore",t.Preview="preview",t))(KA||{});const dge=(t,s)=>{let n=t;const r=a=>n===a;for(let a=2;s.some(r);a+=1)n=`${t} (${a})`;return n},QA=({type:t,isOpen:s,onRequestClose:n,timestamp:r,restore:a,initialMode:o="restore",hideFooter:i=!1})=>{const{isSnapshotPreviewEnabled:c}=Ei(),{branches:l}=xt(),{branch:d}=at(),[u,p]=m.useState(!1),[h,g]=m.useState(),[f,_]=m.useState("drizzle"),b=h==="restore",x=t===vs.PITR||t===vs.Snapshot&&c,j=t===vs.PITR?Mpe(d.name,r):uhe(d.name,r),v=m.useMemo(()=>l.map(w=>w.name),[l]),y=m.useMemo(()=>dge(j,v),[j,v]),S=async()=>{try{p(!0),await a(y)}catch(w){Y(w)}finally{p(!1)}};return m.useEffect(()=>{if(!s){g(void 0),_("drizzle");return}g(o)},[s,o]),!h||!d?null:e.jsx(cx,{title:Vr.title({timestamp:r,type:t,isRestoreMode:b}),isOpen:s,onRequestClose:n,noBodyPadding:!0,noDismiss:u,width:b?720:void 0,height:b?"auto":void 0,header:!b&&e.jsx("div",{className:fd.viewSelect,children:e.jsx(ct,{value:f,options:lge,onChange:w=>w&&_(w),size:"s"})}),footer:!i&&e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"l",loading:u,onClick:S,icon:"restore",children:Vr.restore}),b&&x&&e.jsx(E,{size:"l",appearance:"secondary",onClick:()=>g("preview"),icon:"search",children:Vr.preview}),e.jsx(dn,{size:"l",appearance:"secondary",children:Vr.cancel})]}),children:b?e.jsxs("div",{className:fd.description,children:[e.jsx(T,{appearance:"secondary",children:Vr.descriptionTitle({branchName:d.name,type:t})}),e.jsx("ul",{className:fd.descriptionList,children:Vr.description({currentBranchName:d.name,ttlInterval:d.ttl_interval_seconds??0,timestamp:r,type:t,newBranchName:y}).map((w,k)=>e.jsxs("li",{className:fd.descriptionItem,children:[e.jsx(z,{name:"check_flat",size:16,className:fd.descriptionIcon}),e.jsx(T,{appearance:"secondary",children:w})]},k))})]}):e.jsx(cge,{type:t,view:f,timestamp:r,branch:d})})},Uo={title:"Instant point-in-time restore",description:t=>`Instantly restore your branch to any point in the past ${t}`,restore:"Restore",invalidBeforeBranchCreation:"Date is before branch creation",invalidBeforeRetention:"Date is beyond the history retention",invalidAfterNow:"Date is in the future",restoreSuccess:t=>`This branch and all its roles and databases successfully restored to their state on ${t}`},uge="_root_31bqw_1",hge="_content_31bqw_12",pge="_actions_31bqw_19",Hc={root:uge,content:hge,actions:pge};mt.extend(oD);const mge=()=>e.jsxs("div",{className:Hc.root,children:[e.jsx(z,{name:"lightning_filled",size:28}),e.jsxs("div",{className:Hc.content,children:[e.jsx(B,{width:200,height:20}),e.jsx(B,{width:320,height:18})]}),e.jsxs("div",{className:Hc.actions,children:[e.jsx(B,{width:250,height:32}),e.jsx(B,{width:200,height:32})]})]}),gge=({branch:t})=>{const s=et(),{project:n,projectId:r,isLoading:a}=F(),{mutateAsync:o}=Bpe(t),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),[u,p]=m.useState(new Date),[h,g]=m.useState(),[f,_]=m.useState(!1),b=u==null?void 0:u.toISOString(),x=m.useMemo(()=>mt(t.created_at??0),[t]),j=m.useMemo(()=>mt().subtract((n==null?void 0:n.history_retention_seconds)??0,"seconds"),[n]),v=m.useMemo(()=>mt.max(x,j),[x,j]),y=m.useMemo(()=>({maxDate:new Date,minDate:v.toDate()}),[v]),S=m.useCallback(N=>{if(p(N),mt(N).valueOf()>mt().valueOf()){g(Uo.invalidAfterNow),_(!0);return}if(mt(N).valueOf()<x.valueOf()){g(Uo.invalidBeforeBranchCreation),_(!0);return}if(mt(N).valueOf()<j.valueOf()){g(Uo.invalidBeforeRetention),_(!0);return}_(!1)},[x,j]),w=m.useCallback((N,D)=>{d(),oe(Uo.restoreSuccess(D)),s.push(Q(C.ProjectsItemBranchesItem,{projectId:r,branchId:N.id}))},[s,r]),k=m.useCallback(N=>async D=>{try{const{data:{branch:L}}=await o({timestamp:N,branchPreservedName:D});w(L,N)}catch(L){Y(L)}},[o,w]);return m.useEffect(()=>{p(new Date),_(!1)},[t]),a?e.jsx(mge,{}):e.jsxs(e.Fragment,{children:[b&&e.jsx(QA,{type:vs.PITR,isOpen:i,onRequestClose:d,timestamp:b,restore:k(b)}),e.jsxs("div",{className:Hc.root,children:[e.jsx(z,{name:"lightning_filled",size:28}),e.jsxs("div",{className:Hc.content,children:[e.jsx(Z,{level:6,children:Uo.title}),e.jsx(T,{size:"s",appearance:"tertiary",children:Uo.description(Lu((n==null?void 0:n.history_retention_seconds)??0))})]}),e.jsxs("div",{className:Hc.actions,children:[e.jsx(te,{content:h,visible:f,appearance:"error",zIndex:0,children:e.jsx("div",{children:e.jsx(IL,{date:u,onDateChange:S,isInvalid:f,calendarParams:y,showCalendar:!0})})}),e.jsx(E,{icon:"arrow_right",iconSide:"right",onClick:l,disabled:f||!u,children:Uo.restore})]})]})]})},lg=({projectId:t})=>["snapshots",t,"list"],fge=t=>bt({queryKey:lg({projectId:t}),queryFn:async()=>{const{data:{snapshots:s}}=await G.listSnapshots(t);return s}}),_ge=t=>{const s=be();return _e({mutationFn:async()=>{const n=mt().utc().format("YYYY-MM-DD HH:mm:ss"),{data:r}=await G.createSnapshot({branchId:t.id,projectId:t.project_id,name:`${t.name} at ${n} (manual)`});Us.set(_t.NewManualSnapshotId,r.snapshot.id)},onSuccess:()=>s.invalidateQueries({queryKey:lg({projectId:t.project_id})})})},bge=t=>{const s=be();return _e({mutationFn:n=>G.deleteSnapshot(t.project_id,n),onSuccess:()=>s.invalidateQueries({queryKey:lg({projectId:t.project_id})})})},xge=t=>{const s=be();return _e({mutationFn:async({snapshotId:n,name:r})=>{await G.updateSnapshot(t.project_id,n,{snapshot:{name:r}})},onSuccess:()=>s.invalidateQueries({queryKey:lg({projectId:t.project_id})})})},YA=({projectId:t,branchId:s})=>["snapshot_schedule",t,s],jge=(t,s)=>{const n=be();return _e({mutationFn:r=>G.setSnapshotSchedule(t,s,r),onSuccess:async()=>{await n.invalidateQueries({queryKey:YA({projectId:t,branchId:s})})}})},vge=(t,s,n)=>bt({queryKey:YA({projectId:t,branchId:s}),queryFn:async()=>{const{data:r}=await G.getSnapshotSchedule(t,s);return r},enabled:n}),me={NONE:"none",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},Qu=86400,Su=Qu*7,Cu=Qu*30;function yge(t){const s={daily:[],weekly:[],monthly:[],other:[]};for(const n of t)switch(n.frequency){case me.DAILY:s.daily.push(n);break;case me.WEEKLY:s.weekly.push(n);break;case me.MONTHLY:s.monthly.push(n);break;default:s.other.push(n);break}return s}const wge=t=>{switch(t){case me.DAILY:return Qu;case me.WEEKLY:return Su;case me.MONTHLY:return Cu;default:return 1}},wj=t=>{if(t>=11&&t<=13)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},JA=t=>{switch(t){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:return""}},Sge={[me.DAILY]:"day",[me.WEEKLY]:"week",[me.MONTHLY]:"month"},Xs={title:"Next snapshot: tomorrow 00:00",next:"Daily at 11:00, auto-delete in 3 days.",noSchedule:"Set a snapshot schedule for the selected branch",disabled:"Create a snapshot for the selected branch",setSchedule:"Set schedule",editSchedule:"Edit schedule",createSnapshot:"Create snapshot",success:"Snapshot was successfully created",snapshotScheduleSuccess:"Snapshot schedule updated successfully!",failedToLoadSnapshotSchedule:"Failed to load snapshot schedule. Please try again later.",customSchedule:"Custom schedule",createSnapshotDisableReason:"Snapshot limit is reached. Upgrade your plan to create more snapshots.",snapshotCounter:t=>t===0?"No snapshots yet.":`${t} snapshot${t===1?"":"s"} created.`,snapshotScheduleRecap:t=>{if(t.frequency===me.NONE)return"No schedule set.";const s=t.frequency[0].toUpperCase()+t.frequency.slice(1).toLowerCase(),n=t.hour.toString().padStart(2,"0");let r="";t.retainFor===-1?r="no deletion":(r=`auto-delete in ${t.retainFor} ${Sge[t.frequency]}`,t.retainFor>1&&(r+="s"));let a="";t.frequency===me.WEEKLY&&(a=`on ${JA(t.retainDay??1)}`);let o="";return t.frequency===me.MONTHLY&&(o=`on the ${t.retainDay}${wj(t.retainDay??1)}`),`${s} ${a} ${o} at ${n}:00, ${r}`}},Cge="_root_kon5p_1",kge="_icon_kon5p_10",Ige="_content_kon5p_14",Pge="_actions_kon5p_21",Ha={root:Cge,icon:kge,content:Ige,actions:Pge},ZA=t=>{switch(t){case me.DAILY:return"days";case me.WEEKLY:return"weeks";case me.MONTHLY:return"months";default:return"days"}},t_={createdViaAPIAlert:"This schedule was created via the API and is not reflected in the UI. You can still update it here, but doing so will override the previous schedule.",snapshotScheduleAlert:(t,s,n,r)=>`Snapshots will start being created ${t} ${s&&t===me.WEEKLY?`on ${JA(s)}`:""} ${s&&t===me.MONTHLY?`on the ${s}${wj(s)}`:""} at ${n.toString().padStart(2,"0")}:00, and each will be retained for ${r} ${ZA(t)}.`,noSnapshotsAlert:"No snapshots will be created."},Tge="_row_1y5u4_1",Age="_select_1y5u4_6",Nge="_divider_1y5u4_11",Ege="_locale_1y5u4_24",Oge="_modalBody_1y5u4_34",$ge="_label_1y5u4_41",Pt={row:Tge,select:Age,divider:Nge,locale:Ege,modalBody:Oge,label:$ge},Lge=Array.from({length:24},(t,s)=>({label:`${s.toString().padStart(2,"0")}:00`,value:s})),XA=[...Array.from({length:28},(t,s)=>({label:`${s+1}${wj(s+1)}`,value:s+1})),{label:"Last day of the month",value:31}],eN=[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],s_={retain:!1,retainDay:1,retainForWeeks:1},bd={retain:!1,retainDay:1,retainForMonths:1},Rge=({schedule:t,setSchedule:s})=>e.jsxs("div",{className:Pt.row,children:[e.jsx(ct,{options:[{label:"No schedule",value:me.NONE},{label:"Daily",value:me.DAILY},{label:"Weekly",value:me.WEEKLY},{label:"Monthly",value:me.MONTHLY}],size:"s",className:Pt.select,value:t.frequency,onChange:n=>{s({...t,frequency:n})}}),t.frequency!==me.NONE&&e.jsxs(e.Fragment,{children:[t.frequency===me.WEEKLY&&e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"on"}),e.jsx(ct,{options:eN,size:"s",className:Pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}})]}),t.frequency===me.MONTHLY&&e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"on the"}),e.jsx(ct,{options:XA,size:"s",className:Pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}})]}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"at"}),e.jsx(ct,{options:Lge,size:"s",className:Pt.select,value:t.hour,onChange:n=>{s({...t,hour:n})}}),e.jsx("div",{children:e.jsx(T,{appearance:"tertiary",className:Pt.locale,children:"UTC"})}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"and retain them for"}),e.jsx(jx,{value:t.retainFor??0,minValue:1,suffix:ZA(t.frequency),onChange:n=>s({...t,retainFor:n})})]})]}),Mge=({weeklyRetention:t,setWeeklyRetention:s})=>e.jsxs("div",{role:"group","aria-label":"Weekly retention",className:Pt.row,children:[e.jsx(Xa,{checked:t.retain,onChange:n=>{s({...t,retain:n.target.checked})}}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"Retain"}),e.jsx(ct,{options:eN,size:"s",className:Pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"snapshots for"}),e.jsx(jx,{minValue:1,value:t.retainForWeeks,suffix:"weeks",onChange:n=>s({...t,retainForWeeks:n})})]}),Bge=({monthlyRetention:t,setMonthlyRetention:s})=>e.jsxs("div",{role:"group","aria-label":"Monthly retention",className:Pt.row,children:[e.jsx(Xa,{checked:t.retain,onChange:n=>{s({...t,retain:n.target.checked})}}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"Retain"}),e.jsx(ct,{options:XA,size:"s",className:Pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}}),e.jsx(T,{appearance:"tertiary",className:Pt.label,children:"day of the month snapshots for"}),e.jsx(jx,{minValue:1,value:t.retainForMonths,suffix:"months",onChange:n=>s({...t,retainForMonths:n})})]}),Dge=({isOpen:t,closeModal:s,schedule:n,weeklyRetention:r,monthlyRetention:a,isCreatedViaAPI:o,onSubmit:i})=>{const[c,l]=m.useState(n),[d,u]=m.useState(s_),[p,h]=m.useState(bd);return m.useEffect(()=>{if(t)switch(l(n),n.frequency){case me.DAILY:u(r||s_),h(a||bd);break;case me.WEEKLY:u(void 0),h(a||bd);break;default:u(void 0),h(void 0);break}},[t,n,r,a]),e.jsxs(ft,{isOpen:t,title:"Edit snapshot schedule",onRequestClose:s,width:800,children:[e.jsxs(De,{className:Pt.modalBody,children:[e.jsx(Rge,{schedule:c,setSchedule:g=>{let f=!1;if(g.frequency!==c.frequency)switch(f=!0,g.frequency){case me.NONE:u(void 0),h(void 0);break;case me.DAILY:u(s_),h(bd);break;case me.WEEKLY:u(void 0),h(bd);break;case me.MONTHLY:u(void 0),h(void 0);break}l({...g,retainDay:f?1:g.retainDay})}}),e.jsx("div",{className:Pt.divider}),c.frequency===me.DAILY&&d&&e.jsx(Mge,{weeklyRetention:d,setWeeklyRetention:u}),(c.frequency===me.DAILY||c.frequency===me.WEEKLY)&&p&&e.jsx(Bge,{monthlyRetention:p,setMonthlyRetention:h}),e.jsx("div",{className:Pt.row,children:o&&e.jsx(X,{appearance:"warning",children:e.jsx(T,{children:t_.createdViaAPIAlert})})}),e.jsx("div",{className:Pt.row,children:e.jsxs(X,{children:[c.frequency===me.NONE&&e.jsx(T,{children:t_.noSnapshotsAlert}),(c.frequency===me.DAILY||c.frequency===me.WEEKLY||c.frequency===me.MONTHLY)&&e.jsx(T,{children:t_.snapshotScheduleAlert(c.frequency,c.retainDay,c.hour,c.retainFor)})]})})]}),e.jsxs(Te,{children:[e.jsx(E,{appearance:"secondary",onClick:s,children:"Cancel"}),e.jsx(E,{appearance:"primary",onClick:async()=>{await i(c,d,p)},children:"Update schedule"})]})]})},Sj=({children:t="contact support"})=>{const{isModalOpen:s,openModal:n,closeModal:r}=it(Je.Support),{trackUiInteraction:a}=P();return e.jsxs(e.Fragment,{children:[e.jsx(Ci,{onRequestClose:()=>{a("support_form_dismissed"),r()},isOpen:s}),e.jsx(R,{onClick:()=>n(),children:t})]})},n_={SnapshotCounter:"snapshot-counter",ApiSchedule:"api-schedule",UiSchedule:"ui-schedule"},Uge=(t,s)=>t?s!=null&&s.isCreatedViaAPI?"api-schedule":t&&s.schedule.frequency===me.NONE?"snapshot-counter":t&&s.schedule.frequency!==me.NONE?"ui-schedule":"snapshot-counter":"snapshot-counter",Fge=({snapshotScheduleParams:t,snapshotCount:s,isSnapshotMaxLimitReached:n,onClickUpgrade:r,isSnapshotSchedulesEnabled:a,isNonRootBranch:o})=>{switch(Uge(a,t)){case n_.SnapshotCounter:return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{level:6,children:[Xs.snapshotCounter(s),n?e.jsxs(R,{onClick:r,children:[" ","Upgrade plan to create more"]}):null]}),o&&e.jsxs(T,{appearance:"tertiary",size:"s",children:["Snapshots can only be created for root branches."," ",e.jsx(Sj,{children:"Contact us"})," if you need to be able to create snapshots of this branch."]})]});case n_.ApiSchedule:return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:6,children:Xs.customSchedule}),e.jsx(T,{appearance:"tertiary",size:"s",children:Xs.snapshotCounter(s)})]});case n_.UiSchedule:return e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:6,children:Xs.snapshotScheduleRecap(t.schedule)}),e.jsx(T,{appearance:"tertiary",size:"s",children:Xs.snapshotCounter(s)})]});default:return e.jsx(Z,{level:6,children:Xs.snapshotCounter(s)})}},zge=()=>e.jsxs("div",{className:Ha.root,children:[e.jsx(z,{name:"schedule",size:24,className:Ha.icon}),e.jsxs("div",{className:Ha.content,children:[e.jsx(B,{width:200,height:20}),e.jsx(B,{width:180,height:18}),e.jsx(B,{width:150,height:18})]}),e.jsxs("div",{className:Ha.actions,children:[e.jsx(B,{width:150,height:32}),e.jsx(B,{width:160,height:32})]})]});function qge(t){var l,d,u,p,h,g,f,_;const s={frequency:me.NONE,hour:0,retainFor:1},n={schedule:s,isCreatedViaAPI:!0};if(t.length===0)return{schedule:s,isCreatedViaAPI:!1};const r=yge(t);if(r.other.length>0||r.daily.length>1||r.weekly.length>1||r.monthly.length>1||(((l=r.daily[0])==null?void 0:l.retention_seconds)||0)%Qu!==0||(((d=r.weekly[0])==null?void 0:d.retention_seconds)||0)%Su!==0||(((u=r.monthly[0])==null?void 0:u.retention_seconds)||0)%Cu!==0)return n;const a=[(p=r.daily[0])==null?void 0:p.hour,(h=r.weekly[0])==null?void 0:h.hour,(g=r.monthly[0])==null?void 0:g.hour].filter(b=>b!=null);if(a.length===0||!a.every(b=>b===a[0])||((f=r.monthly[0])==null?void 0:f.day)===29||((_=r.monthly[0])==null?void 0:_.day)===30)return n;const i=t.map(b=>({...b,order:b.frequency===me.DAILY?0:b.frequency===me.WEEKLY?1:2}));i.sort((b,x)=>b.order-x.order);const c={schedule:s,isCreatedViaAPI:!1};for(const[b,x]of i.entries())if(b===0)c.schedule={frequency:x.frequency,hour:x.hour??0,retainDay:x.day??1,retainFor:(x.retention_seconds||0)/wge(x.frequency)};else switch(x.frequency){case me.WEEKLY:c.weeklyRetention={retain:!0,retainDay:x.day??0,retainForWeeks:x.retention_seconds?x.retention_seconds/Su:0};break;case me.MONTHLY:c.monthlyRetention={retain:!0,retainDay:x.day??0,retainForMonths:x.retention_seconds?x.retention_seconds/Cu:0}}return c}const Hge=({branch:t,snapshotCount:s})=>{const{isSnapshotSchedulesEnabled:n}=Ei(),{mutateAsync:r,isPending:a}=_ge(t),{data:o,isLoading:i,error:c}=vge(t.project_id,t.id,n);m.useEffect(()=>{c&&Ye(Xs.failedToLoadSnapshotSchedule)},[c]);const{mutateAsync:l}=jge(t.project_id,t.id),[d,u]=m.useState(!1),p=()=>u(!0),h=()=>u(!1),g=()=>{oe(Xs.success)},f=async()=>{try{await r(),g()}catch(N){Y(N)}},_=m.useMemo(()=>qge((o==null?void 0:o.schedule)??[]),[o==null?void 0:o.schedule]),{data:b,isLoading:x}=PL(),[j,v]=m.useState(!1),y=!t.parent_id,S=(b==null?void 0:b.limits.max_snapshots)!=null&&(b==null?void 0:b.limits.max_snapshots)>0&&b.limits.max_snapshots<=s,w=y&&!S;if(i)return e.jsx(zge,{});const k=async(N,D,L)=>{const H=[];switch(N.frequency){case me.NONE:break;case me.DAILY:H.push({frequency:"daily",hour:N.hour,retention_seconds:N.retainFor*Qu});break;case me.WEEKLY:H.push({frequency:me.WEEKLY,hour:N.hour,day:N.retainDay,retention_seconds:N.retainFor*Su});break;case me.MONTHLY:H.push({frequency:me.MONTHLY,hour:N.hour,day:N.retainDay,retention_seconds:N.retainFor*Cu});break}D&&D.retain&&H.push({frequency:me.WEEKLY,hour:N.hour,day:D.retainDay,retention_seconds:D.retainForWeeks*Su}),L&&L.retain&&H.push({frequency:me.MONTHLY,hour:N.hour,day:L.retainDay,retention_seconds:L.retainForMonths*Cu}),await l({schedule:H},{onSuccess:()=>{oe(Xs.snapshotScheduleSuccess),u(!1)},onError:W=>{Y(W)}})};return e.jsxs(e.Fragment,{children:[e.jsx(Dge,{isOpen:d,closeModal:h,schedule:_.schedule,weeklyRetention:_.weeklyRetention,monthlyRetention:_.monthlyRetention,isCreatedViaAPI:_.isCreatedViaAPI,onSubmit:k}),e.jsx(lt,{type:Xe.Default,isOpen:j,onRequestClose:()=>v(!1)}),e.jsxs("div",{className:Ha.root,children:[e.jsx(z,{name:"schedule",size:24,className:Ha.icon}),e.jsx("div",{className:Ha.content,children:e.jsx(Fge,{snapshotScheduleParams:_,snapshotCount:s,isSnapshotMaxLimitReached:S,onClickUpgrade:()=>v(!0),isSnapshotSchedulesEnabled:n,isNonRootBranch:!y})}),e.jsxs("div",{className:Ha.actions,children:[n&&e.jsx(E,{appearance:"secondary",onClick:p,disabled:!!c,children:Xs.editSchedule}),y&&e.jsx(te,{content:Xs.createSnapshotDisableReason,disabled:w,children:e.jsx("div",{children:e.jsx(E,{appearance:"secondary",icon:"snapshot",onClick:f,loading:a||x,disabled:!w,children:Xs.createSnapshot})})})]})]})]})};hr.Hours+"",60*60,hr.Days+"",60*60*24,hr.Weeks+"",60*60*24*7,hr.Months+"",60*60*24*30;const Vge={[hr.Hours]:"Hour(s)",[hr.Days]:"Day(s)",[hr.Weeks]:"Week(s)",[hr.Months]:"Month(s)"};Object.values(hr).map(t=>({value:t,label:Vge[t]}));const cr={today:"Today",week:"This week",month:"This month",year:"This year",lastYear:"Last year"},ZS=[cr.today,cr.week,cr.month,cr.year,cr.lastYear],Wge=(t,s)=>s.isSame(t,"day")?cr.today:s.isSame(t,"week")?cr.week:s.isSame(t,"month")?cr.month:s.isSame(t,"year")?cr.year:s.isSame(t.subtract(1,"year"))?cr.lastYear:s.year().toString(),Gge=t=>{const s=mt(),n=t.reduce((r,a)=>{const o=mt(a.created_at),i=Wge(s,o);return r[i]?r[i]=[a,...r[i]]:r[i]=[a],r},{});return Object.entries(n).sort(([r],[a])=>{const o=ZS.indexOf(r),i=ZS.indexOf(a);return o!==-1&&i!==-1?o-i:1})},Zs={delete:"Delete snapshot",successDeleted:"Snapshot was successfully deleted",successRestored:"Snapshot was successfully restored",inspect:"Inspect",restore:"Restore",deleteConfirmation:"This is a permanent operation. Deleted snapshots cannot be recovered.",oneStepRestoreLabel:"One-step restore",oneStepRestoreDescription:"Instantly restore data from the snapshot. The branch name and connection string stay the same — only the branch ID will change.",multiStepRestoreLabel:"Multi-step restore",multiStepRestoreDescription:"Create a new branch using the snapshot. Choose this option if you want to inspect the restored data before switching over to the new branch."},Kge="_root_lwms8_1",Qge="_content_lwms8_12",Yge="_actions_lwms8_19",Jge="_description_lwms8_25",Zge="_branchNameContainer_lwms8_31",Xge="_branchName_lwms8_31",Wr={root:Kge,content:Qge,actions:Yge,description:Jge,branchNameContainer:Zge,branchName:Xge};var pi=(t=>(t.OneStepRestore="oneStepRestore",t.MultiStepRestore="multiStepRestore",t))(pi||{});const hp={restoreDescription:"You're about to restore a snapshot — here's what will happen:",restoreTitle(t){return t===pi.OneStepRestore?"One-step restore":"Multi-step restore"},oneStepRestoreDescriptionPoints(t){return[e.jsx(e.Fragment,{children:"The restore operation occurs instantly"}),e.jsxs(e.Fragment,{children:["All data on ",e.jsx(Ae,{children:t.name})," will be restored"]}),t.expires_at?e.jsxs(e.Fragment,{children:["The ",e.jsx("strong",{children:"expiration time"})," of"," ",e.jsx(Ae,{children:t.name})," will be extended to"," ",e.jsx("strong",{children:M_(t.ttl_interval_seconds??0)})]}):null,e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{children:[t.name," (old)"]})," will be created as a backup of this restore operation, no data at risk. It will have no expiration date"]})].filter(Boolean)},multiStepRestoreDescriptionPoints(t,s){return[e.jsx(e.Fragment,{children:"The restore operation occurs instantly"}),e.jsxs(e.Fragment,{children:["Your ",e.jsx(Ae,{children:t.name})," branch will remain unchanged"]}),e.jsxs(e.Fragment,{children:[e.jsx(Ae,{children:s})," will be created as a new branch"]}),t.expires_at?e.jsxs(e.Fragment,{children:["After you finish restoring,"," ",e.jsx(Ae,{children:s})," gets a new"," ",e.jsx("strong",{children:"expiration date"})," with the same amount of time as before, starting from when the restore finishes."]}):null].filter(Boolean)}},efe="_description_4okno_1",tfe="_descriptionList_4okno_11",sfe="_descriptionItem_4okno_20",nfe="_descriptionIcon_4okno_25",pp={description:efe,descriptionList:tfe,descriptionItem:sfe,descriptionIcon:nfe},XS=()=>`branch_from_snapshot_${mt().format(ke.SnapshotDate)}`,rfe=({isOpen:t,onRequestClose:s,mode:n,simpleRestore:r,stepByStepRestore:a,onOpenPreviewModal:o})=>{const{isSnapshotPreviewEnabled:i}=Ei(),{branch:c}=at(),[l,d]=m.useState(!1),u=async()=>{try{d(!0),await r()}catch(g){Y(g)}finally{d(!1)}},p=async()=>{try{d(!0),await a(XS())}catch(g){Y(g)}finally{d(!1)}},h=m.useMemo(()=>c?n===pi.OneStepRestore?hp.oneStepRestoreDescriptionPoints(c):hp.multiStepRestoreDescriptionPoints(c,XS()):[],[n,c]);return e.jsx(cx,{title:hp.restoreTitle(n),isOpen:t,onRequestClose:s,noBodyPadding:!0,noDismiss:l,width:720,height:"auto",footer:e.jsxs(e.Fragment,{children:[e.jsx(dn,{size:"l",appearance:"secondary",children:"Cancel"}),i&&e.jsx(E,{size:"l",appearance:"secondary",onClick:o,icon:"search",children:"Inspect snapshot data"}),e.jsx(E,{size:"l",loading:l,onClick:()=>{n===pi.OneStepRestore?u():p()},icon:"restore",children:"Restore"})]}),children:e.jsxs("div",{className:pp.description,children:[e.jsx(T,{appearance:"secondary",children:hp.restoreDescription}),e.jsx("ul",{className:pp.descriptionList,children:h.map((g,f)=>e.jsxs("li",{className:pp.descriptionItem,children:[e.jsx(z,{name:"check_flat",size:16,className:pp.descriptionIcon}),e.jsx(T,{appearance:"secondary",children:g})]},f))})]})})},afe=2e3,ofe=({branch:t,id:s,name:n,created_at:r,expires_at:a,source_branch_name:o})=>{const{isSnapshotPreviewEnabled:i,isSnapshotRestoreEnabled:c}=Ei(),{mutateAsync:l,isPending:d}=bge(t),{mutateAsync:u}=xge(t),{mutateAsync:p}=phe(t),{mutateAsync:h}=hhe(t),{confirm:g}=Ve(),{redirectToRestoredBranch:f}=xj(),_=m.useRef(pi.OneStepRestore),[b,x]=m.useState(!1),[j,v]=m.useState(!1),y=ee=>()=>{_.current=ee,x(!0)},S=()=>x(!1),w=()=>v(!0),k=()=>v(!1),[N,D]=m.useState(!1),[L,H]=m.useState(!1),W=m.useCallback(ee=>{S(),oe(Zs.successRestored),f(ee)},[f]),$=async()=>{try{const ee=await p({snapshotId:s});W(ee.data.branch)}catch(ee){Y(ee)}},M=async ee=>{try{const K=await h({snapshotId:s,snapshotRestoredBranchName:ee});W(K.data.branch)}catch(K){Y(K)}},se=async()=>{try{if(!await g({appearance:"danger",header:Zs.delete,text:Zs.deleteConfirmation,confirmButtonText:Zs.delete}))return;await l(s),oe(Zs.successDeleted)}catch(ee){Y(ee)}},ce=[{items:[{label:Zs.delete,onClick:se}]}];return m.useEffect(()=>{Us.get(_t.NewManualSnapshotId)===s&&(D(!0),Us.remove(_t.NewManualSnapshotId),setTimeout(()=>D(!1),afe))},[s]),e.jsxs(e.Fragment,{children:[e.jsx(rfe,{isOpen:b,onRequestClose:S,mode:_.current,simpleRestore:$,stepByStepRestore:M,onOpenPreviewModal:w}),e.jsx(QA,{type:vs.Snapshot,onRequestClose:k,timestamp:r,initialMode:KA.Preview,hideFooter:!0,isOpen:j,restore:async()=>{}}),e.jsxs("div",{className:Wr.root,children:[e.jsx(z,{size:20,name:N?"done_gradient":"snapshot"}),e.jsxs("div",{className:Wr.content,children:[e.jsx(lI,{value:n,onSave:async ee=>{try{H(!0),await u({snapshotId:s,name:ee})}catch(K){Y(K)}finally{H(!1)}},isLoading:L}),e.jsxs("div",{className:Wr.description,children:[e.jsxs("div",{className:Wr.branchNameContainer,children:[e.jsx(z,{name:"branch",size:12}),e.jsx(T,{appearance:"tertiary",size:"s",children:e.jsx("code",{title:o,className:Wr.branchName,children:o})})]}),e.jsx(T,{appearance:"tertiary",size:"s",children:mt(r).format(ke.SnapshotDate)}),e.jsxs(T,{appearance:"tertiary",size:"s",children:["Expires on:"," ",a?mt(a).format(ke.SnapshotDate):"never"]})]})]}),e.jsxs("div",{className:Wr.actions,children:[c&&e.jsx(Yt,{sections:[{items:[{label:Zs.oneStepRestoreLabel,description:Zs.oneStepRestoreDescription,onClick:y(pi.OneStepRestore)},{label:Zs.multiStepRestoreLabel,description:Zs.multiStepRestoreDescription,onClick:y(pi.MultiStepRestore)}]}],children:e.jsx(E,{appearance:"secondary",icon:"chevron_down",iconSide:"right",disabled:d,children:Zs.restore})}),i&&e.jsx(E,{appearance:"secondary",onClick:w,disabled:d,children:Zs.inspect}),e.jsx(Yt,{sections:ce,children:e.jsx(ms,{isDisabled:d})})]})]})]})},r_=()=>e.jsxs("div",{className:Wr.root,children:[e.jsx(z,{size:20,name:"snapshot"}),e.jsxs("div",{className:Wr.content,children:[e.jsx(B,{width:100,height:20}),e.jsx(B,{width:120,height:18})]}),e.jsxs("div",{className:Wr.actions,children:[e.jsx(B,{width:80,height:32}),e.jsx(B,{width:80,height:32}),e.jsx(B,{width:32,height:32})]})]}),ife="_labelWrapper_1b9i0_1",cfe="_label_1b9i0_1",lfe="_snapshotGroupItem_1b9i0_13",cu={labelWrapper:ife,label:cfe,snapshotGroupItem:lfe},dfe="_root_1h6pm_1",ufe="_track_1h6pm_6",hfe="_start_1h6pm_22",pfe="_end_1h6pm_26",mfe="_point_1h6pm_30",gfe="_disabled_1h6pm_45",ffe="_content_1h6pm_50",Fo={root:dfe,track:ufe,start:hfe,end:pfe,point:mfe,disabled:gfe,content:ffe},oi=({children:t,className:s,hidePoint:n,isDisabled:r,isStartPoint:a,isEndPoint:o})=>e.jsxs("div",{className:V(Fo.root,s,{[Fo.disabled]:r,[Fo.start]:a,[Fo.end]:o}),children:[e.jsx("div",{className:Fo.track,children:!n&&e.jsx("div",{className:Fo.point})}),e.jsx("div",{className:Fo.content,children:t})]}),_fe=({label:t,branch:s,snapshots:n,isLastGroup:r})=>e.jsxs("div",{children:[e.jsx(oi,{className:cu.labelWrapper,hidePoint:!0,children:e.jsx(T,{className:cu.label,children:t})}),n.map((a,o)=>e.jsx(oi,{className:cu.snapshotGroupItem,isEndPoint:r&&o===n.length-1,children:e.jsx(ofe,{branch:s,...a})},a.id))]}),bfe=()=>e.jsxs("div",{children:[e.jsx(oi,{hidePoint:!0,className:cu.labelWrapper,children:e.jsx(T,{size:"s",className:cu.label,children:e.jsx(B,{width:100,height:18})})}),e.jsx(oi,{children:e.jsx(r_,{})}),e.jsx(oi,{children:e.jsx(r_,{})}),e.jsx(oi,{isEndPoint:!0,children:e.jsx(r_,{})})]}),xfe=({branch:t,snapshots:s,isLoading:n})=>{const r=m.useMemo(()=>s&&Gge(s),[s]);return n?e.jsx(bfe,{}):e.jsx("div",{children:r==null?void 0:r.map(([a,o],i)=>e.jsx(_fe,{label:a,branch:t,snapshots:o,isLastGroup:i===r.length-1},a))})},jfe=({branch:t})=>{const{data:s,isLoading:n}=fge(t.project_id),{branches:r,isLoading:a}=Bu({projectId:t.project_id}),o=m.useMemo(()=>r==null?void 0:r.reduce((l,d)=>(l[d.id]=d.name,l),{}),[r]),i=m.useMemo(()=>s==null?void 0:s.map(l=>{const d=o==null?void 0:o[l.source_branch_id??""];return{...l,source_branch_name:d}}),[s,o]),c=n||a;return e.jsxs("div",{children:[e.jsx(oi,{isStartPoint:!0,isDisabled:!0,isEndPoint:!(s!=null&&s.length)&&!c,children:e.jsx(Hge,{branch:t,snapshotCount:(s==null?void 0:s.length)??0})}),e.jsx(xfe,{branch:t,snapshots:i,isLoading:c})]})},vfe=()=>{const{branch:t}=at();return t?e.jsxs("div",{className:KS.root,children:[e.jsx(gge,{branch:t}),e.jsx(T,{appearance:"secondary",size:"s",className:KS.divider,children:$pe.dividerText}),e.jsx(jfe,{branch:t})]}):e.jsx(ve,{})},xd={old:{title:"Restore"},title:"Backup & Restore",description:t=>`Instantly restore a branch from a point in time or a snapshot${t?", and manage your snapshot schedule":""}`,earlyAccessToggle:"Early Access",earlyAccessHint:"Explore the new Backup & Restore page with snapshot capabilities. Toggle off to return to the original Restore page."},yfe="_header_16dbf_1",wfe={header:yfe};function Sfe(){const{isSnapshotsEnabled:t}=Ei(),[s,n]=Ds(_t.EarlyAccessRestorePage,"opt-in",!0);return[t&&s,n]}const Cfe=()=>{const{isSnapshotsEnabled:t,isSnapshotSchedulesEnabled:s}=Ei(),[n,r]=Sfe(),a=t||n;return e.jsxs(e.Fragment,{children:[e.jsx(Tl,{title:t?xd.title:xd.old.title,subtitle:a?xd.description(s):void 0,className:wfe.header,actions:t&&e.jsxs(as,{isSelected:n,onChange:o=>r(o),children:[xd.earlyAccessToggle,e.jsx(Bs,{children:xd.earlyAccessHint})]})}),a?e.jsx(vfe,{}):e.jsx(Xme,{})]})},kfe="_container_1pk9s_1",Ife="_contentWrapper_1pk9s_8",Pfe="_topText_1pk9s_12",Tfe="_list_1pk9s_16",Afe="_infoText_1pk9s_20",jd={container:kfe,contentWrapper:Ife,topText:Pfe,list:Tfe,infoText:Afe},Nfe=({onRequestClose:t,setShowUpgradeModal:s})=>{const{trackUiInteraction:n}=P({mountEvent:"protected_branch_upgrade_modal_shown"});return e.jsx(e.Fragment,{children:e.jsxs(ft,{isOpen:!0,title:"Upgrade your plan to protect your branch",onRequestClose:t,width:700,children:[e.jsx(De,{children:e.jsxs("div",{className:jd.container,children:[e.jsx(z,{name:"protect",size:40}),e.jsxs("div",{className:jd.contentWrapper,children:[e.jsx("div",{className:jd.topText,children:"Branch protection is only available on paid Neon plans. Upgrade to a launch plan to protect your branch and ensure:"}),e.jsxs("ul",{className:jd.list,children:[e.jsx("li",{children:"Your default branch cannot be deleted or reset"}),e.jsx("li",{children:"Computes associated with your default branch cannot be deleted"}),e.jsx("li",{children:"Your default branch will not be archived due to inactivity"}),e.jsx("li",{children:"SQL editor will warn you when running queries against your protected branch"}),e.jsx("li",{children:"Unique passwords are generated for all child branches of your default branch"}),e.jsx("li",{children:"IP allow lists can be selectively applied to your default branch"})]}),e.jsxs("div",{className:jd.infoText,children:["See"," ",e.jsx(Ge,{href:Am,target:"_blank",rel:"noopener noreferrer",children:"Protected branches"})," ","for more information."]})]})]})}),e.jsxs(Te,{children:[e.jsx(E,{onClick:()=>{n("protected_branch_upgrade_modal_dismissed"),t==null||t()},appearance:"secondary",children:"Cancel"}),e.jsx(E,{onClick:()=>{n("protected_branch_upgrade_modal_upgrade_clicked"),t==null||t(),s(!0)},appearance:"primary",children:"Upgrade ($19/month)"})]})]})})},Efe="_root_h4un1_1",Ofe="_arrowButton_h4un1_6",$fe="_arrowButton_left_h4un1_19",Lfe="_arrowButton_right_h4un1_28",Rfe="_scrollBox_h4un1_38",jc={root:Efe,arrowButton:Ofe,arrowButton_left:$fe,arrowButton_right:Lfe,scrollBox:Rfe},Mfe=({children:t})=>{const s=m.useRef(null),[n,r]=m.useState(!1),[a,o]=m.useState(!1),i=fr(()=>{const l=s.current,d=l.scrollWidth-l.offsetWidth;r(l.scrollLeft>0),o(l.scrollLeft<d)});m.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[i]),m.useLayoutEffect(i);const c=l=>{const d=Math.floor(s.current.offsetWidth/2);s.current.scrollBy({left:l*d,behavior:"smooth"})};return e.jsxs("div",{className:jc.root,children:[e.jsx("div",{className:jc.scrollBox,ref:s,onScroll:i,children:t}),n&&e.jsx("button",{type:"button",className:V(jc.arrowButton,jc.arrowButton_left),title:"Scroll left",onClick:()=>{c(-1)},children:e.jsx(z,{name:"chevron_left",size:24})}),a&&e.jsx("button",{type:"button",className:V(jc.arrowButton,jc.arrowButton_right),title:"Scroll right",onClick:()=>{c(1)},children:e.jsx(z,{name:"chevron_right",size:24})})]})},Bfe="_card_138xs_1",Dfe="_textContent_138xs_16",Ufe="_title_138xs_25",Ffe="_description_138xs_30",mp={card:Bfe,textContent:Dfe,title:Ufe,description:Ffe},Oi=({iconName:t,title:s,description:n,width:r,action:a})=>e.jsxs("div",{className:mp.card,style:r?{width:r}:void 0,"data-qa":"get-started-card",children:[e.jsx(z,{name:t,size:42}),e.jsxs("div",{className:mp.textContent,children:[e.jsx("div",{className:mp.title,children:s}),e.jsx("div",{className:mp.description,children:n})]}),a]}),a_={title:"Integrate Neon with your AI tools",description:"Connect to MCP clients like Cursor, Claude Desktop, Cline, Zed, and Windsurf.",actionButton:"Install MCP Server"},zfe=()=>{const{trackUiInteraction:t}=P();return e.jsx(Oi,{iconName:"written_data",title:a_.title,description:a_.description,width:"277px",action:e.jsx(E,{appearance:"secondary",as:Ge,openInNewTab:!0,href:"https://neon.com/docs/ai/connect-mcp-clients-to-neon",onClick:()=>{t("get_started_widget_ai_tools_clicked")},children:a_.actionButton})})},o_={title:"Connect to your database",description:"Get connection details your app needs to connect to your database",actionButton:"Connect"},qfe=()=>{const{trackUiInteraction:t}=P(),{project:s}=F(),[n,r]=m.useState(!1);return e.jsxs(e.Fragment,{children:[s&&e.jsx(ig,{isOpen:n,project:s,onRequestClose:()=>{r(!1)}}),e.jsx(Oi,{iconName:"connect",title:o_.title,description:o_.description,action:e.jsx(E,{appearance:"secondary",onClick:()=>{t("get_started_widget_connect_clicked"),r(!0)},children:o_.actionButton})})]})},Hfe={startImport:"Start Import"},Vfe="_button_33mbu_1",Wfe={button:Vfe},Gfe=({connectionString:t})=>{const{trackUiInteraction:s}=P(),{projectId:n}=F(),[r,a]=m.useState(!1),o=et(),i=m.useCallback(async()=>{a(!0),s("import_data_start_clicked");const c=new Date;try{const{data:{branch:l}}=await G.createProjectBranchImport(n,{branch_create:{branch:{name:`import-${c.toISOString()}`},endpoints:[{type:"read_write"}]},import_options:{source_connection_string:t}});s("import_data_start_succeeded"),o.push(Q(C.ProjectsItemBranchesItem,{projectId:n,branchId:l.id}))}catch(l){s("import_data_start_failed"),Y(l)}finally{a(!1)}},[t,o,n,s]);return e.jsx(E,{className:Wfe.button,appearance:"primary",loading:r,disabled:r,onClick:i,children:Hfe.startImport})},vd={connectionStringLabel:"Your database connection string",runChecksButtonLabel:"Run Checks",loaderText:"Running checks...",limitExceededTitle:"Size limit exceeded",limitExceededMessage:"The size of the database exceeds what we support at the moment. Our Solutions team will reach out to you soon to provide assistance."},Kfe="_container_m4alz_1",Qfe="_form_m4alz_7",Yfe="_connectionStringFormField_m4alz_14",Jfe="_loaderContainer_m4alz_18",gp={container:Kfe,form:Qfe,connectionStringFormField:Yfe,loaderContainer:Jfe},Zfe=({onOk:t})=>{const{trackUiInteraction:s}=P(),[n,r]=m.useState(!1),{limits:a}=It(),{projectId:o}=F(),[i,c]=m.useState(""),[l,d]=m.useState(!1),[u,p]=m.useState([]),h=m.useCallback(f=>{c(f.target.value)},[c]),g=m.useCallback(async()=>{var f;r(!0),s("import_data_run_checks_clicked");try{const{data:_}=await G.getMigrationChecklist({connection_uri:i.trim(),project_id:o});p(_.data),a!==void 0&&_.database_size!==void 0&&a.max_import_size>=0&&a.max_import_size<_.database_size?(d(!0),s("import_data_run_checks_limits_exceeded")):(f=_.data)!=null&&f.every(({succeed:b,warning:x})=>x||b)&&(s("import_data_run_checks_succeeded"),t(i))}catch(_){s("import_data_run_checks_failed"),Y(_)}finally{r(!1)}},[a,t,o,i,s]);return e.jsxs("div",{className:gp.container,children:[e.jsxs(qt,{onSubmit:g,formBodyClassName:gp.form,children:[e.jsx(U,{label:vd.connectionStringLabel,className:gp.connectionStringFormField,children:e.jsx(ie,{disabled:n,placeholder:"postgresql://",size:"s",value:i,onChange:h})}),e.jsx(E,{onClick:g,appearance:"primary",type:"submit",disabled:n||!i.trim()||a===void 0,children:vd.runChecksButtonLabel})]}),n?e.jsxs("div",{className:gp.loaderContainer,children:[e.jsx(on,{}),vd.loaderText]}):l?e.jsx(X,{appearance:"error",title:vd.limitExceededTitle,children:vd.limitExceededMessage}):e.jsx(QP,{checks:u})]})},wa={title:"Import Data",checksTitle:"Check compatibility",checksDescription:"We'll analyze your database and provide recommendations for a successful migration. No changes will be made to your source database.",importTitle:"Import data",importDescription:"We'll copy your data to a new branch.",importWarning:t=>e.jsxs(e.Fragment,{children:["Support for all database configurations is still evolving. Some databases may encounter issues. If your database is larger than 10 GB and you need help, ",t("contact us"),"."]}),importWarningTitle:"About automatic data import"},Xfe="_title_m0bo0_1",e_e="_content_m0bo0_7",t_e="_importAlert_m0bo0_14",i_={title:Xfe,content:e_e,importAlert:t_e},s_e=({onCloseDrawer:t})=>{const[s,n]=m.useState("checks"),[r,a]=m.useState(""),o=m.useCallback(u=>{a(u),n("import")},[]),{trackUiInteraction:i}=P(),[c,l]=m.useState(!1),d=m.useCallback(()=>{i("import_data_support_clicked"),l(!0)},[i]);return e.jsxs(e.Fragment,{children:[e.jsx(Ci,{isOpen:c,onRequestClose:()=>l(!1)}),e.jsx(oa,{"aria-label":wa.title,isOpen:!0,size:"l",onRequestClose:t,children:e.jsx(ia,{title:e.jsxs("div",{className:i_.title,children:[wa.title,e.jsx(Ie,{appearance:"experimental",size:"m",children:"Beta"})]}),children:e.jsxs("div",{className:i_.content,children:[e.jsx(T,{as:"p",appearance:"secondary",children:e.jsx(gt,{id:"f9vaUI",defaultMessage:[{type:0,value:"This tool checks compatibility before creating a copy of your data in Neon. Your source database remains untouched."}]})}),e.jsxs(qP,{children:[e.jsx(pb,{title:wa.checksTitle,description:wa.checksDescription,isStepCollapsed:!1,isStepCompleted:s==="import",children:e.jsx(Zfe,{onOk:o})}),e.jsxs(pb,{title:wa.importTitle,isStepCollapsed:s!=="import",isStepCompleted:!1,children:[e.jsx(T,{as:"p",appearance:"secondary",children:wa.importDescription}),e.jsx(X,{className:i_.importAlert,title:wa.importWarningTitle,children:wa.importWarning(u=>e.jsx(R,{onClick:d,children:u}))}),e.jsx(Gfe,{connectionString:r})]})]})]})})})]})},n_e="importData",r_e=t=>{const{trackUiInteraction:s}=P(),[n,r]=Un(n_e,{historyMethod:"push"}),a=fr(i=>{var c;s("import_data_button_clicked"),r("show"),(c=t.onClick)==null||c.call(t,i)}),o=fr(()=>{s("import_data_drawer_closed"),r(void 0)});return m.useEffect(()=>{s("import_data_button_shown")},[s]),e.jsxs(e.Fragment,{children:[e.jsx(E,{...t,onClick:a,children:t.children||"Import data"}),n&&e.jsx(s_e,{onCloseDrawer:o})]})},c_={title:"Import your data",description:"Automatically import your data directly into your Neon database",actionButton:"Import data"},a_e=()=>{const{trackUiInteraction:t}=P();return e.jsx(Oi,{iconName:"data_import",title:c_.title,description:c_.description,action:e.jsx(r_e,{appearance:"secondary",onClick:()=>{t("get_started_widget_import_database_clicked",{mode:"auto"})},children:c_.actionButton})})},l_={title:"Import your data",description:"Import your data directly into your Neon database",actionButton:"Import data"},o_e="manualImportData",i_e=()=>{const{trackUiInteraction:t}=P(),[s,n]=Un(o_e,{historyMethod:"push"}),{project:r}=F();return e.jsxs(e.Fragment,{children:[s&&e.jsx(YP,{project:r,onCloseDrawer:()=>{n(void 0)}}),e.jsx(Oi,{iconName:"data_import",title:l_.title,description:l_.description,action:e.jsx(E,{appearance:"secondary",onClick:()=>{t("get_started_widget_import_database_clicked",{mode:"manual"}),n("show")},children:l_.actionButton})})]})},d_={title:"Get sample data",description:"Easily test out your Neon database with Neon prepared datasets",actionButton:"Get data"},c_e=()=>{const{trackUiInteraction:t}=P();return e.jsx(Oi,{iconName:"docs",title:d_.title,description:d_.description,action:e.jsx(E,{appearance:"secondary",as:Ge,openInNewTab:!0,href:"https://neon.com/docs/import/import-sample-data",onClick:()=>{t("get_started_widget_get_sample_data_clicked")},children:d_.actionButton})})},u_={title:"View database contents",description:"Manage your database and view table contents with the Tables page",actionButton:"Go to Tables page"},l_e=()=>{const{trackUiInteraction:t}=P(),{projectId:s}=F(),{defaultBranch:n}=xt();return e.jsx(Oi,{iconName:"table",title:u_.title,description:u_.description,action:e.jsx(E,{appearance:"secondary",as:Ge,disabled:!n,href:n?Q(C.ProjectsItemDrizzle,{projectId:s,branchId:n.id}):void 0,onClick:()=>{t("get_started_widget_open_tables_clicked")},children:u_.actionButton})})},h_={title:"Connect from your IDE",description:"Use the Neon Local connect IDE extension to connect to your database.",actionButton:"Get extension"},d_e=()=>{const{trackUiInteraction:t}=P();return e.jsx(Oi,{iconName:"vscode",title:h_.title,description:h_.description,action:e.jsx(E,{appearance:"secondary",as:Ge,openInNewTab:!0,href:"https://neon.com/docs/local/neon-local-connect",onClick:()=>{t("get_started_widget_vscode_extension_clicked")},children:h_.actionButton})})},e1={title:"Get started with your new database",dismiss:"Dismiss"},u_e="_root_zesyg_1",h_e="_root_compact_zesyg_7",p_e="_header_zesyg_12",m_e="_dismissButton_zesyg_19",g_e="_cards_zesyg_23",yd={root:u_e,root_compact:h_e,header:p_e,dismissButton:m_e,cards:g_e},f_e=({onDismiss:t})=>{const{project:s}=F(),{importAvailableRegions:n}=io();P({mountEvent:"get_started_widget_shown"});const r=n.find(o=>o.id===(s==null?void 0:s.region_id)),a=He([e.jsx(qfe,{}),r?e.jsx(a_e,{}):e.jsx(i_e,{}),e.jsx(d_e,{}),e.jsx(zfe,{}),e.jsx(l_e,{}),e.jsx(c_e,{})]);return e.jsxs("div",{className:V(yd.root,{[yd.root_compact]:a.length<4}),children:[e.jsxs("div",{className:yd.header,children:[e.jsx(Z,{level:2,size:"h4",children:e1.title}),e.jsx(R,{className:yd.dismissButton,onClick:t,children:e1.dismiss})]}),e.jsx(Mfe,{children:e.jsx("div",{className:yd.cards,children:a})})]})},__e=()=>{const{trackUiInteraction:t}=P(),s=y2(),{projectId:n}=F(),[r,a]=m.useState(()=>w2(n));if(!s||!r)return null;const o=()=>{t("get_started_widget_dismissed"),a(!1),S2(n)};return e.jsx(f_e,{onDismiss:o})},b_e=({projectId:t})=>{const{trackUiInteraction:s}=P();return e.jsx(E,{as:Ge,size:"s",appearance:"secondary",icon:"people",href:`${Q(C.ProjectsItemSettings,{projectId:t})}#sharing`,onClick:()=>{s("header_project_share_button_clicked")},children:"Share"})},x_e=({project:t})=>{const{trackUiInteraction:s}=P(),[n,r]=m.useState(!1);return e.jsxs(e.Fragment,{children:[t&&e.jsx(ig,{isOpen:n,project:t,onRequestClose:()=>{r(!1)}}),e.jsx(E,{appearance:"primary",icon:"connect",onClick:()=>{s("dashboard_toolbar_connect_clicked"),r(!0)},children:"Connect"})]})},j_e=()=>{const{project:t,projectId:s}=F();return e.jsx(bl,{title:"Project dashboard",breadcrumbs:void 0,actions:e.jsxs(e.Fragment,{children:[e.jsx(x_e,{project:t}),e.jsx(b_e,{projectId:s})]})})},tN=({project:t})=>{const{autoscalingMin:s,autoscalingMax:n}=ox(t),r={autoscaling_limit_min_cu:s,autoscaling_limit_max_cu:n};return e.jsx(ag,{endpoint:r})},Cj=t=>e.jsxs(Si,{className:t.className,title:e.jsx(B,{style:{width:"240px",height:"12px"}}),children:[e.jsxs("div",{style:{display:"flex",gap:"22px",marginBottom:"40px"},children:[e.jsx(B,{style:{flexGrow:1,height:"44px"}}),e.jsx(B,{style:{flexGrow:1,height:"44px"}})]}),e.jsx(B,{style:{height:"44px",marginBottom:"40px"}}),e.jsx(B,{style:{height:"44px"}})]}),v_e="_root_ummap_1",y_e="_computeDefaultsValue_ummap_5",w_e="_region_ummap_9",S_e="_pg18PreviewBadge_ummap_15",wd={root:v_e,computeDefaultsValue:y_e,region:w_e,pg18PreviewBadge:S_e},C_e=t=>{const{trackUiInteraction:s}=P(),{projectId:n,project:r,isLoading:a}=F(),{limits:o,isLoading:i}=It(),c=o==null?void 0:o.max_autoscaling_cu,{getRegionSafe:l}=io(),d=ki("allow_hipaa_projects"),u=ge("hipaa_self_serve_console"),p=l((r==null?void 0:r.platform_id)??"",(r==null?void 0:r.region_id)??""),h=rF(),f=C2()&&(r==null?void 0:r.pg_version)===18;return a||!r||i?e.jsx(Cj,{}):e.jsx(Si,{...t,title:"Project settings",footer:h,links:c&&c>.25?e.jsx(R,{href:`${Q(C.ProjectsItemSettings,{projectId:n})}#compute`,onClick:()=>s("storage_widget_go_to_settings_clicked"),children:"Manage"}):void 0,children:e.jsx("div",{className:wd.root,children:e.jsxs(f0,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Region"}),e.jsx("td",{children:e.jsx("div",{className:wd.region,children:e.jsx("b",{children:p==null?void 0:p.name})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Default compute size"}),e.jsx("td",{children:e.jsx("b",{className:wd.computeDefaultsValue,children:e.jsx(tN,{project:r})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"History retention"}),e.jsx("td",{children:e.jsx("b",{className:wd.computeDefaultsValue,children:Lu(r.history_retention_seconds)})})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{children:"Postgres version"}),f?e.jsx(k2,{}):null]}),e.jsxs("td",{children:[f?e.jsx(Ie,{appearance:"experimental",size:"s",className:wd.pg18PreviewBadge,children:"Preview"}):null,e.jsx("b",{children:r==null?void 0:r.pg_version})]})]}),d&&u&&e.jsxs("tr",{children:[e.jsx("td",{children:"HIPAA compliance"}),e.jsx("td",{children:e.jsx("b",{children:r!=null&&r.hipaa_enabled_at?e.jsx(Bn,{label:"ENABLED",appearance:"success"}):e.jsx(Bn,{label:"DISABLED",appearance:"default"})})})]})]})})})},k_e={title:"Monitoring"},I_e="_selectRow_dxbur_1",P_e="_refreshButton_dxbur_10",t1={selectRow:I_e,refreshButton:P_e},T_e="_root_19ivu_1",A_e="_content_19ivu_8",N_e="_dismissButton_19ivu_16",p_={root:T_e,content:A_e,dismissButton:N_e},E_e=({onDismiss:t})=>{const{trackUiInteraction:s}=P({mountEvent:"monitoring_widget_slack_app_announcement_shown"}),n=()=>{s("monitoring_widget_slack_app_announcement_dismissed"),t()};return e.jsxs("div",{className:p_.root,children:[e.jsxs("div",{className:p_.content,children:[e.jsx(z,{name:"slack",size:20}),e.jsx(R,{href:"https://neon.com/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("monitoring_widget_slack_app_announcement_slack_app_link_clicked")},children:"Track your Neon projects in Slack"}),e.jsx(Ie,{appearance:"neon",children:"NEW"})]}),e.jsx("button",{type:"button",className:p_.dismissButton,title:"Dismiss",onClick:n,children:e.jsx(z,{name:"close",size:12})})]})};function O_e(){const t=Kb("growth_slack_app_announcement")==="monitoring_widget",[s,n]=m.useState(()=>!!Us.get(_t.SlackAppAnnouncementDismissed));return s||!t?{slackAppNode:null}:{slackAppNode:e.jsx(E_e,{onDismiss:()=>{Us.set(_t.SlackAppAnnouncementDismissed,!0),n(!0)}})}}const $_e=({project:t})=>{var g;const{selectOptions:s}=xt(),{trackUiInteraction:n}=P(),{slackAppNode:r}=O_e(),[a,o]=m.useState(null),[i,c]=m.useState(),l=Hs({projectId:t.id,branchId:((g=a==null?void 0:a.branch)==null?void 0:g.id)??""}),d=m.useMemo(()=>{var f;return((f=l.data)==null?void 0:f.endpoints)??[]},[l.data]);m.useEffect(()=>{!a&&s&&s.length>0&&o(s.find(f=>f.branch&&f.branch.default)??s[0])},[a,s]);const[u,p]=m.useState(0),h=m.useCallback(()=>{p(f=>f+1)},[]);return e.jsx(e.Fragment,{children:e.jsxs(Si,{title:k_e.title,links:e.jsx(R,{href:a!=null&&a.branch?Q(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:t.id,branchId:a.branch.id}):void 0,onClick:()=>n("monitoring_widget_view_all_metrics_clicked"),children:"View all metrics"}),footer:r,children:[e.jsxs("div",{className:t1.selectRow,children:[e.jsx(U,{label:"Branch",children:e.jsx(Kp,{value:a,options:s,size:"s",onChange:o})}),e.jsx(U,{label:"Compute",children:e.jsx(sx,{endpoints:d,endpointId:i,size:"s",onChange:f=>c((f==null?void 0:f.id)??void 0)})}),e.jsx("div",{className:t1.refreshButton,children:e.jsx(E,{appearance:"secondary",icon:"reset",size:"s",onClick:h,children:"Refresh"})})]}),i&&e.jsx(_0,{defaultRange:{type:"period",fromDate:new Date,period:TL.day},children:e.jsx(AL,{endpointId:i,height:280},u)})]})})},L_e="_branchName_1s5bc_1",R_e="_branchWrapper_1s5bc_7",M_e="_branchCell_1s5bc_13",m_={branchName:L_e,branchWrapper:R_e,branchCell:M_e},B_e=t=>{const{projectId:s,isLoading:n}=F(),r=Em({projectId:s}),a=m.useMemo(()=>fA(r.data,d=>d.operations),[r.data]),{trackUiInteraction:o}=P(),{branchesById:i}=xt(),c=n||r.status==="pending";let l=e.jsx(T,{appearance:"secondary",children:"Something went wrong"});if(c)return e.jsx(Cj,{});if(r.status==="error")l=e.jsx(T,{appearance:"secondary",children:r.error.message});else if(a.length===0)l=e.jsx(T,{appearance:"secondary",children:"There are no operations yet"});else{const d=u=>{var p,h,g;return u.branch_id?(p=i[u.branch_id])!=null&&p.name?e.jsx(R,{"aria-label":(h=i[u.branch_id])==null?void 0:h.name,className:m_.branchWrapper,href:Q(C.ProjectsItemBranchesItem,{projectId:s,branchId:u.branch_id}),onClick:()=>o("ops_widget_branch_link_clicked"),children:e.jsx("div",{className:m_.branchName,children:(g=i[u.branch_id])==null?void 0:g.name})}):e.jsx(Cb,{isDeleted:!0,branchId:u.branch_id}):"-"};l=e.jsxs(f0,{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Branch"}),e.jsx("th",{children:"Date"}),e.jsx("th",{style:{textAlign:"left"},children:"Status"})]}),a.slice(0,5).map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:_A(u)})}),e.jsx("td",{className:m_.branchCell,children:d(u)}),e.jsx("td",{children:fe(u.created_at)}),e.jsx("td",{style:{textAlign:"left"},children:e.jsx(H0,{status:u.status})})]},u.id))]})}return e.jsx(Si,{...t,title:"Operations",links:e.jsx(R,{href:Q(de.ProjectsItemMonitoringOperations,{projectId:s}),onClick:()=>o("ops_widget_show_all_clicked"),children:"Show all"}),children:l})},D_e=Qb({name:"branchWidget",initialState:{isVercelIntegrationAlertClosed:!1},reducers:{setIsVercelIntegrationAlertClosed:(t,{payload:s})=>{t.isVercelIntegrationAlertClosed=s}}}),ku=Yb(D_e);function*U_e(){try{const t=Us.get(_t.BranchWidget);if(t){const s=t;yield OC(ku.actions.setIsVercelIntegrationAlertClosed(!!s.isVercelIntegrationAlertClosed))}}catch{Us.remove(_t.BranchWidget)}}function*F_e(){yield M0(ku.actionTypes,function*(){const s=yield $C(ku.selector);Us.set(_t.BranchWidget,s)})}function*z_e(){yield NC(U_e),yield EC(F_e)}ku.setSaga(z_e);const kb=ku,q_e="_root_1iy8v_1",H_e="_close_1iy8v_9",V_e="_content_1iy8v_15",g_={root:q_e,close:H_e,content:V_e},f_={tag:"Preview Workflow",description:"You don't have any preview branches yet. Improve your workflow by adding database branching to your development previews.",button:"Install an integration"},W_e=()=>{const t=et(),{projectId:s}=dl(),{isVercelIntegrationAlertClosed:n}=ll(kb.selector),r=cn(),{trackUiInteraction:a}=P(),{isVercelOrg:o,isLoading:i}=re(),c=()=>{r(kb.actions.setIsVercelIntegrationAlertClosed(!0)),a("branches_widget_install_integration_closed")},l=()=>{a("branches_widget_install_integration_clicked"),t.push(Q(C.ProjectsItemIntegrations,{projectId:s}))};return n||i||o?null:e.jsxs("div",{className:g_.root,children:[e.jsx(_r,{onClick:c,className:g_.close,iconName:"close",iconSize:12,tooltip:"Close"}),e.jsx(Ie,{appearance:"experimental",children:f_.tag}),e.jsx("p",{className:g_.content,children:f_.description}),e.jsx(E,{onClick:l,type:"button",appearance:"secondary",children:f_.button})]})},G_e="_createdBy_1q8ec_1",K_e={createdBy:G_e},Q_e=({annotations:t={},endpoints:s})=>m.useMemo(()=>[{header:"Name",accessorKey:"name",maxSize:250,rowHeader:!0,render:n=>e.jsx(RA,{branch:n,searchWords:[]})},{header:"Primary compute",render:n=>e.jsx($A,{branchId:n.id,endpoints:s})},{header:"Created by",size:110,render:n=>e.jsx("div",{className:K_e.createdBy,children:e.jsx(fm,{iconOnly:!0,branch:n,annotation:t[n.id]})})}],[t,s]),Y_e=({branches:t,annotations:s,endpoints:n,isLoading:r=!1})=>{const{trackUiInteraction:a}=P(),{projectId:o}=F(),i=Q_e({annotations:s,endpoints:n});return e.jsx(Cs,{columns:i,rows:t,isLoading:r,"aria-label":"Branches",rowHref:c=>Q(C.ProjectsItemBranchesItem,{branchId:c.id,projectId:o}),onRowClick:()=>a("branches_widget_row_clicked")})},J_e=t=>{var h;const{trackUiInteraction:s}=P(),{projectId:n,project:r,isLoading:a}=F(),{branches:o,annotations:i,isLoading:c}=xt(),l=ln({projectId:n}),d=a||c||!r,u=m.useMemo(()=>o.slice(0,5),[o]),p=m.useMemo(()=>o.find(h0),[o]);return d?e.jsx(Cj,{}):e.jsxs(Si,{...t,title:"Branches",links:e.jsx(R,{href:Q(C.ProjectsItemBranches,{projectId:n}),onClick:()=>s("branches_widget_go_to_branches_list_clicked"),children:"View all"}),children:[p&&e.jsxs(p0,{children:["Database import in progress on '",p.name,"' branch"]}),e.jsx(Y_e,{branches:u,annotations:i,endpoints:((h=l.data)==null?void 0:h.endpoints)??[]}),e.jsx(W_e,{})]})},Z_e=()=>{const{isFreeSubscription:t,isPaidSubscription:s,subscriptionType:n}=he(),{isLoading:r,startPeriod:a,usage:o,allowance:i}=p2(),{isOwnProject:c}=F(),{branchesCount:l,isLoading:d}=xt(),{limits:u,isLoading:p}=It();return{items:m.useMemo(()=>{const g=He([ns({isFreeSubscription:t,usageType:"storage",usage:o.projectStorage,allowance:i.storage,converterFn:lr,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"compute",usage:o.projectComputeTime,allowance:i.compute,converterFn:Ja,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"branchCompute",usage:o.nonPrimaryCompute,allowance:i.nonPrimaryCompute,converterFn:Ja,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"dataTransfer",usage:o.dataTransfer,allowance:i.dataTransfer,converterFn:lr,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"branches",usage:l,allowance:(u==null?void 0:u.max_branches)||-1,showAllowance:t,isPaidSubscription:s,subscriptionType:n})]);return c?g:zP(g)},[t,o.projectStorage,o.projectComputeTime,o.nonPrimaryCompute,o.dataTransfer,i.storage,i.compute,i.nonPrimaryCompute,i.dataTransfer,s,n,l,u==null?void 0:u.max_branches,c]),isLoading:r||d||p,startPeriod:pr(a,ke.Date)}},X_e=()=>{var b,x;const{isFreeSubscription:t,isPaidSubscription:s,subscriptionType:n}=he(),{isOwnProject:r,projectId:a,project:o}=F(),i=yC(),{branchesCount:c,isLoading:l}=xt(),{limits:d,isLoading:u}=It(),{data:p,isLoading:h}=Cm.useGetProjectConsumptionQuery(a),{startPeriod:g,isLoading:f}=Dm();return{items:m.useMemo(()=>{var k,N,D;const v=new U0((p==null?void 0:p.v3_metrics)??[]).collectProjectUsageMetrics(t,o),y=wC((k=i.pg_settings)==null?void 0:k["neon.max_cluster_size"]),S=((N=i.metrics.items)==null?void 0:N.per_project_aggr_inbound_private_network_traffic)!==void 0||((D=i.metrics.items)==null?void 0:D.per_project_aggr_outbound_private_network_traffic)!==void 0,w=He([ns({isFreeSubscription:t,usageType:"branches",usage:c,allowance:(d==null?void 0:d.max_branches)||-1,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"compute",usage:v.computeSeconds,allowance:(d==null?void 0:d.per_project.compute_time_seconds)??-1,converterFn:NL,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),ns({isFreeSubscription:t,usageType:"storage",usage:t?(o==null?void 0:o.synthetic_storage_size)??0:v.storage,allowance:y??-1,showAllowance:t,converterFn:t?lr:L_,isPaidSubscription:s,subscriptionType:n}),...t?[ns({isFreeSubscription:t,usageType:"dataTransfer",usage:(o==null?void 0:o.data_transfer_bytes)??0,allowance:(d==null?void 0:d.per_project.data_transfer_bytes)??-1,showAllowance:t,converterFn:lr,isPaidSubscription:s,subscriptionType:n})]:[],...S?[ns({isFreeSubscription:t,usageType:"privateDataTransfer",usage:v.privateTransfer,allowance:-1,showAllowance:!1,converterFn:lr,isPaidSubscription:s,subscriptionType:n})]:[],...t?[]:[ns({isFreeSubscription:t,usageType:"publicDataTransfer",usage:v.publicTransfer,allowance:-1,showAllowance:!1,converterFn:lr,isPaidSubscription:s,subscriptionType:n})]]);return r?w:zP(w)},[p==null?void 0:p.v3_metrics,t,o,i.pg_settings,(b=i.metrics.items)==null?void 0:b.per_project_aggr_inbound_private_network_traffic,(x=i.metrics.items)==null?void 0:x.per_project_aggr_outbound_private_network_traffic,c,d==null?void 0:d.max_branches,d==null?void 0:d.per_project.compute_time_seconds,d==null?void 0:d.per_project.data_transfer_bytes,s,n,r]),isLoading:h||l||u||f,startPeriod:pr(g,ke.Date)}},ebe=({showUpgrade:t})=>{const s=Z_e();return e.jsx(Hx,{data:s,type:"project",showUpgrade:t})},tbe=({showUpgrade:t})=>{const s=X_e();return e.jsx(Hx,{data:s,type:"project",showUpgrade:t})},sbe=()=>{const{isPaidAccount:t,isPricingV3Account:s}=he(),{isOwnProject:n}=F(),r=m.useMemo(()=>n&&!t,[n,t]);return s?e.jsx(tbe,{showUpgrade:r}):e.jsx(ebe,{showUpgrade:r})},nbe="_topSection_1pimt_3",rbe="_container_1pimt_13",abe="_col_1pimt_18",fp={topSection:nbe,container:rbe,col:abe},obe=()=>{const{project:t}=F(),s=ge("growth_protected_branch_upgrade_modal"),n=it(Je.ProtectedBranchUpgrade),r=ej("project"),a=t&&t.provisioner===EL.K8SNeonvm,[o,i]=m.useState(!1),c=s&&n.isModalOpen&&(t==null?void 0:t.id);return e.jsxs(e.Fragment,{children:[o&&e.jsx(lt,{type:Xe.Default,isOpen:o,onRequestClose:()=>{i(!1)}}),c&&e.jsx(Nfe,{setShowUpgradeModal:i,onRequestClose:()=>{n.closeModal()}}),r,e.jsx(j_e,{}),e.jsxs("div",{className:fp.topSection,children:[e.jsx(__e,{}),e.jsx(sbe,{})]}),e.jsxs("div",{className:fp.container,"data-qa":"project_dashboard",children:[e.jsx("div",{className:fp.col,children:a?e.jsx($_e,{project:t}):e.jsx(B_e,{})}),e.jsxs("div",{className:fp.col,children:[e.jsx(J_e,{}),e.jsx(C_e,{})]})]})]})},ibe=(t,s,n)=>{const{data:r,isLoading:a,error:o}=bt({queryKey:["dataAPI",t,s,n],queryFn:async()=>{var i,c;if(!t||!s||!n)return null;try{return(await G.getProjectBranchDataApi(t,s,n)).data.url}catch(l){if(Xr(l)&&((i=l.response)==null?void 0:i.status)===404)return null;if(Xr(l)&&((c=l.response)==null?void 0:c.status)===412)return Y(l),null;throw l}}});return{url:r,isLoading:a,error:o}},cbe=({projectId:t,branchId:s,databaseName:n},{onSuccess:r,onError:a,...o})=>{const i=be();return _e({mutationFn:()=>G.deleteProjectBranchDataApi(t,s,n,{}),onSuccess:(...c)=>{r==null||r(...c),i.invalidateQueries({queryKey:["dataAPI",t,s,n]})},onError:(c,...l)=>{a==null||a(c,...l),Y(c)},...o})},lbe=({projectId:t,branchId:s,databaseName:n},{onSuccess:r,onError:a,...o})=>{const i=be();return _e({mutationFn:({authProviderType:c,providerName:l,jwksUrl:d,expectedAudience:u,grantPublicSchema:p})=>{let h={};const g=u==null?void 0:u.trim();switch(c){case"external":h={add_default_grants:p,auth_provider:"external",jwks_url:d,jwt_audience:g&&g!==""?g:void 0,provider_name:l};break;case"neon_auth":h={add_default_grants:p,auth_provider:"neon_auth"};break;default:h={add_default_grants:p};break}return G.createProjectBranchDataApi(t,s,n,h)},onSuccess:(...c)=>{r==null||r(...c),i.invalidateQueries({queryKey:["dataAPI",t,s,n]})},onError:(c,...l)=>{a==null||a(c,...l),Y(c)},...o})},dbe="_snippet_q8uhj_1",ube="_fitHeight_q8uhj_6",hbe="_expandHeight_q8uhj_10",__={snippet:dbe,fitHeight:ube,expandHeight:hbe},pbe=({snippetOption:t,height:s="static",onReveal:n,onCopy:r})=>{const[a,o]=m.useState(t.tabs[0]),{tabs:i}=t,{fetchPassword:c}=gl(),{project:l}=F(),{list:d}=Pi(),[u]=Sl(),{list:p}=un();let h=p.find(y=>y.name===u);h||(h=p[0]);const g=h==null?void 0:h.owner_name,f=d.find(y=>y.name===g)??d[0];t.tabs.includes(a)||o(t.tabs[0]);function _(){const y=t.tabs.find(S=>S.value===a.value);return(y==null?void 0:y.codeSnippet)??""}const b=m.useCallback(y=>{const S=i.find(w=>w.value===y);o(S)},[i]),x=b0(async()=>{if(!f||!h)return"";let y="";if(l&&l.store_passwords)try{y=await c(l.id,f)??""}catch(S){Y(S)}return a.codeSnippet.replace(m2,y)}),j=l!=null&&l.store_passwords&&a.hasSecrets?{getUnmaskedValue:x,onReveal:n}:void 0,v={getUnmaskedValue:x,onCopy:r};return e.jsxs("div",{children:[e.jsx(qn,{variant:"contained",options:i,value:a.value,onChange:b}),e.jsx(rn,{className:V(__.snippet,{[__.fitHeight]:s==="fit",[__.expandHeight]:s==="expand"}),variant:"contained",mode:a.language,scrollable:!0,reveal:j,copy:v,children:_()})]})},mbe="_verticalSteps_ssbp6_1",gbe="_step_ssbp6_11",fbe="_stepTitle_ssbp6_21",_be="_stepHeader_ssbp6_25",bbe="_stepCounter_ssbp6_31",xbe="_stepContent_ssbp6_60",jbe="_stepTitleContainer_ssbp6_65",vbe="_hint_ssbp6_71",Sa={verticalSteps:mbe,step:gbe,stepTitle:fbe,stepHeader:_be,stepCounter:bbe,stepContent:xbe,stepTitleContainer:jbe,hint:vbe},ybe={required:"Required",optional:"Optional"},wbe=({steps:t})=>e.jsx("div",{className:Sa.verticalSteps,children:t.map(s=>{let n=null;return s.requirementStatus&&(n=e.jsxs(Ie,{children:[ybe[s.requirementStatus.status],s.requirementStatus.hint&&e.jsx(Bs,{className:Sa.hint,children:s.requirementStatus.hint})]})),e.jsxs("div",{className:Sa.step,children:[e.jsxs("div",{className:Sa.stepHeader,children:[e.jsx("div",{className:Sa.stepCounter}),e.jsxs("div",{className:Sa.stepTitleContainer,children:[e.jsx(Z,{level:4,size:"h3",className:Sa.stepTitle,children:s.title}),n]})]}),e.jsx("div",{className:Sa.stepContent,children:s.content})]},s.id)})}),Sbe="_instructionsText_ejnn9_8",Cbe="_instructionsHighlight_ejnn9_13",kbe="_instructionsCodeSpan_ejnn9_17",kj={instructionsText:Sbe,instructionsHighlight:Cbe,instructionsCodeSpan:kbe},Iu=({children:t,className:s})=>e.jsx("p",{className:V(kj.instructionsText,s),children:t}),Ij=({children:t,className:s})=>e.jsx("b",{className:V(kj.instructionsHighlight,s),children:t}),Ibe=({children:t,className:s})=>e.jsx(Ae,{className:V(kj.instructionsCodeSpan,s),children:t}),bm=[{value:"clerk",label:"Clerk",icon:"clerk_icon",jwksUrlSlug:"clerk",expectedAudienceRequired:!1},{value:"auth0",label:"Auth0",icon:"auth0_icon",jwksUrlSlug:"auth0",expectedAudienceRequired:!1},{value:"aws_cognito",label:"AWS Cognito",icon:"aws_incognito",jwksUrlSlug:"amazonaws",expectedAudienceRequired:!1},{value:"gcp_identity",label:"GCP Cloud Identity",icon:"gcp_identity",jwksUrlSlug:"google",expectedAudienceRequired:!0},{value:"azure_ad",label:"Entra",icon:"azure_ad",jwksUrlSlug:"microsoft",expectedAudienceRequired:!1},{value:"stytch",label:"Stytch",icon:"stytch",jwksUrlSlug:"stytch",expectedAudienceRequired:!1},{value:"descope",label:"Descope",icon:"descope_auth",jwksUrlSlug:"descope",expectedAudienceRequired:!1},{value:"keycloak",label:"Keycloak",icon:"keycloak_icon",jwksUrlSlug:"realms",expectedAudienceRequired:!1},{value:"firebase_auth",label:"Firebase Auth",icon:"firebase",jwksUrlSlug:"firebase",expectedAudienceRequired:!0},{value:"stack",label:"Stack Auth",icon:"stack_auth",jwksUrlSlug:"stack-auth",expectedAudienceRequired:!1},{value:"other",label:"Other",icon:"other",expectedAudienceRequired:!1}];function Pbe(t){const s=bm.find(n=>n.value===t);return s||bm.find(n=>n.value==="other")}const Tbe="_body_1nwuy_1",Abe="_helpMessage_1nwuy_6",Nbe="_providersList_1nwuy_10",Ebe="_inputContainer_1nwuy_17",Obe="_helpLink_1nwuy_23",$be="_jwksInput_1nwuy_28",Lbe="_providerIconUnselected_1nwuy_32",Rbe="_fieldContainer_1nwuy_36",Mbe="_jwksInputDarkMode_1nwuy_44",ar={body:Tbe,helpMessage:Abe,providersList:Nbe,inputContainer:Ebe,helpLink:Obe,jwksInput:$be,providerIconUnselected:Lbe,fieldContainer:Rbe,jwksInputDarkMode:Mbe},Bbe="other",s1=2050,sN=({submitButton:t})=>{const s=Ct(),{colorScheme:n}=oo(),[r,a]=m.useState(!1),{setValue:o}=s,i=m.useMemo(()=>ix(c=>{const l=URL.canParse(c);if(!c.length||!l){o("providerName",""),a(!1);return}const d=bm.find(u=>u.jwksUrlSlug&&c.includes(u.jwksUrlSlug));o("providerName",(d==null?void 0:d.value)??Bbe),a((d==null?void 0:d.expectedAudienceRequired)??!1)},300,{leading:!0,trailing:!0}),[o]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:ar.inputContainer,children:[e.jsx(U,{className:ar.fieldContainer,error:!!s.formState.errors.jwksUrl,label:"JSON Web Key Set (JWKS) URL / Endpoint",children:e.jsx(ie,{className:V(ar.jwksInput,{[ar.jwksInputDarkMode]:n==="dark"}),size:"l",type:"url",placeholder:"https://your.auth.provider/jwks/PROJECT_ID",maxLength:s1,...s.register("jwksUrl",{required:!0,onChange:c=>{i(c.target.value)}})})}),e.jsx(U,{className:ar.fieldContainer,label:e.jsxs(e.Fragment,{children:[r?null:"(Optional) ","JWT Audience"," ",e.jsxs(Bs,{children:[e.jsxs("p",{children:["Only JWTs with the ",e.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),e.jsx("br",{}),e.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),error:!!s.formState.errors.expectedAudience,children:e.jsx(ie,{size:"l",type:"text",maxLength:s1,...s.register("expectedAudience",{required:r})})}),t]}),e.jsx(R,{className:ar.helpLink,openInNewTab:!0,href:OL,icon:"external_link",iconSize:"s",children:"Where do I get this URL?"})]}),e.jsx("div",{className:ar.providersList,children:bm.map(c=>{const l=s.watch("providerName")===c.value;return e.jsx("span",{children:e.jsx(te,{content:c.label,placement:"top",children:e.jsx("div",{className:V({[ar.providerIconUnselected]:!l}),children:e.jsx(z,{name:c.icon,size:32})})})},c.value)})})]})},Dbe=({handleCreate:t,isOpen:s,createJwksRequestStatus:n,onRequestClose:r})=>{const a=Ct(),{trackUiInteraction:o}=P(),{reset:i}=a,c=m.useMemo(()=>({title:"Add new authentication provider",isOpen:s,maxWidth:700,onRequestClose:()=>{i(),r==null||r(),o("neon_authorize_add_provider_modal_dismissed")}}),[s,r,o,i]);return e.jsxs(ps,{modalProps:c,providerProps:a,onSubmit:t,children:[e.jsxs(De,{className:ar.body,children:[e.jsxs(Iu,{className:ar.helpMessage,children:["Enter the URL where your authentication provider's JSON Web Key Set (JWKS) is hosted. This URL allows us to retrieve the public keys needed to verify JSON Web Tokens (JWTs) issued by your provider."," "]}),e.jsx(sN,{})]}),e.jsx(Te,{children:e.jsx(Ce,{disabled:!a.formState.isValid,loading:n==="pending",onClick:()=>{o("neon_authorize_add_provider_modal_submitted")},children:"Set Up"})})]})},Ube="/assets/assets/empty-state-diagram-dark-D13rg5wl.svg",Fbe="/assets/assets/empty-state-diagram-light-DCxISfU5.svg",zbe="_emptyStateContainer_1mh8t_1",qbe="_authProviderRow_1mh8t_5",Hbe="_jwksUrlColumnContent_1mh8t_11",Vbe="_jwksUrlCopyButton_1mh8t_29",Wbe="_actionsColumn_1mh8t_34",Gbe="_headerSection_1mh8t_38",Kbe="_imageContainer_1mh8t_42",Qbe="_emptyStateActions_1mh8t_56",Ybe="_widget_1mh8t_64",Yr={emptyStateContainer:zbe,authProviderRow:qbe,jwksUrlColumnContent:Hbe,jwksUrlCopyButton:Vbe,actionsColumn:Wbe,headerSection:Gbe,imageContainer:Kbe,emptyStateActions:Qbe,widget:Ybe},Jbe=({jwks:t})=>{const{trackUiInteraction:s}=P(),n=Vpe(t.project_id),{confirm:r}=Ve(),a=m.useMemo(()=>[{items:[{label:"Remove Provider",async onClick(){s("neon_authorize_remove_provider_shown"),await r({header:"Delete Provider",text:e.jsx(X,{appearance:"warning",children:"Are you sure you want to remove this provider?"}),confirmButtonText:"Confirm"})?(s("neon_authorize_remove_provider_confirmed"),n.mutate(t.id,{onSuccess:()=>{oe("Removed the provider successfully")},onError:()=>{Ye("Failed to remove the provider")}})):s("neon_authorize_remove_provider_dismissed")}}]}],[t,n,r,s]);return e.jsx(Yt,{sections:a,placement:"bottom",children:e.jsx(ms,{"aria-label":"Provider actions"})})},Zbe=({handleOpenCreateForm:t})=>{const{colorScheme:s}=oo(),n=s==="light"?Fbe:Ube;return e.jsxs("div",{className:Yr.emptyStateContainer,children:[e.jsx("div",{className:Yr.headerSection,children:e.jsxs(Iu,{children:["Add your authentication provider to serve as the authority for signing JWT tokens and secure your REST API with JWT validation."," ",e.jsx(R,{openInNewTab:!0,href:$L,icon:"external_link",children:"Learn more"})]})}),e.jsx("div",{className:Yr.imageContainer,children:e.jsx("img",{src:n,alt:"Neon RLS Diagram"})}),e.jsx("div",{className:Yr.emptyStateActions,children:e.jsx(E,{onClick:t,size:"l",children:"Set up authentication provider"})})]})},Xbe=({jwks:t})=>{const{trackUiInteraction:s}=P();return[...t.map(a=>({...a,...Pbe(a.provider_name)}))].sort((a,o)=>{const i=new Date(a.created_at);return new Date(o.created_at).getTime()-i.getTime()}).map(a=>e.jsx(Si,{className:Yr.widget,title:e.jsx(z,{name:a.provider_name==="stack"?"neon":a.icon,size:30,title:a.label}),links:e.jsxs("div",{className:Yr.actionsColumn,children:[a.provider_name==="stack"&&e.jsx(R,{href:"https://neon.com/docs/neon-auth/overview",openInNewTab:!0,icon:"external_link",children:"Neon Auth Overview"}),e.jsx(Jbe,{jwks:a})]}),footer:e.jsx(zt,{label:"Created on",children:fe(a.created_at)}),children:e.jsxs("div",{className:Yr.authProviderRow,children:[e.jsxs("div",{className:Yr.jwksUrlColumnContent,children:[e.jsx(zt,{label:"JKWS URL",title:a.jwks_url,children:a.jwks_url}),e.jsx(hl,{onCopy:()=>s("neon_authorize_copy_jwks_url_clicked"),className:Yr.jwksUrlCopyButton,text:a.jwks_url})]}),a.jwt_audience&&e.jsx(zt,{label:e.jsxs(e.Fragment,{children:["JWT Audience"," ",e.jsxs(Bs,{children:[e.jsxs("p",{children:["Only JWTs with the ",e.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),e.jsx("br",{}),e.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),"aria-label":"Actions",children:a.jwt_audience})]})},a.id))},nN=()=>{const{trackUiInteraction:t}=P(),[s,n]=m.useState(void 0),r=Ss({mode:"onSubmit"}),{reset:a}=r,{projectId:o}=F(),{data:i,status:c}=yj(o),l=Hpe(o),{fetch:d}=Pi(),u=(i==null?void 0:i.jwks.length)===0,p=m.useCallback(_=>{l.mutate(_,{onSuccess:()=>{u?n(void 0):(n(void 0),oe("Authentication provider configured")),a(),d()},onError:b=>{var j,v;const x="Failed to set up authentication provider";Xr(b)&&((v=(j=b.response)==null?void 0:j.data)!=null&&v.message)?Ye(`${x}: ${b.response.data.message}`):Ye(x)}})},[l,u,d,a]);let h,g;switch(c){case"error":h=e.jsx("div",{children:"Failed to load JWKS — please refresh or contact us if this persists."});break;case"pending":h=e.jsx(B,{height:12,width:80});break;case"success":u?h=e.jsx(Zbe,{handleOpenCreateForm:()=>{t("neon_authorize_empty_state_add_provider_clicked"),n({modal:"add-jwks-modal"})}}):h=e.jsx(Xbe,{jwks:i.jwks});break}let f=null;return(s==null?void 0:s.modal)==="add-jwks-modal"&&(f=e.jsx(Dbe,{isOpen:!0,createJwksRequestStatus:l.status,handleCreate:p,onRequestClose:()=>n(void 0)})),e.jsxs(Le,{id:"authentication-providers",children:[e.jsx(Se,{actions:g,children:"Authentication providers"}),e.jsxs(Jt,{...r,children:[h,f]})]})},Vt={title:"Build your first app",description:e.jsx(T,{children:"Follow the steps to have a working app in seconds."}),steps:{cloneTemplate:{title:"Clone the template",description:"Clone our official template."},placeEnvFile:{title:"Place your .env file",description:"Place your .env file in the root of the project."},migrateSchema:{title:"Migrate the database schema",description:"Migrate the database schema with the button below or run the command manually in your terminal."},grantAccess:{title:"Grant public schema access to authenticated users",description:"Grant access to the public schema for authenticated and anonymous users."},runApp:{title:"Run the app",description:e.jsxs(T,{children:["Run the app and access it at"," ",e.jsx(Ge,{href:"http://localhost:5173",openInNewTab:!0,children:"http://localhost:5173"}),"."]})}},buttons:{copyEnv:"Copy .env",migrate:"Migrate",migrating:"Migrating...",showSql:"Show SQL",hideSql:"Hide SQL",applyGrants:"Apply grants",applying:"Applying..."}},exe="_fit_1raca_14",txe="_step_1raca_1",sxe="_migrateButton_1raca_24",Rs={fit:exe,step:txe,migrateButton:sxe},nxe="git clone https://github.com/neondatabase-labs/neon-data-api-neon-auth.git",rxe=()=>e.jsxs("div",{className:Rs.step,children:[e.jsx(T,{children:Vt.steps.cloneTemplate.description}),e.jsx(rn,{mode:"nix",className:Rs.fit,children:nxe})]}),b_=(t,s,n)=>`# Data API
VITE_NEON_DATA_API_URL=${t}

# Auth
VITE_PUBLIC_STACK_PROJECT_ID=${s??"<generated-when-you-copy-the-snippet>"}
VITE_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY=${n??"<generated-when-you-copy-the-snippet>"}`,axe=({dataApiUrl:t})=>{const{projectId:s}=F(),{mutateAsync:n}=Jx(),[r,a]=m.useState(null),o=async()=>{try{const i=await n({project_id:s,auth_provider:"stack"});return a({authProjectId:i.auth_provider_project_id,pubClientKey:i.pub_client_key}),b_(t,i.auth_provider_project_id,i.pub_client_key)}catch(i){const c=Nt(i);return Ye(`Failed to generate SDK keys: ${c}`),b_(t)}};return e.jsxs("div",{className:Rs.step,children:[e.jsx(T,{children:Vt.steps.placeEnvFile.description}),e.jsx(rn,{mode:"nix",className:Rs.fit,copy:!1,leftActionBarItems:e.jsx(zC,{title:Vt.buttons.copyEnv,getValue:o}),children:b_(t,r==null?void 0:r.authProjectId,r==null?void 0:r.pubClientKey)})]})},n1=`CREATE TABLE "notes" (
  "id" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,
  "owner_id" text DEFAULT auth.user_id() NOT NULL,
  "title" text DEFAULT 'untitled note' NOT NULL,
  "created_at" timestamp with time zone DEFAULT now(),
  "updated_at" timestamp with time zone DEFAULT now(),
  "shared" boolean DEFAULT false
);
--> statement-breakpoint
ALTER TABLE "notes" ENABLE ROW LEVEL SECURITY;
--> statement-breakpoint
CREATE TABLE "paragraphs" (
  "id" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,
  "note_id" uuid,
  "content" text NOT NULL,
  "created_at" timestamp with time zone DEFAULT now()
);
--> statement-breakpoint
ALTER TABLE "paragraphs" ENABLE ROW LEVEL SECURITY;
--> statement-breakpoint
ALTER TABLE "paragraphs" ADD CONSTRAINT "paragraphs_note_id_notes_id_fk" FOREIGN KEY ("note_id") REFERENCES "public"."notes"("id") ON DELETE no action ON UPDATE no action;
--> statement-breakpoint
CREATE INDEX "owner_idx" ON "notes" USING btree ("owner_id");
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-select" ON "notes" AS PERMISSIVE FOR SELECT TO "authenticated" USING ((select auth.user_id() = "notes"."owner_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-insert" ON "notes" AS PERMISSIVE FOR INSERT TO "authenticated" WITH CHECK ((select auth.user_id() = "notes"."owner_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-update" ON "notes" AS PERMISSIVE FOR UPDATE TO "authenticated" USING ((select auth.user_id() = "notes"."owner_id")) WITH CHECK ((select auth.user_id() = "notes"."owner_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-delete" ON "notes" AS PERMISSIVE FOR DELETE TO "authenticated" USING ((select auth.user_id() = "notes"."owner_id"));
--> statement-breakpoint
CREATE POLICY "shared_policy" ON "notes" AS PERMISSIVE FOR SELECT TO "authenticated" USING ("notes"."shared" = true);
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-select" ON "paragraphs" AS PERMISSIVE FOR SELECT TO "authenticated" USING ((select notes.owner_id = auth.user_id() from notes where notes.id = "paragraphs"."note_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-insert" ON "paragraphs" AS PERMISSIVE FOR INSERT TO "authenticated" WITH CHECK ((select notes.owner_id = auth.user_id() from notes where notes.id = "paragraphs"."note_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-update" ON "paragraphs" AS PERMISSIVE FOR UPDATE TO "authenticated" USING ((select notes.owner_id = auth.user_id() from notes where notes.id = "paragraphs"."note_id")) WITH CHECK ((select notes.owner_id = auth.user_id() from notes where notes.id = "paragraphs"."note_id"));
--> statement-breakpoint
CREATE POLICY "crud-authenticated-policy-delete" ON "paragraphs" AS PERMISSIVE FOR DELETE TO "authenticated" USING ((select notes.owner_id = auth.user_id() from notes where notes.id = "paragraphs"."note_id"));
--> statement-breakpoint
CREATE POLICY "shared_policy" ON "paragraphs" AS PERMISSIVE FOR SELECT TO "authenticated" USING ((select notes.shared from notes where notes.id = "paragraphs"."note_id"));
`,oxe=()=>{const{branch:t}=at(),[s,n]=m.useState(!1),[r,a]=m.useState(!1),o=Cl({connectionParams:{branchId:t==null?void 0:t.id}}),i=async()=>{if(!o){Ye("Missing connection data");return}a(!0);try{const l=n1.split("--> statement-breakpoint").map(p=>p.trim()).filter(p=>p.length>0),{neon:d}=await nn(async()=>{const{neon:p}=await import("./QueryResultTable-DdioCeyV.js").then(h=>h.aD);return{neon:p}},__vite__mapDeps([3,1,4,5,6,7,8,9,10,11,12,13])),u=d(o);for(const p of l)await u(p);oe("Migration completed successfully")}catch(l){const d=Nt(l);Ye(`Migration failed: ${d}`)}finally{a(!1)}},c=()=>{n(!s)};return e.jsxs("div",{className:Rs.step,children:[e.jsx(T,{children:Vt.steps.migrateSchema.description}),e.jsx(rn,{mode:"sql",className:Rs.fit,copy:!1,leftActionBarItems:e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:Rs.migrateButton,type:"button",onClick:i,disabled:r,children:[e.jsx(z,{name:"play",size:16}),r?Vt.buttons.migrating:Vt.buttons.migrate]}),e.jsxs("button",{className:Rs.migrateButton,type:"button",onClick:c,children:[e.jsx(z,{name:s?"eye_hide":"eye",size:16}),s?Vt.buttons.hideSql:Vt.buttons.showSql]})]}),children:s?n1:"bun run db:migrate"})]})},r1=`GRANT SELECT, UPDATE, INSERT, DELETE ON ALL TABLES IN SCHEMA public TO authenticated;
GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO authenticated;
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA public TO authenticated;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, UPDATE, INSERT, DELETE ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT EXECUTE ON FUNCTIONS TO authenticated;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO anonymous;
GRANT USAGE ON SCHEMA public TO authenticated, anonymous;`,ixe=()=>{const{branch:t}=at(),[s,n]=m.useState(!1),r=Cl({connectionParams:{branchId:t==null?void 0:t.id}}),a=async()=>{if(!r){Ye("Missing connection data");return}n(!0);try{const o=r1.split(";").map(l=>l.trim()).filter(l=>l.length>0),{neon:i}=await nn(async()=>{const{neon:l}=await import("./QueryResultTable-DdioCeyV.js").then(d=>d.aD);return{neon:l}},__vite__mapDeps([3,1,4,5,6,7,8,9,10,11,12,13])),c=i(r);for(const l of o)await c(l);oe("Grants applied successfully")}catch(o){const i=Nt(o);Ye(`Failed to apply grants: ${i}`)}finally{n(!1)}};return e.jsxs("div",{className:Rs.step,children:[e.jsx(T,{children:Vt.steps.grantAccess.description}),e.jsx(rn,{mode:"sql",className:Rs.fit,copy:!1,leftActionBarItems:e.jsxs("button",{className:Rs.migrateButton,type:"button",onClick:a,disabled:s,children:[e.jsx(z,{name:"play",size:16}),s?Vt.buttons.applying:Vt.buttons.applyGrants]}),children:r1})]})},cxe=()=>e.jsxs("div",{className:Rs.step,children:[Vt.steps.runApp.description,e.jsx(rn,{mode:"nix",className:Rs.fit,children:"bun run dev"})]}),lxe=({dataApiUrl:t})=>e.jsx(sa,{title:Vt.title,description:Vt.description,children:e.jsx(wbe,{steps:[{id:"1",title:Vt.steps.cloneTemplate.title,content:e.jsx(rxe,{})},{id:"2",title:Vt.steps.placeEnvFile.title,content:e.jsx(axe,{dataApiUrl:t})},{id:"3",title:Vt.steps.migrateSchema.title,content:e.jsx(oxe,{})},{id:"4",title:Vt.steps.grantAccess.title,content:e.jsx(ixe,{})},{id:"5",title:Vt.steps.runApp.title,content:e.jsx(cxe,{})}]})}),Sd={title:"Data API",description:"Access your database through auto-generated REST API endpoints.",urlTitle:"REST API Endpoint",urlDescription:"Provides read-write access to tables without Row Level Security enabled.",footer:e.jsxs(T,{children:["To read and write data with the Data API, set up"," ",e.jsx(Ge,{href:"https://neon.com/docs/guides/neon-auth",openInNewTab:!0,children:"authentication"})," ","and RLS policies."," ",e.jsx(Ge,{href:x0,openInNewTab:!0,children:"Learn more"})]})},dxe="_field_urd9z_1",uxe="_appUrlSection_urd9z_5",hxe="_appUrl_urd9z_5",x_={field:dxe,appUrlSection:uxe,appUrl:hxe},pxe=({url:t,projectId:s,branchId:n,databaseName:r})=>{const a=ge("data_api_enable_subzero"),o=_e({mutationFn:()=>G.refreshSchemaCacheDataApi(s,n,r),onSuccess:()=>{Ue(e.jsx(rt,{children:"Schema cache refreshed successfully"}))},onError:()=>{Ue(e.jsx(ro,{children:"Failed to refresh schema cache"}))}}),i=()=>{o.mutate()};return e.jsxs(sa,{title:Sd.title,description:Sd.description,children:[e.jsxs("section",{children:[e.jsx(Z,{level:6,className:x_.field,children:e.jsx(T,{appearance:"secondary",children:Sd.urlTitle})}),e.jsxs("div",{className:x_.appUrlSection,children:[e.jsx(Ms,{className:x_.appUrl,children:t}),e.jsx(T,{appearance:"tertiary",size:"s",children:Sd.urlDescription})]})]}),e.jsx(T,{children:Sd.footer}),a&&e.jsxs("section",{children:[e.jsx(E,{onClick:i,disabled:o.isPending,size:"s",variant:"secondary",children:o.isPending?"Refreshing...":"Refresh schema cache"}),e.jsx(T,{appearance:"tertiary",size:"s",style:{marginTop:"8px"},children:"If you have made changes to the database schema, you can refresh the schema cache to apply them immediately."})]})]})},mxe="_wrapper_jvaxz_1",a1={wrapper:mxe},rN=({tooltip:t,tooltipDisabled:s,children:n,...r})=>e.jsx("div",{className:a1.wrapper,children:e.jsx(te,{content:t,disabled:s,children:e.jsx("div",{className:a1.wrapper,children:e.jsx(E,{...r,children:n})})})}),aN=t=>{const{org:s,isLoading:n}=re(),{isOrgAdmin:r,isLoading:a}=Rt(),{isCollaborator:o,isLoading:i}=pl(t),c=n||i||a;return c?{isAllowedToManage:!1,isLoading:c}:o?{isAllowedToManage:!1,isCollaborator:!0,isLoading:c}:s?{isAllowedToManage:r,isLoading:c}:{isAllowedToManage:!0,isLoading:c}},lu={title:"Disable",description:"Disables the Data API for this branch. This will immediately terminate all active connections and block access to data for any apps, websites, or services using the API.",successToast:"Data API has been disabled",disableNotAllowedSharedProject:"You cannot disable the Data API on shared projects. Contact the Project owner for help.",disableNotAllowed:"You need additional permissions to disable the Data API. Contact your Organization Admin for help."},gxe=({isLoading:t,isAllowedToManage:s,isCollaborator:n})=>t||s?null:n?lu.disableNotAllowedSharedProject:lu.disableNotAllowed,fxe=({projectId:t,branchId:s,databaseName:n})=>{const{isAllowedToManage:r,isCollaborator:a,isLoading:o}=aN(t),{mutate:i,isPending:c}=cbe({projectId:t,branchId:s,databaseName:n},{onSuccess:()=>{oe(lu.successToast)},onError:l=>{Y(l)}});return e.jsx(sa,{title:lu.title,description:lu.description,children:e.jsx(rN,{appearance:"danger",tooltip:gxe({isLoading:o,isAllowedToManage:r,isCollaborator:a})??void 0,tooltipDisabled:o||r,disabled:o||!r,onClick:()=>{i()},loading:c,children:"Disable"})})},_xe=`
-- For existing tables
GRANT SELECT, UPDATE, INSERT, DELETE ON ALL TABLES IN SCHEMA public TO authenticated;

-- For future tables
ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT SELECT, UPDATE, INSERT, DELETE ON TABLES TO authenticated;

-- For sequences (for identity columns)
GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO authenticated;

-- Schema usage
GRANT USAGE ON SCHEMA public TO authenticated;
`,Gr={title:"Enable",description:e.jsxs(T,{children:["Enable the ",e.jsx("b",{children:"Data API"})," to instantly create a REST API for your database.",e.jsx("br",{}),"Query tables, views, and functions using standard HTTP requests without writing any backend code."," ",e.jsx(Ge,{href:x0,openInNewTab:!0,children:"Learn more"})]}),authProviderInfo:e.jsxs(T,{children:["Your auth provider manages sign‑up, login, and account access for the Data API.",e.jsx("br",{}),"It issues the JWTs required for API requests. Neon Auth is selected by default."]}),successToast:"Data API has been enabled",installNotAllowedSharedProject:"You cannot install the Data API on shared projects. Contact the Project Admin for help.",installNotAllowedTTLBranch:"You cannot install the Data API on a branch with an expiration date.",installNotAllowed:"You need additional permissions to install the Data API. Contact your Organization Admin for help.",grantPublicSchemaTitle:"Grant public schema access to authenticated users",grantPublicSchemaDescription:e.jsxs(T,{children:[e.jsxs("p",{children:["Applies"," ",e.jsx(te,{placement:"bottom-start",content:e.jsx(Ms,{children:_xe}),maxWidth:800,children:e.jsx("b",{children:"GRANTs"})})," ","so authenticated users can read and write to tables in the public schema."]}),e.jsx("p",{children:"Once enabled, add Row-Level Security (RLS) policies to define which rows they can access."})]})},bxe="_authProviderTypeSelect_19l6m_1",xxe={authProviderTypeSelect:bxe},jxe=Et({relname:nt(),relrowsecurity:_i()}),vxe={neon_auth:{value:"neon_auth",label:"Neon Auth",disabled:!1},external:{value:"external",label:"Other Provider",disabled:!1},skip:{value:"skip",label:"Skip (setup later)",disabled:!1}},yxe=({isLoading:t,isAllowedToManage:s,isCollaborator:n,isTTLBranch:r})=>r?Gr.installNotAllowedTTLBranch:t||s?null:n?Gr.installNotAllowedSharedProject:Gr.installNotAllowed,wxe=()=>{const t=Wu(),{projectId:s}=F();return ca({queryKey:{key:["get_public_tables",(t==null?void 0:t.database.name)??"",s,(t==null?void 0:t.database.branch_id)??""],appendConnectionString:!1},query:`
SELECT
  relname,
  relrowsecurity
FROM
  pg_class
JOIN
  pg_catalog.pg_namespace n ON n.oid = pg_class.relnamespace
WHERE
  n.nspname = 'public'
  AND relkind = 'r';
    `,zodSchema:jxe,options:{enabled:!!t,staleTime:2*Mu,placeholderData:LL},connectionParams:{branchId:t==null?void 0:t.database.branch_id,dbName:t==null?void 0:t.database.name}})},Sxe=({value:t,options:s,onChange:n,error:r,className:a})=>e.jsx(U,{label:"Authentication provider",error:r,className:a,children:e.jsx(ct,{value:t,onChange:o=>n(o??"neon_auth"),options:s})}),Cxe=({selected:t,onToggle:s,title:n,description:r})=>e.jsxs(e.Fragment,{children:[e.jsx(as,{isSelected:t,onChange:s,children:n}),r]}),kxe=({tooltip:t,tooltipDisabled:s,disabled:n,loading:r,onClick:a,children:o})=>e.jsx(rN,{tooltip:t,tooltipDisabled:s,disabled:n,onClick:a,loading:r,children:o}),Ixe=({branch:t,databaseName:s})=>{var W;const n=ge("data_api_enable_subzero"),[r,a]=m.useState("neon_auth"),[o,i]=m.useState(!1),{trackUiInteraction:c}=P(),{isAllowedToManage:l,isCollaborator:d,isLoading:u}=aN(t.project_id),{projectId:p}=F(),{data:h,isLoading:g}=yj(p),{data:f=[],isLoading:_}=wxe(),x=Cl({connectionParams:{branchId:t.id,dbName:s}})!==null,j=(h==null?void 0:h.jwks.length)??0,v=m.useMemo(()=>{const $=vxe,M=j>0?`Use existing (${j} JWKS)`:"Skip (setup later)";return[$.neon_auth,$.external,{...$.skip,label:M,disabled:j===0&&!n}]},[j,n]),y=Ss({defaultValues:{authProviderType:"neon_auth",providerName:"",jwksUrl:"",expectedAudience:""},mode:"onChange"}),{mutate:S,isPending:w}=lbe({projectId:t.project_id,branchId:t.id,databaseName:s},{onSuccess:()=>{oe(Gr.successToast)}}),k=f.length>0,N=f.every($=>$.relrowsecurity),D=!k||k&&N;if(m.useEffect(()=>{i(!!D)},[D]),g||u||w||!x||_)return e.jsx(ve,{});const H=!!t.expires_at;return e.jsx(Jt,{...y,children:e.jsxs(sa,{title:Gr.title,description:Gr.description,children:[e.jsx(Sxe,{value:r,onChange:a,options:v,error:(W=y.formState.errors.authProviderType)==null?void 0:W.message,className:xxe.authProviderTypeSelect}),Gr.authProviderInfo,r==="external"&&e.jsx(sN,{}),e.jsx(Cxe,{selected:o,onToggle:()=>i($=>!$),title:Gr.grantPublicSchemaTitle,description:Gr.grantPublicSchemaDescription}),e.jsx(kxe,{tooltip:yxe({isLoading:u,isAllowedToManage:l,isCollaborator:d,isTTLBranch:H})??void 0,tooltipDisabled:u||l&&!H,disabled:u||!l||H,loading:w,onClick:()=>{c("data_api_enable");const $=y.getValues();S({authProviderType:r==="skip"?void 0:r,providerName:$.providerName,jwksUrl:$.jwksUrl,expectedAudience:$.expectedAudience,grantPublicSchema:o})},children:"Enable"})]})})},o1={title:"Working with the Data API",description:e.jsxs(T,{children:["To build apps that use the Data API, configure authentication for your users and"," ",e.jsx(Ge,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",openInNewTab:!0,children:"Row-Level Security in Postgres"}),"."]})},Pxe="_stepList_1dz6t_1",Txe={stepList:Pxe},Axe="_root_1f463_1",Nxe="_header_1f463_7",Exe="_headerTitle_1f463_12",Oxe="_headerAction_1f463_18",$xe="_stepCompletedIcon_1f463_24",Lxe="_content_1f463_28",Na={root:Axe,header:Nxe,headerTitle:Exe,headerAction:Oxe,stepCompletedIcon:$xe,content:Lxe},Ib=({title:t,description:s,status:n="pending",action:r,children:a})=>e.jsxs("div",{className:Na.root,children:[n==="pending"?e.jsx(z,{name:"empty_task",size:20}):e.jsx(z,{name:"check_circle_inverted2",size:20,className:Na.stepCompletedIcon}),e.jsxs("div",{className:Na.content,children:[e.jsxs("header",{className:Na.header,children:[e.jsxs("div",{className:Na.headerTitle,children:[e.jsx(Z,{level:6,children:t}),e.jsx(T,{children:s})]}),e.jsx("div",{className:Na.headerAction,children:r})]}),e.jsx("div",{children:a})]})]}),oN=()=>e.jsxs("div",{className:Na.root,children:[e.jsx(B,{width:20,height:20}),e.jsxs("div",{className:Na.content,children:[e.jsx(B,{height:20,width:120}),e.jsx(B,{height:20,width:"100%"})]})]}),_p={title:"Configure Neon Auth",description:"Authentication for your application's users whose actions will access the Data API. This will be used to set up your access policies.",completed:{title:"Neon Auth is ready",description:"Get your authentication keys from the Neon Auth config and add them to your app."}},Rxe=()=>{const t=F(),{data:s,isLoading:n}=Ni(t.projectId);if(n)return e.jsx(oN,{});const r=s==null?void 0:s.some(a=>a.auth_provider==="stack");return e.jsx(Ib,{title:r?_p.completed.title:_p.title,description:r?_p.completed.description:_p.description,status:r?"completed":"pending",action:e.jsx(E,{appearance:"secondary",as:Ge,href:Q(C.ProjectsItemIdentity,{projectId:t.projectId}),icon:"settings",children:"Configure"})})},zo={title:"Protect your data",description:e.jsxs(e.Fragment,{children:["Protect all your tables with"," ",e.jsx(Ge,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",openInNewTab:!0,children:"Row-Level Security"}),"."]}),descriptionNoTables:e.jsxs(e.Fragment,{children:["There are no tables in your project yet. When you create tables, be sure to enable"," ",e.jsx(Ge,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",openInNewTab:!0,children:"Row-Level Security"})," ","to protect your data."]}),warning:t=>{const s=t.length,n=t.map(r=>r.relname).join(", ");return e.jsx("div",{style:{display:"inline"},children:e.jsxs(T,{children:[n," ",Rn("is",s)," publicly accessible to anyone with the project URL because RLS is not enabled."]})})},completed:{title:"Data is protected",description:e.jsxs(e.Fragment,{children:["All of your tables are protected with"," ",e.jsx(Ge,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",openInNewTab:!0,children:"Row-Level Security"}),"."]})}},Mxe=Et({relname:nt(),relrowsecurity:_i()}),Bxe=()=>{const t=Wu(),{projectId:s}=F();return ca({queryKey:{key:["get_public_tables",(t==null?void 0:t.database.name)??"",s,(t==null?void 0:t.database.branch_id)??""],appendConnectionString:!1},query:`
SELECT
  relname,
  relrowsecurity
FROM
  pg_class
JOIN
  pg_catalog.pg_namespace n ON n.oid = pg_class.relnamespace
WHERE
  n.nspname = 'public'
  AND relkind = 'r';
    `,zodSchema:Mxe,options:{enabled:!!t,staleTime:2*Mu},connectionParams:{branchId:t==null?void 0:t.database.branch_id,dbName:t==null?void 0:t.database.name}})},Dxe=()=>{const{data:t,isLoading:s}=Bxe();if(s||!t)return e.jsx(oN,{});if(t.length===0)return e.jsx(Ib,{title:zo.title,description:zo.descriptionNoTables,status:"pending"});const n=t.filter(a=>!a.relrowsecurity),r=n.length===0;return e.jsx(Ib,{title:r?zo.completed.title:zo.title,description:r?zo.completed.description:zo.description,status:r?"completed":"pending",children:n.length>0&&e.jsx(X,{appearance:"warning",children:zo.warning(n)})})},Uxe=()=>e.jsx(sa,{title:o1.title,description:o1.description,children:e.jsxs("div",{className:Txe.stepList,children:[e.jsx(Rxe,{}),e.jsx(Dxe,{})]})});Et({tab:yx(["api","policies","configuration"]).optional().catch(void 0)});const Fxe=()=>{const t="tab",[s,n]=Un(t);return{currentTab:s??"api",setCurrentTab:n}},zxe=t=>{const s=[{label:"API",value:"api"}];return t&&s.push({label:"Build your first app",value:"build-your-first-app"}),s.push({label:"Configuration",value:"configuration"}),s},qxe=({currentTab:t,url:s,branch:n,databaseName:r})=>{switch(t){case"api":return e.jsxs(e.Fragment,{children:[e.jsx(pxe,{url:s,projectId:n.project_id,branchId:n.id,databaseName:r},"enabled"),e.jsx(Uxe,{})]});case"configuration":return e.jsxs(e.Fragment,{children:[e.jsx(nN,{}),e.jsx(fxe,{projectId:n.project_id,branchId:n.id,databaseName:r})]});case"build-your-first-app":return e.jsx(lxe,{dataApiUrl:s});default:return null}},Hxe=({databaseName:t})=>{const{branch:s}=at(),{projectId:n}=F(),{url:r,isLoading:a}=ibe((s==null?void 0:s.project_id)??"",(s==null?void 0:s.id)??"",t??""),{currentTab:o,setCurrentTab:i}=Fxe(),{data:c,isLoading:l}=Ni(n),d=(c==null?void 0:c.some(p=>p.auth_provider==="stack"))??!1,u=m.useMemo(()=>zxe(d),[d]);return!s||a||l?e.jsx(ve,{}):e.jsx(e.Fragment,{children:r?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsx(qn,{options:u,value:o,onChange:p=>i(p)}),e.jsx(qxe,{currentTab:o,url:r,branch:s,databaseName:t})]}):e.jsx(Ixe,{branch:s,databaseName:t},"disabled")})},Vxe=({databaseName:t})=>{var a,o;const{project:s,isLoading:n}=F();return n?e.jsx(ve,{}):(((o=(a=s==null?void 0:s.settings)==null?void 0:a.allowed_ips)==null?void 0:o.ips)??[]).length>0?e.jsx(X,{appearance:"warning",children:e.jsx("p",{children:"Data API is not supported for projects with IP allow list"})}):e.jsx(Hxe,{databaseName:t})},Wxe="_header_1gf0r_1",Gxe="_beta_badge_1gf0r_5",iN={header:Wxe,beta_badge:Gxe},Kxe=e.jsxs(e.Fragment,{children:["Data API",e.jsx(Ie,{appearance:"experimental",size:"s",margin:"left",className:iN.beta_badge,children:"Beta"})]}),Qxe=()=>{const[t,s]=m.useState(),{selectOptions:n}=un(),r=n.find(o=>o.value===t),a=n.length>1;return m.useEffect(()=>{!a&&n.length===1&&!t&&s(n[0].value)},[a,n,t]),e.jsxs(e.Fragment,{children:[e.jsx(Tl,{title:Kxe,className:iN.header,actions:a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Database:"}),e.jsx(Rm,{"data-qa":"data_api_database_select",value:r,canCreateDatabase:!1,onChange:o=>{o&&s(o.value)}})]})}),e.jsx("div",{children:t&&e.jsx(Vxe,{databaseName:t})})]})},Yxe="_container_wonxm_1",Jxe="_poster_wonxm_7",Zxe="_content_wonxm_13",Xxe="_buttons_wonxm_22",bp={container:Yxe,poster:Jxe,content:Zxe,buttons:Xxe},cN=t=>{const{org:s,isLoading:n}=re(),{isOrgAdmin:r,isLoading:a}=Rt(),{isCollaborator:o,isLoading:i}=pl(t),c=n||i||a;return c?{canManageIntegration:!1,isLoading:c}:o?{canManageIntegration:!1,isCollaborator:!0,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},Mc={installNeonAuthOnSharedProjectNotAllowed:"You cannot install Neon Auth on shared projects. Contact the Project Admin for help.",manageNeonAuthOnSharedProjectNotAllowed:"You cannot manage Neon Auth on shared projects. Contact the Project Admin for help.",installNeonAuthNotAllowed:"You need additional permissions to install Neon Auth. Contact your Organization Admin for help.",manageNeonAuthNotAllowed:"You need additional permissions to manage Neon Auth. Contact your Organization Admin for help.",getInstallNeonAuthReason:({isLoading:t,canManageIntegration:s,isCollaborator:n})=>{if(!(t||s))return n?Mc.installNeonAuthOnSharedProjectNotAllowed:Mc.installNeonAuthNotAllowed},getManageNeonAuthReason:({isLoading:t,canManageIntegration:s,isCollaborator:n})=>{if(!(t||s))return n?Mc.manageNeonAuthOnSharedProjectNotAllowed:Mc.manageNeonAuthNotAllowed}},i1=`The ${eg} schema already exists in your database. Please drop it before setting up the Neon Auth integration.`,eje=t=>{const{mutate:s,isPending:n}=xT(),{refetch:r}=Ni(t),{trackUiInteraction:a}=P(),{defaultBranch:o}=xt(),[i]=Sl(),{mutate:c}=Jx(),{data:l}=ul({branchId:o==null?void 0:o.id,projectId:t});let d;o&&(d=l.list.find(h=>h.name===i),d||(d=l.list.find(h=>h.branch_id===o.id)));const u=m.useCallback(h=>{if(!o||!d)return;a("neon_identity_empty_state_connect_provider_clicked",{provider:h,provisioningMode:"MANUAL"});const g=cD();g.onmessage=_=>{if(!lD(_))return;const b={autoClose:3e3},{data:x}=_.data;if(x.status==="error"){let{errorMessage:j}=x;Dw(j)&&(j=i1),Ye(Kc(j),b),a("neon_identity_integration_added_error_callback",{provider:h,provisioningMode:"MANUAL"})}else a("neon_identity_integration_added_success_callback",{provider:h,provisioningMode:"MANUAL"}),r(),c({project_id:t,auth_provider:h}),dD()};const f={project_id:t,auth_provider:h,database_name:d.name,role_name:d.owner_name,branch_id:o.id};ak({url:iD.init(f)})},[r,o,d,t,a,c]),p=m.useCallback(h=>{!o||!d||(a("neon_identity_empty_state_connect_provider_clicked",{provider:h,provisioningMode:"AUTO"}),s({project_id:t,auth_provider:h,database_name:d.name,branch_id:o.id},{onSuccess:()=>{a("neon_identity_integration_added_success_callback",{provider:h,provisioningMode:"AUTO"}),c({project_id:t,auth_provider:h})},onError:g=>{const _=Nt(g,"Failed to provision Stack Auth");a("neon_identity_integration_added_error_callback",{provider:h,provisioningMode:"AUTO"}),Dw(_)?Ye(i1,{autoClose:3e3}):Ye(Kc(_),{autoClose:3e3})}}))},[s,o,d,t,a,c]);return{isPending:n,autoProvisionNeonAuth:p,manualProvisionNeonAuth:u}},tje="_wrapper_4kdk8_1",sje="_buttons_4kdk8_6",nje="_flex_4kdk8_13",Cd={wrapper:tje,buttons:sje,flex:nje},rje=t=>{const{mutate:s,isPending:n}=xT(),{trackUiInteraction:r}=P(),{branch:a}=at(),{defaultBranch:o}=xt(),i=a??o,{data:c}=ul({branchId:i==null?void 0:i.id,projectId:t}),l=m.useMemo(()=>c.list.find(u=>u.branch_id===(i==null?void 0:i.id)),[i,c]),d=m.useCallback(()=>{const u="better_auth";!i||!l||(r("neon_identity_empty_state_connect_provider_clicked",{provider:u,provisioningMode:"AUTO"}),s({project_id:t,auth_provider:u,database_name:l.name,branch_id:i.id},{onSuccess:()=>{r("neon_identity_integration_added_success_callback",{provider:u,provisioningMode:"AUTO"})},onError:p=>{const g=Nt(p,"Failed to provision Better Auth");r("neon_identity_integration_added_error_callback",{provider:u,provisioningMode:"AUTO"}),Ye(Kc(g),{autoClose:3e3})}}))},[s,i,l,t,r]);return{isPending:n,autoProvisionBetterAuth:d}},aje=!1,oje=()=>{const{projectId:t}=F(),{canManageIntegration:s,isCollaborator:n,isLoading:r}=cN(t),a=ge("neon_auth_source_of_truth"),o=ge("neon_auth_better_auth"),{autoProvisionNeonAuth:i,manualProvisionNeonAuth:c,isPending:l}=eje(t),{autoProvisionBetterAuth:d}=rje(t),u=!s,p=l||r,h=aje,g=Mc.getInstallNeonAuthReason({isLoading:p,canManageIntegration:s,isCollaborator:n});return e.jsxs("div",{className:Cd.buttons,children:[e.jsxs("div",{className:Cd.flex,children:[e.jsx(te,{content:g,disabled:!u,children:e.jsx("div",{className:Cd.wrapper,children:e.jsx(E,{appearance:"primary",size:"s",onClick:()=>i("stack"),disabled:u,loading:p,children:"Enable Neon Auth"})})}),a&&e.jsx(te,{content:g,disabled:!u,children:e.jsx("div",{className:Cd.wrapper,children:e.jsx(E,{appearance:"primary",size:"s",onClick:()=>i("stack_v2"),disabled:u,loading:p,children:"Enable Neon Auth V2"})})}),o&&e.jsx(te,{content:g,disabled:!u,children:e.jsx("div",{className:Cd.wrapper,children:e.jsx(E,{appearance:"primary",size:"s",onClick:()=>d(),disabled:u,loading:p,children:"Enable Better Auth"})})})]}),e.jsxs("div",{children:[u||p?null:e.jsxs(T,{size:"s",children:["Using Stack Auth already?"," ",e.jsx(R,{onClick:()=>c("stack"),children:"Connect your project"})]}),h]})]})},ije="/assets/assets/neon-auth-dark-BVavWW27.svg",cje="/assets/assets/neon-auth-light-CuR4ekLV.svg",lje=()=>{const{colorScheme:t}=oo(),s=t==="light"?cje:ije;return e.jsxs("div",{className:bp.container,children:[e.jsx("img",{className:bp.poster,src:s,alt:"Neon Auth"}),e.jsxs("div",{className:bp.content,children:[e.jsx(Z,{level:2,children:e.jsx(gt,{id:"25rc5I",defaultMessage:[{type:0,value:"Your app's users, in your Neon database"}]})}),e.jsx(T,{align:"center",children:e.jsx(gt,{id:"b03U4I",defaultMessage:[{type:0,value:"Embed ready-made auth UI components into your app in minutes. User data lives directly in your Neon database, no syncing required."}]})})]}),e.jsx("div",{className:bp.buttons,children:e.jsx(oje,{})})]})},dje="_section_8zd5f_1",uje="_sectionContent_8zd5f_8",hje="_fieldContainer_8zd5f_14",pje="_labelContainer_8zd5f_19",mje="_label_8zd5f_19",gje="_arrayContainer_8zd5f_31",fje="_numberContainer_8zd5f_36",_je="_stringContainer_8zd5f_37",bje="_collapsible_8zd5f_43",xje="_trueIcon_8zd5f_51",jje="_booleanBadge_8zd5f_55",en={section:dje,sectionContent:uje,fieldContainer:hje,labelContainer:pje,label:mje,arrayContainer:gje,numberContainer:fje,stringContainer:_je,collapsible:bje,trueIcon:xje,booleanBadge:jje};function c1(t){const s=mt(Number(t));return s.isValid()?fe(s.toDate()):null}const lN=({value:t})=>{if(typeof t=="boolean"){let s;return t?s="check_circle_inverted2":s="clear",e.jsxs(Ie,{className:en.booleanBadge,children:[e.jsx("span",{className:V({[en.trueIcon]:t}),children:e.jsx(z,{name:s,size:16,title:t.toString()})}),e.jsx(T,{size:"s",children:t.toString()})]})}if(typeof t=="string"){if(URL.canParse(t))return e.jsx(R,{openInNewTab:!0,icon:"external_link",iconSize:"s",href:t,children:t});const n=c1(t);return e.jsxs(Iu,{className:en.stringContainer,children:[e.jsx("span",{children:t}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{children:n})]})]})}if(typeof t=="number"){const s=c1(t);return e.jsxs(Iu,{className:en.numberContainer,children:[e.jsx("span",{children:t}),s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{children:s})]})]})}return Array.isArray(t)?t.length===0?e.jsx("span",{children:"—"}):e.jsx("div",{className:en.arrayContainer,children:t.map((s,n)=>{if(s==null)return null;let r=s;return typeof s=="object"&&(r=JSON.stringify(s)),e.jsx("div",{children:e.jsx(lN,{value:r})},n)})}):e.jsx("span",{children:String(t)})},Pb=({label:t,value:s})=>s==null?null:e.jsxs("div",{className:en.fieldContainer,children:[e.jsx("div",{className:en.labelContainer,children:e.jsx(T,{size:"s",className:en.label,children:wk(t)})}),e.jsx(lN,{value:s})]}),dN=({data:t})=>t==null?null:e.jsx(e.Fragment,{children:Object.entries(t).map(([s,n])=>{if(n===null)return null;const r=n&&typeof n=="object";return e.jsx("div",{className:en.section,children:r?e.jsx(C4,{title:e.jsx(T,{size:"s",className:en.label,children:wk(s)}),iconPosition:"right",children:e.jsx("div",{className:en.collapsible,children:e.jsx(dN,{data:n})})}):e.jsx("div",{className:en.sectionContent,children:e.jsx(Pb,{label:s,value:n})})},s)})}),vje=({userRawJson:t})=>e.jsx(dN,{data:t}),yje="_drawerLayout_sl2z1_1",wje="_mainContent_sl2z1_9",Sje="_contentSection_sl2z1_13",Cje="_rawJson_sl2z1_19",kd={drawerLayout:yje,mainContent:wje,contentSection:Sje,rawJson:Cje},Pj=({projectId:t})=>{const{confirm:s}=Ve(),{mutateAsync:n}=XZ(t);return{deleteAuthUser:async a=>{if(await s({header:"Delete this User?",text:e.jsx(X,{appearance:"error",children:"Removing this user will prevent them from signing in. Are you sure you want to remove it?"}),confirmButtonText:"Delete",appearance:"danger"}))try{await n(a),oe("User deleted successfully")}catch(i){const c=Nt(i);Ye(c)}}}},uN=({providerUser:t,projectId:s,identityProviderOption:n,onCloseDrawer:r})=>{const{formatMessage:a}=hn(),{trackUiInteraction:o}=P(),{deleteAuthUser:i}=Pj({projectId:s}),[c,l]=m.useState("summary"),d=m.useCallback(async()=>{await i(t.id),r()},[i,t.id,r]);return e.jsxs(oa,{isOpen:!0,size:"l","aria-label":a({id:"2KZk9I",defaultMessage:[{type:0,value:"Neon RLS integration instructions"}]}),onRequestClose:r,children:[e.jsx(ia,{title:"User Details",subtitle:e.jsxs(Iu,{children:["View all the user details provided by"," ",e.jsx(Ij,{children:n.label}),"."]}),children:e.jsxs("div",{className:kd.drawerLayout,children:[e.jsx(as,{isSelected:c==="raw_json",onChange:u=>{const p=u?"neon_identity_user_details_raw_json_toggle_clicked":"neon_identity_user_details_summary_toggle_clicked";l(u?"raw_json":"summary"),o(p)},children:"Show raw JSON"}),e.jsxs("div",{className:kd.mainContent,children:[c==="summary"?e.jsxs("div",{className:kd.contentSection,children:[e.jsx(Pb,{label:"User ID",value:t.id}),e.jsx(Pb,{label:"Email",value:t.email}),e.jsx(vje,{userRawJson:t.raw_json})]}):e.jsx("div",{className:kd.contentSection,children:e.jsx("pre",{className:kd.rawJson,children:JSON.stringify(t.raw_json,null,2)})})," "]})]})}),e.jsxs(ux,{"space-between":!0,children:[e.jsx(E,{appearance:"danger",onClick:d,children:"Delete user"}),e.jsx(E,{appearance:"secondary",onClick:r,children:"Close"})]})]})},kje=Et({email:nt().email(),name:nt().optional().transform(t=>(t==null?void 0:t.trim())||void 0),password:nt().min(8).max(128).optional()}),hN=({authProvider:t,appearance:s})=>{var u,p,h;const{projectId:n}=F(),{mutateAsync:r,isPending:a}=rX(),[o,i]=m.useState(!1),c=Ss({defaultValues:{email:"",name:void 0},resolver:Ii(kje)});function l(){i(!1),c.reset()}const d=b0(async g=>{try{await r({project_id:n,auth_provider:t.value,email:g.email,name:g.name,password:g.password}),l()}catch(f){Ye(Nt(f))}});return e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:()=>{i(!0)},appearance:s,children:"Create user"}),e.jsxs(ps,{modalProps:{title:"Create user",isOpen:o,onRequestClose:l},providerProps:c,onSubmit:d,children:[e.jsx(De,{children:e.jsxs(Bb,{children:[e.jsx(U,{label:"Email",error:(u=c.formState.errors.email)==null?void 0:u.message,children:e.jsx(ie,{required:!0,placeholder:"email@example.com",...c.register("email")})}),t.value==="better_auth"&&e.jsx(U,{label:"Password",error:(p=c.formState.errors.name)==null?void 0:p.message,children:e.jsx(ie,{placeholder:"Password",type:"password",...c.register("password")})}),e.jsx(U,{label:"Name",error:(h=c.formState.errors.name)==null?void 0:h.message,children:e.jsx(ie,{placeholder:"Name (optional)",...c.register("name")})})]})}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{loading:a,children:"Create"})]})]})]})},j_={emptyStateTitle:"Ready for your first users",setupButtonText:"Setup instructions",noUsersText:t=>`Integrate ${t} into your application to get started`},Ije="_wrapper_1cgmk_1",Pje="_actions_1cgmk_13",l1={wrapper:Ije,actions:Pje},pN=({authProvider:t})=>e.jsxs("div",{className:l1.wrapper,children:[e.jsx(z,{name:"people",size:16}),e.jsx(T,{appearance:"primary",size:"l",children:j_.emptyStateTitle}),e.jsx(T,{appearance:"secondary",children:j_.noUsersText(t.label)}),e.jsxs("div",{className:l1.actions,children:[e.jsx(hN,{authProvider:t,appearance:"secondary"}),e.jsx(E,{as:Ge,href:j0,openInNewTab:!0,appearance:"primary",size:"s",icon:"external_link",children:j_.setupButtonText})]})]}),Tje="_dashboardUsersWrapper_4961n_1",Aje="_userNameColumn_4961n_7",mN={dashboardUsersWrapper:Tje,userNameColumn:Aje},Nje="_header_1d8l8_1",Eje="_title_1d8l8_7",Oje="_actions_1d8l8_12",v_={header:Nje,title:Eje,actions:Oje},$je=({projectId:t,totalUsersCount:s,identityIntegration:n})=>{const{trackUiInteraction:r}=P(),a=n.auth_provider,o={database:n.db_name,schema:a==="stack_v2"?ri:eg,table:a==="stack_v2"?BZ:bT},i=new URLSearchParams(o),c=s?`View all ${s} users`:"View all users";return e.jsx(R,{onClick:()=>r("neon_identity_users_sync_table_clicked"),href:`${Q(C.ProjectsItemDrizzle,{projectId:t,branchId:n.branch_id})}?${i.toString()}`,children:c})},gN=({projectId:t,totalUsersCount:s,identityIntegration:n,authProvider:r})=>e.jsxs("div",{className:v_.header,children:[e.jsx("div",{className:v_.title,children:e.jsx(T,{children:"Recent sign ups"})}),e.jsxs("div",{className:v_.actions,children:[e.jsx($je,{projectId:t,totalUsersCount:s,identityIntegration:n}),e.jsx(hN,{authProvider:r,appearance:"secondary"})]})]}),Lje=[{header:"User",accessorKey:"user",size:450,maxSize:450,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0,render:t=>e.jsxs("div",{className:mN.userNameColumn,children:[t.name,e.jsx(T,{appearance:"tertiary",children:t.email})]})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.updated_at?fe(t.updated_at):"—"})},{header:"Joined",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.created_at?fe(t.created_at):"—"})}],Rje=({identityIntegration:t})=>{var p,h,g,f,_;const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=xl(t==null?void 0:t.auth_provider),a=ZZ(),o=JZ(),{deleteAuthUser:i}=Pj({projectId:s}),[c,l]=m.useState(void 0),u=(p=be().getQueryState(ea.recentUsers(s)))==null?void 0:p.error;if((h=o.error)!=null&&h.message||u!=null&&u.message){const b=((g=o.error)==null?void 0:g.message)??(u==null?void 0:u.message)??"";return GZ(b)?e.jsx(rs,{title:e.jsx(T,{children:"Your sync table is missing"}),subtitle:e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Your"," ",e.jsx(Ibe,{children:tg})," ","table is missing. User data cannot be synced from your auth provider."]}),e.jsx("br",{}),e.jsxs(T,{children:[e.jsxs(Ij,{children:["Remove the Neon Auth"," "]})," ","integration and set it up again to fix this."]})]})}):e.jsx(rs,{title:"Error fetching users data",subtitle:b,actions:e.jsx(E,{loading:o.isRefetching,onClick:()=>o.refetch(),children:"Retry"})})}return e.jsx("div",{className:mN.dashboardUsersWrapper,children:!t||((f=o.data)==null?void 0:f.length)===0?e.jsx(pN,{authProvider:r}):e.jsxs(e.Fragment,{children:[e.jsx(gN,{identityIntegration:t,authProvider:r,projectId:s,totalUsersCount:(_=a.data)==null?void 0:_[0].count}),e.jsx(Cs,{columns:Lje,rows:o.data??[],"aria-label":"Auth Provider Users",isLoading:o.isLoading,defaultSorting:{column:"created_at",direction:"descending"},onRowClick:b=>{n("neon_identity_user_row_clicked"),l(b)},rowActions:b=>[{label:"View Details",onClick:()=>{n("neon_identity_user_row_clicked"),l(b)}},{label:"Delete",onClick:()=>{i(b.id)}}],pageSize:20}),c&&e.jsx(uN,{providerUser:c,projectId:s,identityProviderOption:r,onCloseDrawer:()=>l(void 0)})]})})},Mje="_wrapper_1mw2d_1",Bje="_error_1mw2d_7",Dje="_userNameColumn_1mw2d_14",Tb={wrapper:Mje,error:Bje,userNameColumn:Dje},Uje=[{header:"User",accessorKey:"user",size:450,maxSize:450,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0,render:t=>e.jsxs("div",{className:Tb.userNameColumn,children:[t.name,e.jsx(T,{appearance:"tertiary",children:t.email})]})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.updated_at?fe(t.updated_at):"—"})},{header:"Joined",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.created_at?fe(t.created_at):"—"})}],Fje=({identityIntegration:t})=>{var d,u;const{projectId:s}=F(),{trackUiInteraction:n}=P(),r=qZ(s,t),a=HZ(s,t),o=xl(t==null?void 0:t.auth_provider),[i,c]=m.useState(void 0),{deleteAuthUser:l}=Pj({projectId:s});if(r.error){const p=r.error.message;return e.jsx(rs,{title:e.jsx(T,{children:"Error fetching users data"}),subtitle:e.jsxs("div",{className:Tb.error,children:[e.jsx(Ms,{copy:!1,children:p}),e.jsx("br",{}),e.jsx(E,{loading:r.isRefetching,onClick:()=>r.refetch(),children:"Retry"})]})})}return r.isFetching||((d=r.data)==null?void 0:d.length)===0?e.jsx(pN,{authProvider:o}):e.jsxs("div",{className:Tb.wrapper,children:[e.jsx(gN,{identityIntegration:t,authProvider:o,projectId:s,totalUsersCount:(u=a.data)==null?void 0:u[0].count}),e.jsx(Cs,{columns:Uje,rows:r.data??[],"aria-label":"Auth Provider Users",isLoading:r.isLoading,defaultSorting:{column:"created_at",direction:"descending"},onRowClick:p=>{n("neon_identity_user_row_clicked"),c(p)},rowActions:p=>[{label:"View Details",onClick:()=>{n("neon_identity_user_row_clicked"),c(p)}},{label:"Delete",onClick:()=>{l(p.id)}}],pageSize:20}),i&&e.jsx(uN,{providerUser:i,projectId:s,identityProviderOption:o,onCloseDrawer:()=>c(void 0)})]})},zje=({identityIntegration:t})=>{const s=xl(t==null?void 0:t.auth_provider);return s.value==="stack_v2"||s.value==="better_auth"?e.jsx(Fje,{identityIntegration:t}):e.jsx(Rje,{identityIntegration:t})},qje=({variables:t,connectionString:s})=>({label:"Next.js",tabs:[{value:"nextjs",label:"Next.js",codeSnippet:`# Neon Auth environment variables for Next.js
NEXT_PUBLIC_STACK_PROJECT_ID='${t.auth_provider_project_id}'
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"react",label:"React",codeSnippet:`# Neon Auth environment variables for React (Vite)
VITE_STACK_PROJECT_ID='${t.auth_provider_project_id}'
VITE_STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"js",label:"JavaScript",codeSnippet:`# Neon Auth environment variables for JavaScript/Node
STACK_PROJECT_ID='${t.auth_provider_project_id}'
STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0}]}),Hje=({envVariables:t,identityIntegration:s})=>{const{trackUiInteraction:n}=P(),r=Cl({connectionParams:{branchId:s.branch_id,dbName:s.db_name,maskPassword:!0,poolerEnabled:!0}}),a=qje({variables:t,connectionString:r});return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Select your framework from the tabs below and copy the environment variables to ",e.jsx(Ae,{children:".env"})," or"," ",e.jsx(Ae,{children:".env.local"}),"file:"]}),e.jsx(pbe,{snippetOption:a,height:"fit",onCopy:()=>{n("neon_identity_env_vars_copied")},onReveal:()=>{n("neon_identity_env_vars_revealed")}}),e.jsxs(T,{children:["Learn to setup your application and to use these environment variables on"," ",e.jsx(R,{href:j0,openInNewTab:!0,icon:"external_link",children:"Neon Auth documentation"})]})]})},Vje="_container_1d2hu_1",Wje="_emptyState_1d2hu_7",d1={container:Vje,emptyState:Wje},Gje="_buttons_jrhgo_1",Kje={buttons:Gje},Qje=({identityProviderOption:t,permission:s})=>{const{projectId:n}=F(),{trackUiInteraction:r}=P(),{mutateAsync:a,isPending:o}=Jx(),{mutateAsync:i,isPending:c}=sX(n),{isVercelOrg:l}=re(),d=async()=>{r("neon_identity_generate_keys_clicked");try{await a({project_id:n,auth_provider:t.value})}catch(h){const g=Nt(h);Ye(`Failed to generate SDK keys: ${g}`,{autoClose:3e3})}},u=async()=>{r("neon_identity_sync_keys_vercel_clicked");try{await i(),oe("Successfully synced keys to Vercel.")}catch(h){const g=Nt(h);Ye(`Failed to sync SDK keys to vercel: ${g}`)}};let p=null;return l&&(p=e.jsx(te,{disabled:s.canManageIntegration,content:s.reason,children:e.jsx("div",{children:e.jsx(E,{onClick:u,loading:c,appearance:"secondary",disabled:!s.canManageIntegration,children:"Sync Keys to Vercel"})})})),e.jsxs("div",{className:Kje.buttons,children:[e.jsx(te,{disabled:s.canManageIntegration,content:s.reason,children:e.jsx("div",{children:e.jsx(E,{onClick:d,loading:o,appearance:"secondary",disabled:!s.canManageIntegration,children:"Generate keys"})})}),p]})},Yje=({authProvider:t,permission:s,identityIntegration:n})=>{const{projectId:r}=F(),{data:a}=tX({projectId:r,authProvider:t.value});return!a?e.jsxs("div",{className:d1.container,children:[e.jsx(T,{appearance:"primary",children:"Generate your environment variables and copy them to your app’s codebase."}),e.jsxs("div",{className:d1.emptyState,children:[e.jsx(Qje,{permission:s,identityProviderOption:t}),e.jsxs(T,{appearance:"secondary",children:[e.jsx(Ij,{children:"Save your keys"}),". You can only view them once."]})]})]}):e.jsx(Hje,{envVariables:a,identityIntegration:n})},Tj=(t,s)=>["authDomains",t,s],Jje=(t,s)=>bt({queryKey:Tj(t,s),queryFn:async()=>(await G.listBranchNeonAuthTrustedDomains(t,s)).data.domains}),Zje=(t,s)=>{const n=be();return _e({mutationFn:async({domain:r,authProvider:a})=>(await G.addBranchNeonAuthTrustedDomain(t,s,{domain:r,auth_provider:a})).data,onSuccess:()=>{n.invalidateQueries({queryKey:Tj(t,s)})}})},Xje=(t,s)=>{const n=be();return _e({mutationFn:async({domain:r,authProvider:a})=>(await G.deleteBranchNeonAuthTrustedDomain(t,s,{auth_provider:a,domains:[{domain:r}]})).data,onSuccess:()=>{n.invalidateQueries({queryKey:Tj(t,s)})}})},eve="_container_1r7di_1",tve="_formWrapper_1r7di_9",sve="_buttonWrapper_1r7di_15",nve="_formField_1r7di_20",Fp={container:eve,formWrapper:tve,buttonWrapper:sve,formField:nve},rve="_container_1a87i_1",ave="_list_1a87i_6",ove="_item_1a87i_16",Vc={container:rve,list:ave,item:ove},ive=({integration:t,authProvider:s,domains:n,canRemoveDomains:r,isLoading:a})=>{const{projectId:o}=F(),{confirm:i}=Ve(),{mutateAsync:c}=Xje(o,t.branch_id),l=m.useCallback(async d=>{if(await i({header:"Remove domain?",appearance:"danger",confirmButtonText:"Remove",text:e.jsxs(T,{children:["Are you sure you want to remove ",e.jsx("strong",{children:d})," from the trusted list? Your project will no longer be able to redirect to this domain."]})}))try{await c({domain:d,authProvider:s.value}),oe(e.jsxs(T,{children:[e.jsx("strong",{children:d})," removed from trusted list"]}))}catch(p){Y(p)}},[c,s,i]);return!a&&n.length===0?null:a?e.jsx(B,{height:12,width:100}):e.jsxs("div",{className:Vc.container,children:[e.jsx(Z,{level:5,children:"Your trusted domains"}),e.jsx("ul",{className:Vc.list,children:n.map(d=>e.jsxs("li",{className:Vc.item,children:[e.jsx("span",{children:d.domain}),r&&e.jsx(_r,{iconName:"trash",appearance:"error",tooltip:"Remove",onClick:()=>l(d.domain)})]},d.domain))})]})},cve=Et({domain:nt().url()}),lve=({integration:t,authProvider:s,permission:n})=>{var l;const{projectId:r}=F(),{mutateAsync:a,isPending:o}=Zje(r,t.branch_id),i=$e({resolver:Ii(cve),defaultValues:{domain:""}}),c=m.useCallback(async d=>{try{await a({domain:d.domain,authProvider:s.value}),i.reset()}catch(u){const p=Nt(u);Y(p)}},[a,s,i]);return e.jsx(es,{gaps:!0,providerProps:i,onSubmit:c,children:e.jsxs("div",{className:Fp.formWrapper,children:[e.jsx(U,{label:"Add new domain",className:Fp.formField,error:(l=i.formState.errors.domain)==null?void 0:l.message,children:e.jsx(ie,{disabled:o||!n.canManageIntegration,placeholder:"Add new domain (e.g. https://www.example.com)",...i.register("domain",{onBlur:()=>i.clearErrors(),required:{value:!0,message:"This field is required"}})})}),e.jsx("div",{className:Fp.buttonWrapper,children:e.jsx(te,{content:n.reason,disabled:n.canManageIntegration,children:e.jsx("div",{children:e.jsx(Ce,{appearance:"secondary",loading:o,disabled:o||!n.canManageIntegration,children:"Add domain"})})})})]})})},dve=({integration:t,authProvider:s,permission:n})=>{const{projectId:r}=F(),{data:a,isLoading:o}=Jje(r,t.branch_id);return e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Domains"}),e.jsxs("div",{className:Fp.container,children:[e.jsx(T,{children:"Enter trusted domains for authentication redirects (e.g., SSO). Your app will only redirect to domains on this list. All others will be blocked."}),e.jsx(ive,{integration:t,authProvider:s,isLoading:o,canRemoveDomains:n.canManageIntegration,domains:a??[]}),e.jsx(lve,{integration:t,authProvider:s,permission:n})]})]})},uve=({identityIntegration:t,authProvider:s})=>e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Project Info"}),e.jsxs(Ne,{children:[e.jsx(U,{label:`${s.label} Project ID`,children:e.jsx(Ms,{children:t.auth_provider_project_id})}),t.base_url&&e.jsx(U,{label:"Base URL",children:e.jsx(Ms,{hideOverflow:!0,children:t.base_url})}),e.jsx(U,{label:"JWKS URL",children:e.jsx(Ms,{hideOverflow:!0,children:t.jwks_url})})]})]}),hve="_buttonWrapper_1e7t8_1",dg={buttonWrapper:hve},pve=2e3,mve=1e4,gve=({identityIntegration:t,permission:s})=>{const{formatMessage:n}=hn(),{projectId:r}=F(),{trackUiInteraction:a}=P(),o=xl(t.auth_provider),i=m.useRef(0),{mutateAsync:c,isPending:l}=nX(),d=m.useRef(null),u=m.useRef(t.owned_by);m.useEffect(()=>{if(u.current==="user")return;u.current==="neon"&&t.owned_by==="user"&&(a("neon_identity_transfer_ownership_confirmed",{provider:o.value}),oe(`The ${o.label} project has been transferred to your account!`)),u.current=t.owned_by},[t.owned_by,o.label,o.value,a]),Ni(r,{onSuccess:()=>{i.current+=1},refetchInterval:()=>d.current===null?!1:Math.min(pve*(i.current+1),mve)});const p=m.useCallback(async()=>{try{const g=await c({project_id:r,auth_provider:o.value});a("neon_identity_transfer_ownership_clicked"),d.current=ak({url:g.url})}catch(g){const f=Nt(g);Ye(`Failed to transfer ownership: ${f}`)}},[r,o.value,c,a]),h=t.owned_by==="neon";return e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Project ownership"}),e.jsx(T,{children:n(h?{id:"fzzpSl",defaultMessage:[{type:0,value:"Neon currently manages this project for you. To customize settings, you can transfer it to Stack Auth and manage it there."}]}:{id:"A8gtw5",defaultMessage:[{type:0,value:"This project is now managed in Stack Auth. Open the Stack Auth dashboard to customize settings."}]})}),e.jsx("div",{className:dg.buttonWrapper,children:e.jsx(te,{content:s.reason,disabled:s.canManageIntegration,children:e.jsx("div",{children:h?e.jsx(E,{onClick:p,icon:"connect_with",loading:l,disabled:l||!s.canManageIntegration,appearance:"danger",children:"Claim project"}):e.jsx(E,{as:Ge,href:o.urls.overview(t.auth_provider_project_id),onClick:()=>a("neon_identity_user_view_in_provider_clicked"),openInNewTab:!0,iconSide:"right",icon:"external_link",appearance:"secondary",children:"View in Stack Auth"})})})})]})},fve=({integration:t,handleClose:s})=>{const{trackUiInteraction:n}=P(),{projectId:r}=F(),{mutateAsync:a}=eX(r),[o,i]=m.useState(!0),c=async()=>{const l={autoClose:3e3};try{n("neon_identity_remove_provider_confirmed",{optedToClearData:o}),await a({integration:t,deleteData:o}),oe("Removed the integration successfully",l)}catch(d){const u=Nt(d);Ye(`Failed to remove the integration: ${u}`,l)}};return e.jsx(RL,{header:"Remove Neon Auth integration",onConfirm:c,confirmButtonText:"Remove",appearance:"danger",onClose:s,text:e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"warning",children:"Are you sure you want to remove this integration?"}),e.jsxs(Gp,{defaultChecked:o,onChange:()=>i(l=>!l),children:["Clear all data associated with this integration",e.jsx(Bs,{children:"By checking this, you will permanently remove all data and related database objects linked to this integration."})]})]})})},_ve=({integration:t,permission:s})=>{const[n,r]=m.useState(!1);return e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Disable Auth"}),e.jsx(T,{children:"Disabling Neon Auth will delete all users and data associated with this integration."}),n&&e.jsx(fve,{integration:t,handleClose:()=>r(!1)}),e.jsx("div",{className:dg.buttonWrapper,children:e.jsx(te,{content:s.reason,disabled:s.canManageIntegration,children:e.jsx("div",{children:e.jsx(E,{appearance:"danger",disabled:!s.canManageIntegration,onClick:()=>r(!0),children:"Disable Auth"})})})})]})},fN=t=>["neon_auth","emailServerConfig",t],bve=t=>bt({queryKey:fN(t),queryFn:async()=>(await G.getNeonAuthEmailServer(t)).data}),xve=t=>{const s=be();return _e({mutationFn:async n=>(await G.updateNeonAuthEmailServer(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:fN(t)})}})},jve=t=>_e({mutationFn:async s=>{if(s.emailServerConfig.type!=="standard")throw new Error("Test email can only be sent with custom SMTP configuration");const r=(await G.sendNeonAuthTestEmail(t,{host:s.emailServerConfig.host,port:s.emailServerConfig.port,username:s.emailServerConfig.username,password:s.emailServerConfig.password,sender_email:s.emailServerConfig.sender_email,sender_name:s.emailServerConfig.sender_name,recipient_email:s.recipientEmail})).data;if(!r.success)throw new Error(r.error_message||"Failed to send test email");return r}}),vve="_container_ivlmv_1",u1={container:vve},yve=Ut.object({recipient_email:Ut.string().email("Must be a valid email address")}),wve=({projectId:t,emailServerConfig:s,onRequestClose:n})=>{const{mutateAsync:r,isPending:a}=jve(t),[o,i]=m.useState(null),c=$e({resolver:Ii(yve),defaultValues:{recipient_email:""}}),l=m.useCallback(async d=>{i(null);try{await r({recipientEmail:d.recipient_email,emailServerConfig:s}),oe(`A test email has been successfully sent to ${d.recipient_email}`),n()}catch(u){const p=Nt(u);i(p)}},[r,s,n]);return e.jsxs(ps,{modalProps:{title:"Send test email",isOpen:!0,onRequestClose:n,width:500},providerProps:c,onSubmit:l,children:[e.jsxs(De,{gaps:!0,children:[e.jsx(T,{children:"Send a test email to check that your email server is configured correctly."}),e.jsx(Pe,{control:c.control,name:"recipient_email",render:({field:d})=>{var u;return e.jsx(U,{label:"Recipient email",error:(u=c.formState.errors.recipient_email)==null?void 0:u.message,children:e.jsx(ie,{"aria-label":"recipient email",type:"email",placeholder:"Enter email address",value:d.value,onChange:d.onChange})})}}),o&&e.jsx(X,{appearance:"error",children:e.jsx(T,{appearance:"error",children:o})})]}),e.jsxs(Te,{children:[e.jsx(Ce,{disabled:!c.formState.isValid,loading:a,children:"Send"}),e.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})},_N={google:{id:"google",label:"Google",icon:"google",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/google",docsLink:{label:"Get Google OAuth 2.0 credentials",url:"https://developers.google.com/identity/protocols/oauth2"}},github:{id:"github",label:"GitHub",icon:"github",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/github",docsLink:{label:"Create a GitHub OAuth App",url:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app"}},microsoft:{id:"microsoft",label:"Microsoft",icon:"microsoftv2",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/microsoft",docsLink:{label:"Register your app with Microsoft Entra ID",url:"https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow"}}},Sve=Ut.object({id:Ut.enum(["google","github","microsoft"]),providerType:Ut.enum(["standard","shared"]),client_id:Ut.string().optional(),client_secret:Ut.string().optional()}).superRefine((t,s)=>{t.providerType!=="shared"&&(t.client_id||s.addIssue({code:Ut.ZodIssueCode.custom,path:["client_id"],message:"Client ID is required"}),t.client_secret||s.addIssue({code:Ut.ZodIssueCode.custom,path:["client_secret"],message:"Client Secret is required"}))}),Cve=Ut.discriminatedUnion("type",[Ut.object({type:Ut.literal("shared")}),Ut.object({type:Ut.literal("standard"),host:Ut.string().min(1,"Host is required"),port:Ut.number().int().positive("Port must be a positive integer"),username:Ut.string().min(1,"Username is required"),password:Ut.string().min(1,"Password is required"),sender_email:Ut.string().email("Must be a valid email address"),sender_name:Ut.string().min(1,"Sender name is required")})]),bN="noreply@stackframe.co",kve=[{name:"host",label:"Host",type:"text"},{name:"port",label:"Port",type:"number"},{name:"username",label:"Username",type:"text"},{name:"password",label:"Password",type:"password"},{name:"sender_email",label:"Sender email",type:"text"},{name:"sender_name",label:"Sender name",type:"text"}],Ive=({projectId:t,emailServerConfig:s,onRequestClose:n})=>{const{mutateAsync:r,isPending:a}=xve(t),o=$e({resolver:Ii(Cve),defaultValues:{type:s.type,host:s.type==="standard"?s.host:"",port:s.type==="standard"?s.port:25,username:s.type==="standard"?s.username:"",password:s.type==="standard"?s.password:"",sender_email:s.type==="standard"?s.sender_email:"",sender_name:s.type==="standard"?s.sender_name:""}}),i=m.useCallback(async c=>{try{await r(c),oe("Email server config updated successfully"),n()}catch(l){Ye(Nt(l))}},[r,n]);return e.jsxs(ps,{modalProps:{title:"Edit email server",isOpen:!0,onRequestClose:n,width:500},providerProps:o,onSubmit:i,children:[e.jsxs(De,{gaps:!0,children:[e.jsx(Pe,{control:o.control,name:"type",render:({field:c})=>e.jsx(U,{label:"Email server",children:e.jsx(ct,{"aria-label":"email server type",value:c.value,options:[{label:`Shared (${bN})`,value:"shared"},{label:"Custom SMTP server",value:"standard"}],onChange:l=>{c.onChange(l),o.clearErrors()}})})}),o.watch("type")==="standard"&&e.jsx(e.Fragment,{children:kve.map(({name:c,type:l,label:d})=>e.jsx(Pe,{control:o.control,name:c,render:({field:u})=>{var p;return e.jsx(U,{label:d,error:(p=o.formState.errors[c])==null?void 0:p.message,children:e.jsx(ie,{"aria-label":u.name,type:l,value:u.value,onChange:h=>{const g=l==="number"?Number(h.target.value):h.target.value;u.onChange(g)}})},u.name)}},c))})]}),e.jsxs(Te,{children:[e.jsx(Ce,{disabled:!o.formState.isValid,loading:a,children:"Save"}),e.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})},Pve=({permission:t})=>{const{projectId:s}=F(),[n,r]=m.useState(!1),[a,o]=m.useState(!1),{data:i,isLoading:c}=bve(s);return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Email server"}),e.jsxs(Ne,{className:u1.container,children:[e.jsx(T,{children:"Set up the email server and sender address for system emails and invites"}),c?e.jsxs(e.Fragment,{children:[e.jsx(B,{height:12,width:100}),e.jsx(B,{height:12,width:100}),e.jsx(B,{height:12,width:100})]}):e.jsxs("div",{className:u1.container,children:[e.jsx(U,{label:"Server",children:(i==null?void 0:i.type)==="shared"?"Shared":"Custom SMTP server"}),e.jsx(U,{label:"Sender address",children:(i==null?void 0:i.type)==="shared"?bN:i==null?void 0:i.sender_email})]})]}),e.jsx(ks,{children:e.jsxs("div",{className:dg.buttonWrapper,children:[e.jsx(te,{content:t.reason,disabled:t.canManageIntegration,children:e.jsx("div",{children:e.jsx(E,{onClick:()=>r(!0),appearance:"secondary",disabled:!t.canManageIntegration,children:"Configure email server"})})}),t.canManageIntegration&&(i==null?void 0:i.type)==="standard"&&e.jsx(E,{onClick:()=>o(!0),appearance:"secondary",children:"Send test email"})]})})]}),i&&n&&e.jsx(Ive,{projectId:s,emailServerConfig:i,onRequestClose:()=>r(!1)}),a&&i&&e.jsx(wve,{projectId:s,emailServerConfig:i,onRequestClose:()=>o(!1)})]})},ug=(t,s)=>["neon_auth","oauthProviders",t,s],Tve=(t,s)=>bt({queryKey:ug(t,s),queryFn:async()=>(await G.listBranchNeonAuthOauthProviders(t,s)).data.providers}),Ave=(t,s)=>{const n=be();return _e({mutationFn:async({oauthProvider:r})=>(await G.addBranchNeonAuthOauthProvider(t,s,r)).data,onSuccess:()=>{n.invalidateQueries({queryKey:ug(t,s)})}})},Nve=(t,s)=>{const n=be();return _e({mutationFn:async({oauthProviderId:r,oauthProvider:a})=>(await G.updateBranchNeonAuthOauthProvider(t,s,r,a)).data,onSuccess:()=>{n.invalidateQueries({queryKey:ug(t,s)})}})},Eve=(t,s)=>{const n=be();return _e({mutationFn:async r=>(await G.deleteBranchNeonAuthOauthProvider(t,s,r)).data,onSuccess:()=>{n.invalidateQueries({queryKey:ug(t,s)})}})},Ove="_providersGrid_szscr_1",$ve="_providerTile_szscr_9",Lve="_footer_szscr_30",Rve="_actions_szscr_34",xm={providersGrid:Ove,providerTile:$ve,footer:Lve,actions:Rve},xN=({onRequestClose:t,onSuccess:s,projectId:n,integration:r,oauthProvider:a,existingProvider:o})=>{const{mutateAsync:i,isPending:c}=Ave(n,r.branch_id),{mutateAsync:l,isPending:d}=Nve(n,r.branch_id),{trackUiInteraction:u}=P(),p=$e({resolver:Ii(Sve),defaultValues:{id:a.id,providerType:(o==null?void 0:o.type)??"standard",client_id:o==null?void 0:o.client_id,client_secret:o==null?void 0:o.client_secret}}),h=m.useCallback(async b=>{try{u("neon_identity_oauth_provider_add_clicked",{id:b.id,providerType:b.providerType});const x=b.providerType==="shared"?{}:{client_id:b.client_id,client_secret:b.client_secret};await i({oauthProvider:{id:b.id,...x}}),oe(`${a.label} OAuth provider added successfully`),t(),s()}catch(x){const j=Nt(x);Ye(j)}},[i,a.label,t,s,u]),g=m.useCallback(async b=>{try{u("neon_identity_oauth_provider_add_clicked",{id:b.id,providerType:b.providerType});const x=b.providerType==="shared"?{}:{client_id:b.client_id,client_secret:b.client_secret};await l({oauthProviderId:a.id,oauthProvider:x}),oe(`${a.label} OAuth provider updated successfully`),t(),s()}catch(x){const j=Nt(x);Ye(j)}},[l,a,t,s,u]),f=m.useCallback(async b=>{o?await g(b):await h(b)},[o,g,h]),_=p.watch("providerType");return e.jsxs(ps,{modalProps:{title:`${a.label} OAuth Provider`,isOpen:!0,onRequestClose:t,width:600},providerProps:p,onSubmit:f,children:[e.jsxs(De,{gaps:!0,children:[e.jsx(Pe,{control:p.control,name:"providerType",render:({field:b})=>e.jsx(as,{"aria-label":"provider type",isSelected:b.value==="shared",onChange:x=>{b.onChange(x?"shared":"standard"),p.clearErrors()},children:"Shared Keys"})}),_==="shared"?e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Shared keys are created by the Stack Auth team for development. It helps you get started, but will show a Stack Auth logo and name on the OAuth screen."}),e.jsx(X,{appearance:"warning",children:e.jsx(T,{children:"Shared keys should never be used in production."})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Create a ",a.label," OAuth app and set the callback url to: ",e.jsx("br",{}),e.jsx(Ae,{children:a.redirect_uri})]}),e.jsx(Pe,{control:p.control,name:"client_id",render:({field:b})=>{var x;return e.jsx(U,{label:"Client ID",error:(x=p.formState.errors.client_id)==null?void 0:x.message,children:e.jsx(ie,{...b,value:b.value??"",placeholder:"Client ID"})})}}),e.jsx(Pe,{control:p.control,name:"client_secret",render:({field:b})=>{var x;return e.jsx(U,{label:"Client Secret",error:(x=p.formState.errors.client_secret)==null?void 0:x.message,children:e.jsx(ie,{...b,value:b.value??"",placeholder:"Client Secret"})})}})]})]}),e.jsxs(Te,{className:xm.footer,children:[e.jsx("div",{children:a.docsLink&&_==="standard"&&e.jsx(R,{openInNewTab:!0,icon:"external_link",href:a.docsLink.url,children:a.docsLink.label})}),e.jsxs("div",{className:xm.actions,children:[e.jsx(Ce,{disabled:!p.formState.isValid||c||d,loading:c||d,onClick:()=>p.handleSubmit(f),children:o?"Update":"Add"}),e.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})]})},Mve=({isOpen:t,projectId:s,onRequestClose:n,integration:r,availableProviders:a=[]})=>{const[o,i]=m.useState();return e.jsxs(e.Fragment,{children:[e.jsxs(ft,{isOpen:t,onRequestClose:n,title:"Add OAuth Provider",width:600,children:[e.jsxs(De,{children:[e.jsx(T,{children:"Choose an OAuth provider to add to your authentication configuration."}),e.jsx("div",{className:xm.providersGrid,children:a.map(c=>e.jsxs("button",{type:"button",className:xm.providerTile,onClick:()=>i(c),children:[e.jsx(z,{name:c.icon,size:32}),e.jsx(T,{children:c.label})]},c.id))})]}),e.jsx(Te,{children:e.jsx(dn,{appearance:"secondary",children:"Cancel"})})]}),o&&e.jsx(xN,{projectId:s,integration:r,onSuccess:n,onRequestClose:()=>i(void 0),oauthProvider:o})]})},Bve="_container_11iw1_1",Dve="_provider_11iw1_7",Uve="_removeProvider_11iw1_13",Ab={container:Bve,provider:Dve,removeProvider:Uve},Fve=({projectId:t,integration:s,oauthProvider:n})=>{const r=_N[n.id],[a,o]=m.useState(!1),{confirm:i}=Ve(),{trackUiInteraction:c}=P(),{mutateAsync:l,isPending:d}=Eve(t,s.branch_id),u=m.useCallback(async()=>{if(c("neon_identity_oauth_provider_remove_clicked",{id:n.id}),await i({header:`Remove ${r.label} OAuth provider?`,text:e.jsxs(X,{appearance:"error",children:["Removing this provider will prevent users from signing in with"," ",r.label,", including existing users who have used it before. They might not be able to log in anymore. Are you sure you want to remove it?"]}),confirmButtonText:"Remove",appearance:"danger"}))try{c("neon_identity_oauth_provider_remove_confirmed",{id:n.id}),await l(n.id),oe(`${r.label} OAuth provider removed successfully`)}catch(g){const f=Nt(g);Ye(f)}else c("neon_identity_oauth_provider_remove_dismissed",{id:n.id})},[i,l,n.id,r.label,c]),p=m.useMemo(()=>[{items:[{label:"Configure",onClick:()=>o(!0)},{label:`Remove ${r.label}`,itemTextClassName:Ab.removeProvider,onClick:u}]}],[r.label,u]);return e.jsxs("div",{className:Vc.item,children:[a&&e.jsx(xN,{projectId:t,integration:s,oauthProvider:r,existingProvider:n,onRequestClose:()=>o(!1),onSuccess:()=>{}}),e.jsxs("span",{className:Ab.provider,children:[e.jsx(z,{name:r.icon,size:24}),e.jsxs(T,{children:[r.label,n.type==="shared"&&e.jsx(Ie,{size:"s",margin:"left",children:"Shared keys"})]})]}),e.jsx(Yt,{sections:p,placement:"bottom end",children:e.jsx(ms,{isDisabled:d})})]})},zve=({permission:t,integration:s})=>{const{projectId:n}=F(),{data:r,isLoading:a}=Tve(n,s.branch_id),[o,i]=m.useState(!1),c=m.useMemo(()=>Object.entries(_N).filter(([l])=>!(r!=null&&r.some(d=>d.id===l))).map(([,l])=>l),[r]);return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"OAuth providers"}),e.jsxs(Ne,{className:Ab.container,children:[e.jsx(T,{children:"Select the OAuth sign-in methods you want available in your app"}),a?e.jsxs(e.Fragment,{children:[e.jsx(B,{height:12,width:100}),e.jsx(B,{height:12,width:100}),e.jsx(B,{height:12,width:100})]}):e.jsx("div",{className:Vc.container,children:e.jsx("ul",{className:Vc.list,children:r==null?void 0:r.map(l=>e.jsx(Fve,{projectId:n,integration:s,oauthProvider:l},l.id))})})]}),c.length>0&&e.jsx(ks,{children:e.jsx("div",{className:dg.buttonWrapper,children:e.jsx(te,{content:t.reason,disabled:t.canManageIntegration,children:e.jsx("div",{children:e.jsx(E,{onClick:()=>i(!0),appearance:"secondary",disabled:!t.canManageIntegration,children:"Add OAuth provider"})})})})})]}),c.length>0&&e.jsx(Mve,{projectId:n,isOpen:o,onRequestClose:()=>i(!1),integration:s,availableProviders:c})]})},qve=({identityIntegration:t})=>{const{projectId:s}=F(),{canManageIntegration:n,isCollaborator:r,isLoading:a}=cN(s),o=xl(t==null?void 0:t.auth_provider),i=m.useMemo(()=>({canManageIntegration:n,reason:Mc.getManageNeonAuthReason({isLoading:a,canManageIntegration:n,isCollaborator:r})}),[n,r,a]);return e.jsxs(e.Fragment,{children:[e.jsx(uve,{identityIntegration:t,authProvider:o}),e.jsxs(Le,{children:[e.jsx(Se,{level:3,children:"Environment variables"}),e.jsx(Yje,{permission:i,authProvider:o,identityIntegration:t})]}),e.jsx(dve,{integration:t,authProvider:o,permission:i}),e.jsx(zve,{permission:i,integration:t}),e.jsx(Pve,{permission:i}),o.value==="stack"&&e.jsx(gve,{identityIntegration:t,permission:i}),e.jsx(_ve,{permission:i,integration:t})]})},Hve="_dashboard_94ntd_1",Vve="_dashboardTabs_94ntd_7",Wve="_tabsContainer_94ntd_12",y_={dashboard:Hve,dashboardTabs:Vve,tabsContainer:Wve},Gve=2*Mu,Kve=10,jN="neon_auth",Qve="teams_sync",Yve="team_memberships_sync",Jve=`${jN}.${Qve}`,Zve=`${jN}.${Yve}`,Xve=Et({id:nt(),raw_json:Et({}).passthrough(),name:nt().nullable(),created_at:Ka().nullable(),updated_at:Ka().nullable(),user_count:tn().int().nonnegative()}),eye={teams:t=>["getTeams",t]},tye=()=>{const{projectId:t}=F(),{data:s}=Ni(t),n=s==null?void 0:s[0];return ca({queryKey:{key:eye.teams(t),appendConnectionString:!1},query:`SELECT
        teams.id as id,
        teams.name as name,
        teams.created_at as created_at,
        teams.updated_at as updated_at,
        teams.raw_json as raw_json,
        COUNT(members.user_id)::integer as user_count
     FROM
        ${Jve} teams
     LEFT JOIN
        ${Zve} members
        ON teams.id = members.team_id
        AND members.deleted_at IS NULL
    WHERE
      teams.deleted_at IS NULL
    GROUP BY
      teams.id,
      teams.name,
      teams.created_at,
      teams.updated_at
     ORDER BY teams.created_at DESC
     LIMIT ${Kve}`,zodSchema:Xve,options:{enabled:!!n,staleTime:Gve},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},sye=[{header:"Team",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0},{header:"Members",accessorKey:"user_count",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric"},{header:"Created At",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.created_at?fe(t.created_at):"—"})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.updated_at?fe(t.updated_at):"—"})}],nye=()=>{var s,n;const t=tye();if((s=t.error)!=null&&s.message){const r=Nt(t.error);return e.jsx(rs,{title:"Error fetching users data",subtitle:r,actions:e.jsx(E,{loading:t.isRefetching,onClick:()=>t.refetch(),children:"Retry"})})}return!t.isLoading&&((n=t.data)==null?void 0:n.length)===0?"No teams created yet":e.jsx(Cs,{columns:sye,rows:t.data??[],"aria-label":"Auth Provider Teams",isLoading:t.isLoading,defaultSorting:{column:"created_at",direction:"descending"}})};Et({tab:yx(["users","teams","configuration"]).optional().catch(void 0)});const rye=()=>{const t="tab",[s,n]=Un(t);return{currentTab:s??"users",setCurrentTab:n}},aye=[{label:"Users",value:"users"},{label:"Teams",value:"teams"},{label:"Configuration",value:"configuration"}],oye=({authIntegration:t})=>{const s=!!t,{currentTab:n,setCurrentTab:r}=rye(),a=ge("neon_auth_teams_sync"),o=m.useMemo(()=>aye.filter(i=>i.value==="teams"?a:s?!0:i.value!=="configuration"),[a,s]);return e.jsxs("div",{className:y_.dashboard,children:[e.jsx(qn,{options:o,value:n,onChange:i=>r(i),className:y_.dashboardTabs}),e.jsxs("div",{className:y_.tabsContainer,children:[n==="users"&&e.jsx(zje,{identityIntegration:t}),n==="teams"&&e.jsx(nye,{}),n==="configuration"&&s&&e.jsx(qve,{identityIntegration:t})]})]})},iye="_identityTitle_176qq_1",cye="_pageHeaderSubtitle_176qq_7",lye="_pageHeaderSubtitleEmptyState_176qq_13",dye="_errorActionsWrapper_176qq_19",xp={identityTitle:iye,pageHeaderSubtitle:cye,pageHeaderSubtitleEmptyState:lye,errorActionsWrapper:dye},uye=()=>{const{projectId:t}=F(),{branchId:s}=at(),{data:n,isPending:r,error:a,refetch:o}=Yx(t,s);if(r)return e.jsx(ve,{});if(a)return e.jsx(rs,{title:"Failed to load Neon Auth integrations.",subtitle:a.message,actions:e.jsxs("div",{className:xp.errorActionsWrapper,children:[e.jsx(KP,{subject:"Failed to load Neon Auth integrations",description:`The following error occurred when opening the Neon Auth integrations page: ${a.message}`}),e.jsx(E,{size:"s",onClick:()=>o(),children:"Retry"})]})});if(!n)return e.jsx(lje,{});const i=mt(n.created_at).fromNow(),c=xl(n.auth_provider);return e.jsxs(e.Fragment,{children:[e.jsx(bl,{title:e.jsxs("span",{className:xp.identityTitle,children:["Auth ",e.jsx(Ie,{appearance:"experimental",children:"Beta"})]}),subtitle:e.jsxs(T,{appearance:"secondary",className:V(xp.pageHeaderSubtitle,xp.pageHeaderSubtitleEmptyState),children:["Connected to ",c.label," ",i,e.jsxs(Bs,{size:"l",children:["This Neon project was connected to ",c.label," ","on ",fe(n.created_at),"."]})]})}),e.jsx("section",{children:e.jsx(oye,{authIntegration:n})})]})},hye="_sections_1m9vq_1",pye="_addedSection_1m9vq_7",mye="_sectionTitle_1m9vq_14",gye="_cardsList_1m9vq_22",jp={sections:hye,addedSection:pye,sectionTitle:mye,cardsList:gye},fye={vercel:Jne,github:pne,outerbase:gre,datadog:aae,opentelemetry:Aae},_ye=()=>{const t=zx(),s=Jm(),n=Hu(),r=UT();m.useEffect(()=>{fre()},[]);const{projectId:a}=F();return n.status==="error"?e.jsx("section",{children:e.jsx(rs,{title:"Failed to load integrations",subtitle:n.error.message})}):n.status==="pending"?e.jsx(vse,{}):e.jsxs(_M,{children:[e.jsx("div",{className:jp.sections,children:Object.keys(li).map(o=>{var i;if((i=r[o])!=null&&i.length)return e.jsxs("section",{"data-qa":`${o}-integrations-list`,role:"list","aria-label":li[o],className:V({[jp.addedSection]:o===Ua.Added}),children:[e.jsxs("div",{className:jp.sectionTitle,id:o,children:[e.jsx(Z,{level:2,children:li[o]}),o===Ua.Added?e.jsx(R,{icon:"external_link",href:ML,openInNewTab:!0,children:"Read more"}):null]}),e.jsx("div",{className:jp.cardsList,children:r[o].map(c=>{var l;if(o===Ua.Added){const d=(l=n.data)==null?void 0:l[c.id];return e.jsx(_se,{integration:c,status:d&&"status"in d?nA(d.status):void 0,integrationExportStats:d&&"exportStats"in d?d.exportStats:void 0},c.id)}return e.jsx(ase,{integration:c,beta:t[c.id],featured:o===Ua.Featured,disabled:c.disabled},c.id)})})]},o)})}),Object.entries(fye).map(([o,i])=>{var d;const c=o,l=i;return s[c]?null:e.jsx(l,{projectId:a,configuration:(d=n.data)==null?void 0:d[c]},c)})]})};var Yu=(t=>(t.Metrics="metrics",t.Operations="operations",t.ActiveQueries="active-queries",t.QueryHistory="query-history",t))(Yu||{});const qd={metrics:{label:"Metrics",value:"metrics",to:C.ProjectsItemBranchesItemMonitoringMetrics,event:"monitoring_page_metrics_tab_clicked"},operations:{label:"System operations",value:"operations",to:C.ProjectsItemBranchesItemMonitoringOperations,event:"monitoring_page_operations_tab_clicked"},"active-queries":{label:"Active queries",value:"active-queries",to:C.ProjectsItemBranchesItemMonitoringActiveQueries,event:"monitoring_page_active_queries_tab_clicked"},"query-history":{label:"Query performance",value:"query-history",to:C.ProjectsItemBranchesItemMonitoringQueryHistory,event:"monitoring_page_query_history_tab_clicked"}},bye=[qd.metrics,qd["active-queries"],qd["query-history"],qd.operations],xye=({selected:t})=>{const{projectId:s}=F(),{branch:n}=at(),{trackUiInteraction:r}=P(),a=et();return e.jsx(qn,{options:bye,value:t,onChange:o=>{const i=qd[o];r(i.event),n&&a.push(Q(i.to,{projectId:s,branchId:n.id}))}})},h1={metricsButton:"Export metrics",upgradeButton:"Upgrade to export metrics"},jye="_header_16dbf_1",vye={header:jye},yye=()=>{const{project:t}=F(),{trackUiInteraction:s}=P(),[n,r]=m.useState(!1),a=m.useCallback(()=>{s("monitoring_page_upgrade_modal_opened"),r(!0)},[s]),o=m.useCallback(()=>{s("monitoring_page_upgrade_modal_closed"),r(!1)},[s]),{datadog:i}=Jm();return t?i?e.jsxs(e.Fragment,{children:[e.jsx(E,{icon:"datadog",appearance:"secondary",size:"s",onClick:a,children:h1.upgradeButton}),e.jsx(lt,{type:Xe.ExportMetrics,isOpen:n,onRequestClose:o})]}):e.jsx(E,{icon:"datadog",appearance:"secondary",as:DL,href:`${Q(C.ProjectsItemIntegrations,{projectId:t.id})}#datadog`,children:h1.metricsButton}):null},hg=(t,s)=>{const n=m.memo(r=>{const a=Hd(hA);return e.jsxs(e.Fragment,{children:[e.jsx(Tl,{title:"Monitoring",actions:e.jsx(yye,{}),className:vye.header}),e.jsx("div",{children:e.jsxs(_0,{defaultRange:pA(a),children:[e.jsx(xye,{selected:s}),e.jsx(BL,{children:e.jsx(t,{...r})})]})})]})});return n.displayName=`withMonitoringPageLayout(${t.displayName})`,n},vN=()=>{const t=ge("hipaa_self_serve_console"),{subscriptionType:s}=he(),n=ki("allow_hipaa_projects");return!(!t||rx(s)&&!n)},wye=t=>{const s=new Date("2025-09-02T00:00:00Z");return new Date(t??s)>=s},yN=()=>{const{org:t}=re();return wye(t==null?void 0:t.created_at)},Sye=()=>e.jsx(nN,{}),Cye=({project:t,override:s,onSuccess:n,onFail:r,children:a,...o})=>{const i=t==null?void 0:t.id,c=ox(t),l=Vs(),d=m.useMemo(()=>({autoscaling_limit_cu:{max:c.autoscalingMax,min:c.autoscalingMin},suspend_timeout_seconds:c.suspendTimeoutSeconds}),[c]),u=Ss({defaultValues:d,shouldUnregister:!0}),p=ao("edit_suspend_timeout"),h=m.useCallback(async({autoscaling_limit_cu:g,suspend_timeout_seconds:f})=>{const _={};if(g&&(_.autoscaling_limit_min_cu=g.min,_.autoscaling_limit_max_cu=g.max),p&&(_.suspend_timeout_seconds=f),!i)throw new Error("ProjectId should be specified");if(s){const b={...t,default_endpoint_settings:_};return n==null||n(b),null}try{const b=await l({projectId:i,data:{default_endpoint_settings:_}});n==null||n(b)}catch(b){r==null||r(b)}return null},[p,i,t,s,n,r,l]);return e.jsx(Jt,{...u,children:e.jsx(qt,{...o,onSubmit:g=>{g.stopPropagation(),u.handleSubmit(h)(g)},children:a})})},p1={paidPlansStartingAtPlanFee:t=>`Paid plans start at ${us(t)} per month.`,paidPlansStartingAtMinimumSpend:t=>`Paid plans minimum monthly spend starts at ${us(t)}.`},kye="_featuresCard_7ghte_1",Iye="_upgradeLink_7ghte_12",Pye="_defaultValuesTable_7ghte_16",Tye="_featureList_7ghte_22",Aye="_featureIcon_7ghte_38",Nye="_upgradeToScale_7ghte_49",Ec={featuresCard:kye,upgradeLink:Iye,defaultValuesTable:Pye,featureList:Tye,featureIcon:Aye,upgradeToScale:Nye},Eye=({onSuccess:t,onFail:s,children:n})=>{const{trackUiInteraction:r}=P(),{email:a,name:o}=Tu(hC),{submitContactSalesForm:i}=Nu(),c=Ss({defaultValues:{message:"",email:a,name:o},shouldUnregister:!0}),l=async d=>{r("contact_sales_submitted");try{await i(d),t==null||t()}catch{s==null||s()}};return e.jsx(Jt,{...c,children:e.jsx(qt,{onSubmit:c.handleSubmit(l),children:n})})},Oye="_companyFields_1qmum_1",$ye={companyFields:Oye},m1=[{value:"1_4",label:"1-4 employees"},{value:"5_19",label:"5-19 employees"},{value:"20_99",label:"20-99 employees"},{value:"100_499",label:"100-499 employees"},{value:"500",label:"≥ 500 employees"}],Lye=()=>{var i,c,l,d,u;const{register:t,control:s,formState:n}=Ct(),[r,a]=m.useState(null),o=m.useMemo(()=>m1.find(p=>p.value===r)??null,[r]);return e.jsxs(e.Fragment,{children:[e.jsx(U,{error:(i=n.errors.name)==null?void 0:i.message,label:"Your name",children:e.jsx(ie,{...t("name",{required:{value:!0,message:"This field is required"}})})}),e.jsx(U,{error:(c=n.errors.email)==null?void 0:c.message,label:"Email",children:e.jsx(ie,{...t("email",{required:{value:!0,message:"This field is required"},pattern:{value:Db,message:"Please input a valid email"}})})}),e.jsxs("div",{className:$ye.companyFields,children:[e.jsx(U,{error:(l=n.errors.companyWebsite)==null?void 0:l.message,label:"Company website",children:e.jsx(ie,{...t("companyWebsite")})}),e.jsx(U,{error:(d=n.errors.companySize)==null?void 0:d.message,label:"Company size",children:e.jsx(Pe,{name:"companySize",control:s,render:({field:p})=>e.jsx(Za,{value:o,onChange:h=>{h&&(p.onChange(h.value),a(h.value))},options:m1})})})]}),e.jsx(U,{error:(u=n.errors.message)==null?void 0:u.message,label:"How may we help you?",children:e.jsx(yi,{rows:6,placeholder:"Your message to our Sales team",...t("message",{required:{value:!0,message:"This field is required"}})})})]})},Rye=({onRequestClose:t,...s})=>e.jsx(na,{title:"Contact Sales",...s,onRequestClose:t,children:e.jsxs(Eye,{onSuccess:()=>{Ue(e.jsx(rt,{children:"Sent!"})),t==null||t()},onFail:()=>{Ue(e.jsx(ro,{children:e.jsxs(e.Fragment,{children:["Request failed. Please try again or contact us at"," ",e.jsx(UL,{as:"a",href:zL,onClick:n=>n.stopPropagation(),children:FL}),"."]})}),{...Xb,toastId:"contact_sales_form_failed"})},children:[e.jsx(ra,{children:e.jsx(Lye,{})}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{children:"Send"})]})]})}),Mye=({children:t="Contact sales",...s})=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=P();return e.jsxs(e.Fragment,{children:[e.jsx(Rye,{isOpen:n,onRequestClose:()=>{a("contact_sales_dismissed"),r(!1)}}),e.jsx(R,{...s,onClick:()=>{a("pro_promo_modal_contact_sales_clicked"),r(!0)},children:t})]})},Bye=[{title:"Larger computes",description:e.jsxs(e.Fragment,{children:["Configure a compute size to fit your workload. Compute sizes range from .25 vCPUs with 1 GB of RAM to 7 vCPUs with 28 GB of RAM."," ",e.jsx(Mye,{})," if you require larger computes."]}),iconName:"compute_size"},{title:"Autoscaling compute",description:"Enable autoscaling to scale your compute resources as your workload changes. You are billed based on the average compute size, which is measured at short intervals.",beta:!0,iconName:"compute_size_autoscale"},{title:"Configurable autosuspend compute",description:e.jsx(gt,{id:"dV+ue2",defaultMessage:[{type:0,value:"Disable or set a custom timeout for Neon's autosuspend compute feature, which automatically suspends a compute after a period of inactivity."}]}),iconName:"autosuspend",beta:!1}],wN=()=>{const{limits:t}=It();return v0(t==null?void 0:t.max_autoscaling_cu)<=y0},Dye=()=>{const{shouldDisplayPricingV3:t}=xC(),n=pC()[t?"launch_v3":"launch"],r=n.serviceFee??0,a=n.minimumMonthlySpend??0;return e.jsxs(e.Fragment,{children:[e.jsx("table",{className:Ec.defaultValuesTable,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(T,{size:"m",children:"Fixed size:"})}),e.jsx("td",{children:e.jsx(T,{size:"m",appearance:"primary",children:Mn(y0)})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(T,{size:"m",children:"Autosuspend:"})}),e.jsx("td",{children:e.jsx(T,{size:"m",appearance:"primary",children:"After 5 minutes of inactivity"})})]})]})}),e.jsxs("div",{className:Ec.featuresCard,children:[e.jsx(T,{bold:!0,appearance:"primary",children:"Paid plan features:"}),e.jsx("ul",{className:Ec.featureList,children:Bye.map(({title:o,iconName:i})=>e.jsxs("li",{children:[e.jsx("div",{className:Ec.featureIcon,children:i&&e.jsx(z,{name:i,size:16})}),e.jsx(T,{appearance:"primary",children:o})]},o))}),e.jsxs(T,{size:"s",children:[bC(a)?p1.paidPlansStartingAtMinimumSpend(a):r>0&&p1.paidPlansStartingAtPlanFee(r),e.jsx(iF,{className:Ec.upgradeLink,actionName:"edit_endpoint_upgrade_to_pro_clicked"})]})]})]})},Uye=({endpoint:t})=>{const{limits:s}=It(),{trigger:n,watch:r,control:a}=Ct(),o=wN(),{trackUiInteraction:i}=P();return m.useEffect(()=>{n("autoscaling_limit_cu")},[n,r("autoscaling_limit_cu")]),e.jsx("div",{children:o?e.jsx(Dye,{}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{name:"autoscaling_limit_cu",control:a,rules:{shouldUnregister:!0},render:({field:c})=>e.jsx(e.Fragment,{children:e.jsx(qL,{maxValue:v0(s==null?void 0:s.max_autoscaling_cu),value:c.value,endpoint:t,onChange:l=>{i("autoscaling_limit_cu_slider_cu_limit_selected"),c.onChange(l)}})})}),e.jsx(aF,{className:Ec.upgradeToScale})]})})},Fye=()=>{const t=ao("edit_suspend_timeout"),{limits:s}=It(),n=wN();return e.jsx(e.Fragment,{children:t&&!n&&s&&e.jsx(HL,{name:"suspend_timeout_seconds",minAutosuspendSeconds:s.min_autosuspend_seconds})})},zye=()=>e.jsxs(e.Fragment,{children:[e.jsx(Uye,{}),e.jsx(Fye,{})]}),qye="_fields_96e8n_1",Hye="_warning_96e8n_7",g1={fields:qye,warning:Hye},Vye=({formProps:t,...s})=>e.jsx(na,{title:t.override?"Override default compute size for this branch only":"Change default compute settings",...s,children:e.jsxs(Cye,{...t,onFail:Y,children:[e.jsx(ra,{className:g1.fields,children:e.jsx(zye,{})}),e.jsxs(Te,{children:[e.jsxs(g0,{children:["Learn more about"," ",e.jsx(R,{href:"https://neon.com/docs/manage/endpoints#compute-size-and-autoscaling-configuration",openInNewTab:!0,children:"compute sizes"})]}),e.jsx(no,{}),e.jsx(Ce,{children:"Save"})]}),e.jsx(X,{appearance:"warning",className:g1.warning,children:"These defaults will be used as the initial settings for any primary or read replica computes you create. Modifying these defaults does not alter the settings of any existing computes."})]})}),Wye="_computeSettingsList_17kw2_1",Gye={computeSettingsList:Wye},Kye=()=>{const{trackUiInteraction:t}=P(),{project:s,isLoading:n}=F(),r=Ub(s),{isVercelOrg:a,isLoading:o}=re(),i=ox(s),{limits:c}=It(),l=c==null?void 0:c.max_autoscaling_cu,[d,u]=m.useState(!1),p=m.useCallback(()=>u(!0),[]),h=m.useCallback(()=>{u(!1)},[]),g=VL(),{billingUrl:f,isLoading:_}=so(),b=i.suspendTimeoutSeconds!==-1?Vx(i.suspendTimeoutSeconds):"disabled";return s?e.jsxs(e.Fragment,{children:[e.jsx(Vye,{isOpen:d,onRequestClose:h,formProps:{project:s,onSuccess:h}}),e.jsx(Le,{id:"compute","aria-labelledby":g,children:e.jsxs(Ne,{children:[e.jsx(Se,{id:g,children:"Compute defaults"}),e.jsxs("div",{children:[e.jsx("p",{children:"These defaults will be used as the initial settings for any primary or read replica computes you create. Modifying these defaults does not alter the settings of any existing computes."}),e.jsxs("ul",{className:Gye.computeSettingsList,children:[e.jsxs("li",{children:[e.jsx("b",{children:"Compute size: "}),e.jsx(tN,{project:s})]}),e.jsxs("li",{children:[e.jsx("b",{children:"Scale to zero: "}),b]})]}),r&&!a&&e.jsxs("span",{children:[e.jsx(R,{href:f,disabled:_,onClick:()=>{t("project_settings_compute_upgrade_to_pro_clicked")},children:"Upgrade"}),e.jsx("span",{children:" to control compute size and scale to zero"})]})]}),(l??0)>.25&&e.jsx(ks,{children:e.jsx(E,{disabled:n||o,onClick:p,"data-qa":"change_compute_setting_button",size:"s",children:"Modify defaults"})})]})})]}):e.jsx(ve,{})},vc={deletionAlert:t=>e.jsxs(e.Fragment,{children:["Permanently delete project ",e.jsx("b",{children:t}),". This action is not reversible. Proceed with caution."]}),sharedProjectAlert:t=>{var s;return e.jsxs(e.Fragment,{children:["Only the"," ",t.org_id?"organization admins":`project owner (${((s=t.owner)==null?void 0:s.email)??""})`," ","can delete the project."]})},deleteButton:"Delete project",protectedBranchesAlert:"You can't delete this project because it has protected branches. Unprotect all branches first, then try again.",vercelOrgAlert:"To delete this project, use the Neon Postgres integration in Vercel.",hipaaAlert:e.jsxs(e.Fragment,{children:["To delete a HIPAA-enabled project, please ",e.jsx(Sj,{}),"."]})},Qye=()=>{var v;const{projectId:t,project:s,isOwnProject:n}=F(),{isOrgAdmin:r,isLoading:a}=Rt(),{branches:o,isLoading:i}=xt(),{isVercelOrg:c}=re(),{confirm:l}=Ve(),{trackUiInteraction:d}=P(),u=et(),p=ge("hipaa_self_serve_console"),{mutate:h,result:g}=WL(),f=y=>{var N;const S=new URLSearchParams;!!((N=s==null?void 0:s.settings)!=null&&N.hipaa)&&p&&S.set("modal",Je.HipaaProjectDeletedModal);const k=S.toString();return`${y}${k?`?${k}`:""}`},_=async()=>{d("project_settings_delete_project_clicked");const y=(s==null?void 0:s.name)??"unknown";await l({header:"Do you want to delete this project?",confirmButtonText:"Delete",appearance:"danger",text:e.jsxs(X,{appearance:"error",children:["This action cannot be undone. This will permanently delete the project"," ",e.jsx("code",{children:y}),". Proceed with caution."]}),inputs:{default:{label:e.jsxs("span",{children:['To confirm, type "',e.jsx("b",{children:y}),'" in the box below.']}),expectedValue:y}}})&&h(t).then(()=>{if(Ue(e.jsx(rt,{children:e.jsxs(e.Fragment,{children:["Project ",e.jsx("b",{children:y})," was successfully deleted"]})})),s!=null&&s.org_id){const w=Q(C.OrgProjectsList,{orgId:s.org_id});u.push(f(w))}else u.push(f(C.ProjectsList))},Y)},b=m.useMemo(()=>o.some(y=>y.protected),[o]),x=!!((v=s==null?void 0:s.settings)!=null&&v.hipaa),j=!c&&(n||r);return!s||i||a?e.jsx(ve,{}):e.jsx(Le,{id:"delete",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:"Delete project"}),j?e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"error",children:b?vc.protectedBranchesAlert:x&&!p?vc.hipaaAlert:vc.deletionAlert(s.name)}),e.jsx(ks,{children:e.jsx(E,{"data-qa":"delete-project-button",onClick:_,disabled:b||x&&!p,loading:g.isLoading,appearance:"danger",size:"s",children:vc.deleteButton})})]}):e.jsx(e.Fragment,{children:c?e.jsx(X,{appearance:"info",children:vc.vercelOrgAlert}):e.jsx(X,{children:vc.sharedProjectAlert(s)})})]})})},vp={projectNameLabel:"Project name",projectIdLabel:"Project ID",success:"Project updated successfully",submitButton:"Save"},qo={label:"HIPAA compliance",enabledLabel:t=>`Enabled on ${fe(t,ke.DateFull)}`,notAllowedLabel:e.jsxs(e.Fragment,{children:[e.jsx(R,{openInNewTab:!0,href:"https://neon.com/contact-sales",children:"Add HIPAA to your Organization's plan"})," ","to enable it for your projects."]}),tooltip:e.jsxs(e.Fragment,{children:[e.jsx(Sj,{children:"Contact support"})," to disable HIPAA compliance for this project."]}),confirmHeader:"Confirm HIPAA",confirmText:"Are you sure you want to enable HIPAA for this project?",hipaaEnabledSuccess:t=>`HIPAA has been enabled for project ${t}`},Yye="_switchWrapper_1cwta_1",Jye={switchWrapper:Yye},Zye=()=>{const{confirm:t}=Ve(),s=ki("allow_hipaa_projects"),n=Ct(),{field:r}=qb({name:"hipaa",control:n.control}),a=r.onChange,{isLoading:o,project:i}=F(),c=Vs(),l=m.useCallback(async u=>{if(!(!u||!await t({header:qo.confirmHeader,text:qo.confirmText}))){a(u);try{await c({projectId:i.id,data:{settings:{hipaa:!0}}}),oe(qo.hipaaEnabledSuccess(i.name))}catch(h){Y(h),a(!1)}}},[t,a,c,i]),{isPricingV3Account:d}=he();return o||!i||s===void 0||d&&!s?null:e.jsx(te,{content:e.jsx(T,{children:qo.tooltip}),disabled:!r.value,children:e.jsx("div",{className:Jye.switchWrapper,children:e.jsx(as,{isDisabled:!s||r.value,isSelected:r.value,onChange:l,children:e.jsxs("div",{children:[e.jsx(T,{children:qo.label}),e.jsx(T,{appearance:"secondary",children:r.value&&i.hipaa_enabled_at!==void 0?qo.enabledLabel(i.hipaa_enabled_at):!d&&!s&&qo.notAllowedLabel})]})})})})},f1=64,Xye=()=>{var d;const{isLoading:t,project:s,projectId:n}=F(),{trackUiInteraction:r}=P(),a=ge("hipaa_self_serve_console"),o=m.useCallback(()=>{r("project_settings_project_id_copied")},[r]),i=$e({defaultValues:{name:s==null?void 0:s.name,hipaa:(s==null?void 0:s.hipaa_enabled_at)!==void 0}}),c=Vs(),l=({name:u})=>(r("project_settings_general_page_save"),c({projectId:n,data:{name:u}}).then(()=>{oe(vp.success)}).catch(Y));return t?e.jsx(ve,{}):s?e.jsx(Le,{id:"general",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:e.jsx(gt,{id:"NJQjXS",defaultMessage:[{type:0,value:"General"}]})}),e.jsxs(es,{providerProps:i,onSubmit:l,gaps:!0,children:[e.jsxs(fu,{children:[e.jsx(U,{id:"name_field",error:(d=i.formState.errors.name)==null?void 0:d.message,label:vp.projectNameLabel,children:e.jsx(ie,{...i.register("name",{maxLength:{value:f1,message:`Name should be less than ${f1} characters`}})})}),e.jsx(U,{label:vp.projectIdLabel,children:e.jsx(Ms,{"data-qa":"project-id",copy:{onCopy:o},children:n})})]}),!a&&e.jsx(Zye,{}),e.jsx("div",{children:e.jsx(Ce,{children:vp.submitButton})})]})]})}):null},Es={label:"HIPAA compliance",description:"Enable HIPAA compliance on this project to ensure that all protected health information (PHI) is protected in compliance with the Health Insurance Portability and Accountability Act (HIPAA). For more details about how we support HIPAA compliance, see our",documentationLink:"HIPAA Compliance guide",documentationUrl:"https://neon.com/docs/security/hipaa",statusEnabled:"HIPAA COMPLIANCE ENABLED",statusDisabled:"HIPAA COMPLIANCE DISABLED",enableButton:"Enable",notAllowedLabel:t=>e.jsxs("span",{children:["Your current plan does not support HIPAA compliance."," ",e.jsx(R,{onClick:t,children:"Change my plan."})]}),confirmHeader:"Enable HIPAA Compliance",confirmText:t=>`Are you sure you want to enable HIPAA compliance on project ${t}?`,confirmButton:"Enable",confirmWarning:"Once HIPAA compliance is enabled on a project, it cannot be disabled. Enabling HIPAA will also restart all computes, temporarily interrupting database connections.",hipaaEnabledSuccess:t=>`HIPAA has been enabled for project ${t}`},ewe="_cardActions_zf72b_1",twe="_warningAlert_zf72b_7",_1={cardActions:ewe,warningAlert:twe},swe=()=>{const{confirm:t}=Ve(),{trackUiInteraction:s}=P(),n=ki("allow_hipaa_projects"),{isLoading:r,project:a}=F(),o=Vs(),{subscriptionType:i}=he(),[c,l]=m.useState(!1),d=(a==null?void 0:a.hipaa_enabled_at)!==void 0,u=rx(i);m.useEffect(()=>{i&&s("project_settings_hipaa_support_shown",{subscription_type:i,hipaa_enabled:d})},[i,d,s]);const p=m.useCallback(async()=>{if(!await t({header:Es.confirmHeader,confirmButtonText:Es.confirmButton,text:e.jsxs("div",{children:[e.jsx(X,{appearance:"warning",className:_1.warningAlert,children:Es.confirmWarning}),e.jsx("div",{children:Es.confirmText(a.name)})]})})){s("project_settings_hipaa_enable_cancelled");return}try{await o({projectId:a.id,data:{settings:{hipaa:!0}}}),s("project_settings_hipaa_enabled"),oe(Es.hipaaEnabledSuccess(a.name))}catch(_){Y(_)}},[t,o,a,s]),h=m.useCallback(()=>{s("project_settings_hipaa_upgrade_cta_clicked"),l(!0)},[s]),g=m.useCallback(()=>{l(!1)},[]);return r||!a?null:e.jsxs(e.Fragment,{children:[e.jsx(Le,{id:"hipaa-support",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:e.jsx(T,{weight:"semibold",children:Es.label})}),e.jsxs(T,{appearance:"secondary",children:[Es.description," ",e.jsx(R,{href:Es.documentationUrl,openInNewTab:!0,icon:"external_link",children:Es.documentationLink})]}),e.jsx("div",{children:e.jsx(Bn,{label:d?Es.statusEnabled:Es.statusDisabled,appearance:d?"success":"default"})}),!d&&e.jsxs("div",{className:_1.cardActions,children:[e.jsx(E,{onClick:p,disabled:!n,children:Es.enableButton}),!u&&!n&&Es.notAllowedLabel(h)]})]})}),e.jsx(lt,{type:Xe.Default,isOpen:c,onRequestClose:g})]})},Aj=(t,s)=>{const[n,r]=m.useState(t),[a,o]=m.useOptimistic(t,(p,h)=>h),[i,c]=m.useState(null),[l,d]=m.useTransition();m.useEffect(()=>{r(t)},[t]);const u=m.useCallback(p=>{c(null),d(async()=>{o(p);try{await s(p),r(p)}catch(h){c(h)}})},[s,o]);return{isActive:l?a:n,isPending:l,toggle:u,error:i}},nwe="_protectedBranchName_90dew_1",rwe="_disabledText_90dew_12",b1={protectedBranchName:nwe,disabledText:rwe},awe=()=>{var u,p;const{projectId:t,project:s}=F(),{branches:n}=Bu({projectId:t}),r=Vs(),a=m.useCallback(h=>r({projectId:t,data:{settings:{allowed_ips:{protected_branches_only:h}}}}),[t,r]),{isActive:o,isPending:i,toggle:c}=Aj(!!((p=(u=s==null?void 0:s.settings)==null?void 0:u.allowed_ips)!=null&&p.protected_branches_only),a),l=n.filter(h=>h.protected),d=l.length>0;return e.jsxs(Ne,{children:[e.jsx(Se,{level:4,size:"h5",children:"Branch access"}),e.jsx("p",{children:"Restrict IP access to protected branches only while allowing development teams full access to other branches."}),e.jsx(as,{isSelected:o,onChange:c,isDisabled:i,children:"Restrict IP access to protected branches only"}),e.jsx("div",{children:d?l.map((h,g)=>e.jsxs("span",{children:[e.jsx("code",{className:b1.protectedBranchName,children:h.name}),g<l.length-1&&", "]})):e.jsxs("span",{className:b1.disabledText,children:["No protected branches on the project yet."," ",e.jsx(R,{href:Am,openInNewTab:!0,children:"Learn more"})," ","about protected branches."]})})]})},owe="_container_18ebk_1",iwe="_header_18ebk_6",x1={container:owe,header:iwe},cwe=t=>{if(t)return(mi(t)?t:[t]).filter(Boolean)[0].message},yp={toModel:t=>t.split(",").map(s=>s.trim()),toPresentation:t=>t.join(", ")},lwe=({field:t,fieldState:s,headerAction:n,validate:r})=>{const[a,o]=m.useState(yp.toPresentation(t.value??[]));return m.useEffect(()=>{HC(yp.toModel(a),t.value)||o(yp.toPresentation(t.value??[]))},[t.value,a]),e.jsx(U,{id:"ip_addresses",className:x1.container,label:e.jsxs("span",{className:x1.header,children:["Allowed IP addresses and ranges ",n]}),description:"Separate multiple entries with commas.",error:cwe(s.error),children:e.jsx(yi,{placeholder:"e.g., 192.0.2.1, 198.51.100.20-198.51.100.50, 203.0.113.0/24, 2001:DB8:5432::/48",ref:t.ref,rows:3,disabled:t.disabled,value:a,onChange:i=>{o(i.target.value),t.onChange(yp.toModel(i.target.value)),r()}})})},dwe=({control:t,headerAction:s,validate:n})=>e.jsx(Pe,{control:t,name:"ips",render:({field:r,fieldState:a})=>e.jsx(lwe,{field:r,fieldState:a,validate:n,headerAction:s})}),j1="[a-fA-F\\d:]",Va=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${j1})|(?<=${j1})(?=\\s|$))`:"",$n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Dt="[a-fA-F\\d]{1,4}",pg=`
(?:
(?:${Dt}:){7}(?:${Dt}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Dt}:){6}(?:${$n}|:${Dt}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Dt}:){5}(?::${$n}|(?::${Dt}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Dt}:){4}(?:(?::${Dt}){0,1}:${$n}|(?::${Dt}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Dt}:){3}(?:(?::${Dt}){0,2}:${$n}|(?::${Dt}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Dt}:){2}(?:(?::${Dt}){0,3}:${$n}|(?::${Dt}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Dt}:){1}(?:(?::${Dt}){0,4}:${$n}|(?::${Dt}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Dt}){0,5}:${$n}|(?::${Dt}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),uwe=new RegExp(`(?:^${$n}$)|(?:^${pg}$)`),hwe=new RegExp(`^${$n}$`),pwe=new RegExp(`^${pg}$`),mg=t=>t&&t.exact?uwe:new RegExp(`(?:${Va(t)}${$n}${Va(t)})|(?:${Va(t)}${pg}${Va(t)})`,"g");mg.v4=t=>t&&t.exact?hwe:new RegExp(`${Va(t)}${$n}${Va(t)}`,"g");mg.v6=t=>t&&t.exact?pwe:new RegExp(`${Va(t)}${pg}${Va(t)}`,"g");const SN={exact:!1},CN=`${mg.v4().source}\\/(3[0-2]|[12]?[0-9])`,kN=`${mg.v6().source}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,mwe=new RegExp(`^${CN}$`),gwe=new RegExp(`^${kN}$`),fwe=({exact:t}=SN)=>t?mwe:new RegExp(CN,"g"),_we=({exact:t}=SN)=>t?gwe:new RegExp(kN,"g"),IN=fwe({exact:!0}),PN=_we({exact:!0}),Nj=t=>IN.test(t)?4:PN.test(t)?6:0;Nj.v4=t=>IN.test(t);Nj.v6=t=>PN.test(t);const bwe=nt({errorMap:(t,s)=>({message:`Invalid IP address: '${s.data}'`})}).trim().superRefine((t,s)=>{try{al(t)}catch{s.addIssue({code:$c.custom,message:`Invalid IP address: '${t}'`})}}),xwe=tk(t=>Nj(t)!==0,t=>({message:`Invalid CIDR format: '${t}'`})),jwe=nt().superRefine((t,s)=>{const n=t.split("-").map(r=>r.trim());if(n.length!==2){s.addIssue({code:$c.custom,message:`IP range must be separated by single '-': '${t}'`});return}try{const[r,a]=n.map(o=>al(o));if(r.version!==a.version){s.addIssue({code:$c.custom,message:`IPs in range must have same version: '${t}'`});return}r.compare(a)===1&&s.addIssue({code:$c.custom,message:`The start part of IP range should be lower than end part: '${t}'`})}catch{s.addIssue({code:$c.custom,message:`Invalid IP address range: '${t}'`})}}),v1=Et({protected_branches_only:_i().optional(),ips:di(nt()).or(sk()).superRefine((t,s)=>(t==null||t.map(n=>{if(n.includes("/"))return xwe.safeParse(n);if(n.includes("-"))return jwe.safeParse(n);if(n.trim().length>0)return bwe.safeParse(n)}).forEach((n,r)=>{n&&!n.success&&n.error.errors.forEach(a=>s.addIssue({...a,path:[r]}))}),t))}),vwe=(t,s,{disabled:n}={})=>{const{trackUiInteraction:r}=P(),{confirm:a}=Ve(),o=Vs(),{control:i,handleSubmit:c,formState:l,reset:d,trigger:u}=$e({resolver:Ii(v1),defaultValues:{ips:(s==null?void 0:s.ips)??[],protected_branches_only:(s==null?void 0:s.protected_branches_only)??!0},disabled:n});return{control:i,handleSubmit:c(async({ips:h,protected_branches_only:g})=>{r("project_settings_ip_allow_form_submit_clicked");try{const f=v1.parse({ips:h==null?void 0:h.filter(Boolean),protected_branches_only:g});if(kU(f.ips)&&f.ips!==(s==null?void 0:s.ips)){if(!await a({header:"Edit IP Allow list",text:e.jsx(X,{appearance:"warning",children:"Removing all IP addresses from the allowlist will permit database connection attempts from any IP address. However, any database connection still requires authentication."}),confirmButtonText:"Confirm"})){r("project_settings_ip_allow_form_submit_declined"),d(s,{keepDefaultValues:!1});return}r("project_settings_ip_allow_form_submit_confirmed")}await o({projectId:t,data:{settings:{allowed_ips:f}}}),Ue(e.jsx(rt,{children:"IP Allow updated!"}))}catch(f){Sm(f)}}),formState:l,validate:u}},TN=({project:t,disabled:s})=>{var c;const{control:n,handleSubmit:r,formState:a,validate:o}=vwe(t.id,(c=t.settings)==null?void 0:c.allowed_ips,{disabled:s}),i=a.isValid;return e.jsx(e.Fragment,{children:e.jsx(qt,{onSubmit:r,children:e.jsxs(Ne,{children:[e.jsx(dwe,{control:n,validate:o}),e.jsx(E,{type:"submit",size:"s","data-qa":"ip_allow_form_submit",disabled:s||!i,loading:a.isSubmitting,children:a.isSubmitting?"Updating...":"Update IP list"}),e.jsx(awe,{})]})})})},zp={title:"IP Allow",description:t=>e.jsxs(e.Fragment,{children:["Control database access in this project by adding allowed IP addresses. Enter individual IP addresses, define ranges with a dash, or use"," ",e.jsx(R,{openInNewTab:!0,href:"https://neon.com/docs/reference/glossary#cidr-notation",icon:"external_link",onClick:t,children:"CIDR notation"})," ","for more flexibility."]}),learnMore:"Learn more",upgradeRequired:t=>e.jsxs(e.Fragment,{children:["Limit database access to trusted IP addresses."," ",e.jsx(R,{"data-qa":"upgrade_button",onClick:t,children:"Upgrade your plan"})," ","to enable this feature."]})},ywe=({onUpgradeClick:t,project:s,isIPAllowUnavailable:n})=>{const{trackUiInteraction:r}=P(),{isLoading:a}=F();return n?e.jsx("div",{children:zp.upgradeRequired(t)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[zp.description(()=>{r("project_settings_ip_allow_learn_more_clicked")})," ",e.jsx(R,{openInNewTab:!0,href:"https://neon.com/docs/manage/projects#configure-ip-allow",icon:"external_link",onClick:()=>{r("project_settings_ip_allow_learn_more_clicked")},children:zp.learnMore})]}),e.jsx(TN,{project:s,disabled:a})]})},wwe=({project:t})=>{const{trackUiInteraction:s}=P(),{isLoading:n,limits:r}=It(),a=!(r!=null&&r.max_allowed_ips),[o,i]=m.useState(!1),c=()=>{s("project_settings_ip_allow_upgrade_to_pro_clicked"),i(!0)};return n?e.jsx(on,{}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.IpAllowRules,isOpen:o,onRequestClose:()=>i(!1)}),e.jsxs(Ne,{children:[e.jsx(Se,{level:3,children:zp.title}),e.jsx(ywe,{onUpgradeClick:c,isIPAllowUnavailable:a,project:t})]})]})},rr={title:"Private networking",description:"Securely connect your apps to Neon's infrastructure over a protected internal network using AWS PrivateLink.",learnMore:"Learn more",orgSettingsLink:"Configure in organization settings",suffix:{nonOrg:"Only available on select plans for the organization accounts.",orgCollaborator:"Ask organization admin to configure.",userCollaborator:"Ask the project owner to configure."},convertButton:"Create organization"},Swe="_pageHeader_17yw7_1",Cwe={pageHeader:Swe},kwe=({project:t})=>{const{orgId:s}=re(),{isOwnProject:n}=F(),[r,a]=m.useState(!1);return t?s?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[rr.description," ",e.jsx(R,{href:mu,icon:"external_link",openInNewTab:!0,children:rr.learnMore})]}),e.jsx(E,{appearance:"secondary",as:Ge,href:Q(C.OrgSettings,{orgId:s}),children:rr.orgSettingsLink})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[rr.description," ",n?rr.suffix.nonOrg:t.org_id?rr.suffix.orgCollaborator:rr.suffix.userCollaborator," ",e.jsx(R,{href:mu,icon:"external_link",openInNewTab:!0,children:rr.learnMore})]}),n&&e.jsxs(e.Fragment,{children:[r&&e.jsx(Ax,{onRequestClose:()=>a(!1)}),e.jsx(E,{appearance:"secondary",size:"s",onClick:()=>a(!0),children:rr.convertButton})]})]}):null},Iwe=({project:t})=>e.jsxs(Ne,{children:[e.jsx(Se,{level:3,titleClassName:Cwe.pageHeader,children:rr.title}),e.jsx(kwe,{project:t})]}),Pwe="_panel_81njg_1",Twe={panel:Pwe},Awe="_panel_1vxej_1",AN={panel:Awe},Nwe=({project:t})=>{var p;const{limits:s}=It(),n=ge("block_connections"),r=(s==null?void 0:s.max_allowed_ips)!=null&&(s==null?void 0:s.max_allowed_ips)>0,a=!((p=t.settings)!=null&&p.block_public_connections),o=Vs(),i=m.useCallback(h=>o({projectId:t.id,data:{settings:{block_public_connections:!h}}}),[t.id,o]),{isActive:c,toggle:l,isPending:d,error:u}=Aj(a,i);return m.useEffect(()=>{u!=null&&Ye("Could not update project setting")},[u]),e.jsxs(Le,{className:AN.panel,children:[e.jsx(as,{isSelected:c,onChange:l,isDisabled:!n||d,children:"Allow traffic via the public internet"}),!r&&e.jsx(pj,{type:"ip"}),r&&c&&e.jsx(TN,{project:t,disabled:!1})]})},Ewe="_list_ylm1v_1",Owe="_addMoreEndpointsText_ylm1v_7",w_={list:Ewe,addMoreEndpointsText:Owe},$we="_card_gum2c_1",Lwe="_cardItem_gum2c_11",Rwe="_header_gum2c_16",Mwe="_icon_gum2c_26",Ca={card:$we,cardItem:Lwe,header:Rwe,icon:Mwe},y1=({endpointId:t,configured:s})=>{const{project:n}=F(),{data:r}=ZC({vpcEndpointId:t,regionId:(n==null?void 0:n.region_id)??""});return r?e.jsxs("div",{className:Ca.card,children:[e.jsxs("div",{className:Ca.cardItem,children:[e.jsx("div",{className:Ca.header,children:"Connection allowed"}),e.jsx("div",{children:r.state==="accepted"&&s?e.jsxs(e.Fragment,{children:[e.jsx(z,{name:"check",size:16,className:Ca.icon})," Yes"]}):e.jsx("span",{children:"No"})})]}),e.jsxs("div",{className:Ca.cardItem,children:[e.jsx("div",{className:Ca.header,children:"VPC Endpoint Id"}),e.jsx("div",{children:r.vpc_endpoint_id})]}),e.jsxs("div",{className:Ca.cardItem,children:[e.jsx("div",{className:Ca.header,children:"Label"}),e.jsx("div",{children:r.label||"-"})]})]}):null},Bwe=({projectId:t,regionId:s})=>{const{data:n,isLoading:r}=GL(t),{data:a,isLoading:o}=KL(s),i=r||o;if(i)return e.jsx(Ne,{children:e.jsx(ve,{})});const{configuredVPCs:c,notConfiguredVPCs:l}=(a==null?void 0:a.reduce((d,u)=>(!n||n.length===0||n.some(h=>h.vpc_endpoint_id===u.vpc_endpoint_id)?d.configuredVPCs.push(u):d.notConfiguredVPCs.push(u),d),{configuredVPCs:[],notConfiguredVPCs:[]}))??{configuredVPCs:[],notConfiguredVPCs:[]};return!n&&!i?null:e.jsxs(Ne,{children:[(!a||a.length===0)&&e.jsxs(e.Fragment,{children:[e.jsx(X,{appearance:"warning",title:"No configured VPC endpoints.",action:e.jsxs(Ge,{forceNative:!0,openInNewTab:!0,href:mu,children:["Configure using CLI ",e.jsx(z,{name:"external_link",size:16})]}),children:"There are no configured endpoints in the cell/region"}),e.jsxs("p",{className:w_.addMoreEndpointsText,children:["Add more private link or restrict access to a specific private link"," ",e.jsxs(Ge,{forceNative:!0,openInNewTab:!0,href:Sv,children:["using our CLI ",e.jsx(z,{name:"external_link",size:12})]})]})]}),!r&&a!=null&&(c.length>0||l.length>0)&&e.jsxs("div",{className:w_.list,children:[e.jsx(Se,{level:4,size:"h5",children:"Available restrictions"}),c==null?void 0:c.map(d=>e.jsx(y1,{endpointId:d.vpc_endpoint_id,configured:!0},d.vpc_endpoint_id)),l&&l.length>0&&e.jsxs(e.Fragment,{children:[l.map(d=>e.jsx(y1,{endpointId:d.vpc_endpoint_id,configured:!1},d.vpc_endpoint_id)),e.jsxs("p",{className:w_.addMoreEndpointsText,children:[e.jsx(z,{name:"add_outlined",size:12})," Add more private link or restrict access to a specific private link"," ",e.jsxs(Ge,{forceNative:!0,openInNewTab:!0,href:Sv,children:["using our CLI ",e.jsx(z,{name:"external_link",size:12})]})]})]})]})]})},Dwe=({project:t})=>{var p;const{limits:s}=It(),n=!(s!=null&&s.max_vpc_endpoints_per_region),r=!((p=t.settings)!=null&&p.block_vpc_connections),a=!n&&r,o=Vs(),i=m.useCallback(h=>o({projectId:t.id,data:{settings:{block_vpc_connections:!h}}}),[t.id,o]),{isActive:c,toggle:l,isPending:d,error:u}=Aj(a,i);return m.useEffect(()=>{u!=null&&Ye("Could not update project setting")},[u]),e.jsxs(Le,{className:AN.panel,children:[e.jsx(as,{isSelected:c,onChange:l,isDisabled:n||d,children:"Allow traffic via Virtual Private Network (VPC)"}),n&&e.jsx(pj,{type:"vpc"}),c&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Restrict access to this project to specific VPC endpoints. By default, projects can be accessed using any VPC endpoint configured at the organiztion level."}),e.jsx(Ne,{children:e.jsx(Bwe,{projectId:t.id,regionId:t.region_id})})]})]})},Uwe=()=>{var r;const{project:t}=F(),{isLoading:s}=It();if(!t||s)return e.jsx(ve,{});const n=((r=t.settings)==null?void 0:r.block_public_connections)&&t.settings.block_vpc_connections;return e.jsxs(Le,{id:"network-security",className:Twe.panel,children:[n&&e.jsx(X,{appearance:"warning",title:"All database connections are blocked",children:"Your database isn't accessible because connections from both the public internet and VPC are disabled."}),e.jsx(Se,{children:"Networking"}),e.jsx(Nwe,{project:t}),e.jsx(Dwe,{project:t})]})},Fwe=()=>{const{project:t}=F(),{isLoading:s}=It(),n=ge("private_networking");return!t||s?e.jsx(ve,{}):n?e.jsx(Uwe,{}):e.jsxs(Le,{id:"network-security",children:[e.jsx(Se,{children:"Networking"}),e.jsx(wwe,{project:t}),e.jsx(Iwe,{project:t})]})},Id={header:"Logical Replication",nextStepsTitle:"Next steps",nextSteps:e.jsx("p",{children:e.jsx(gt,{id:"tXNmWD",defaultMessage:[{type:0,value:"After enabling logical replication, the next steps are creating publications in Neon and configuring subscribers. For detailed instructions, please refer to our "},{type:8,value:"link",children:[{type:0,value:"documentation"}]}],values:{link:t=>e.jsx(R,{href:"https://neon.com/docs/guides/logical-replication-guide",openInNewTab:!0,icon:"external_link",children:t})}})}),logicalReplicationEnabled:"Logical replication is enabled for this project.",enableLogicalReplicationButton:"Enable"},w1=e.jsxs(X,{appearance:"warning",children:[e.jsx(gt,{id:"P4YirL",defaultMessage:[{type:0,value:"Enabling logical replication:"}]}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(gt,{id:"kT2zWj",defaultMessage:[{type:0,value:"Restarts all computes in your Neon project, dropping any active connections"}]})}),e.jsx("li",{children:e.jsx(gt,{id:"VM21aR",defaultMessage:[{type:0,value:"Changes your Postgres "},{type:8,value:"code",children:[{type:0,value:"wal_level"}]},{type:0,value:" setting to "},{type:8,value:"code",children:[{type:0,value:"logical"}]}],values:{code:t=>e.jsx(Ae,{children:t})}})}),e.jsx("li",{children:e.jsx(gt,{id:"/ZQlsK",defaultMessage:[{type:0,value:"Can not be turned off once enabled"}]})})]})]}),zwe=()=>{var c;const{confirm:t}=Ve(),{trackUiInteraction:s}=P(),{project:n}=F(),r=Vs(),a=(c=n==null?void 0:n.settings)==null?void 0:c.enable_logical_replication,o=m.useCallback(async()=>{if(!n)return;if(s("logical_replication_enable_clicked"),!await t({header:"Enable logical replication",text:w1,confirmButtonText:"Enable"})){s("logical_replication_enable_cancelled");return}s("logical_replication_enable_confirmed"),r({projectId:n.id,data:{settings:{enable_logical_replication:!0}}}).catch(d=>Sm(d))},[n,s,r,t]),i=yr(m.useMemo(()=>n?{shared:{projects:[n.id]}}:null,[n]));return n?e.jsxs(Le,{id:"out-replication",children:[e.jsx(Ne,{children:e.jsx(Se,{children:Id.header})}),!!a&&e.jsx(X,{appearance:"success",children:Id.logicalReplicationEnabled}),e.jsx("p",{children:e.jsx(gt,{id:"GnN0x+",defaultMessage:[{type:0,value:"Logical replication lets you replicate data changes from Neon to external data services and platforms."}]})}),!a&&w1,a?e.jsxs(e.Fragment,{children:[e.jsx(Z,{level:3,size:"h4",children:Id.nextStepsTitle}),Id.nextSteps]}):e.jsx(lo,{lockedMessage:i,children:e.jsx(E,{appearance:"primary",size:"s",onClick:o,disabled:!!i,children:Id.enableLogicalReplicationButton})})]}):null},Ej=({projectId:t})=>["listProjectPermissions",t],qwe=({projectId:t})=>bt({queryKey:Ej({projectId:t}),queryFn:async()=>(await G.listProjectPermissions(t)).data,enabled:!!t,retry:0}),Hwe=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:["revokePermissionFromProject",t],mutationFn:async({permissionId:o})=>(await G.revokePermissionFromProject(t,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Ej({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Vwe=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const a=be();return _e({mutationKey:["grantPermissionToProject",t],mutationFn:async o=>(await G.grantPermissionToProject(t,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Ej({projectId:t})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},yc={title:"Invite collaborators",emailLabel:"Email address",emailPlaceholder:"name@example.com",emailFooter:"Comma separated emails",submitButton:"Invite",invitationSuccess:(t,s)=>`Collaborator ${t} received access to project ${s}`},Wwe="_emailInput_1qx2h_1",Gwe={emailInput:Wwe},Kwe=({project:t,onSubmit:s,onRequestClose:n})=>{var i;const r=$e({mode:"onSubmit",defaultValues:{collaborator_emails:""}}),a=Vwe({projectId:t.id},{onSuccess:c=>oe(yc.invitationSuccess(c.granted_to_email,t.name))}),o=c=>{gm(c.collaborator_emails).forEach(l=>a.mutate({email:l})),s()};return e.jsx(e.Fragment,{children:e.jsxs(ps,{modalProps:{title:yc.title,isOpen:!0,onRequestClose:n,width:550},providerProps:r,onSubmit:o,children:[e.jsx(De,{gaps:!0,children:e.jsxs(U,{label:yc.emailLabel,error:(i=r.formState.errors.collaborator_emails)==null?void 0:i.message,children:[e.jsx(ie,{autoFocus:!0,placeholder:yc.emailPlaceholder,className:Gwe.emailInput,...r.register("collaborator_emails",{required:{value:!0,message:"This field is required"},validate:c=>gm(c)!==null||"Please enter a valid email address"})}),e.jsx(T,{appearance:"secondary",style:{marginTop:4},children:yc.emailFooter})]})}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{children:yc.submitButton})]})]})})},Qwe=({project:t,...s})=>{const{trackUiInteraction:n}=P(),r=it(Je.InviteProjectCollaborators);return e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(Kwe,{project:t,onSubmit:()=>{n("project_settings_sharing_invite_modal_submitted"),r.closeModal()},onRequestClose:()=>{n("project_settings_sharing_invite_modal_cancelled"),r.closeModal()}}),e.jsx(E,{size:"s",onClick:()=>{n("project_settings_sharing_invite_clicked"),r.openModal()},...s,children:"Invite"})]})},Bc={title:"Collaborators",description:t=>e.jsx(e.Fragment,{children:t?e.jsxs(e.Fragment,{children:["You have been added to this project. Other collaborators are listed below. Collaborators have limited permissions.",e.jsx(Bs,{children:"Collaborators can manage all database resources, but they can't delete the project."})]}):"Invite external collaborators to join this project. Existing collaborators are listed below."}),emailColumnLabel:"Email",revokeLabel:"Revoke project sharing",revokeSuccess:(t,s)=>`Removed collaborator ${t} access to project ${s}`,footnote:(t,s,n)=>e.jsxs("p",{children:["* This project is owned by ",e.jsx("strong",{children:t}),"."," ",s!==void 0&&e.jsxs(e.Fragment,{children:[n?"Manage member permissions on":"View members from the"," ",e.jsx(R,{href:Q(C.OrgPeople,{orgId:s.id}),children:"People page"}),"."]})]})},Ywe=({permissionId:t,project:s,email:n})=>{const{trackUiInteraction:r}=P(),a=Hwe({projectId:s.id},{onSuccess:()=>oe(Bc.revokeSuccess(n,s.name))}),o=m.useMemo(()=>[{items:[{label:Bc.revokeLabel,onClick(){r("project_settings_sharing_revoke_clicked"),a.mutate({permissionId:t})}}]}],[r,a,t]);return e.jsx(Yt,{sections:o,placement:"bottom right",children:e.jsx(ms,{"aria-label":`Actions for collaborator ${n}`})})},Jwe=()=>{var h,g;const t=et(),s=cn(),{project:n,isLoading:r,projectId:a}=F(),{org:o,isLoading:i}=re(),{isOrgAdmin:c}=Rt(),{data:l}=Hb(),d=!!(l!=null&&l.some(({id:f})=>f===(n==null?void 0:n.id))),u=qwe({projectId:a});m.useEffect(()=>{Xr(u.error)&&u.error.status===404&&(s(Cm.util.invalidateTags(["Projects"])),t.push(C.ProjectsList))},[u.error,t,s]);const p=m.useMemo(()=>[{key:"user_email",label:Bc.emailColumnLabel,renderValue:({granted_to_email:f})=>e.jsx(T,{children:f})},G0(({id:f,granted_to_email:_})=>e.jsx(Ywe,{project:n,permissionId:f,email:_}))],[n]);return!n||i||r?null:e.jsxs(Le,{id:"sharing",children:[e.jsxs(Ne,{children:[e.jsx(Se,{actions:e.jsx(Qwe,{project:n}),children:Bc.title}),e.jsx(T,{appearance:"secondary",children:Bc.description(d)})]}),e.jsx(xr,{cols:p,data:(h=u.data)==null?void 0:h.project_permissions,isLoading:u.isLoading,dataPlaceholderProps:{title:"You haven't shared your project with anyone yet"}}),(d||o!==void 0)&&Bc.footnote(((g=n.owner)==null?void 0:g.name)??"",o,c)]})},Zwe="_root_14q3m_1",Xwe="_value_14q3m_6",eSe="_unit_14q3m_10",S_={root:Zwe,value:Xwe,unit:eSe},tSe=Object.values(Zr).filter(t=>t!==Zr.Seconds&&t!==Zr.Minutes).map(t=>({value:t,label:Kc(t)})),sSe=({savedValue:t,onChangeValue:s,onEmptyValue:n})=>{const[r,a]=m.useState(""),[o,i]=m.useState();m.useEffect(()=>{if(o)if(r){const d=Number(r)*ur[o.value];s(d)}else n("Provide a correct value")},[r,o,s,n]),m.useEffect(()=>{if(t===void 0)return;const{highestValue:d,highestUnit:u}=km(t);a(String(d)),i({value:u,label:Kc(u)})},[t]);const c=d=>{a(d.target.value)},l=d=>{i(d)};return e.jsx(e.Fragment,{children:o&&e.jsxs("div",{className:S_.root,children:[e.jsx(ie,{type:"number",value:r,onChange:c,className:S_.value}),e.jsx(Za,{value:o,options:tSe,onChange:d=>l(d??void 0),className:S_.unit})]})})},Nb=[{value:0,unit:gn.Hours},{value:1,unit:gn.Hours},{value:2,unit:gn.Hours},{value:6,unit:gn.Hours},{value:12,unit:gn.Hours},{value:1,unit:gn.Days},{value:2,unit:gn.Days},{value:7,unit:gn.Days},{value:14,unit:gn.Days},{value:21,unit:gn.Days},{value:30,unit:gn.Days}],nSe=({savedValue:t,defaultValue:s,maxValue:n,onChangePreset:r})=>{const[a,o]=m.useState(),i=m.useMemo(()=>Nb.filter(({value:d,unit:u})=>d*ur[u]<=n),[n]),c=m.useMemo(()=>Nb.findIndex(({value:d,unit:u})=>d*ur[u]===s),[s]),l=d=>{const{value:u,unit:p}=i[d];return`${u}${p}`};return m.useEffect(()=>{if(a!==void 0){const{value:d,unit:u}=i[a];r(d*ur[u])}},[a,r,i]),m.useEffect(()=>{if(t===void 0)return;const d=i.findIndex(({value:u,unit:p})=>u*ur[p]===t);if(d!==-1){o(d);return}o(c)},[c,t,i]),e.jsx(e.Fragment,{children:a!==void 0&&e.jsx(m3,{value:a,onChange:d=>o(d),max:i.length-1,formatMark:l,filled:!1})})};function rSe(t){return yr(m.useMemo(()=>({shared:{projects:[t]},exclusive:{actions:[`apply_storage_config@${t}`]}}),[t]))}const qp={title:"Instant restore",description:()=>e.jsxs(e.Fragment,{children:["Choose the length of your restore window. This setting enables"," ",e.jsx("b",{children:"instant restore"})," for point-in-time recovery, time travel queries, and branching from past states."]}),longRetentionWarning:"Note: A longer restore window can increase your storage usage.",learnMore:"Learn more"},aSe="_form_uuzdu_1",oSe="_controlContainer_uuzdu_7",iSe="_control_uuzdu_7",cSe="_error_uuzdu_20",wp={form:aSe,controlContainer:oSe,control:iSe,error:cSe},S1=w0,lSe=w0,dSe=({project:t,limits:s})=>{const n=s?s.max_history_retention_seconds:S1,[r,a]=m.useState(!1),[o,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(),p=m.useMemo(()=>{if(t)return t.history_retention_seconds},[t]);m.useEffect(()=>{if(p===void 0)return;const j=Nb.findIndex(({value:v,unit:y})=>v*ur[y]===p);u(j===-1)},[p]);const h=j=>{l(j),i(j>n?`History retention can be set for up to ${Lu(n)}`:"")},g=j=>{l(j),i("")},f=Vs(),_=m.useCallback(j=>(j.preventDefault(),a(!0),f({projectId:t.id,data:{history_retention_seconds:c}}).then(()=>{Ue(e.jsx(rt,{children:"Successfully updated history retention settings"}))}).catch(Y).finally(()=>a(!1))),[f,c,t.id]),b=r||p===c||!!o,x=rSe(t.id);return e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsxs(Ne,{children:[e.jsx("div",{children:qp.description()}),e.jsxs("form",{className:wp.form,onSubmit:_,children:[e.jsxs("div",{className:wp.controlContainer,children:[e.jsx("div",{className:wp.control,children:d?e.jsx(sSe,{savedValue:p,onChangeValue:h,onEmptyValue:i}):e.jsx(nSe,{savedValue:p,defaultValue:Math.min(S1,n),maxValue:n,onChangePreset:g})}),o&&e.jsx("div",{className:wp.error,children:o})]}),Number(c)>lSe&&e.jsxs(X,{appearance:"warning",children:[qp.longRetentionWarning," ",e.jsx(R,{href:"https://neon.com/docs/manage/projects#configure-history-retention",icon:"external_link",children:qp.learnMore})]}),e.jsx(X3,{}),e.jsx("div",{children:e.jsx(lo,{lockedMessage:x,children:e.jsx(E,{type:"submit",disabled:b||!!x,size:"s",children:r?"Saving...":"Save"})})})]})]})})})},uSe=()=>{const{project:t,isLoading:s}=F(),{limits:n,isLoading:r}=It();return!t||s||r||!n?e.jsx(ve,{}):e.jsxs(Le,{id:"storage",children:[e.jsx(Se,{children:qp.title}),e.jsx(dSe,{project:t,limits:n})]})},Sp={createLinkButton:"Create claim link",title:"Claim link successfully created",claimLinkCreated:"Share this link with the Neon account you want to own the project. When they sign in and open the link, they can select the organization to transfer the project into.",claimLinkLabel:"Project claim link"},hSe="_linkLabel_1hash_1",pSe="_info_1hash_7",C1={linkLabel:hSe,info:pSe},mSe=()=>{const t=QL(),{projectId:s}=F(),{trackUiInteraction:n}=P(),[{data:r,error:a,isLoading:o},i]=m0({isLoading:!1}),[c,l]=m.useState(!1),d=m.useCallback(async()=>{if(n("project_settings_transfer_create_link_clicked"),r===void 0)try{const{id:p}=await t({projectId:s});i({data:p,isLoading:!1})}catch(p){p instanceof Error?i({error:p.message,isLoading:!1}):gi(p,{tags:{projectId:s,action:"create_claim_link"}})}l(!0)},[t,s,i,n,r]),u=m.useMemo(()=>{const p=new URL(Wa+C.Claim,window.location.origin);return p.searchParams.set("tr",r||""),p.searchParams.set("p",s||""),p.toString()},[r,s]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"s",loading:o,appearance:"secondary",onClick:d,children:Sp.createLinkButton}),c&&e.jsx(ft,{title:Sp.title,isOpen:!0,onRequestClose:()=>{n("project_settings_transfer_create_link_modal_dismissed"),l(!1)},children:e.jsxs(De,{children:[o&&e.jsx(on,{}),a&&e.jsx(X,{appearance:"error",children:a}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:C1.info,children:Sp.claimLinkCreated}),e.jsx("div",{className:C1.linkLabel,children:Sp.claimLinkLabel}),e.jsx(Ms,{hideOverflow:!0,copy:{onCopy:()=>{n("project_settings_claim_link_copied")}},children:u})]})]})})]})},Cp={header:"Transfer project",info:"You can only transfer projects to an organization you are a member of. Transfers are instant, with no downtime.",infoWithClaimLink:e.jsxs("span",{children:["Move this project to another organization you belong to. Transfers are instant, with no downtime.",e.jsx("br",{}),e.jsx("br",{}),"Or, create a ",e.jsx("strong",{children:"claim link"})," so another Neon account can take ownership."]}),transferButton:"Transfer project"},gSe="_buttonWrapper_1ed8t_1",fSe="_footer_1ed8t_5",k1={buttonWrapper:gSe,footer:fSe},_Se=()=>{const{project:t}=F(),{trackUiInteraction:s}=P(),n=et(),r=it(Je.TransferProject),{enabled:a,isLoading:o,disabledMessage:i}=vP(),c=ge("transfer_link_projects_ui");return!t||o?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(wP,{project:t,onRequestClose:()=>{r.closeModal(),s("transfer_project_modal_dismissed")},onSuccess:l=>{r.closeModal(),s("transfer_project_modal_confirmed"),n.push(Q(C.OrgProjectsList,{orgId:l}))}}),e.jsx(Le,{id:"transfer",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:Cp.header}),e.jsx(T,{appearance:"secondary",children:c?Cp.infoWithClaimLink:Cp.info}),e.jsxs(ks,{className:k1.footer,children:[e.jsx(te,{content:i,disabled:a,children:e.jsx("div",{className:k1.buttonWrapper,children:e.jsx(E,{"data-qa":"transfer-project-button",onClick:()=>{s("project_settings_transfer_project_clicked"),r.openModal()},disabled:!a,size:"s",children:Cp.transferButton})})}),c&&e.jsx(mSe,{})]})]})})]})},bSe={nextUpdate:t=>`Next update: ${fe(t,ke.UpdateScheduleUpcomingDateAndTime)}`},xSe=({date:t})=>e.jsx(X,{"data-qa":"next-update-time",children:e.jsx(T,{as:"p",children:bSe.nextUpdate(t)})}),jSe={title:"Updates"},vSe="_sectionsGap_1gvn5_1",ySe={sectionsGap:vSe},C_={description:"Select your preferred time window for updates. Compute restarts typically take only a few seconds.",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},wSe="_container_11k2x_1",SSe={container:wSe},CSe=({onChange:t,value:s,disabled:n,ref:r})=>{const{trackUiInteraction:a}=P(),o=l=>l+1,i=l=>s.includes(l),c=l=>()=>{a("project_settings_update_schedule_day_changed",{day:C_.days[l-1].toLowerCase()}),t([l])};return e.jsxs("div",{className:SSe.container,ref:r,children:[e.jsx(T,{as:"p",children:C_.description}),e.jsx($u,{children:C_.days.map((l,d)=>e.jsx(mr,{active:i(o(d)),onClick:c(o(d)),disabled:n,children:l},l))})]})},kp={save:"Save",upgradeToEdit:"Upgrade to customize",whyUpgrade:"On the Free Plan, Neon schedules updates as needed, typically completing in just a few seconds. For more control over when updates occur, upgrade your plan to set a specific time window for updates.",schedule:"Schedule"},kSe="_button_1wi41_1",ISe="_restartOutsideOfScheduleAlert_1wi41_5",k_={button:kSe,restartOutsideOfScheduleAlert:ISe},PSe={time:"Time"},TSe="_container_1uh3k_1",ASe="_select_1uh3k_8",I1={container:TSe,select:ASe},NSe={timeInYourTimezone:(t,s)=>`The selected UTC time corresponds to ${s} in your timezone (${t})`},ESe="_infoMessage_19619_1",OSe={infoMessage:ESe},$Se=t=>{const s=new Date;s.setUTCHours(t),s.setUTCMinutes(0);const n=Intl.DateTimeFormat().resolvedOptions(),r=s.toLocaleTimeString(n.locale,{hour:"2-digit",minute:"2-digit",timeZone:n.timeZone,hour12:!0});return NSe.timeInYourTimezone(n.timeZone,r)},LSe=({hours:t})=>e.jsx(qc,{icon:"ext_geospacial",className:OSe.infoMessage,children:$Se(t)}),RSe=1;function MSe(t){const s=t.start_time.split(":"),n=s.length===2?Number(s[0]):0;return{weekdays:t.weekdays,startHour:n}}function NN(t){return(t+RSe)%24}function BSe(t){const s=t.startHour.toString().padStart(2,"0"),n=NN(t.startHour).toString().padStart(2,"0");return{weekdays:t.weekdays,start_time:`${s}:00`,end_time:`${n}:00`}}const P1=t=>{const s=t<12?"AM":"PM";return`${t%12||12}:00 ${s}`},DSe=({onChange:t,value:s,disabled:n,ref:r})=>{const{trackUiInteraction:a}=P(),o=m.useMemo(()=>Array.from({length:24},(c,l)=>({label:`${P1(l)} - ${P1(NN(l))} UTC`,value:l})),[]),i=m.useCallback(c=>{a("project_settings_update_schedule_time_changed",{start_hour_utc:c}),t(c)},[a,t]);return e.jsxs("div",{className:I1.container,children:[e.jsx(U,{label:PSe.time,children:e.jsx(ct,{ref:r,options:o,onChange:i,value:s,className:I1.select,size:"s",disabled:n,filterable:!0})}),e.jsx(LSe,{hours:s})]})},USe={toastSuccessMessage:"Schedule updated successfully!"},FSe={weekdays:[7],startHour:0},zSe=(t,s)=>{const n=Vs(),r=Gb("edit_maintenance_window");return{form:$e({defaultValues:s?MSe(s):FSe,disabled:!r}),handleSubmit:async i=>{try{await n({projectId:t,data:{settings:{maintenance_window:BSe(i)}}}),oe(USe.toastSuccessMessage)}catch(c){Y(c)}},canEditUpdateSchedule:r}},qSe=({projectId:t,maintenanceWindow:s})=>{const{form:n,handleSubmit:r,canEditUpdateSchedule:a}=zSe(t,s),{trackUiInteraction:o}=P(),[i,c]=m.useState(!1),l=m.useCallback(()=>{o("project_settings_update_schedule_upgrade_to_customize_clicked"),c(!0)},[o]),d=m.useCallback(()=>c(!1),[]),u=m.useCallback(p=>(o("project_settings_update_schedule_save_clicked"),r(p)),[o,r]);return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Xe.Default,isOpen:i,onRequestClose:d}),a?e.jsxs(es,{providerProps:n,onSubmit:u,gaps:!0,children:[e.jsx(Se,{level:3,children:kp.schedule}),e.jsx(Pe,{render:({field:p})=>e.jsx(CSe,{...p}),name:"weekdays"}),e.jsx(Pe,{name:"startHour",render:({field:p})=>e.jsx(DSe,{...p})}),!s&&e.jsx(X,{"data-qa":"update-schedule-not-populated",children:e.jsx(gt,{id:"gqhb2U",defaultMessage:[{type:0,value:"An update schedule hasn't been set for this project yet. You can choose a preferred schedule now, or Neon will set one for you in the coming weeks."}]})}),e.jsx(Ce,{className:k_.button,children:kp.save}),e.jsx(qc,{icon:"info",className:k_.restartOutsideOfScheduleAlert,children:e.jsx(gt,{id:"5gPqpi",defaultMessage:[{type:0,value:"Neon may occasionally restart computes outside the selected update window to address critical security issues or perform essential maintenance."}]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{as:"p",children:kp.whyUpgrade}),e.jsx(E,{className:k_.button,onClick:l,children:kp.upgradeToEdit})]})]})},HSe=()=>{var n;const{project:t}=F(),{trackUiInteraction:s}=P();return e.jsxs(Le,{id:"update-schedule","data-qa":"maintenance-window-page",children:[e.jsx(Se,{children:jSe.title}),e.jsxs("div",{className:ySe.sectionsGap,children:[e.jsxs(Ne,{children:[e.jsx(T,{as:"p",children:e.jsx(gt,{id:"Z37Nt+",defaultMessage:[{type:0,value:"Keep your computes up to date with the latest Postgres version updates, security patches, and Neon features. Updates require a brief restart of your project's computes. "},{type:8,value:"link",children:[{type:0,value:"Learn more"}]}],values:{link:r=>e.jsx(R,{openInNewTab:!0,href:"https://neon.com/docs/manage/updates",icon:"external_link",onClick:()=>{s("project_settings_update_schedule_learn_more_clicked")},children:r})}})}),(t==null?void 0:t.maintenance_scheduled_for)&&e.jsx(xSe,{date:t.maintenance_scheduled_for})]}),e.jsx(Ne,{children:t?e.jsx(qSe,{projectId:t.id,maintenanceWindow:(n=t==null?void 0:t.settings)==null?void 0:n.maintenance_window}):e.jsx(ve,{})})]})]})},VSe=()=>{const{isLoading:t}=F(),{isLoading:s}=It(),{isFetching:n}=he(),{orgId:r,isLoading:a}=re(),o=yN(),i=vN();return t||s||n&&(a||!!r)?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[e.jsx(Xye,{}),e.jsx(Kye,{}),e.jsx(uSe,{}),e.jsx(HSe,{}),e.jsx(Jwe,{}),i&&e.jsx(swe,{}),e.jsx(Fwe,{}),!o&&e.jsx(Sye,{}),e.jsx(zwe,{}),e.jsx(_Se,{}),e.jsx(Qye,{})]})},Ea={title:"Projects shared with me",subtitle:e.jsxs(e.Fragment,{children:["Projects shared with you by other users. Learn about"," ",e.jsx(R,{openInNewTab:!0,href:"https://neon.com/docs/guides/project-collaboration-guide",children:"project collaboration"}),"."]}),nameHeader:"Name",organizationHeader:"Organization",regionHeader:"Region",createdAtHeader:"Created at",storageHeader:"Storage",pgVersionHeader:"Postgres version"},WSe="_projectNameCell_lypcp_1",GSe="_projectName_lypcp_1",T1={projectNameCell:WSe,projectName:GSe},KSe=()=>{const{getRegionSafe:t}=io();return m.useMemo(()=>[{id:"name",header:Ea.nameHeader,accessorKey:"name",enableSorting:!0,rowHeader:!0,render:({project:s})=>s?e.jsxs("div",{className:T1.projectNameCell,children:[e.jsx(T,{className:T1.projectName,bold:!0,children:s.name}),s.hipaa_enabled_at!==void 0&&e.jsx(te,{content:"HIPAA compliant",children:e.jsx(Ie,{children:"HIPAA"})})]}):e.jsx(B,{height:12})},{id:"organization",header:Ea.organizationHeader,render:({project:s})=>s?e.jsx(T,{children:s.org_name}):e.jsx(B,{height:12})},{id:"region_name",header:Ea.regionHeader,render:({project:s})=>{var n;return s?e.jsx(T,{children:(n=t(s.platform_id,s.region_id))==null?void 0:n.name}):e.jsx(B,{height:12})}},{id:"created_at",header:Ea.createdAtHeader,render:({project:s})=>s?e.jsx(T,{appearance:"secondary",children:fe(s.created_at)}):e.jsx(B,{height:12})},{id:"synthetic_storage_size",header:Ea.storageHeader,render:({project:s})=>s?e.jsx(T,{nowrap:!0,bold:!0,children:s.synthetic_storage_size?cl(s.synthetic_storage_size):"-"}):e.jsx(B,{height:12,width:24})},{id:"pg_version",header:Ea.pgVersionHeader,render:({project:s})=>s?e.jsx(T,{children:s.pg_version}):e.jsx(B,{height:12,width:24})},{id:"actions",render:({project:s})=>s?e.jsx(FP,{project:s,isUserProject:!1}):null,size:62,maxSize:62}],[t])},QSe=()=>{const{data:t,isLoading:s,unavailableIds:n,error:r}=Eu(),a=m.useMemo(()=>lm(t,n),[t,n]),o=!!(a!=null&&a.length),{trackUiInteraction:i}=P(),c=KSe();return e.jsxs(e.Fragment,{children:[e.jsx(bl,{title:Ea.title,subtitle:Ea.subtitle}),(o||!!r)&&e.jsx(e.Fragment,{children:r?e.jsx(gb,{variant:"shared"}):c&&e.jsx(Cs,{isLoading:s,"aria-label":"Shared projects",columns:c,rows:a,rowHref:l=>Q(C.ProjectsItem,{projectId:l.id}),onRowClick:()=>i("project_list_project_opened")})})]})},YSe="_root_11bgo_1",JSe="_body_11bgo_7",A1={root:YSe,body:JSe};var Pd={exports:{}},Td={},Ip={},N1;function ZSe(){if(N1)return Ip;N1=1,Ip.__esModule=!0,Ip.cloneElement=c;var t=s(Nm());function s(l){return l&&l.__esModule?l:{default:l}}function n(l,d){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(l);d&&(p=p.filter(function(h){return Object.getOwnPropertyDescriptor(l,h).enumerable})),u.push.apply(u,p)}return u}function r(l){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?n(Object(u),!0).forEach(function(p){a(l,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(u,p))})}return l}function a(l,d,u){return d=o(d),d in l?Object.defineProperty(l,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[d]=u,l}function o(l){var d=i(l,"string");return typeof d=="symbol"?d:String(d)}function i(l,d){if(typeof l!="object"||l===null)return l;var u=l[Symbol.toPrimitive];if(u!==void 0){var p=u.call(l,d);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(l)}function c(l,d){return d.style&&l.props.style&&(d.style=r(r({},l.props.style),d.style)),d.className&&l.props.className&&(d.className=l.props.className+" "+d.className),t.default.cloneElement(l,d)}return Ip}var Ad={},E1;function EN(){if(E1)return Ad;E1=1,Ad.__esModule=!0,Ad.resizableProps=void 0;var t=s(S0());ok();function s(r){return r&&r.__esModule?r:{default:r}}var n={axis:t.default.oneOf(["both","x","y","none"]),className:t.default.string,children:t.default.element.isRequired,draggableOpts:t.default.shape({allowAnyClick:t.default.bool,cancel:t.default.string,children:t.default.node,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:t.default.node,grid:t.default.arrayOf(t.default.number),handle:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number}),height:function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var c=o[0];if(c.axis==="both"||c.axis==="y"){var l;return(l=t.default.number).isRequired.apply(l,o)}return t.default.number.apply(t.default,o)},handle:t.default.oneOfType([t.default.node,t.default.func]),handleSize:t.default.arrayOf(t.default.number),lockAspectRatio:t.default.bool,maxConstraints:t.default.arrayOf(t.default.number),minConstraints:t.default.arrayOf(t.default.number),onResizeStop:t.default.func,onResizeStart:t.default.func,onResize:t.default.func,resizeHandles:t.default.arrayOf(t.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:t.default.number,width:function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var c=o[0];if(c.axis==="both"||c.axis==="x"){var l;return(l=t.default.number).isRequired.apply(l,o)}return t.default.number.apply(t.default,o)}};return Ad.resizableProps=n,Ad}var O1;function ON(){if(O1)return Td;O1=1,Td.__esModule=!0,Td.default=void 0;var t=i(Nm()),s=ok(),n=ZSe(),r=EN(),a=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(x){if(typeof WeakMap!="function")return null;var j=new WeakMap,v=new WeakMap;return(o=function(S){return S?v:j})(x)}function i(x,j){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var v=o(j);if(v&&v.has(x))return v.get(x);var y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in x)if(w!=="default"&&Object.prototype.hasOwnProperty.call(x,w)){var k=S?Object.getOwnPropertyDescriptor(x,w):null;k&&(k.get||k.set)?Object.defineProperty(y,w,k):y[w]=x[w]}return y.default=x,v&&v.set(x,y),y}function c(){return c=Object.assign?Object.assign.bind():function(x){for(var j=1;j<arguments.length;j++){var v=arguments[j];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(x[y]=v[y])}return x},c.apply(this,arguments)}function l(x,j){if(x==null)return{};var v={},y=Object.keys(x),S,w;for(w=0;w<y.length;w++)S=y[w],!(j.indexOf(S)>=0)&&(v[S]=x[S]);return v}function d(x,j){var v=Object.keys(x);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(x);j&&(y=y.filter(function(S){return Object.getOwnPropertyDescriptor(x,S).enumerable})),v.push.apply(v,y)}return v}function u(x){for(var j=1;j<arguments.length;j++){var v=arguments[j]!=null?arguments[j]:{};j%2?d(Object(v),!0).forEach(function(y){p(x,y,v[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(v)):d(Object(v)).forEach(function(y){Object.defineProperty(x,y,Object.getOwnPropertyDescriptor(v,y))})}return x}function p(x,j,v){return j=h(j),j in x?Object.defineProperty(x,j,{value:v,enumerable:!0,configurable:!0,writable:!0}):x[j]=v,x}function h(x){var j=g(x,"string");return typeof j=="symbol"?j:String(j)}function g(x,j){if(typeof x!="object"||x===null)return x;var v=x[Symbol.toPrimitive];if(v!==void 0){var y=v.call(x,j);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(x)}function f(x,j){x.prototype=Object.create(j.prototype),x.prototype.constructor=x,_(x,j)}function _(x,j){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,S){return y.__proto__=S,y},_(x,j)}var b=function(x){f(j,x);function j(){for(var y,S=arguments.length,w=new Array(S),k=0;k<S;k++)w[k]=arguments[k];return y=x.call.apply(x,[this].concat(w))||this,y.handleRefs={},y.lastHandleRect=null,y.slack=null,y}var v=j.prototype;return v.componentWillUnmount=function(){this.resetData()},v.resetData=function(){this.lastHandleRect=this.slack=null},v.runConstraints=function(S,w){var k=this.props,N=k.minConstraints,D=k.maxConstraints,L=k.lockAspectRatio;if(!N&&!D&&!L)return[S,w];if(L){var H=this.props.width/this.props.height,W=S-this.props.width,$=w-this.props.height;Math.abs(W)>Math.abs($*H)?w=S/H:S=w*H}var M=S,se=w,ce=this.slack||[0,0],ee=ce[0],K=ce[1];return S+=ee,w+=K,N&&(S=Math.max(N[0],S),w=Math.max(N[1],w)),D&&(S=Math.min(D[0],S),w=Math.min(D[1],w)),this.slack=[ee+(M-S),K+(se-w)],[S,w]},v.resizeHandler=function(S,w){var k=this;return function(N,D){var L=D.node,H=D.deltaX,W=D.deltaY;S==="onResizeStart"&&k.resetData();var $=(k.props.axis==="both"||k.props.axis==="x")&&w!=="n"&&w!=="s",M=(k.props.axis==="both"||k.props.axis==="y")&&w!=="e"&&w!=="w";if(!(!$&&!M)){var se=w[0],ce=w[w.length-1],ee=L.getBoundingClientRect();if(k.lastHandleRect!=null){if(ce==="w"){var K=ee.left-k.lastHandleRect.left;H+=K}if(se==="n"){var ae=ee.top-k.lastHandleRect.top;W+=ae}}k.lastHandleRect=ee,ce==="w"&&(H=-H),se==="n"&&(W=-W);var le=k.props.width+($?H/k.props.transformScale:0),ze=k.props.height+(M?W/k.props.transformScale:0),Ot=k.runConstraints(le,ze);le=Ot[0],ze=Ot[1];var mn=le!==k.props.width||ze!==k.props.height,Wn=typeof k.props[S]=="function"?k.props[S]:null,pe=S==="onResize"&&!mn;Wn&&!pe&&(N.persist==null||N.persist(),Wn(N,{node:L,size:{width:le,height:ze},handle:w})),S==="onResizeStop"&&k.resetData()}}},v.renderResizeHandle=function(S,w){var k=this.props.handle;if(!k)return t.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+S,ref:w});if(typeof k=="function")return k(S,w);var N=typeof k.type=="string",D=u({ref:w},N?{}:{handleAxis:S});return t.cloneElement(k,D)},v.render=function(){var S=this,w=this.props,k=w.children,N=w.className,D=w.draggableOpts;w.width,w.height,w.handle,w.handleSize,w.lockAspectRatio,w.axis,w.minConstraints,w.maxConstraints,w.onResize,w.onResizeStop,w.onResizeStart;var L=w.resizeHandles;w.transformScale;var H=l(w,a);return(0,n.cloneElement)(k,u(u({},H),{},{className:(N?N+" ":"")+"react-resizable",children:[].concat(k.props.children,L.map(function(W){var $,M=($=S.handleRefs[W])!=null?$:S.handleRefs[W]=t.createRef();return t.createElement(s.DraggableCore,c({},D,{nodeRef:M,key:"resizableHandle-"+W,onStop:S.resizeHandler("onResizeStop",W),onStart:S.resizeHandler("onResizeStart",W),onDrag:S.resizeHandler("onResize",W)}),S.renderResizeHandle(W,M))}))}))},j}(t.Component);return Td.default=b,b.propTypes=r.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},Td}var Nd={},$1;function XSe(){if($1)return Nd;$1=1,Nd.__esModule=!0,Nd.default=void 0;var t=c(Nm()),s=o(S0()),n=o(ON()),r=EN(),a=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(j){return j&&j.__esModule?j:{default:j}}function i(j){if(typeof WeakMap!="function")return null;var v=new WeakMap,y=new WeakMap;return(i=function(w){return w?y:v})(j)}function c(j,v){if(j&&j.__esModule)return j;if(j===null||typeof j!="object"&&typeof j!="function")return{default:j};var y=i(v);if(y&&y.has(j))return y.get(j);var S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in j)if(k!=="default"&&Object.prototype.hasOwnProperty.call(j,k)){var N=w?Object.getOwnPropertyDescriptor(j,k):null;N&&(N.get||N.set)?Object.defineProperty(S,k,N):S[k]=j[k]}return S.default=j,y&&y.set(j,S),S}function l(){return l=Object.assign?Object.assign.bind():function(j){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(j[S]=y[S])}return j},l.apply(this,arguments)}function d(j,v){var y=Object.keys(j);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(j);v&&(S=S.filter(function(w){return Object.getOwnPropertyDescriptor(j,w).enumerable})),y.push.apply(y,S)}return y}function u(j){for(var v=1;v<arguments.length;v++){var y=arguments[v]!=null?arguments[v]:{};v%2?d(Object(y),!0).forEach(function(S){p(j,S,y[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(y)):d(Object(y)).forEach(function(S){Object.defineProperty(j,S,Object.getOwnPropertyDescriptor(y,S))})}return j}function p(j,v,y){return v=h(v),v in j?Object.defineProperty(j,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):j[v]=y,j}function h(j){var v=g(j,"string");return typeof v=="symbol"?v:String(v)}function g(j,v){if(typeof j!="object"||j===null)return j;var y=j[Symbol.toPrimitive];if(y!==void 0){var S=y.call(j,v);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(j)}function f(j,v){if(j==null)return{};var y={},S=Object.keys(j),w,k;for(k=0;k<S.length;k++)w=S[k],!(v.indexOf(w)>=0)&&(y[w]=j[w]);return y}function _(j,v){j.prototype=Object.create(v.prototype),j.prototype.constructor=j,b(j,v)}function b(j,v){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,w){return S.__proto__=w,S},b(j,v)}var x=function(j){_(v,j);function v(){for(var S,w=arguments.length,k=new Array(w),N=0;N<w;N++)k[N]=arguments[N];return S=j.call.apply(j,[this].concat(k))||this,S.state={width:S.props.width,height:S.props.height,propsWidth:S.props.width,propsHeight:S.props.height},S.onResize=function(D,L){var H=L.size;S.props.onResize?(D.persist==null||D.persist(),S.setState(H,function(){return S.props.onResize&&S.props.onResize(D,L)})):S.setState(H)},S}v.getDerivedStateFromProps=function(w,k){return k.propsWidth!==w.width||k.propsHeight!==w.height?{width:w.width,height:w.height,propsWidth:w.width,propsHeight:w.height}:null};var y=v.prototype;return y.render=function(){var w=this.props,k=w.handle,N=w.handleSize;w.onResize;var D=w.onResizeStart,L=w.onResizeStop,H=w.draggableOpts,W=w.minConstraints,$=w.maxConstraints,M=w.lockAspectRatio,se=w.axis;w.width,w.height;var ce=w.resizeHandles,ee=w.style,K=w.transformScale,ae=f(w,a);return t.createElement(n.default,{axis:se,draggableOpts:H,handle:k,handleSize:N,height:this.state.height,lockAspectRatio:M,maxConstraints:$,minConstraints:W,onResizeStart:D,onResize:this.onResize,onResizeStop:L,resizeHandles:ce,transformScale:K,width:this.state.width},t.createElement("div",l({},ae,{style:u(u({},ee),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},v}(t.Component);return Nd.default=x,x.propTypes=u(u({},r.resizableProps),{},{children:s.default.element}),Nd}var L1;function e1e(){return L1||(L1=1,Pd.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Pd.exports.Resizable=ON().default,Pd.exports.ResizableBox=XSe().default),Pd.exports}var t1e=e1e();const R1={protectedBranchAlert:{title:"Protected Branch",message:"You're about to query a protected branch. Changes may impact production. Only proceed if you're sure."}},s1e="_container_yjwc0_1",n1e="_root_yjwc0_6",r1e="_actions_yjwc0_16",a1e="_run_action_yjwc0_21",o1e="_btn_yjwc0_29",i1e="_divider_yjwc0_33",c1e="_info_yjwc0_39",l1e="_info_item_yjwc0_44",d1e="_status_yjwc0_52",u1e="_status_icon_yjwc0_61",h1e="_connecting_yjwc0_65",p1e="_idle_yjwc0_69",m1e="_idleInTransaction_yjwc0_73",g1e="_failedTransaction_yjwc0_77",f1e="_disconnected_yjwc0_81",_1e="_modalFooter_yjwc0_85",b1e="_modalTitle_yjwc0_94",jt={container:s1e,root:n1e,actions:r1e,run_action:a1e,btn:o1e,divider:i1e,info:c1e,info_item:l1e,status:d1e,status_icon:u1e,connecting:h1e,idle:p1e,idleInTransaction:m1e,failedTransaction:g1e,disconnected:f1e,modalFooter:_1e,modalTitle:b1e},x1e={[ot.Connecting]:jt.connecting,[ot.Idle]:jt.idle,[ot.IdleInTransaction]:jt.idleInTransaction,[ot.FailedTransaction]:jt.failedTransaction,[ot.Disconnected]:jt.disconnected},j1e={[ot.Connecting]:"Connecting ...",[ot.Idle]:"Connected",[ot.IdleInTransaction]:"In transaction",[ot.FailedTransaction]:"Failed transaction: ROLLBACK required",[ot.Disconnected]:"Ready to connect"},v1e={[ot.Connecting]:"connect",[ot.Idle]:"check_circle_inverted",[ot.IdleInTransaction]:"data_transfer",[ot.FailedTransaction]:"warning",[ot.Disconnected]:"connect"},y1e=({isOpen:t,onRequestClose:s,onRunServerless:n,storeModalPreference:r})=>{const[a,o]=m.useState(!1);function i(c){a&&r({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24*7}),s(),n(c)}return e.jsx(ft,{isOpen:t,onRequestClose:s,title:e.jsx("header",{className:jt.modalTitle,children:R1.protectedBranchAlert.title}),children:e.jsx(De,{children:e.jsxs("section",{children:[R1.protectedBranchAlert.message,e.jsxs("footer",{className:jt.modalFooter,children:[e.jsx(Gp,{checked:a,onChange:()=>o(c=>!c),children:"Don't show me this again"}),e.jsx(E,{onClick:c=>i(c),children:"Run query"})]})]})})})},w1e=()=>{const{projectId:t}=F(),{branch:s}=at(),{state:{numberOfQueriesToBeRun:n,isQueryRunning:r,query:a,isDisabled:o,timeTravelError:i,result:c,branchHasEndpoints:l,connectionStatus:d},actions:u}=Hn(),[p,h]=Ds(_t.ProtectedAlertController,`${t}-${(s==null?void 0:s.id)||"default"}`,{shouldNotShow:!1,expiresAt:0}),{currentIndex:g}=K0(),{trackUiInteraction:f}=P(),[_,b]=m.useState(!1),x=m.useMemo(()=>{if(!c||!c.response||!Array.isArray(c.response))return"";const M=c.response[g];if(!M||!M.data||!M.data.rows)return"";const se=M.data.rows.length;return se?`${se} row${se!==1?"s":""}`:"No result"},[c,g]),j=m.useMemo(()=>{if(!c)return"";const M=c.duration;if(M!==void 0)return Cv(M);if(!Array.isArray(c.response))return"";const se=c.response[g];if(!se)return"";const{duration:ce}=se;return ce?Cv(ce):""},[c,g]),v=m.useCallback(M=>{u.runWithServerlessDriver({showHidden:M.shiftKey}),f("playground_run")},[u,f]),y=m.useCallback(M=>{u.runWithServerlessDriver({showHidden:M.shiftKey}),f("playground_run_in_txn")},[u,f]),S=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"ROLLBACK"}),f("playground_rollback")},[u,f]),w=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"COMMIT"}),f("playground_commit")},[u,f]),k=m.useCallback(M=>{u.runWithServerlessDriver({explain:!0,showHidden:M.shiftKey}),f("playground_explain")},[u,f]),N=m.useCallback(M=>{u.runWithServerlessDriver({explain:!0,analyze:!0,showHidden:M.shiftKey}),f("playground_analyze")},[u,f]),D=m.useCallback(()=>{u.cancelServerlessDriver(),f("playground_cancel")},[u,f]),L=m.useMemo(()=>s&&l?null:s?e.jsxs(e.Fragment,{children:["The selected branch does not have a compute endpoint."," ",e.jsx(R,{href:Q(C.ProjectsItemBranchesItem,{projectId:t,branchId:s.id}),children:"Manage compute endpoints for this branch."})]}):e.jsx(e.Fragment,{children:"Please select a branch first."}),[s,l,t]),H=x1e[d],W=typeof n=="number"?` (${n||"no"} quer${n===1?"y":"ies"})`:"";let $=j1e[d];return(d===ot.Idle||d===ot.IdleInTransaction)&&($+=W),e.jsxs("div",{className:jt.container,children:[e.jsx(y1e,{isOpen:_,storeModalPreference:h,onRequestClose:()=>{b(!1)},onRunServerless:v}),e.jsxs("div",{className:V(jt.status,H),children:[e.jsxs("span",{children:[e.jsx(z,{size:14,name:v1e[d],className:jt.status_icon}),$]}),a.length>Tv&&e.jsxs("span",{children:[e.jsx(z,{size:14,name:"warning",className:jt.status_icon}),"This query will still run OK, but the last"," ",a.length-Tv," characters will be truncated from query history"]})]}),e.jsxs("div",{className:jt.root,children:[e.jsxs("div",{className:jt.actions,children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(te,{disabled:i===null,content:e.jsx("span",{children:i==null?void 0:i.message}),children:e.jsxs("div",{className:jt.run_action,children:[r&&e.jsx(E,{disabled:o,icon:"close",onClick:D,appearance:"danger",size:"s",children:"Cancel"}),!r&&d===ot.FailedTransaction&&e.jsx(E,{disabled:o,icon:"rollback",onClick:S,size:"s",children:"ROLLBACK"}),!r&&(d===ot.Idle||d===ot.Connecting||d===ot.Disconnected)&&e.jsx(E,{disabled:o||d===ot.Connecting||n===0,appearance:"primary",icon:"play_outline",onClick:M=>{const se=p.expiresAt>Date.now();if(p.shouldNotShow||!(s!=null&&s.protected)||se){v(M);return}b(!0)},size:"s",children:"Run"}),!r&&d===ot.IdleInTransaction&&e.jsx(E,{disabled:o||n===0,appearance:"secondary",icon:"play_outline",onClick:y,size:"s",children:"Run in transaction"})]})}),!r&&(d===ot.Idle||d===ot.Connecting)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:jt.divider}),e.jsx(E,{disabled:o||d===ot.Connecting||n===0,onClick:k,appearance:"secondary",className:V(jt.btn),size:"s",children:"Explain"}),e.jsx(E,{disabled:o||d===ot.Connecting||n===0,onClick:N,appearance:"secondary",className:V(jt.btn),size:"s",children:"Analyze"})]}),!r&&d===ot.IdleInTransaction&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:jt.divider}),e.jsx(E,{disabled:o,onClick:w,icon:"check",appearance:"secondary",className:V(jt.btn),size:"s",children:"COMMIT"}),e.jsx(E,{disabled:o,onClick:S,icon:"rollback",appearance:"secondary",className:V(jt.btn),size:"s",children:"ROLLBACK"})]})]}),!l&&e.jsx("div",{className:jt.info_item,children:L})]}),e.jsx("div",{className:jt.info,children:r?e.jsx(on,{}):e.jsxs(e.Fragment,{children:[j&&e.jsx("div",{className:jt.info_item,children:j}),x&&e.jsx("div",{className:jt.info_item,children:x})]})})]})]})},S1e="_root_qfmdc_1",C1e="_success_qfmdc_27",k1e="_icon_qfmdc_31",I1e="_iconSuccess_qfmdc_39",P1e="_textArea_qfmdc_43",T1e="_actions_qfmdc_63",A1e="_inputArea_qfmdc_74",N1e="_generateTitle_qfmdc_84",Lr={root:S1e,success:C1e,icon:k1e,iconSuccess:I1e,textArea:P1e,actions:T1e,inputArea:A1e,generateTitle:N1e},M1=3,E1e=({ref:t,className:s,placeholder:n,pending:r,textareaRef:a,success:o,onSubmit:i,onCancel:c,onRequestClose:l})=>{const[d,u]=m.useState(""),[p,h]=m.useState(M1);return m.useEffect(()=>{if(o){if(p===-1){h(M1),l();return}setTimeout(()=>{h(g=>g-1)},1e3)}},[o,p,l]),e.jsxs("div",{ref:t,className:V(Lr.root,o&&Lr.success,s),children:[r?e.jsx(on,{}):o?e.jsx(z,{className:Lr.iconSuccess,name:"success",size:20}):e.jsx(z,{className:Lr.icon,name:"pgvector",size:20}),e.jsxs("div",{className:Lr.inputArea,children:[r&&e.jsx("div",{className:Lr.generateTitle,children:"Generating SQL..."}),o&&e.jsx("div",{className:Lr.generateTitle,children:"Successfully generated SQL based on your prompt!"}),e.jsx("textarea",{rows:Math.min(d.split(`
`).length,3),className:Lr.textArea,placeholder:n,ref:a,value:d,disabled:r,onChange:g=>u(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),i(d))}})]}),r?e.jsx(E,{appearance:"secondary",size:"s",onClick:c,children:"Cancel"}):o?e.jsxs(E,{icon:"cross_small",appearance:"secondary",size:"s",onClick:l,children:[p,"s • ESC"]}):e.jsxs("div",{className:Lr.actions,children:[e.jsx(_r,{disabled:d.trim()==="",iconName:"arrow_in_circle_right",tooltip:"Submit",onClick:()=>{i(d)}}),e.jsx(_r,{iconName:"cross_small",tooltip:"Close",onClick:l})]})]})},O1e="_aiPromptPopper_1qreg_1",$1e="_aiPromptOverlay_1qreg_9",L1e="_aiGenerateLink_1qreg_18",I_={aiPromptPopper:O1e,aiPromptOverlay:$1e,aiGenerateLink:L1e},R1e=m.lazy(()=>nn(()=>import("./index-TsSAesrp.js"),__vite__mapDeps([31,1,4,5,6,3,7,8,9,10,11,12,13,32,33,15,16,17,18,19,14,20,21,22,23,24,25,26,27,28,34,30])).then(t=>({default:t.CodeEditorV2}))),M1e=({height:t,ref:s})=>{const{projectId:n,project:r}=F(),{trackUiInteraction:a}=P(),o=ge("sql_editor_codemirror"),{state:{query:i,isDisabled:c,isQueryRunning:l,isTextToSqlPopupOpen:d,isTextToSqlPending:u},actions:{textToSql:p,textToSqlCancel:h,runWithServerlessDriver:g,cancelServerlessDriver:f,onChangeTextToSqlPopup:_,onChangeQuery:b,onChangeQuerySelection:x}}=Hn(),j=dr(()=>{c||g()}),v=dr(()=>{l&&f()}),y=m.useMemo(()=>YL(100,K=>{g2(n,K)}),[n]);m.useLayoutEffect(()=>{y(i)},[y,i]),m.useEffect(()=>()=>{var K;y.cancel(),s&&"current"in s&&s.current&&((K=s.current)==null||K.clearSelection())},[y,n,s]);const S=m.useCallback(()=>{var le,ze;const K=!window.document.activeElement||window.document.activeElement.tagName==="BODY",ae=!((le=window.document.getSelection())!=null&&le.toString());K&&ae&&s&&"current"in s&&s.current&&((ze=s.current)==null||ze.focus())},[s]);m.useEffect(()=>(window.addEventListener("click",S),()=>{window.removeEventListener("click",S)}),[S]);const w=m.useRef(null);m.useLayoutEffect(()=>{d&&w.current&&w.current.focus()},[d]);const[k,N]=m.useState(!1),D=m.useCallback(async K=>{a("playground_text_to_sql_modal_submitted");const{result:ae}=await p(K);ae==="success"&&N(!0)},[p,a]);m.useEffect(()=>{d||N(!1)},[d,k]);const L=m.useCallback(()=>{a("playground_text_to_sql_run_cancel_clicked"),h()},[h,a]),H=m.useCallback(()=>{d&&(_(!1),k||a("playground_text_to_sql_modal_cancel_clicked"))},[d,_,k,a]);m.useEffect(()=>{const K=ae=>{(ae.metaKey||ae.ctrlKey)&&ae.key==="M"&&(ae.preventDefault(),_(!d),a("playground_text_to_sql_keyboard_toggle",{action:d?"close":"open"})),ae.key==="Escape"&&H()};return document.addEventListener("keydown",K),()=>{document.removeEventListener("keydown",K)}},[_,d,a,H]);const W=ge("text_to_sql"),$=dr(()=>{W&&(_(!d),a("playground_text_to_sql_keyboard_toggle",{action:d?"close":"open"}))}),M=m.useCallback(K=>{K.preventDefault(),_(!0),a("playground_text_to_sql_button_clicked")},[_,a]),se=m.useMemo(()=>{let K=(r==null?void 0:r.pg_version)??15;return K<14&&(K=14),K>16&&(K=16),K},[r]),ce=m.useMemo(()=>({"Mod-Enter":j,Esc:v,"Mod-Shift-m":$}),[j,v,$]),ee=dr(()=>{s&&"current"in s&&s.current&&x(s.current.getSelectedText())});return e.jsxs(e.Fragment,{children:[e.jsx(JL,{className:I_.aiPromptPopper,hidden:!d,children:e.jsx(E1e,{pending:u,success:k,textareaRef:w,onSubmit:D,onCancel:L,onRequestClose:H,placeholder:"Describe the type of SQL query you are looking to run..."})}),o?e.jsx(R1e,{ref:s,mode:"sql",value:i,onChange:b,onSelectionChange:ee,keyBindings:ce,autoFocus:!0,height:t}):e.jsx(xx,{ref:s,name:"query_editor",mode:`pgsql${se}`,width:"100%",height:t||"100%",value:i,onChange:b,onSelectionChange:ee,onSubmit:j,onEscape:v,onAI:$,style:{height:t||"100%",width:"100%"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14},focus:!0}),W&&i===""&&e.jsxs("div",{className:I_.aiPromptOverlay,children:["Type SQL or"," ",e.jsx(te,{content:`${Jp.isMacOs?"⌘":"Ctrl"}+Shift+M`,children:e.jsx("button",{type:"button",className:I_.aiGenerateLink,onClick:M,children:"Generate with AI"})}),"..."]})]})},B1=100,$N=({isOpen:t,proposedName:s,onClose:n,onSaveQuery:r})=>{var d,u;const a=Ss({defaultValues:{name:s}}),{handleSubmit:o,register:i,formState:c}=a,{trackUiInteraction:l}=P();return e.jsx(na,{isOpen:t,onRequestClose:n,title:"Save query",children:e.jsx(Jt,{...a,children:e.jsxs(qt,{id:"query-save-form",onSubmit:o(p=>(l("playground_save"),r(p.name))),children:[e.jsx(ra,{children:e.jsx(U,{id:"name",error:(u=(d=c.errors)==null?void 0:d.name)==null?void 0:u.message,inline:!0,label:"Name",children:e.jsx(ie,{autoFocus:!0,...i("name",{required:{value:!0,message:"This field is required"},maxLength:{value:B1,message:`Query name should be less than ${B1} characters`}})})})}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{children:"Save"})]})]})})})},B1e=()=>{const[t,s]=m.useState(!1),{actions:{saveQuery:n},state:{selectedQueryName:r,selectedQueryId:a,queryChanged:o,queriesHistory:i,query:c}}=Hn(),l=m.useCallback(()=>s(!1),[]),d=m.useCallback(()=>{r?n(a,r):s(!0)},[a,r,n]),u=m.useCallback(h=>n(null,h).then(l).catch(Y),[n,l]),p=m.useMemo(()=>{const h=((i==null?void 0:i.slice(0,10))||[]).find(g=>g.query===c);return r||(h==null?void 0:h.name)||"New Query"},[i,c,r]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{disabled:!!(r&&!o),appearance:"secondary",size:"s",onClick:d,children:"Save"}),e.jsx($N,{isOpen:t,proposedName:p,onClose:l,onSaveQuery:u},p)]})},D1e="_root_olb6e_1",U1e="_title_olb6e_11",F1e="_main_olb6e_24",z1e="_main_limitted_olb6e_39",q1e="_opts_olb6e_43",H1e="_bigSelect_olb6e_53",V1e="_smallSelect_olb6e_59",W1e="_notSaved_olb6e_65",G1e="_datePicker_olb6e_69",K1e="_divider_olb6e_76",tr={root:D1e,title:U1e,main:F1e,main_limitted:z1e,opts:q1e,bigSelect:H1e,smallSelect:V1e,notSaved:W1e,datePicker:G1e,divider:K1e},Q1e=()=>{const{state:{selectedQueryName:t,database:s,queryChanged:n,endpointId:r,isTimeTravelMode:a,timeTravelTimestamp:o,timeTravelError:i,isTextToSqlPopupOpen:c},actions:{onChangeDatabase:l,onChangeEndpointId:d,onChangeIsTimeTravelMode:u,onChangeTimeTravelTimestamp:p,onChangeTextToSqlPopup:h}}=Hn(),{project:g,projectId:f}=F(),{trackUiInteraction:_}=P(),b=m.useCallback(()=>{u(!a),_(a?"playground_time_travel_mode_off":"playground_time_travel_mode_on")},[a,u,_]),x=m.useCallback(N=>{const D=typeof N=="string"?XC(Da(N),Da(ke.Full),!0):N;p(D.toDate())},[p]),j=PA(g),{selectOptions:v}=un(),[y,S]=Sl(),w=m.useMemo(()=>y?v.find(N=>N.value===y):void 0,[v,y]);m.useEffect(()=>{w&&w!==s&&l(w)},[s,l,w]);const k=ge("text_to_sql");return e.jsxs("div",{className:tr.root,children:[e.jsxs("div",{className:V(tr.main,tr.main_limitted),children:[e.jsxs("div",{className:tr.title,children:[e.jsx("div",{children:t||"Untitled"}),t&&n&&e.jsx("span",{className:tr.notSaved,children:"*"})]}),e.jsx(B1e,{})]}),e.jsxs("div",{className:tr.opts,children:[e.jsx(cj,{id:"endpoint",size:"s",disabled:a,endpointId:r,projectId:f,onChange:N=>{N&&d(N.id)},containerClassName:tr.bigSelect,popoverMaxWidth:350}),e.jsx(Rm,{id:"database",size:"s",value:w,canCreateDatabase:!1,onChange:N=>{S((N==null?void 0:N.value)??void 0)},containerClassName:tr.smallSelect,popoverMaxWidth:300}),e.jsx(dI,{placement:"bottom right",trigger:e.jsx(E,{appearance:i===null?"secondary":"danger",icon:"time","aria-label":"time travel menu",onClick:()=>{h(!1)}}),content:e.jsxs(e.Fragment,{children:[e.jsx(as,{isSelected:a,onChange:b,children:"Time Travel Enabled"}),e.jsx(U,{"aria-label":"Time Travel Timestamp",className:tr.datePicker,error:i==null?void 0:i.message,children:e.jsx(e0,{value:o,size:"s",disabled:!a,showTimezone:!0,onChange:x,isValidDate:j,dateFormat:Da(ke.Date),timeFormat:Da(ke.TimeFull)})})]})}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:tr.divider}),e.jsx(te,{content:e.jsxs("span",{children:["Generate SQL",e.jsx("br",{}),Jp.isMacOs?"⌘":"Ctrl","+Shift+M"]}),children:e.jsx(E,{appearance:"secondary",active:c,icon:"pgvector",onClick:()=>{_("playground_text_to_sql_button_clicked"),h(!c)}})})]})]})]})},D1={alertText:"This account has reached its compute limit for this month. Upgrade to continue using SQL editor.",upgradeButton:"Upgrade plan"},Y1e="_alertWrapper_1gwai_1",J1e={alertWrapper:Y1e};function Z1e(t){switch(t){case"compute_time":return Xe.ComputeSizeLimitReached;case"data_transfer":return Xe.Default}}const X1e=({overLimitMetric:t})=>{const[s,n]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(lt,{type:Z1e(t),isOpen:s,onRequestClose:()=>{n(!1)}}),e.jsx("div",{className:J1e.alertWrapper,children:e.jsx(X,{appearance:"warning",action:e.jsx(R,{noWrap:!0,onClick:()=>{n(!0)},children:D1.upgradeButton}),children:D1.alertText})})]})},eCe="_history_113ev_1",tCe="_historyRecord_113ev_8",sCe="_selected_113ev_18",nCe="_recordName_113ev_25",rCe="_recordNameGenerated_113ev_34",aCe="_recordTooltipContent_113ev_47",oCe="_recordTime_113ev_58",iCe="_placeholder_113ev_72",qr={history:eCe,historyRecord:tCe,selected:sCe,recordName:nCe,recordNameGenerated:rCe,recordTooltipContent:aCe,recordTime:oCe,placeholder:iCe},cCe=({disabled:t})=>{const{state:{queriesHistory:s},actions:{onChangeQuery:n,selectQuery:r}}=Hn(),{trackUiInteraction:a}=P(),o=ge("query_name_generation"),[i,c]=m.useState(null),l=m.useCallback(async d=>{await r(null)&&(c(d.id??0),n(d.query??""))},[n,r]);return e.jsx(e.Fragment,{children:(s==null?void 0:s.length)===0?e.jsx("div",{className:qr.placeholder,children:e.jsx(Fu,{iconName:"empty_history",size:"s",iconSize:48,title:"Your history is empty",muted:t})}):s==null?void 0:s.map(d=>e.jsx(te,{content:e.jsx("div",{className:qr.recordTooltipContent,children:d.query}),placement:"right",disabled:!o||t,children:e.jsxs("div",{role:"button",tabIndex:0,className:V(qr.historyRecord,{[qr.selected]:d.id===i}),"aria-disabled":t,onClick:()=>{t||(l(d),a("playground_history_select"))},onKeyDown:u=>{t||u.key==="Enter"&&(l(d),a("playground_history_select",{keyboard:!0}))},children:[o?e.jsx("div",{className:qr.recordNameGenerated,children:d.name||d.query}):e.jsx("div",{className:qr.recordName,children:d.query}),e.jsx("div",{className:qr.recordTime,children:mt(d.created_at).format("MMM D, YYYY - h:mma")})]})},d.id))})},LN=m.memo(({disabled:t})=>{const{state:{queriesHistory:s}}=Hn();return e.jsx("div",{className:qr.history,children:s?e.jsx(cCe,{disabled:t}):Fa(3,n=>e.jsxs("div",{role:"button",className:qr.historyRecord,children:[e.jsx(B,{style:{width:200,height:20}}),e.jsx("div",{style:{height:10}}),e.jsx(B,{style:{width:100,height:20}})]},n))})});LN.displayName="QueryHistory";const lCe="_root_xj6ja_1",dCe="_item_xj6ja_6",uCe="_active_xj6ja_18",hCe="_itemName_xj6ja_30",pCe="_placeholder_xj6ja_35",wc={root:lCe,item:dCe,active:uCe,delete:"_delete_xj6ja_26",itemName:hCe,placeholder:pCe},RN=m.memo(({disabled:t})=>{const{state:{queriesSaved:s,selectedQueryName:n},actions:{selectQuery:r,deleteSavedQuery:a,renameQuery:o}}=Hn(),{trackUiInteraction:i}=P(),c=m.useCallback(p=>{a(p),i("playground_saved_delete")},[a,i]),[l,d]=m.useState(),u=m.useCallback(p=>o((l==null?void 0:l.id)??0,p).then(()=>d(void 0)).catch(Y),[o,l]);return e.jsxs("div",{className:wc.root,children:[e.jsx($N,{isOpen:!!l,onClose:()=>d(void 0),onSaveQuery:u,proposedName:(l==null?void 0:l.name)??""},l==null?void 0:l.id),(s==null?void 0:s.length)===0?e.jsx("div",{className:wc.placeholder,children:e.jsx(Fu,{iconName:"empty_saved",size:"s",iconSize:53,title:"You have no saved queries now"})}):s==null?void 0:s.map(p=>e.jsxs("div",{role:"button",onKeyPress:h=>{h.key==="Enter"&&r(p.name??"")},tabIndex:0,className:V({[wc.item]:!0,[wc.active]:p.name===n}),"aria-disabled":t,onClick:()=>{t||r(p.name??"")},children:[e.jsx("span",{className:wc.itemName,title:p.name,children:p.name}),!t&&e.jsx("span",{children:e.jsxs(ex,{triggerElement:({onClick:h,ref:g})=>e.jsx(z,{ref:g,onClick:h,name:"actions",size:16}),children:[e.jsx(Ga,{as:"button",onClick:()=>d(p),children:"Rename"}),e.jsx(Ga,{as:"button",className:wc.delete,onClick:()=>c(p.id??0),children:"Delete"})]})})]},p.id))]})});RN.displayName="QueriesSaved";const mCe="_root_ym4k9_1",gCe="_header_ym4k9_11",fCe="_newQuery_ym4k9_15",_Ce="_actions_ym4k9_19",bCe="_body_ym4k9_25",Ed={root:mCe,header:gCe,newQuery:fCe,actions:_Ce,body:bCe},xCe=()=>new URL(window.location.href).searchParams.get("query")?"saved":"history",MN=m.memo(({disabled:t})=>{const[s,n]=m.useState(xCe),{trackUiInteraction:r}=P(),{actions:{onChangeQuery:a,selectQuery:o}}=Hn(),i=m.useCallback(()=>{a(""),o(null)},[a,o]);return e.jsxs("div",{className:Ed.root,children:[e.jsx("div",{className:Ed.header,children:e.jsx(Tl,{title:"SQL Editor",noBreadcrumbs:!0,actions:e.jsx("div",{className:Ed.newQuery,children:e.jsx(E,{wide:!0,appearance:"secondary",icon:"add",disabled:t,onClick:i,size:"s","aria-label":"New Query"})})})}),e.jsx("div",{className:Ed.actions,children:e.jsxs($u,{children:[e.jsx(mr,{active:s==="saved",disabled:t,onClick:()=>{n("saved"),r("playground_tab_saved")},children:"Saved"}),e.jsx(mr,{active:s==="history",disabled:t,onClick:()=>{n("history"),r("playground_tab_history")},children:"History"})]})}),e.jsxs("div",{className:Ed.body,children:[s==="saved"&&e.jsx(RN,{disabled:t}),s==="history"&&e.jsx(LN,{disabled:t})]})]})});MN.displayName="QuerySidebar";const jCe={timeTravelMode:t=>`You are viewing data as it existed on ${fe(t,ke.Full)}`},vCe=()=>{const{state:{isTimeTravelMode:t,timeTravelTimestamp:s}}=Hn();return t?e.jsx(oI,{"data-qa":"time-travel-banner",appearance:"blue",icon:"info",description:jCe.timeTravelMode(s),actions:[]}):null},Qa={branchWarmup:{title:"Warming up",description:"This table's branch is being unarchived, during which query and modification response times may be slow."},branchArchived:{title:"Archived branch",description:"This branch is archived. Querying will unarchive it.",descriptionSlow:"This branch is archived. Querying will unarchive it, during which query response times may be slow."},branchProtected:{title:"Protected branch",description:"This branch is protected. Direct changes can affect production data. Proceed with caution."}},yCe="_root_3jzpz_1",wCe="_sidebar_3jzpz_10",SCe="_main_3jzpz_19",CCe="_alert_3jzpz_27",kCe="_handle_3jzpz_33",ICe="_partEditor_3jzpz_43",PCe="_partResult_3jzpz_48",TCe="_serverlessDriver_3jzpz_55",ACe="_editor_3jzpz_59",NCe="_protectedAlert_3jzpz_64",Nn={root:yCe,sidebar:wCe,main:SCe,alert:CCe,handle:kCe,partEditor:ICe,partResult:PCe,serverlessDriver:TCe,editor:ACe,protectedAlert:NCe},ECe=({branch:t})=>!t||!u0(t)?null:e.jsx(Px,{title:Qa.branchWarmup.title,className:Nn.alert,children:Qa.branchWarmup.description}),OCe=({branch:t})=>!t||t.current_state!=="archived"?null:e.jsx(Px,{title:Qa.branchArchived.title,className:Nn.alert,children:Du(t)?Qa.branchArchived.descriptionSlow:Qa.branchArchived.description}),$Ce=({branch:t})=>{const[s,n]=Ds(_t.ProtectedAlertController,t.id,{shouldNotShow:!1,expiresAt:0});m.useEffect(()=>{s.expiresAt<Date.now()&&n({shouldNotShow:!1,expiresAt:0})},[s.expiresAt,n]);const r=s.expiresAt>=Date.now()&&s.shouldNotShow;return!t.protected||r?null:e.jsxs("div",{className:Nn.protectedAlert,title:Qa.branchProtected.title,children:[e.jsx(Px,{type:"warn",title:Qa.branchProtected.title,children:Qa.branchProtected.description}),e.jsx(E,{appearance:"clear",onClick:()=>{n({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24})},"aria-label":"Close",children:e.jsx(z,{name:"close",size:16})})]})},Sc=8,U1=62,LCe=()=>{var v;const{branch:t}=at(),{state:{result:s,isQueryRunning:n,ipBlocked:r,isDisabled:a,isQueryErrorFixPending:o,overLimitMetric:i},editorRef:c,actions:l}=Hn(),[d,u]=m.useState(0),[p,h]=m.useState(0),[g,f]=m.useState([800,800]),_=m.useRef(null),b=(y,{size:S})=>{h(S.height)},x=m.useMemo(()=>ZL(300,()=>{_.current&&f([_.current.offsetWidth-200,_.current.offsetHeight-200])}),[]);m.useEffect(()=>{_.current&&(u(Math.floor((_.current.offsetWidth+Sc)/2)),h(Math.floor((_.current.offsetHeight+Sc)/2.75)),f([_.current.offsetWidth-200,_.current.offsetHeight-200]))},[]),m.useEffect(()=>(window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[x]);let j={height:`calc(100% - ${p}px)`,width:"100%"};return _.current&&(j={height:`${((v=_.current)==null?void 0:v.offsetHeight)-p-U1+Sc/2}px`,width:"100%"}),e.jsxs("div",{className:Nn.root,ref:_,children:[r&&e.jsx(hj,{}),e.jsx("div",{className:Nn.sidebar,children:e.jsx(MN,{})}),e.jsxs("div",{className:Nn.main,children:[e.jsx(Q1e,{}),t&&e.jsx($Ce,{branch:t}),e.jsx(ECe,{branch:t}),e.jsx(OCe,{branch:t}),p&&d?e.jsx(t1e.Resizable,{height:p,width:d,axis:"y",onResize:b,minConstraints:[200,200],maxConstraints:g,handle:e.jsx("div",{className:Nn.handle,style:{minWidth:`${Sc}px`,minHeight:`${Sc}px`}}),children:e.jsxs("div",{className:Nn.partEditor,style:{height:`${p}px`,width:"100%"},children:[e.jsx("div",{className:Nn.editor,children:e.jsx(M1e,{ref:c,height:`${p-Sc/2-U1}px`})}),e.jsx(w1e,{})]})}):e.jsx("div",{}),e.jsx("div",{className:V(Nn.partResult,Nn.serverlessDriver),style:j,children:i?e.jsx(X1e,{overLimitMetric:i}):e.jsxs(e.Fragment,{children:[s!=null&&e.jsx(vCe,{}),e.jsx(GA,{result:s,isQueryRunning:n,queryRunError:{fixError:l.queryFixError,fixErrorCancel:l.queryFixErrorCancel,isFixDisabled:a,isFixPending:o}})]})})]})]})},RCe=t=>{const{state:{credentials:s},actions:{onChangeCredentials:n}}=Hn(),{selectOptions:r,isLoading:a}=Pi(),o=Ss({mode:"onChange",defaultValues:{user:s==null?void 0:s.user,password:""}}),i=d=>{n(d),t.onSubmit()},c=()=>{n(),t.onSubmit()},l=d=>{if(!d.user||!d.user.name){c();return}i(d)};return e.jsxs(qt,{className:"QueryRoleForm",onSubmit:o.handleSubmit(l),actions:e.jsxs(e.Fragment,{children:[e.jsx(E,{appearance:"secondary",size:"l",onClick:c,children:"Use default"}),e.jsx(E,{type:"submit",size:"l",children:"Ok"})]}),children:[e.jsx(U,{id:"user_",children:e.jsx(Pe,{name:"user",control:o.control,render:({field:d})=>e.jsx(Za,{...d,value:d.value?r.find(u=>u.value===d.value.name):void 0,onChange:u=>{if(!u){d.onChange(void 0);return}d.onChange(r.find(p=>p.value===u.value))},loading:a,options:r})})}),e.jsx(U,{id:"password",children:e.jsx(ie,{placeholder:"Password",type:"password",...o.register("password")})})]})},BN=m.memo(()=>{const[t,s]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ft,{isOpen:t,onRequestClose:()=>s(!1),title:"Set role",children:e.jsx(De,{children:e.jsx(RCe,{onSubmit:()=>s(!1)})})}),e.jsx("div",{className:A1.root,children:e.jsxs("div",{className:A1.body,children:[null,e.jsx(LCe,{})]})})]})});BN.displayName="QueryLayout";const DN=m.memo(()=>{const{isLoading:t,projectId:s}=F();return t?e.jsx(ve,{}):e.jsx(f2,{children:e.jsxs(J0,{children:[e.jsx(BN,{}),e.jsx(hj,{})]})},s)});DN.displayName="Query";const MCe="_root_1u3cy_1",BCe={root:MCe},DCe=()=>e.jsxs("div",{className:BCe.root,children:[e.jsx(tA,{headingId:"github"}),e.jsx(oA,{headingId:"vercel"})]}),Ht={pageHeader:"Personal information",firstNameLabel:"First name",lastNameLabel:"Last name",nameFormSubmitButton:"Save",nameFormSubmitToast:"User data was successfully updated!",emailLabel:"Email",changeEmailLabel:"Change email",socialAccountsHeader:"Sign-in methods",unlinkProviderConfirmationText:t=>`Are you sure you want to unlink ${t} from your account?`,unlinkProviderConfirmationTitle:"Unlink social account",unlinkProviderConfirmationOk:"Yes, proceed",unlinkProviderSuccessToast:t=>`Successfully unlinked ${t} from your account`},UCe="_nameFields_nxw1d_1",FCe="_emailLabelWrapper_nxw1d_10",zCe="_providersTitle_nxw1d_15",qCe="_providerCard_nxw1d_19",HCe="_providers_nxw1d_15",VCe="_providerText_nxw1d_37",WCe="_formBody_nxw1d_41",Ia={nameFields:UCe,emailLabelWrapper:FCe,providersTitle:zCe,providerCard:qCe,providers:HCe,providerText:VCe,formBody:WCe},GCe=()=>{var o,i,c;const{data:t}=kt(),s=$e({mode:"onChange",defaultValues:{id:t==null?void 0:t.id,first_name:(t==null?void 0:t.firstName)??"",last_name:(t==null?void 0:t.lastName)??"",email:t==null?void 0:t.email}}),{formState:n,register:r}=s,a=m.useCallback(l=>G.updateUser(l).then(()=>{s.reset(l),Ue(e.jsx(rt,{children:Ht.nameFormSubmitToast}))}).catch(Y),[s]);return e.jsx(Le,{id:"profile",children:e.jsx(Jt,{...s,children:e.jsx(qt,{onSubmit:s.handleSubmit(a),children:e.jsxs(Ne,{children:[e.jsx(Se,{children:Ht.pageHeader}),e.jsx("div",{children:e.jsxs("div",{className:Ia.nameFields,children:[e.jsx(U,{error:(o=n.errors.first_name)==null?void 0:o.message,label:Ht.firstNameLabel,children:e.jsx(ie,{...r("first_name",{required:{value:!0,message:"This field is required"}})})}),e.jsx(U,{error:(i=n.errors.last_name)==null?void 0:i.message,label:Ht.lastNameLabel,children:e.jsx(ie,{...r("last_name",{required:{value:!0,message:"This field is required"}})})})]})}),e.jsx("div",{children:e.jsxs(U,{error:(c=n.errors.email)==null?void 0:c.message,children:[e.jsx(Im,{children:Ht.emailLabel}),e.jsx(ie,{...r("email",{required:{value:!0,message:"This field is required"}}),disabled:!0})]})}),e.jsx(ks,{children:e.jsx(E,{type:"submit",disabled:n.isSubmitting||!n.isDirty,children:Ht.nameFormSubmitButton})})]})})})})},Kr={changeEmailInstructions:"Enter your new email address below. We'll send a verification link to this address.",changeEmailWarning:t=>`Important: Changing your email will unlink your account from ${t}. You can only use this new email to sign in going forward.`,changeEmailToast:"Check your email inbox to confirm the email change!",changeEmailPasswordInstructions:"You need to set a password for your new email address.",newEmailLabel:"New email",newEmailConfirmationLabel:"Confirm new email address",newEmailMatchingError:"Email confirmation should match",modalTitle:t=>t===1?"Set email":"Set password",changeEmailSubmit:t=>t?"Submit":"Next"},KCe="_text_f98al_1",QCe="_formBody_f98al_8",F1={text:KCe,formBody:QCe},du={newPasswordLabel:"New password",newPasswordConfirmationLabel:"Confirm new password",newPasswordMatchingError:"Password confirmation should match",modalTitle:"Set password",changePasswordInstructions:"You need to set a password before unlinking your social provider."},YCe="_formBody_ku1q6_1",JCe={formBody:YCe},UN=({form:t,onSubmit:s,infoMessage:n})=>{var a,o;const r=t.watch("new_password");return e.jsxs(es,{providerProps:t,onSubmit:s,children:[e.jsxs(ra,{className:JCe.formBody,children:[e.jsx(T,{children:n}),e.jsx(U,{id:"new_password",label:du.newPasswordLabel,error:(a=t.formState.errors.new_password)==null?void 0:a.message,children:e.jsx(Gd,{name:"new_password",autoComplete:"new-password",registerProps:{deps:"password_confirmation"},applyConstraints:!0,tooltipPlacement:"auto",autoFocus:!0})}),e.jsx(U,{id:"new_password_confirmation",label:du.newPasswordConfirmationLabel,error:(o=t.formState.errors.new_password_confirmation)==null?void 0:o.message,children:e.jsx(Gd,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:i=>i===r||du.newPasswordMatchingError}})})]}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{})]})]})},ZCe=t=>{const{id:s}=Tu(XL),n=$e({defaultValues:{id:s}}),r=a=>G.updateUser(a).then(()=>{var o;(o=t.onSuccess)==null||o.call(t)}).catch(Y);return e.jsx(e.Fragment,{children:e.jsx(na,{...t,isOpen:!0,title:du.modalTitle,children:e.jsx(UN,{onSubmit:r,form:n,infoMessage:du.changePasswordInstructions})})})},XCe=({form:t,onSubmit:s,isFinal:n,userAuthAccounts:r})=>{var i,c;const a=t.watch("email"),o=new Intl.ListFormat().format(r.filter(l=>l!=="keycloak").map(l=>N8[l]));return e.jsx(Jt,{...t,children:e.jsxs(qt,{onSubmit:t.handleSubmit(s),children:[e.jsxs(ra,{className:F1.formBody,children:[e.jsxs("div",{className:F1.text,children:[e.jsx(T,{children:Kr.changeEmailInstructions}),o.length>0&&e.jsx(X,{children:Kr.changeEmailWarning(o)})]}),e.jsx(U,{label:Kr.newEmailLabel,error:(i=t.formState.errors.email)==null?void 0:i.message,children:e.jsx(ie,{autoFocus:!0,autoComplete:"email",...t.register("email",{required:{value:!0,message:"This field is required"},deps:"email_confirmation"}),"data-qa":"new_email_change"})}),e.jsx(U,{label:Kr.newEmailConfirmationLabel,error:(c=t.formState.errors.email_confirmation)==null?void 0:c.message,children:e.jsx(ie,{autoComplete:"email",...t.register("email_confirmation",{validate:l=>l===a||Kr.newEmailMatchingError}),"data-qa":"new_email_change_confirm"})})]}),e.jsxs(Te,{children:[e.jsx(no,{}),e.jsx(Ce,{children:Kr.changeEmailSubmit(n)})]})]})})},e0e=t=>{const{data:s}=kt(),n=$e({defaultValues:{id:s==null?void 0:s.id}}),r=$e({defaultValues:{id:s==null?void 0:s.id}}),[a,o]=m.useState(1),i=t.userHasPassword?1:2,c=async()=>Promise.resolve(o(d=>d+1)),l=()=>{const d={...n.getValues(),...r.getValues()};return G.updateUser({id:d.id,email:d.email,new_password:d.new_password}).then(()=>{Ue(e.jsx(rt,{children:Kr.changeEmailToast})),t.onSuccess()}).catch(Y)};return e.jsx(e.Fragment,{children:e.jsxs(na,{...t,isOpen:!0,title:Kr.modalTitle(a),children:[a===1&&e.jsx(XCe,{onSubmit:i>1?c:l,isFinal:i===1,form:n,userAuthAccounts:t.userAuthAccounts}),a===2&&e.jsx(UN,{onSubmit:l,form:r,infoMessage:Kr.changeEmailPasswordInstructions})]})})},t0e=({isInitialized:t,userHasPassword:s,userLinkedAccounts:n,invalidate:r})=>{var y,S;const{trackUiInteraction:a}=P(),{data:o,isLoading:i,invalidate:c}=kt(),l=$e({defaultValues:{id:o==null?void 0:o.id,first_name:(o==null?void 0:o.firstName)??"",last_name:(o==null?void 0:o.lastName)??"",email:o==null?void 0:o.email}}),{formState:d,register:u}=l,p=m.useCallback(w=>G.updateUser({id:w.id,first_name:w.first_name,last_name:w.last_name}).then(()=>{c(),l.reset(w),Ue(e.jsx(rt,{children:Ht.nameFormSubmitToast}))}).catch(Y),[l,c]),h=m.useMemo(()=>n??[],[n]),g=m.useCallback(w=>{G.detachSocialLink({provider:w.provider}).then(()=>{r(),Ue(e.jsx(rt,{children:Ht.unlinkProviderSuccessToast(w.provider_display_name)}))},Y)},[r]),f=it(Je.ChangePassword,{syncWithUrl:!1}),[_,b]=m.useState(),{confirm:x}=Ve(),j=m.useCallback(w=>{x({text:Ht.unlinkProviderConfirmationText(w.provider_display_name),header:Ht.unlinkProviderConfirmationTitle,confirmButtonText:Ht.unlinkProviderConfirmationOk}).then(k=>{if(!k){a("user_profile_detach_social_link_dismissed");return}a("user_profile_detach_social_link_confirmed"),s||h.length>1?g(w):(b(w),f.openModal())})},[x,g,s,h.length,f,a]),v=it(Je.ChangeEmail);return i?e.jsx(ve,{}):e.jsxs(e.Fragment,{children:[v.isModalOpen&&e.jsx(e0e,{onRequestClose:()=>{a("user_profile_change_email_modal_dismissed"),v.closeModal()},onSuccess:()=>{a("user_profile_change_email_modal_confirmed"),v.closeModal()},userHasPassword:s,userAuthAccounts:h.map(({provider:w})=>w)??[]}),f.isModalOpen&&e.jsx(ZCe,{onRequestClose:()=>{a("user_profile_password_modal_dismissed"),f.closeModal()},onSuccess:()=>{a("user_profile_password_modal_confirmed"),f.closeModal(),g(_)}}),e.jsxs(Le,{id:"profile",children:[e.jsxs(Ne,{children:[e.jsx(Se,{children:Ht.pageHeader}),e.jsxs(es,{providerProps:l,onSubmit:p,formBodyClassName:Ia.formBody,children:[e.jsxs("div",{className:Ia.nameFields,children:[e.jsx(U,{error:(y=d.errors.first_name)==null?void 0:y.message,label:Ht.firstNameLabel,children:e.jsx(ie,{...u("first_name",{required:{value:!0,message:"This field is required"}})})}),e.jsx(U,{error:(S=d.errors.last_name)==null?void 0:S.message,label:Ht.lastNameLabel,children:e.jsx(ie,{...u("last_name",{required:{value:!0,message:"This field is required"}})})})]}),e.jsx("div",{children:e.jsx(E,{type:"submit",disabled:!t||d.isSubmitting||!d.isDirty,"data-qa":"save_name",children:Ht.nameFormSubmitButton})})]})]}),e.jsx(Ne,{children:e.jsxs(U,{"aria-label":Ht.emailLabel,children:[e.jsxs("div",{className:Ia.emailLabelWrapper,children:[e.jsx(Im,{children:Ht.emailLabel}),e.jsx(R,{disabled:!t,onClick:()=>{a("user_profile_change_email_clicked"),v.openModal()},children:Ht.changeEmailLabel})]}),e.jsx(ie,{...u("email"),disabled:!0})]})}),h.length>0&&e.jsxs("div",{children:[e.jsx(Z,{level:3,className:Ia.providersTitle,children:Ht.socialAccountsHeader}),e.jsx(Ne,{children:e.jsx("div",{className:Ia.providers,children:h.map(w=>e.jsxs("div",{className:Ia.providerCard,children:[eR(w.provider)&&e.jsx(z,{name:w.provider,size:20}),e.jsxs("div",{className:Ia.providerText,children:[w.provider==="github"?"@":"",w.username]}),e.jsx(_r,{iconName:"close",tooltip:"Unlink",disabled:w.provider==="vercelmp",onClick:()=>{a("user_profile_detach_social_link_clicked"),j(w)}})]},w.provider))})})]})]})]})},s0e=()=>{const{isKeycloakUser:t,...s}=SI();return t?e.jsx(t0e,{...s}):e.jsx(GCe,{})},n0e=()=>{const t=m.useCallback(async()=>G.getUserDeletionChecklist(),[]),{data:s,isLoading:n}=rk(t),r=m.useMemo(()=>s==null?void 0:s.data.conditions.map(a=>({name:a.name,satisfied:a.expected===a.actual,expected:a.expected,actual:a.actual})),[s]);return{isLoading:n,conditions:r}},Od={title:"Delete account",confirmationButtonText:"Delete account",disclaimer:e.jsxs(e.Fragment,{children:[e.jsx(T,{bold:!0,children:"This action will immediately deactivate your account."}),e.jsx(T,{children:"After 30 days, this account will be permanently deleted."})]}),emailLabel:e.jsxs(T,{children:["Enter ",e.jsx("strong",{children:"your account email"})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},r0e=({onSuccess:t,onRequestClose:s})=>{var o;const{data:n}=kt(),r=$e(),a=async i=>{try{await G.deleteUser(),t==null||t(i)}catch(c){Y(c)}};return e.jsxs(ps,{providerProps:r,onSubmit:a,modalProps:{title:Od.title,isOpen:!0,onRequestClose:s,width:650},children:[e.jsxs(De,{gaps:!0,children:[e.jsx(X,{appearance:"warning",children:Od.disclaimer}),e.jsx(U,{label:Od.emailLabel,error:(o=r.formState.errors.email)==null?void 0:o.message,children:e.jsx(ie,{...r.register("email",{validate:i=>i===(n==null?void 0:n.email)||Od.validationText})})})]}),e.jsxs(Te,{children:[e.jsx(qs,{}),e.jsx(Ce,{appearance:"danger",children:Od.confirmationButtonText})]})]})},a0e={project_count:(t,s)=>e.jsxs(e.Fragment,{children:["Delete all your personal"," ",t.satisfied?"projects":e.jsx(R,{href:Q(C.ProjectsList),onClick:s,children:"projects"})]}),subscription_type:(t,s)=>e.jsxs(e.Fragment,{children:["Downgrade your"," ",t.satisfied?"account":e.jsx(R,{href:Q(C.UserBilling),onClick:s,children:"account"})]}),org_admin_membership_count:()=>e.jsx(e.Fragment,{children:"Leave all organizations"})},$d={title:"Delete account",unsatisfiedInfo:"Before you can delete your account, you need to:",satisfiedInfo:"This account is ready to be deleted. You've already completed the following actions.",deleteButtonText:"Delete account",conditionText:(t,s)=>a0e[t.name](t,s)},o0e="_conditions_1o49l_1",i0e="_condition_1o49l_1",z1={conditions:o0e,condition:i0e},c0e={project_count:"user_profile_delete_project_count_link_clicked",org_admin_membership_count:"user_profile_delete_org_admin_membership_count_link_clicked",subscription_type:"user_profile_delete_subscription_type_link_clicked"},l0e=()=>{const t=it(Je.DeleteUser),s=$e(),n=()=>{t.openModal()},{trackUiInteraction:r}=P(),{isLoading:a,conditions:o}=n0e();if(a||!o)return null;const i=o.every(c=>c.satisfied);return e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(r0e,{onSuccess:()=>{r("user_profile_delete_modal_confirmed"),CC().then(()=>zb())},onRequestClose:()=>{r("user_profile_delete_modal_dismissed"),t.closeModal()}}),e.jsx(Le,{id:"delete",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:$d.title}),e.jsxs(es,{gaps:!0,providerProps:s,onSubmit:n,children:[e.jsx(T,{appearance:"secondary",children:i?$d.satisfiedInfo:$d.unsatisfiedInfo}),e.jsx("div",{className:z1.conditions,children:o.map(c=>e.jsxs("div",{className:z1.condition,children:[e.jsx(z,{name:c.satisfied?"success":"done",size:20}),e.jsx(T,{children:$d.conditionText(c,()=>r(c0e[c.name]))})]},c.name))}),e.jsx(ks,{children:e.jsx(Ce,{appearance:"danger",disabled:!i,onClick:()=>{r("user_profile_delete_submitted")},children:$d.deleteButtonText})})]})]})})]})},d0e="_channel_40sxr_1",u0e="_joined_40sxr_5",q1={channel:d0e,joined:u0e},Ho={title:"Early access",subtitle:t=>`Join the early access program to preview upcoming features for ${PC(t)} projects. You can opt out anytime.`,benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:t=>e.jsxs("div",{className:q1.joined,children:[e.jsxs(T,{children:["Thank you for being an early access member! ",e.jsx("b",{children:t}),"'s projects have exclusive access to upcoming features."]}),e.jsxs(T,{children:["Get support and share feedback in our"," ",e.jsx(R,{href:hu,openInNewTab:!0,children:"Discord community"}),"."]}),e.jsx(T,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:e.jsxs(e.Fragment,{children:["Share feedback directly with our team. Join our"," ",e.jsx(R,{href:hu,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",e.jsx("b",{className:q1.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the early access program!",submitJoin:"Join early access"},h0e="_formBody_6f5xe_1",p0e="_joinMessage_6f5xe_7",H1={formBody:h0e,joinMessage:p0e},m0e=()=>{const{data:t}=kt(),s=Gb("beta_program"),{trackUiInteraction:n}=P(),r=$e(),a=m.useCallback(async()=>{try{n("user_profile_early_access_joined"),await G.joinUserEarlyAccess(),oe(Ho.successJoin),setTimeout(()=>{window.location.reload()},3e3)}catch(o){Y(o)}},[n]);return t===void 0?null:e.jsx(Le,{id:"early-access",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:Ho.title}),e.jsx(es,{providerProps:r,onSubmit:a,formBodyClassName:H1.formBody,children:s?e.jsx("div",{children:Ho.alreadyIn(t.displayName)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{level:5,children:Ho.subtitle(t.displayName)}),e.jsx("ul",{children:Ho.benefits.map(o=>e.jsx("li",{children:o},o))})]}),e.jsx("div",{children:e.jsx(T,{className:H1.joinMessage,children:Ho.joinDiscord})}),e.jsx(ks,{children:e.jsx(Ce,{children:Ho.submitJoin})})]})})]})})},g0e="_formBody_ku1q6_1",f0e={formBody:g0e},_0e=()=>{var p,h;const{userHasPassword:t,isInitialized:s,invalidate:n,isError:r}=SI(),{data:a}=kt(),o=$e({defaultValues:{id:a==null?void 0:a.id,password:"",new_password:"",new_password_confirmation:""}}),{watch:i,formState:c,reset:l}=o,d=i("new_password"),u=m.useCallback(async({id:g,password:f,new_password:_})=>{var b;try{await G.updateUser({id:g,password:f,new_password:_}),Ue(e.jsx(rt,{children:"Password updated"})),n(),l()}catch(x){Xr(x)&&((b=x.response)==null?void 0:b.status)===404?Ue(e.jsx(ro,{children:"Current password is not correct"})):Y(x)}},[l,n]);return r?e.jsx(rs,{}):s?e.jsx(Le,{id:"password",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:t?"Change password":"Set password"}),e.jsxs(es,{providerProps:o,className:f0e.formBody,onSubmit:u,gaps:!0,children:[t&&e.jsx(U,{id:"password",label:"Current password",children:e.jsx(Gd,{name:"password",autoComplete:"current-password"})}),e.jsx(U,{error:(p=c.errors.new_password)==null?void 0:p.message,label:t?"New password":"Password",id:"new_password",children:e.jsx(Gd,{name:"new_password",applyConstraints:!0,autoComplete:"new-password",registerProps:{deps:"new_password_confirmation"}})}),e.jsx(U,{error:(h=c.errors.new_password_confirmation)==null?void 0:h.message,label:`Confirm ${t?"new":""} password`,id:"new_password_confirmation",children:e.jsx(Gd,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:g=>g===d||"Password confirmation should match"}})}),e.jsx(ks,{children:e.jsx(E,{type:"submit",disabled:!s||c.isSubmitting||!c.isDirty||Object.keys(c.errors).length>0,"data-qa":"save_password",children:t?"Update password":"Set password"})})]})]})}):e.jsx(ve,{})},P_={title:"Referral program",referralCode:t=>e.jsxs(e.Fragment,{children:["Your referral link:"," ",e.jsxs(R,{href:`${Hp}?refcode=${t}`,openInNewTab:!0,children:[Hp,"?refcode=",t]})]}),errorText:t=>e.jsxs(e.Fragment,{children:["Something went wrong. ",t.message]})},b0e=()=>{const[t,s]=m.useState({type:"idle"});return m.useEffect(()=>{(async()=>{s({type:"loading"});try{const{data:n}=await G.getCurrentUserRefCode();s({type:"loaded",referralCode:n.ref_code})}catch(n){s({type:"error",error:n instanceof Error?n:new Error(String(n))})}})()},[]),e.jsx(Le,{id:"referral",children:e.jsxs(Ne,{children:[e.jsx(Se,{children:P_.title}),(()=>{switch(t.type){case"idle":case"loading":return e.jsx("div",{children:e.jsx(on,{})});case"loaded":return e.jsx("p",{children:P_.referralCode(t.referralCode)});case"error":return e.jsx("p",{children:P_.errorText(t.error)})}})()]})})},T_={title:"Create an organization to keep building with Neon",subtitle:"You need an organization to create and manage projects.",createOrgLabel:"Create organization"},x0e="_alert_z4i39_1",j0e={alert:x0e},v0e=()=>{const t=it(Je.CreateOrg),{data:s}=Fn();return s===void 0||s.length>0?null:e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(Ax,{onRequestClose:()=>{t.closeModal()}}),e.jsx(X,{appearance:"info",className:j0e.alert,title:T_.title,action:e.jsx(R,{onClick:()=>{t.openModal()},children:T_.createOrgLabel}),children:T_.subtitle})]})},y0e=()=>{const t=ge("referral_codes"),{isKeycloakUser:s}=m.useContext(Fm),{data:n}=kt(),r=aa(n);return e.jsxs(e.Fragment,{children:[r&&e.jsx(v0e,{}),e.jsx(s0e,{}),s&&e.jsx(_0e,{}),e.jsx(IA,{}),!r&&e.jsx(m0e,{}),t&&e.jsx(b0e,{}),e.jsx(l0e,{})]})},V1={createProject:"Create project",continue:"Continue"},w0e="_root_withGlobe_fi5bt_1",S0e="_root_withoutGlobe_fi5bt_6",C0e="_contentColumn_fi5bt_12",k0e="_asideColumn_fi5bt_17",Pp={root_withGlobe:w0e,root_withoutGlobe:S0e,contentColumn:C0e,asideColumn:k0e},I0e="_layout_8mfm6_3",P0e="_page_8mfm6_17",T0e="_withGlobe_8mfm6_25",A0e="_footer_8mfm6_26",N0e="_content_8mfm6_34",E0e="_footerContent_8mfm6_51",Cc={layout:I0e,page:P0e,withGlobe:T0e,footer:A0e,content:N0e,footerContent:E0e},O0e="_root_1uhev_1",$0e="_step_1uhev_6",L0e="_step_active_1uhev_14",A_={root:O0e,step:$0e,step_active:L0e},R0e=({currentStepIndex:t,totalSteps:s})=>e.jsx("div",{className:A_.root,children:Fa(s).map(n=>e.jsx("span",{className:V(A_.step,{[A_.step_active]:n<=t})},n))}),M0e=({form:t,stepper:s,isShowGlobe:n,actions:r,contentRef:a,contentClassName:o,maxFooterWidth:i,"data-qa":c,onSubmit:l,children:d})=>e.jsx(Jt,{...t,children:e.jsxs("form",{className:V(Cc.layout,{[Cc.withGlobe]:n}),autoComplete:"off","data-qa":c,style:i?{"--js-max-footer-width":`${i}px`}:void 0,onSubmit:l,children:[e.jsx("div",{className:Cc.page,children:e.jsx("div",{ref:a,className:V(o,Cc.content),children:d})}),r&&e.jsx("div",{className:Cc.footer,children:e.jsxs("div",{className:Cc.footerContent,children:[e.jsx("div",{children:r}),n&&s.totalSteps>=2&&e.jsx(R0e,{currentStepIndex:s.currentStepIndex,totalSteps:s.totalSteps})]})})]})}),B0e="_header_1lbth_1",D0e="_separator_1lbth_9",W1={header:B0e,separator:D0e},U0e=({title:t,headingLevel:s,hideLogo:n=!1})=>{const r=m.useRef(null);return m.useEffect(()=>{const a=r.current;a&&a.getBoundingClientRect().y<15&&a.scrollIntoView()},[]),e.jsxs("div",{ref:r,className:W1.header,children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx(z,{name:"neon",size:26}),e.jsx("span",{className:W1.separator,children:"/"})]}),e.jsx(Z,{level:s,size:"h2",children:t})]})},F0e="_formContainer_dl2mm_1",z0e="_formContent_dl2mm_6",G1={formContainer:F0e,formContent:z0e},q0e=({title:t,headingLevel:s})=>e.jsxs("div",{className:G1.formContainer,children:[e.jsx(U0e,{title:t,headingLevel:s}),e.jsx("div",{className:G1.formContent,children:e.jsx(X0,{})})]}),FN=["form"],Rr=FN[0];function H0e(t){return FN.includes(t)}const N_="step";function V0e({onStartAnalyticEvent:t,onDoneAnalyticEvent:s}){const n=et(),r=il(),{trackUiInteraction:a}=P(),o=m.useRef(Date.now()),i=m.useMemo(()=>["form"],[]);P(t?{mountEvent:{name:t,params:{steps:JSON.stringify(i)}}}:void 0);const[c,l]=m.useState(Rr),d=m.useMemo(()=>({currentStepIndex:i.includes(c)?i.indexOf(c):0,totalSteps:i.length}),[i,c]),u=m.useMemo(()=>new URLSearchParams(r.search).get(N_)??Rr,[r.search]);function p(_){const b=new URLSearchParams(r.search);_===Rr?b.delete(N_):b.set(N_,_),n.push(`?${b.toString()}`)}m.useEffect(()=>{c===Rr&&u&&u!==c&&p(Rr)},[]),LM(()=>{l(H0e(u)?u:Rr)},[u]);function h(_){a("onboarding_project_form_submitted",{project_id:_.project.id,duration:Date.now()-o.current}),s&&a(s);let b=Q(C.ProjectsItem,{projectId:_.project.id});_.useNeonAuth&&(b=Q(C.ProjectsItemIdentity,{projectId:_.project.id}),a("project_form_use_neon_auth_submitted")),n.push(b)}function g(){c!==Rr&&p(Rr)}function f(_,b){const x=i.indexOf(c);if(x===-1){p(Rr),gi(new Error("Invalid step"));return}const j=i[x+1];if(j){p(j),_.preventDefault();return}b==null||b(_)}return{currentStepId:c,stepper:d,onContinueClick:f,onSuccess:h,onFail:g}}const K1=434,W0e=({title:t,headingLevel:s=1,shouldShowGlobe:n,onStartAnalyticEvent:r,onDoneAnalyticEvent:a})=>{const{trackUiInteraction:o}=P(),{isSuspendedAccount:i}=he(),{currentStepId:c,stepper:l,onContinueClick:d,onSuccess:u,onFail:p}=V0e({onStartAnalyticEvent:r,onDoneAnalyticEvent:a}),{form:h,onSubmit:g}=I2({createdBy:"GLOBE_ONBOARDING",onSuccess:u,onFail:p}),f=m.useRef(null),_=m.useRef(null),b=m.useRef(void 0),x=CP({rootRef:f,shouldShowGlobe:n});return e.jsxs(M0e,{form:h,stepper:l,isShowGlobe:x,contentRef:f,contentClassName:V({[Pp.root_withGlobe]:x,[Pp.root_withoutGlobe]:!x}),maxFooterWidth:x?void 0:K1,"data-qa":"create_project_form",onSubmit:j=>{_.current&&b.current===void 0&&(b.current=_.current.clientHeight),d(j,h.handleSubmit(g))},actions:e.jsx(Ce,{size:"l",disabled:i,onClick:()=>{o("onboarding_project_form_create_project_clicked")},children:l.currentStepIndex<l.totalSteps-1?V1.continue:V1.createProject}),children:[e.jsx("div",{className:Pp.contentColumn,style:{maxWidth:K1},children:e.jsx("div",{ref:_,children:(()=>{switch(c){case"form":return e.jsx(q0e,{title:t,headingLevel:s})}})()})}),x&&e.jsx("div",{className:Pp.asideColumn,children:e.jsx(UP,{})})]})},G0e=1024,zN=()=>{const{formatMessage:t}=hn();return e.jsx(W0e,{title:t({id:"PLn77g",defaultMessage:[{type:0,value:"Get started with Neon"}]}),onStartAnalyticEvent:"onboarding_flow_started",onDoneAnalyticEvent:"onboarding_flow_done",shouldShowGlobe:()=>window.innerWidth>=G0e})},K0e=()=>{const t=UT();return{type:"toc",items:Object.keys(li).filter(s=>t[s].length!==0).map(s=>({id:s,label:li[s]}))}},Q1={type:"toc",items:[{id:"profile",label:"Profile"},{id:"password",label:"Password"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},{id:"referral",label:"Referral code"},{id:"delete",label:"Delete account"}]},Q0e=()=>{const t=yN(),s=vN();return{type:"toc",items:He([{id:"general",label:"General"},{id:"compute",label:"Compute"},{id:"storage",label:"Instant restore"},{id:"update-schedule",label:"Updates"},{id:"sharing",label:"Collaborators"},s&&{id:"hipaa-support",label:"HIPAA support"},{id:"network-security",label:"Networking"},!t&&{id:"authentication-providers",label:"Authentication Providers"},{id:"out-replication",label:"Logical Replication"},{id:"transfer",label:"Transfer"},{id:"delete",label:"Delete"}])}},Y0e={type:"toc",items:[{id:"github",label:"GitHub"},{id:"vercel",label:"Vercel"}]},J0e=({isReferralCodesEnabled:t,isKeycloakUser:s,userIsOrgBased:n})=>({...Q1,items:Q1.items.filter(r=>{switch(r.id){case"referral":return t;case"password":return s;case"early-access":return!n;default:return!0}})}),Z0e=({isVercelOrg:t,isFreeSubscription:s,orgHasCollaborators:n})=>({type:"toc",items:He([{id:"members",label:"Members"},!t&&{id:"pending",label:"Pending invites"},!s&&n&&{id:"collaborators",label:"Collaborators"}])}),X0e=({isVercelOrg:t,showHipaaSupportOrgSettings:s})=>({type:"toc",items:He([{id:"general",label:"General information"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},s&&{id:"hipaa-support",label:"HIPAA support"},{id:"private-networking",label:"Private Networking"},!t&&{id:"transfer",label:"Transfer projects"},{id:"delete",label:"Delete organization"}])}),qN=({billingSections:t})=>({type:"toc",items:t.map(({id:s,name:n})=>({id:s,label:n}))}),eke=({isVercelOrg:t})=>({type:"toc",items:He([{id:"github",label:"GitHub"},!t&&{id:"vercel",label:"Vercel"}])}),tke="_container_e1e7w_1",ske="_header_e1e7w_7",nke="_title_e1e7w_11",rke="_orgList_e1e7w_16",ake="_orgItem_e1e7w_22",oke="_orgName_e1e7w_31",ike="_actions_e1e7w_35",cke="_error_e1e7w_39",lke="_errorInner_e1e7w_43",Mr={container:tke,header:ske,title:nke,orgList:rke,orgItem:ake,orgName:oke,actions:ike,error:cke,errorInner:lke},HN=({message:t,reasons:s})=>e.jsxs(e.Fragment,{children:[t&&e.jsx(T,{bold:!0,children:t}),s.length===1&&e.jsx(T,{children:s[0]}),s.length>1&&e.jsx("ul",{children:s.map((n,r)=>e.jsx("li",{children:n},r))})]});HN.displayName="ClaimError";const VN=()=>{const t=ge("emergency_disable_claim_page"),s=et(),{trackUiInteraction:n}=P(),[r,a]=m.useState(null),[o,i]=m.useState(!1),c=Hd("p"),l=Hd("tr"),d=Hd("ru"),{data:u,isLoading:p}=Fn(),h=m.useCallback(async g=>{var f,_,b;if(!c||!l){a({message:"Missing project ID or transfer request ID in URL parameters",reasons:[]});return}i(!0),a(null);try{n("project_claim_attempted",{project_id:c,org_id:g.id}),await G.acceptProjectTransferRequest(c,l,{org_id:g.id}),n("project_claim_succeeded",{project_id:c,org_id:g.id}),oe(`Project has been successfully claimed to ${g.name}.`),d?window.location.href=decodeURIComponent(d):s.replace(Q(C.ProjectsItem,{projectId:c}))}catch(x){if(n("project_claim_failed",{project_id:c,org_id:g.id,error:x.message,reasons:Xr(x)?(_=(f=x.response)==null?void 0:f.data)==null?void 0:_.reasons:void 0}),Xr(x)&&x.status===406){const{reasons:j}=(b=x.response)==null?void 0:b.data;a({message:"Your account doesn't satisfy limits that project requires",reasons:j.map(({message:v})=>v)});return}a({message:x.message||"An unexpected error occurred",reasons:[]})}finally{i(!1)}},[c,l,d,s,n]);return!c||!l?e.jsx(rs,{title:"Invalid claim URL",subtitle:"Missing project ID or transfer request ID in URL parameters",actions:e.jsx(E,{as:"a",href:Wa,size:"l",children:"Back to Console"})}):p?e.jsx(ve,{}):t?e.jsx(rs,{title:"Claim is temporarily unavailable",subtitle:"We're working on it and will be back soon. Sorry for the inconvenience.",actions:e.jsx(E,{as:"a",href:Wa,size:"l",children:"Back to Console"})}):e.jsxs("div",{className:Mr.container,children:[e.jsxs("div",{className:Mr.header,children:[e.jsx("h1",{className:Mr.title,children:"Claim Project"}),e.jsx(T,{appearance:"secondary",children:"Choose which organization you'd like to claim this project to."})]}),u&&u.length>0?e.jsx("div",{className:Mr.orgList,children:u.map(g=>e.jsxs("div",{className:Mr.orgItem,children:[e.jsx("div",{children:e.jsx(T,{className:Mr.orgName,children:g.name})}),g.managed_by==="vercel"?e.jsx(te,{content:e.jsxs("span",{children:["Sorry, we don't support claiming projects to Vercel-managed organizations yet.",e.jsx("br",{})," But we are working on it!",e.jsx("br",{}),"Please follow our"," ",e.jsx("a",{href:"https://neon.com/docs/changelog",target:"_blank",rel:"noreferrer",children:"changelog"})," ","for updates."]}),children:e.jsxs("div",{children:[" ",e.jsx(E,{disabled:!0,children:"Claim"})]})}):e.jsx(E,{onClick:()=>h(g),disabled:o,children:"Claim"})]},g.id))}):e.jsx(T,{appearance:"secondary",children:"You don't have access to any organizations to claim this project to."}),r&&e.jsx(X,{className:Mr.error,appearance:"error",children:e.jsx("div",{className:Mr.errorInner,children:e.jsx(HN,{message:r.message,reasons:r.reasons})})}),e.jsx("div",{className:Mr.actions,children:e.jsx(E,{as:"a",href:Wa,appearance:"secondary",size:"l",children:"Cancel"})})]})};VN.displayName="Claim";const dke=()=>{const{data:t}=ws(),{data:s}=Hb();return e.jsx(e.Fragment,{children:(!!(t!=null&&t.length)||!!(s!=null&&s.length))&&e.jsx(Bee,{})})},WN=la(aQ,{contentWidth:void 0,footer:e.jsx(dke,{}),showSidebarFn:!0}),uke=()=>TT()?e.jsx(zN,{}):e.jsx(ye,{to:C.ProjectsList}),hke=()=>{const{orgId:t}=dl();return TT()?e.jsx(zN,{}):e.jsx(ye,{to:Q(C.OrgProjectsList,{orgId:t})})},pke=fs(obe),mke=fs(DN,{contentWidth:"app"}),gke=fs(Lie,{contentWidth:"app"}),fke=fs(_ye,{title:"Integrations",actions:e.jsx(tte,{})},K0e),Y1=fs(uye,{title:"Identity"}),_ke=fs(Cfe),bke=fs(hg(tie,Yu.Metrics)),xke=fs(hg(lie,Yu.Operations)),jke=fs(hg(uoe,Yu.ActiveQueries)),vke=fs(hg(_ie,Yu.QueryHistory)),yke=fs(VSe,{contentWidth:"s",title:"Project settings"},Q0e),wke=fs(DA,{contentWidth:void 0}),Ske=fs(Ope),Cke=fs(Qxe),kke=la(y0e,{title:"Account settings",contentWidth:"s",showSidebarFn:t=>!t},J0e),Ike=la(jA,{contentWidth:"l",title:"Billing",actions:e.jsx(PT,{})},qN),Pke=uke,Tke=hke,Ake=WN,Nke=WN,Eke=la(QSe,{showSidebarFn:!1}),Oke=la(ece,{title:"People",contentWidth:"s"},Z0e),$ke=la(jA,{contentWidth:"l",title:"Billing",actions:e.jsx(PT,{})},qN),Lke=la(ple,{contentWidth:"s",title:"Organization settings"},X0e),Rke=la(DCe,{contentWidth:"l",title:"Integrations"},()=>Y0e),Mke=la(Bie,{contentWidth:"l",title:"Integrations"},eke),Bke=()=>{const t=ge("identity"),s=ge("disable_drizzle_studio"),{data:n}=kt(),r=D0(n==null?void 0:n.id),{data:a,isFetching:o}=Fn(),{data:i}=Eu(),c=aa(n),l=m.useMemo(()=>{if(!(!c||o||a===void 0||i===void 0))return a.length>0?Q(C.OrgProjectsList,{orgId:a[0].id}):i.length>0?C.ProjectsSharedList:C.UserSettings},[c,o,a,i]),d=m.useMemo(()=>{if(!(!c||o||a===void 0))return a.length>0?Q(C.OrgWelcome,{orgId:a[0].id}):C.UserSettings},[c,o,a]);return e.jsxs(kc,{children:[e.jsx(wt,{path:de.ProjectCreate,exact:!0,render:({location:u})=>{const p=new URLSearchParams(u.search);return p.set($_,Je.CreateProject),e.jsx(ye,{to:`${C.ProjectsList}?${p.toString()}`})}}),e.jsx(wt,{path:[C.ProjectsSharedList,C.ProjectsItem,C.ProjectsList,C.UserSettings,C.UserBilling,C.UserIntegrations],render:({match:u})=>{if(u.path===C.ProjectsItem){if(!("projectId"in u.params))throw new Error("Unreachable");return e.jsx(Vb,{projectId:u.params.projectId,children:e.jsx(yg,{header:e.jsx(hT,{}),children:e.jsxs(kc,{children:[e.jsx(Ke,{path:C.ProjectsItem,exact:!0,component:pke}),e.jsx(Bt,{path:de.ProjectsItemQuery,to:C.ProjectsItemBranchesSQLEditor}),!s&&e.jsx(Ke,{path:C.ProjectsItemDrizzle,exact:!0,component:gke}),e.jsx(wt,{path:C.ProjectsItemBranchesLastUsed,render:({match:p})=>e.jsx(Aee,{projectId:p.params.projectId})}),e.jsx(Ke,{path:C.ProjectsItemBranchesSQLEditor,exact:!0,component:mke}),e.jsx(Ke,{path:C.ProjectsItemBranchesRestore,exact:!0,component:_ke}),e.jsx(ye,{from:de.ProjectsItemBranchesBackup,exact:!0,to:C.ProjectsItemBranchesRestore}),e.jsx(ye,{from:C.ProjectsItemBranchesItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0}),e.jsx(Ke,{path:C.ProjectsItemBranchesItemMonitoringOperations,exact:!0,component:xke}),e.jsx(Ke,{path:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0,component:bke}),e.jsx(Ke,{path:C.ProjectsItemBranchesItemMonitoringActiveQueries,exact:!0,component:jke}),e.jsx(Ke,{path:C.ProjectsItemBranchesItemMonitoringQueryHistory,exact:!0,component:vke}),e.jsx(Ke,{path:C.ProjectsItemIntegrations,exact:!0,component:fke}),e.jsx(wt,{path:C.ProjectsItemAuthorize,exact:!0,render:({match:p})=>e.jsx(ye,{to:`${Q(C.ProjectsItemSettings,{projectId:p.params.projectId})}#rls`})}),t&&e.jsx(Ke,{path:C.ProjectsItemIdentity,exact:!0,component:Y1}),t&&e.jsx(Ke,{path:C.ProjectsItemBranchesIdentity,exact:!0,component:Y1}),e.jsx(Bt,{path:de.ProjectsItemRestore,to:C.ProjectsItemBranchesRestore}),e.jsx(Bt,{path:de.ProjectsItemBackup,to:C.ProjectsItemBranchesRestore}),e.jsx(Bt,{path:de.ProjectsItemMonitoringOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(Bt,{path:de.ProjectsItemMonitoringMetrics,to:C.ProjectsItemBranchesItemMonitoringMetrics}),e.jsx(Bt,{path:de.ProjectsItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),e.jsx(Bt,{path:de.ProjectsItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),e.jsx(Ke,{path:C.ProjectsItemSettings,exact:!0,component:yke}),e.jsx(ye,{from:de.ProjectsItemSettingsGeneral,to:`${C.ProjectsItemSettings}#general`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsCompute,to:`${C.ProjectsItemSettings}#compute`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsStorage,to:`${C.ProjectsItemSettings}#storage`,exact:!0}),e.jsx(wt,{path:de.ProjectsItemSettingsIPAllow,exact:!0,render:({match:p})=>e.jsx(ye,{to:Q(`${C.ProjectsItemSettings}#network-security`,{projectId:p.params.projectId})})}),e.jsx(ye,{from:de.ProjectsItemSettingsNetworkSecurity,to:`${C.ProjectsItemSettings}#network-security`,exact:!0}),e.jsx(wt,{path:de.ProjectsItemSettingsBeta,exact:!0,render:({match:p})=>e.jsx(ye,{to:Q(`${C.ProjectsItemSettings}#out-replication`,{projectId:p.params.projectId})})}),e.jsx(ye,{from:de.ProjectsItemSettingsUpdateSchedule,to:`${C.ProjectsItemSettings}#update-schedule`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsOutboundLogicalReplication,to:`${C.ProjectsItemSettings}#out-replication`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsSharing,to:`${C.ProjectsItemSettings}#sharing`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsDelete,to:`${C.ProjectsItemSettings}#delete`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsTransfer,to:`${C.ProjectsItemSettings}#transfer`,exact:!0}),e.jsx(ye,{from:de.ProjectsItemSettingsRLS,to:`${C.ProjectsItemSettings}#rls`,exact:!0}),e.jsx(Bt,{path:de.ProjectsItemSettingsOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(Bt,{path:de.ProjectsItemSettingsDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(Bt,{path:de.ProjectsItemUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(Bt,{path:de.ProjectsItemSettingsUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(Bt,{path:de.ProjectsItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics}),e.jsx(Bt,{path:de.ProjectsItemOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(Bt,{path:de.ProjectsItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(ye,{path:de.ProjectsItemBranchesItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(Bt,{path:de.ProjectsItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(ye,{path:de.ProjectsItemBranchesItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),"Add commentMore actions",e.jsx(Bt,{path:de.ProjectsItemBranchesRolesAndDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(Bt,{path:de.ProjectsItemBranchesChildBranches,to:C.ProjectsItemBranchesChildBranches}),e.jsx(Bt,{path:de.ProjectsItemBranchesDataAPI,to:C.ProjectsItemBranchesDataAPI}),e.jsx(Bt,{path:de.ProjectsItemBranchesItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),e.jsx(Bt,{path:de.ProjectsItemBranchesItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),e.jsxs(IT,{children:[e.jsx(Ke,{path:C.ProjectsItemBranchesDataAPI,exact:!0,component:Cke}),e.jsx(Ke,{path:C.ProjectsItemBranches,exact:!0,component:wke}),e.jsx(wt,{path:C.ProjectsItemBranchesNew,exact:!0,render:({match:p})=>e.jsx(ye,{to:`${Q(C.ProjectsItemBranches,{projectId:p.params.projectId})}?modal=create_branch`})}),e.jsx(Ke,{path:C.ProjectsItemBranchesItem,exact:!0,component:Ske})]}),e.jsx(Ke,{component:Mp})]})})})}return e.jsx(yg,{header:e.jsx(um,{}),children:e.jsxs(kc,{children:[l===void 0?e.jsx(Ke,{path:C.ProjectsList,exact:!0,component:Ake}):e.jsx(ye,{path:C.ProjectsList,exact:!0,to:l}),e.jsx(Ke,{path:C.ProjectsSharedList,exact:!0,component:Eke}),e.jsx(Ke,{path:C.UserSettings,exact:!0,component:kke}),e.jsx(wt,{path:de.UserSettingsAccount,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#profile`})}),e.jsx(wt,{path:de.UserSettingsPassword,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#password`})}),e.jsx(wt,{path:de.UserSettingsApiKeys,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#api-keys`})}),e.jsx(wt,{path:de.UserSettingsEarlyAccess,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#early-access`})}),e.jsx(wt,{path:de.UserSettingsReferral,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#referral`})}),e.jsx(wt,{path:de.UserSettingsDelete,exact:!0,render:()=>e.jsx(ye,{to:`${C.UserSettings}#delete`})}),e.jsx(wt,{path:de.UserSettingsTheme,exact:!0,render:()=>e.jsx(ye,{to:C.UserSettings})}),l===void 0?e.jsx(Ke,{path:C.UserBilling,exact:!0,component:Ike}):e.jsx(ye,{path:C.UserBilling,to:l}),e.jsx(Ke,{path:C.UserIntegrations,exact:!0,component:Rke})]})})}}),e.jsx(Ke,{path:C.Claim,exact:!0,component:VN}),d===void 0?e.jsx(Ke,{path:C.Welcome,exact:!0,component:Pke}):e.jsx(ye,{path:C.Welcome,to:d}),e.jsx(wt,{path:C.OrgWelcome,exact:!0,render:({match:u})=>e.jsx(kv,{org_id:u.params.orgId,children:e.jsx(Ke,{component:Tke})})}),e.jsx(ye,{from:C.Home,to:C.ProjectsList,exact:!0}),e.jsx(ye,{from:de.UserIntegrationsGithub,to:`${C.UserIntegrations}#github`}),e.jsx(ye,{from:de.UserIntegrationsVercel,to:`${C.UserIntegrations}#vercel`}),l&&e.jsx(ye,{path:C.UserIntegrations,to:l}),a!==void 0&&e.jsx(Nee,{from:C.Root,to:(r==null?void 0:r.type)==="org"&&a.some(({id:u})=>u===r.id)?Q(C.OrgProjectsList,{orgId:r.id}):C.ProjectsList,exact:!0}),e.jsx(wt,{path:C.OrgRoot,children:({match:u})=>e.jsx(kv,{org_id:u==null?void 0:u.params.orgId,children:e.jsx(yg,{header:e.jsx(um,{}),children:e.jsxs(kc,{children:[e.jsx(Ke,{path:C.OrgProjectsList,exact:!0,component:Nke}),e.jsx(wt,{path:de.OrgProjectsCreate,exact:!0,render:({location:p,match:h})=>{const g=new URLSearchParams(p.search);return g.set($_,Je.CreateProject),e.jsx(ye,{to:`${Q(C.OrgProjectsList,{orgId:h.params.orgId})}?${g.toString()}`})}}),e.jsx(Ke,{path:C.OrgPeople,exact:!0,component:Oke}),e.jsx(wt,{path:de.OrgMembers,exact:!0,render:()=>e.jsx(ye,{to:`${Q(C.OrgPeople,{orgId:u.params.orgId})}#members`})}),e.jsx(wt,{path:de.OrgPendingInvites,exact:!0,render:()=>e.jsx(ye,{to:`${Q(C.OrgPeople,{orgId:u.params.orgId})}#pending`})}),e.jsx(wt,{path:de.OrgCollaborators,exact:!0,render:()=>e.jsx(ye,{to:`${Q(C.OrgPeople,{orgId:u.params.orgId})}#collaborators`})}),e.jsx(wt,{path:de.OrgGuests,exact:!0,render:()=>e.jsx(ye,{to:`${Q(C.OrgPeople,{orgId:u.params.orgId})}#collaborators`})}),e.jsx(Ke,{path:C.OrgBilling,exact:!0,component:$ke}),e.jsx(Ke,{path:C.OrgSettings,exact:!0,component:Lke}),e.jsxs(kc,{children:[e.jsx(ye,{from:de.OrgIntegrationsGithub,to:`${C.OrgIntegrations}#github`}),e.jsx(ye,{from:de.OrgIntegrationsVercel,to:`${C.OrgIntegrations}#vercel`}),e.jsx(Ke,{path:C.OrgIntegrations,component:Mke}),e.jsx(Ke,{component:Mp})]}),e.jsx(wt,{component:Mp})]})})})})]})},Dke=Qb({name:"ui",initialState:{visible:!1,branchId:""},reducers:{}}),Uke=Yb(Dke),Fke=t=>{const s=tR([rR,aR,B0,Uke,O_,oR,Qt,kb],[Cm,ym,_2,Z0,Vn,uu,vA,nR,tl,vi],{renderConfig:t});return t!=null&&t.organizations&&sR(s.dispatch,uu,"getCurrentUserOrganizations",void 0,t.organizations),s};function zke(t,s,n){return pR(t,{path:s,exact:n})!==null}const qke=({children:t})=>{const s=et(),n=il();return e.jsx(hR,{basename:Wa,navigate:s.push,pathname:n.pathname,hash:n.hash,isCurrent:zke,children:t})},Hke=({platforms:t,consoleSettings:s,appVersion:n,psqlConnectHost:r,importAvailableRegions:a,keycloak:o,error:i})=>(lq(),e.jsx(P8,{children:e.jsx(iR,{children:e.jsx(cR,{children:e.jsx(jR,{platforms:t,importAvailableRegions:a,children:e.jsx(vR,{consoleSettings:s,appVersion:n,psqlConnectHost:r,error:i,children:e.jsx(A8,{config:o!==null?o:void 0,children:e.jsx(lR,{setupStore:Fke,children:e.jsx(uD,{children:e.jsxs(T8,{children:[e.jsx(dR,{}),e.jsx(uR,{basename:Wa,children:e.jsxs(qke,{children:[e.jsx(uq,{children:e.jsx(Bke,{})}),e.jsx(O8,{}),e.jsx(hq,{})]})}),e.jsx(g3,{})]})})})})})})})})}));[G,mR].forEach(t=>{t.instance.interceptors.response.use(s=>s,s=>{var n;return Xr(s)&&((n=s.response)==null?void 0:n.status)===401&&setTimeout(zb,1),Promise.reject(s)})});gR(Hke,{analyticsAppName:fR.Console,analyticsPageMapper:aq});export{aI as B,C4 as C,eme as D,lI as E,Px as I,wx as M,dI as P,m3 as S,Sl as a,oI as b,Qc as c,b4 as d,S4 as e,cI as f,r3 as g,_Ie as s,yj as u};
